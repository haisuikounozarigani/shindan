<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ç”Ÿæ´»ã ã‚‰ã—ãªã•è¨ºæ–­ï½œ18å•ã§è¦‹ã‚‹ã€Œæ™‚é–“ãƒ»éƒ¨å±‹ãƒ»ãŠé‡‘ãƒ»ãƒªã‚ºãƒ ã®ã»ã“ã‚ã³ã€</title>
<meta name="description" content="18å•ã§ã€æ™‚é–“ãƒ»éƒ¨å±‹ãƒ»ãŠé‡‘ãƒ»ç”Ÿæ´»ãƒªã‚ºãƒ ãƒ»ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ»è‡ªåˆ†ãƒ¡ãƒ³ãƒ†ã®6æ–¹å‘ã‹ã‚‰ã€ã„ã¾ã®ã€Œç”Ÿæ´»ã ã‚‰ã—ãªã•ãƒã‚¤ãƒ³ãƒˆã€ã¨ã€å°ã•ãæ•´ãˆã‚‹ä¸€æ­©ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã‚»ãƒ«ãƒ•ãƒ†ã‚¹ãƒˆã€‚ã‚«ã‚ªã‚¹æ²¼ãƒ¬ãƒ™ãƒ«ã€œãƒŸãƒ‹ãƒãƒ«ç®¡ç†ãƒã‚¹ã‚¿ãƒ¼ã¾ã§ã€ã‚ãªãŸã®ç¾çŠ¶ã‚’å¯è¦–åŒ–ã—ã¾ã™ã€‚">
<meta name="theme-color" content="#fff7fd">

<!-- OG -->
<meta property="og:type" content="website">
<meta property="og:title" content="ç”Ÿæ´»ã ã‚‰ã—ãªã•è¨ºæ–­">
<meta property="og:description" content="æ™‚é–“ãƒ»éƒ¨å±‹ãƒ»ãŠé‡‘ãƒ»ãƒªã‚ºãƒ â€¦ã©ã“ã‹ã‚‰ã»ã“ã‚ã³ã‚„ã™ã„ã‹ã‚’18å•ã§ãƒã‚§ãƒƒã‚¯ã€‚ã‚«ã‚ªã‚¹å¯„ã‚Šã®ã‚ºãƒœãƒ©å‹¢ã€œãã“ãã“æ•´ã£ã¦ã‚‹ç®¡ç†å‹¢ã¾ã§ã€ã‚ãªãŸã®â€œç”Ÿæ´»ã ã‚‰ã—ãªã•ãƒ¬ãƒ™ãƒ«â€ã‚’è¦‹ã¦ã¿ã‚ˆã†ã€‚">
<meta property="og:url" content="https://haisuikounozarigani.github.io/shindan/sloppy-life-check.html">
<meta property="og:image" content="https://haisuikounozarigani.github.io/shindan/assets/results/sloppy-life-check/t00.webp">

<style>
:root{
  --bg:#fdf7ff;
  --paper:#fff;
  --ink:#201322;
  --muted:#6a5b70;
  --line:#ece3f5;
  --accent:#8c6bff;   /* hot */
  --accent2:#ff8fc7;  /* duo */
}
html,body{
  margin:0;padding:0;
  background:var(--bg);
  color:var(--ink);
  font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans JP","Hiragino Sans","Hiragino Kaku Gothic ProN","Yu Gothic",Meiryo,sans-serif;
}
a{color:#5b2ea8;text-decoration:none}
.wrap{max-width:980px;margin:0 auto;padding:16px}
header.hd{
  background:linear-gradient(160deg,#fff7fd,#f3ecff);
  border-bottom:1px solid var(--line);
}
header.hd .wrap{padding:20px 16px 10px}
.ttl{
  font-weight:800;font-size:1.35rem;letter-spacing:.02em;
  display:flex;gap:8px;align-items:center;flex-wrap:wrap;
}
.sub{color:var(--muted);font-size:.95rem}

/* ãƒ©ãƒ³ã‚¯ãƒãƒƒã‚¸ï¼ˆãƒ˜ãƒƒãƒ€ï¼‰ */
.rank{
  display:inline-flex;
  align-items:center;
  gap:4px;
  padding:.2em .7em;
  border-radius:999px;
  background:#f3e9ff;
  color:#4b266e;
  font-weight:700;
  font-size:.85rem;
}

/* å›ºå®šé€²æ—ãƒãƒ¼ */
.progress-fixed{
  position:sticky;top:0;z-index:20;
  height:8px;background:var(--line)
}
.progress-bar{
  height:100%;border-radius:6px;
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  transition:width .2s ease
}
[role="progressbar"]{width:100%}

/* ãƒ’ãƒ¼ãƒ­ãƒ¼ */
figure.hero{
  margin:12px 0;
  border:1px solid var(--line);
  border-radius:16px;
  overflow:hidden;
  background:#fff;
}
figure.hero img{
  display:block;width:100%;height:auto;
}

/* å…±é€šã‚«ãƒ¼ãƒ‰ */
.paper{
  background:var(--paper);
  border:1px solid var(--line);
  border-radius:16px;
  padding:16px;
  margin:14px 0;
}

/* ãƒ—ãƒ­ãƒ­ãƒ¼ã‚° */
#prologue h2{
  margin-top:0;
  font-size:1.1rem;
}
#prologue p{margin:.4rem 0}
#prologue .note{
  color:var(--muted);
  font-size:.9rem;
}
.start-btn{
  margin-top:12px;
  width:100%;
  padding:12px 16px;
  border-radius:999px;
  border:1px solid var(--accent);
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#fff;
  font-weight:700;
  letter-spacing:.03em;
  cursor:pointer;
  box-shadow:0 4px 10px rgba(0,0,0,.08);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:6px;
}
.start-btn span.emo{font-size:1.2rem}

/* è³ªå•ã‚¨ãƒªã‚¢ */
.qhead{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:8px;
}
.qnum{font-weight:700;color:#4c2b5f}
.qtag{
  font-size:.8rem;
  color:#7a6c86;
  padding:2px 8px;
  border-radius:999px;
  border:1px solid var(--line);
  background:#f9f3ff;
  display:inline-flex;
  align-items:center;
  gap:4px;
}
.qtext{margin:.6rem 0 1rem}
.opts{
  display:grid;
  grid-template-columns:1fr;
  gap:8px;
}
.btn{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:12px 14px;
  border:1px solid var(--line);
  border-radius:12px;
  background:#fff;
  cursor:pointer;
  transition:.12s;
}
.btn[aria-pressed="true"]{
  outline:2px solid var(--accent2);
  background:#fff4fa;
}
.btn:hover{transform:translateY(-1px)}
.btn-label{font-weight:500}
.opt-note{color:#8b7b93;font-size:.9rem}
.ctrls{
  display:flex;
  gap:8px;
  margin-top:12px;
}
.ctrls button{
  padding:10px 14px;
  border-radius:10px;
  border:1px solid var(--line);
  background:#faf5ff;
  cursor:pointer;
}

/* çµæœã‚¨ãƒªã‚¢ */
.result{display:none}
.flex{display:flex;gap:16px;flex-wrap:wrap}
.result .imgbox{
  flex:1 1 280px;
  min-width:260px;
}
.result .imgbox img{
  width:100%;height:auto;
  border-radius:14px;
  border:1px solid var(--line);
  display:block;
}
.result .text{
  flex:2 1 360px;
  min-width:300px;
}
.result-title-main{
  margin:.2rem 0 0;
}
.result-title-sub{
  margin:.1rem 0 .6rem;
  font-size:.9rem;
  color:var(--muted);
}

/* ä»Šæ—¥ã®ä¸€æ‰‹ï¼ˆçµæœã‚³ãƒ¡ãƒ³ãƒˆå†…ã®å¼·èª¿ãƒœãƒƒã‚¯ã‚¹ï¼‰ */
.tip-inline{
  display:block;
  margin:0;                    /* å¤–å´ã®ä½™ç™½ã‚’å®Œå…¨ã«ãªãã™ */
  padding:4px 5px 20px;        /* ä¸Šä¸‹ã‚‚å°‘ãªã‚ã«è©°ã‚ã‚‹ */
  border-radius:8px;
  border:1px dashed var(--accent2);
  background:#fff7fb;
}

.tip-label{
  display:inline-block;
  font-size:.83rem;
  font-weight:700;
  letter-spacing:.03em;
  margin:0em 0 0;        /* ãƒ©ãƒ™ãƒ«ã¨æœ¬æ–‡ã®é–“ã ã‘å°‘ã—ç©ºã‘ã‚‹ */
  color:#5b2a7f;
}

.tip-body{
  display:inline;           /* è¦‹å‡ºã—ã®ç¶šãã«ãã®ã¾ã¾æœ¬æ–‡ãŒæ¥ã‚‹ */
  font-size:.9rem;
  margin:0;
}

/* å› å­ãƒãƒ¼ */
.bars{
  display:grid;
  grid-template-columns:1fr;
  gap:10px;
  margin-top:10px;
}
.bar{
  background:transparent;
  border-radius:10px;
  padding:4px 0 6px;
}
.bar .h{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:2px 10px 4px;
  font-size:.9rem;
}
.bar .h span:first-child{font-weight:600}
.bar .track{
  margin:0 10px 4px;
  height:10px;
  border-radius:999px;
  background:#f3e9ff;
  overflow:hidden;
}
.bar .fill{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  border-radius:inherit;
  transition:width .25s ease-out;
}
.bar-desc{
  padding:0 10px 2px;
  font-size:.8rem;
  color:var(--muted);
}

/* å‰å›å›ç­” */
.prev-list{
  list-style:none;
  padding-left:0;
  margin:.4rem 0 .2rem .9rem;
}
.prev-item{
  display:flex;
  gap:8px;
  align-items:flex-start;
  padding:6px 0;
  border-bottom:1px solid var(--line);
}
.prev-q{
  flex:1;min-width:0;
  display:-webkit-box;
  -webkit-box-orient:vertical;
  -webkit-line-clamp:2;
  overflow:hidden;
  overflow-wrap:anywhere;
}
.prev-a{
  flex:0 0 auto;
  white-space:nowrap;
  border:1px solid var(--line);
  border-radius:999px;
  padding:2px 8px;
  font-size:.9rem;
  background:#faf5ff;
}

.gallery{
  margin-top:2px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
  gap:10px;
}
.gallery figure{
  margin:0;
  border:1px solid var(--line);
  border-radius:12px;
  background:#fff;
  padding:6px;
  text-align:center;
  font-size:.85rem;
  color:var(--muted);
  display:flex;
  flex-direction:column;
  gap:4px;
}
.gallery img{
  width:100%;
  height:auto;
  border-radius:8px;
  display:block;
}

/* ãã®ä»– */
.meta{color:#7a6c86;font-size:.92rem;clear:both;margin-top:.6rem}
.back{
  display:inline-block;
  margin:10px 0 20px;
  padding:10px 14px;
  border-radius:10px;
  border:1px solid var(--line);
  background:#faf5ff;
}

/* âœ…ã ã‘ã®ãƒˆãƒ¼ã‚¹ãƒˆ */
.mini-toast{
  position:fixed;
  left:50%;bottom:24px;
  transform:translateX(-50%) translateY(20px);
  opacity:0;
  background:#4c2b5f;
  color:#fff;
  padding:8px 12px;
  border-radius:999px;
  font-size:1.1rem;
  transition:.25s;
  z-index:40;
}
.mini-toast.show{
  opacity:1;
  transform:translateX(-50%) translateY(0);
}

/* å°ã•ã„ç”»é¢èª¿æ•´ */
@media (max-width:600px){
  header.hd .wrap{padding:16px 12px 8px}
  .paper{padding:14px 12px}
}

/* ç ”ç©¶ãƒ¡ãƒ¢ï¼†æŠ˜ã‚ŠãŸãŸã¿ç³»ã®è¦‹ãŸç›® */
.meta-note{
  margin-top:8px;
  padding:8px 10px;
  border-radius:12px;
  border:1px solid var(--line);
  background:#fdf7ff;
  color:var(--muted);
  font-size:.9rem;
}
.meta-note summary{
  cursor:pointer;
  list-style:none;
  font-weight:600;
  display:flex;
  align-items:center;
  justify-content:space-between;
}
.meta-note[open]{
  background:#fff;
}
.meta-note ul{
  margin:.5rem 0 0 1.1rem;
  padding-left:0;
}
.meta-note ul li + li{
  margin-top:10px;
  padding-top:6px;
  border-top:1px dashed var(--line);
}
.fold-card{
  margin:10px 0 8px;
  padding:8px 10px;
  border-radius:12px;
  border:1px solid var(--line);
  background:#fff;
  color:var(--muted);
  font-size:.9rem;
}
.fold-card summary{
  cursor:pointer;
  list-style:none;
  font-weight:600;
  display:flex;
  align-items:center;
  justify-content:space-between;
}
.fold-card[open]{
  background:#fdf7ff;
  box-shadow:0 3px 8px rgba(0,0,0,.03);
}
.fold-card[open] summary{
  margin-bottom:6px;
}
</style>
</head>

<body data-id="sloppy-life-check">
<header class="hd" role="banner">
  <div class="wrap">
    <div class="ttl">
      ç”Ÿæ´»ã ã‚‰ã—ãªã•è¨ºæ–­
      <span class="rank" aria-label="ç¾åœ¨ã®ç”Ÿæ´»ãƒ©ãƒ³ã‚¯">
        <span>ğŸ§º</span><span>ãƒ©ãƒ³ã‚¯æœªåˆ¤å®š</span>
      </span>
    </div>
    <div class="sub">
      æ™‚é–“ãƒ»éƒ¨å±‹ãƒ»ãŠé‡‘ãƒ»ãƒªã‚ºãƒ â€¦ã©ã“ã‹ã‚‰ã»ã“ã‚ã³ã‚„ã™ã„ã‹ã€18å•ã§ã‚ãªãŸã®ã€Œç”Ÿæ´»ã ã‚‰ã—ãªã•ãƒ¬ãƒ™ãƒ«ã€ã¨å°ã•ãªä¿®æ­£ãƒã‚¤ãƒ³ãƒˆã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚
    </div>
  </div>
</header>

<!-- å›ºå®šé€²æ—ãƒãƒ¼ -->
<div class="progress-fixed" role="progressbar"
     aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
  <div class="progress-bar" style="width:0%"></div>
</div>

<main class="wrap" id="app" role="main" aria-live="polite">
  <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ -->
  <figure class="hero">
    <img src="/shindan/assets/results/sloppy-life-check/t00.webp"
         alt="æ•£ã‚‰ã‹ã£ãŸéƒ¨å±‹ã¨ç¾…é‡ç›¤" loading="lazy">
  </figure>

  <!-- ãƒ—ãƒ­ãƒ­ãƒ¼ã‚° -->
  <section id="prologue" class="paper" aria-label="ãƒ—ãƒ­ãƒ­ãƒ¼ã‚°">
    <h2>ãƒ—ãƒ­ãƒ­ãƒ¼ã‚°ï¼šåºŠã¨é€šçŸ¥ã¨ã€Œã¾ã‚ã„ã£ã‹ã€ãƒœã‚¿ãƒ³</h2>
    <p>æ°—ã¥ã„ãŸã‚‰åºŠãŒã¡ã‚‡ã£ã¨ç‹­ããªã£ã¦ã„ã¦ã€é€šçŸ¥ãƒãƒƒã‚¸ã¯äºŒæ¡ä¸‰æ¡ã€‚é ­ã®ã©ã“ã‹ã§ã€Œãã‚ãã‚ã¾ãšã„ãªâ€¦ã€ã¨æ€ã„ãªãŒã‚‰ã€ä»Šæ—¥ã‚‚ã€Œã¾ã‚ã„ã£ã‹ã€ã‚’æŠ¼ã—ã¦ã—ã¾ã†ã€‚</p>
    <p>ã“ã†ã„ã†ç”Ÿæ´»ã®ã»ã“ã‚ã³ã£ã¦ã€ã€Œè‡ªåˆ†ãŒãƒ€ãƒ¡ã ã‹ã‚‰ã€ã§ã¯ãªãã€ç–²ã‚ŒãŸè„³ãŒé¸ã³ãŒã¡ãªã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã®çµæœã ã£ãŸã‚Šã—ã¾ã™ã€‚ä»•äº‹ã‚‚äººé–“é–¢ä¿‚ã‚‚å„ªå…ˆã—ã¦ãŸã‚‰ã€è‡ªåˆ†ã®ç”Ÿæ´»ãƒ•ã‚©ãƒ«ãƒ€ã ã‘ãƒã‚°ã‚Šã‚„ã™ã„ã®ã¯ã‚€ã—ã‚è‡ªç„¶ã§ã™ã€‚</p>
    <p>ã“ã®è¨ºæ–­ã¯ã€ã‚ãªãŸã®ç”Ÿæ´»ãƒã‚°ã‚’ã‚¸ãƒ£ãƒƒã‚¸ã™ã‚‹ãŸã‚ã§ã¯ãªãã€ã€Œã©ã“ã‹ã‚‰å´©ã‚Œã‚„ã™ã„ã‹ã€ã¨ã€Œã©ã“ãªã‚‰å°ã•ãç›´ã›ãã†ã‹ã€ã‚’ã‚†ã‚‹ãå¯è¦–åŒ–ã™ã‚‹ãŸã‚ã®ãƒ†ã‚¹ãƒˆã§ã™ã€‚</p>
    <p class="note">â€»æ·±åˆ»ãªè¨ºæ–­ã§ã¯ãªãã€ã€Œç”Ÿæ´»ã®ã‚¯ã‚»ã€ã‚’ãƒã‚¿åŠåˆ†ã§çœºã‚ã‚‹ãŸã‚ã®ç°¡æ˜“ãƒ†ã‚¹ãƒˆã§ã™ã€‚</p>
    <button type="button" id="startBtn" class="start-btn" aria-label="è¨ºæ–­ã‚’å§‹ã‚ã‚‹">
      <span class="emo">âœ¨</span><span>ç”Ÿæ´»ãƒã‚°ã‚’ã“ã£ãã‚Šç¢ºèªã™ã‚‹</span>
    </button>
  </section>

  <!-- è³ªå•ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <section id="quiz" class="paper" aria-label="è³ªå•ã‚»ã‚¯ã‚·ãƒ§ãƒ³" style="display:none">
    <div class="qhead">
      <div class="qnum" id="qnum">Q1/18</div>
      <div class="qtag" id="qtag">
        <span>ğŸ§º</span><span>ç”Ÿæ´»ãƒã‚§ãƒƒã‚¯</span>
      </div>
    </div>
    <div class="qtext" id="qtext">â€¦</div>
    <div class="opts" id="opts" role="group" aria-label="å›ç­”ã‚’é¸æŠ"></div>
    <div class="ctrls">
      <button type="button" id="prevBtn">ã‚‚ã©ã‚‹</button>
    </div>
  </section>

  <!-- çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <section id="result" class="paper result" aria-label="çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³">
    <h2 style="margin-top:0">çµæœ</h2>
    <div class="flex">
      <div class="imgbox">
        <img id="resultImg" src="" alt="" loading="lazy">
      </div>
      <div class="text">
        <div class="badge-line">
          <span class="badge-pill" id="gradeBadge">
            <span>ğŸ§º</span><span>ãƒ©ãƒ³ã‚¯æœªåˆ¤å®š</span>
          </span>
          <span class="badge-pill" id="scoreBadge">
            ã‚¹ã‚³ã‚¢ â€” / 100
          </span>
        </div>
        <h3 class="result-title-main" id="resultTitle"></h3>
        <p class="result-title-sub" id="resultSubtitle"></p>
        <div id="resultLines" style="white-space:pre-line;margin:.1rem 0 .05rem"></div>

        <!-- å› å­ãƒãƒ¼ï¼ˆ6æœ¬ï¼‰ -->
        <div class="bars" id="bars"></div>
      </div>
    </div>

    <!-- å‰å›ã®å›ç­”ï¼ˆä¸€è¦§ï¼‰ -->
    <details id="prevBlock" class="fold-card">
      <summary>ğŸ“ å‰å›ã®å›ç­”ï¼ˆä¸€è¦§ï¼‰</summary>
      <ul id="prevList" class="prev-list"></ul>
    </details>

    <!-- 5ãƒ©ãƒ³ã‚¯ã®ç”Ÿæ´»ã‚®ãƒ£ãƒ©ãƒªãƒ¼ -->
    <details id="galleryBlock" class="fold-card">
      <summary>ğŸ  ç”Ÿæ´»ãƒ©ãƒ³ã‚¯ã®ã‚®ãƒ£ãƒ©ãƒªãƒ¼</summary>
      <div class="gallery">
        <figure>
          <img src="/shindan/assets/results/sloppy-life-check/t01.webp"
               alt="è¶³ã®è¸ã¿å ´ãªã„éƒ¨å±‹" loading="lazy">
          <figcaption>ğŸ§¨ t01 ã‚«ã‚ªã‚¹æ²¼ãƒ¬ãƒ™ãƒ«</figcaption>
        </figure>
        <figure>
          <img src="/shindan/assets/results/sloppy-life-check/t02.webp"
               alt="æ•£ã‚‰ã‹ã£ãŸéƒ¨å±‹ã®äºŒäºº" loading="lazy">
          <figcaption>ğŸŒŠ t02 ã‚µãƒã‚¤ãƒãƒ«ç”Ÿæ´»ãƒ¬ãƒ™ãƒ«</figcaption>
        </figure>
        <figure>
          <img src="/shindan/assets/results/sloppy-life-check/t03.webp"
               alt="æ™®é€šã®ãƒ¯ãƒ³ãƒ«ãƒ¼ãƒ ã®äºŒäºº" loading="lazy">
          <figcaption>ğŸŒ¤ t03 ã¨ã‚Šã‚ãˆãšç”Ÿæ´»ãƒ¬ãƒ™ãƒ«</figcaption>
        </figure>
        <figure>
          <img src="/shindan/assets/results/sloppy-life-check/t04.webp"
               alt="ç‰‡ã¥ã„ãŸãƒªãƒ“ãƒ³ã‚°ã®äºŒäºº" loading="lazy">
          <figcaption>ğŸ“š t04 ãã“ãã“æ•´ãˆä¸Šæ‰‹ãƒ¬ãƒ™ãƒ«</figcaption>
        </figure>
        <figure>
          <img src="/shindan/assets/results/sloppy-life-check/t05.webp"
               alt="æ•´ã£ãŸãƒŸãƒ‹ãƒãƒ«éƒ¨å±‹ã®äºŒäºº" loading="lazy">
          <figcaption>ğŸ§Š t05 ãƒŸãƒ‹ãƒãƒ«ç®¡ç†ãƒã‚¹ã‚¿ãƒ¼</figcaption>
        </figure>
      </div>
    </details>

    <!-- ç ”ç©¶ãƒ¡ãƒ¢ï¼ˆæŠ˜ã‚ŠãŸãŸã¿ï¼‰ -->
    <details class="meta-note" id="researchNotes">
      <summary>ğŸ“š ç”Ÿæ´»ã ã‚‰ã—ãªã•ã®ç ”ç©¶ãƒ¡ãƒ¢</summary>
      <ul>
        <li><strong>æ™‚é–“ã‚†ã‚‹ã‚†ã‚‹</strong>ï¼šç· åˆ‡ã‚®ãƒªã‚®ãƒªè¡Œå‹•ã¯ã€çŸ­æœŸçš„ãªä¸å¿«ï¼ˆé¢å€’ãã•ã•ï¼‰ã‚’é¿ã‘ã¦é•·æœŸçš„ã‚³ã‚¹ãƒˆã‚’å¢—ã‚„ã™ã€Œæ™‚é–“å‰²å¼•ã€ã®ã‚¯ã‚»ã¨é–¢é€£ã™ã‚‹ã¨è¨€ã‚ã‚Œã¾ã™ã€‚</li>
        <li><strong>ç‰‡ã¥ã‘æ”¾ç½®</strong>ï¼šè¦–ç•Œã«ãƒ¢ãƒãŒå¤šã„ç’°å¢ƒã»ã©ã€é›†ä¸­ã—ã¥ã‚‰ãã‚¹ãƒˆãƒ¬ã‚¹ãƒ›ãƒ«ãƒ¢ãƒ³ã‚‚ä¸ŠãŒã‚Šã‚„ã™ã„ã¨ã„ã†å ±å‘ŠãŒã‚ã‚Šã¾ã™ã€‚ã€Œè¦‹ãˆãªã„å ´æ‰€ã«ã—ã¾ã†ã€ã ã‘ã§ã‚‚è² è·ã¯ã‹ãªã‚Šå¤‰ã‚ã‚Šã¾ã™ã€‚</li>
        <li><strong>ç”Ÿæ´»ãƒªã‚ºãƒ è¿·å­</strong>ï¼šç¡çœ ã‚„é£Ÿäº‹ã®æ™‚é–“ãŒãƒãƒ©ãƒãƒ©ã ã¨ã€ä½“å†…æ™‚è¨ˆãŒä¹±ã‚Œã¦æ—¥ä¸­ã®é›†ä¸­ãƒ»æ°—åˆ†ãƒ»é£Ÿæ¬²ã«ã‚‚ã˜ã‚ã˜ã‚å½±éŸ¿ãŒå‡ºã‚„ã™ã„ã¨è¨€ã‚ã‚Œã¾ã™ã€‚</li>
        <li><strong>ãŠé‡‘ã–ã‚‹ç›®</strong>ï¼šã‚³ãƒ³ãƒ“ãƒ‹ãªã©ã®å°ã•ãªè¡å‹•è²·ã„ã¯ã€ã€Œ1å›ã‚ãŸã‚Šã¯å°ã•ã„ã‘ã‚Œã©åˆè¨ˆã™ã‚‹ã¨ã‹ãªã‚Šå¤§ãã„å‡ºè²»ã€ã«ãªã‚Šã‚„ã™ãã€è‡ªå·±åˆ¶å¾¡ç ”ç©¶ã§ã‚‚å®šç•ªã®è½ã¨ã—ç©´ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚</li>
        <li><strong>ãƒ‡ã‚¸ã‚¿ãƒ«ã”ã¡ã‚ƒã”ã¡ã‚ƒ</strong>ï¼šé€šçŸ¥ãƒ»ã‚¿ãƒ–ãƒ»ã‚¢ãƒ—ãƒªã®å¤šã•ã¯ã€ãƒãƒ«ãƒã‚¿ã‚¹ã‚¯ã‚„æ³¨æ„æ•£æ¼«ã¨çµã³ã¤ãã‚„ã™ãã€ã€Œã‚„ã‚‹ã¹ãã“ã¨ã«æˆ»ã‚‹ã¾ã§ã®åˆ‡ã‚Šæ›¿ãˆã‚³ã‚¹ãƒˆã€ã‚’å¢—ã‚„ã—ã¾ã™ã€‚</li>
        <li><strong>è‡ªåˆ†ãƒ¡ãƒ³ãƒ†å¾Œå›ã—</strong>ï¼šèº«ãªã‚Šã‚„å¥åº·ã®å¾Œå›ã—ã¯ã€ã€Œä»Šã¯å¤§ä¸ˆå¤«ã ã‹ã‚‰ã€ã¨å…ˆé€ã‚Šã•ã‚ŒãŒã¡ã§ã™ãŒã€é•·æœŸçš„ã«ã¯è‡ªå·±è©•ä¾¡ã‚„ä½“èª¿ã®åœŸå°ã«ã˜ã‚ã˜ã‚éŸ¿ãã¾ã™ã€‚</li>
      </ul>
    </details>

    <!-- å…è²¬ -->
    <p class="meta">â€»æœ¬ãƒšãƒ¼ã‚¸ã¯å¨¯æ¥½ï¼‹è‡ªå·±ç†è§£ã®è£œåŠ©ã‚’ç›®çš„ã¨ã—ãŸç°¡æ˜“ãƒ†ã‚¹ãƒˆã§ã™ã€‚ä½“èª¿ã‚„ä¸èª¿ãŒç¶šãå ´åˆã¯å°‚é–€æ©Ÿé–¢ã¸ã”ç›¸è«‡ãã ã•ã„ã€‚</p>

    <button type="button" class="back" id="restartBtn" aria-label="æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™">æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™</button>
    <a class="back" href="https://haisuikounozarigani.github.io/shindan/">è¨ºæ–­ä¸€è¦§ã«æˆ»ã‚‹</a>
  </section>
</main>

<!-- âœ…ã ã‘ã®ãƒˆãƒ¼ã‚¹ãƒˆ -->
<div class="mini-toast" id="toast" role="status" aria-live="polite">âœ…</div>

<script>
/* ===== å›ºå®šé€²æ—ãƒãƒ¼ ===== */
function updateProgress(p){
  var bar = document.querySelector('.progress-bar');
  var wrap = document.querySelector('.progress-fixed');
  var val = Math.max(0,Math.min(100,p));
  if(bar) bar.style.width = val + '%';
  if(wrap) wrap.setAttribute('aria-valuenow', String(val));
}

/* ===== å®šç¾© ===== */
const SLUG = 'sloppy-life-check';
const LS_ANS = `shindan:${SLUG}:answers`;
const LS_IDX = `shindan:${SLUG}:index`;
const LS_DONE = `shindan:${SLUG}:done`;
const LS_LASTANS = `shindan:${SLUG}:lastAnswers`;

/* å› å­ã‚­ãƒ¼ï¼ˆ6å› å­ï¼‰ */
const FACTS = ['TIME','ROOM','RHYTHM','MONEY','DIGITAL','SELFCARE'];

/* å› å­ã”ã¨ã®ãƒ©ãƒ™ãƒ«ï¼†èª¬æ˜ï¼ˆã ã‚‰ã—ãªã•å´ï¼‰ */
const FACT_LABEL = {
  TIME:'æ™‚é–“ã‚†ã‚‹ã‚†ã‚‹',
  ROOM:'ç‰‡ã¥ã‘æ”¾ç½®',
  RHYTHM:'ç”Ÿæ´»ãƒªã‚ºãƒ è¿·å­',
  MONEY:'ãŠé‡‘ã–ã‚‹ç›®',
  DIGITAL:'ãƒ‡ã‚¸ã‚¿ãƒ«ã”ã¡ã‚ƒã”ã¡ã‚ƒ',
  SELFCARE:'è‡ªåˆ†ãƒ¡ãƒ³ãƒ†å¾Œå›ã—'
};
const FACT_DESC = {
  TIME:'ç´„æŸãƒ»ç· åˆ‡ãƒ»ã€Œä»Šã‚„ã‚‹ã€ã®ã‚¹ã‚¤ãƒƒãƒãŒã©ã‚Œãã‚‰ã„ã‚†ã‚‹ã¿ã‚„ã™ã„ã‹',
  ROOM:'åºŠãƒ»æœºãƒ»æ´—ã„ç‰©ãªã©ãŒã€Œä¸€æ™‚ç½®ãã‚¾ãƒ¼ãƒ³ã€ã§æ¸‹æ»ã—ã‚„ã™ã•',
  RHYTHM:'ç¡çœ ãƒ»é£Ÿäº‹ãƒ»æ´»å‹•æ™‚é–“ãŒã©ã‚Œãã‚‰ã„ä¸è¦å‰‡ã«ãªã‚Šã‚„ã™ã„ã‹',
  MONEY:'ã¡ã‚‡ã„è²·ã„ãƒ»æ”¯æ‰•ã„å¾Œå›ã—ãªã©ã€ãŠé‡‘ãŒã“ã¼ã‚Œã‚„ã™ã„åº¦åˆã„',
  DIGITAL:'é€šçŸ¥ãƒ»ã‚¿ãƒ–ãƒ»ã‚¢ãƒ—ãƒªãŒã”ã¡ã‚ƒã¤ã„ã¦é›†ä¸­ã‚’å‰Šã‚Šã‚„ã™ã•',
  SELFCARE:'å¥åº·ãƒ»èº«ãªã‚Šãƒ»æ´—æ¿¯ãªã©è‡ªåˆ†ãƒ¡ãƒ³ãƒ†ã‚’å¾Œã‚å€’ã—ã«ã—ã‚„ã™ã•'
};

/* å›ç­”ãƒ©ãƒ™ãƒ« */
const LABELS = ['ãœã‚“ãœã‚“','ã‚ã¾ã‚Š','ã©ã¡ã‚‰ã¨ã‚‚','ã‚ã‚Šã¨','ã¨ã¦ã‚‚'];

/* è¨­å• 18å•ï¼ˆ6å› å­Ã—å„3ï¼‰ */
/* å›ç­”ãŒå¤§ãã„ã»ã©ã€Œã ã‚‰ã—ãªã•ã€ãŒé«˜ããªã‚‹è¨­è¨ˆ */
const QUESTIONS = [
  // æ™‚é–“ã‚†ã‚‹ã‚†ã‚‹
  {t:'ç´„æŸã‚„å¾…ã¡åˆã‚ã›ã®æ™‚é–“ã«ã€ã€Œã‚®ãƒªã‚®ãƒªã€œæ•°åˆ†é…ã‚Œã€ã«ãªã‚‹ã“ã¨ãŒå¤šã„ã€‚', key:'TIME'},
  {t:'å°ã•ãªç”¨äº‹ã»ã©ã€Œã‚ã¨ã§ã‚„ã‚ã†ã€ã¨å¾Œå›ã—ã«ã—ã¦ã€æ°—ã¥ã„ãŸã‚‰ãŸã¾ã£ã¦ã„ã‚‹ã€‚', key:'TIME'},
  {t:'ã€Œ5åˆ†ã ã‘ã‚¹ãƒãƒ›ã‚’è¦‹ã‚‹ã€ãŒãã£ã‹ã‘ã§ã€äºˆå®šãŒãšã‚ŒãŸã“ã¨ãŒã‚ˆãã‚ã‚‹ã€‚', key:'TIME'},

  // ç‰‡ã¥ã‘æ”¾ç½®
  {t:'åºŠã‚„æ¤…å­ã®ä¸Šã«æœã®ã€Œä¸€æ™‚ç½®ãã‚¾ãƒ¼ãƒ³ã€ãŒã§ãã¦ã€ãã®ã¾ã¾å®šä½ç½®ã«ãªã‚ŠãŒã¡ã ã€‚', key:'ROOM'},
  {t:'æ´—ã„ç‰©ã‚„ã‚´ãƒŸå‡ºã—ã‚’ã€Œæ˜æ—¥ã®è‡ªåˆ†ã«ä»»ã›ã‚‹ã€ã“ã¨ãŒå¤šã„ã€‚', key:'ROOM'},
  {t:'ç‰‡ã¥ã‘ã‚’å§‹ã‚ã‚ˆã†ã¨ã—ã¦ã€åˆ¥ã®ã“ã¨ã‚’ã—ã¦ã„ã‚‹ã†ã¡ã«æ™‚é–“ã ã‘éãã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚', key:'ROOM'},

  // ç”Ÿæ´»ãƒªã‚ºãƒ è¿·å­
  {t:'å¯ã‚‹æ™‚é–“ãŒæ—¥ã«ã‚ˆã£ã¦2æ™‚é–“ä»¥ä¸Šã‚ºãƒ¬ã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚‹ã€‚', key:'RHYTHM'},
  {t:'ã€Œæ˜æ—¥ã¤ã‚‰ããªã‚‹ã€ã¨åˆ†ã‹ã£ã¦ã„ã¦ã‚‚ã€ã¤ã„å¤œæ›´ã‹ã—ã‚’ç¹°ã‚Šè¿”ã—ã¦ã—ã¾ã†ã€‚', key:'RHYTHM'},
  {t:'ç©ºè…¹ã§ãªãã¦ã‚‚ã€ãªã‚“ã¨ãªãã¤ã¾ã¿é£Ÿã„ã‚’ç¶šã‘ã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚‹ã€‚', key:'RHYTHM'},

  // ãŠé‡‘ã–ã‚‹ç›®
  {t:'ã‚³ãƒ³ãƒ“ãƒ‹ã‚„ãƒãƒƒãƒˆã§ã€äºˆå®šã—ã¦ã„ãªã‹ã£ãŸã€Œã¡ã‚‡ã„è²·ã„ã€ã‚’ã‚ˆãã—ã¦ã—ã¾ã†ã€‚', key:'MONEY'},
  {t:'å®¶è¨ˆç°¿ã‚„æ˜ç´°ãƒã‚§ãƒƒã‚¯ã‚’å§‹ã‚ã¦ã‚‚ã€æ•°æ—¥ã€œæ•°é€±é–“ã§æ­¢ã¾ã‚ŠãŒã¡ã ã€‚', key:'MONEY'},
  {t:'æ”¯æ‰•ã„æœŸæ—¥ã‚®ãƒªã‚®ãƒªã¾ã§æ‰‹ã‚’ã¤ã‘ãªã„ã“ã¨ãŒã‚ã‚‹ã€‚', key:'MONEY'},

  // ãƒ‡ã‚¸ã‚¿ãƒ«ã”ã¡ã‚ƒã”ã¡ã‚ƒ
  {t:'ã‚¹ãƒãƒ›ã®é€šçŸ¥ãƒãƒƒã‚¸ãŒ2æ¡ã€œ3æ¡ã®ã¾ã¾æ”¾ç½®ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ã€‚', key:'DIGITAL'},
  {t:'ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚¿ãƒ–ã‚’10å€‹ä»¥ä¸Šé–‹ãã£ã±ãªã—ã«ã—ã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ã€‚', key:'DIGITAL'},
  {t:'ä½¿ã£ã¦ã„ãªã„ã‚¢ãƒ—ãƒªã‚„ã‚¹ã‚¯ã‚·ãƒ§ãŒãƒ›ãƒ¼ãƒ ç”»é¢ã‚’åŸ‹ã‚ã¦ã„ã‚‹ã€‚', key:'DIGITAL'},

  // è‡ªåˆ†ãƒ¡ãƒ³ãƒ†å¾Œå›ã—
  {t:'ã€Œé«ªãƒ»æœãƒ»çˆªã€ãªã©èº«ãªã‚Šã®ã‚±ã‚¢ã‚’ã€ã¤ã„å¾Œå›ã—ã«ã—ã¦ã—ã¾ã†ã€‚', key:'SELFCARE'},
  {t:'å¥åº·è¨ºæ–­ã‚„ç—…é™¢ã®äºˆç´„ã‚’ã€æ°—ã«ã¯ã—ã¦ã„ã‚‹ã®ã«å…ˆå»¶ã°ã—ã—ã¦ã—ã¾ã†ã€‚', key:'SELFCARE'},
  {t:'æ´—æ¿¯ç‰©ã‚’ç•³ã¾ãšã€ã€Œå±±ã®ã¾ã¾ã€ã‹ã‚‰ç€ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚', key:'SELFCARE'}
];

/* ãƒ©ãƒ³ã‚¯æƒ…å ±ï¼šç·åˆã‚¹ã‚³ã‚¢0â€“100ï¼ˆæ•°å­—ãŒé«˜ã„ã»ã©æ•´ã„æ°—å‘³ï¼‰ã§5æ®µéšï¼ˆt01ã€œt05ï¼‰ */
const GRADE_DEF = [
  {
    id:'G1',
    min:0,max:39,
    emo:'ğŸ§¨',
    label:'ã‚«ã‚ªã‚¹æ²¼ãƒ¬ãƒ™ãƒ«',
    img:'t01.webp',
    alt:'è¶³ã®è¸ã¿å ´ãªã„éƒ¨å±‹',
    title:'åºŠãŒè¨˜æ†¶åª’ä½“ã«ãªã‚Šã¤ã¤ã‚ã‚‹äºº',
    sub:'åºŠã¨æœºãŒã€Œã¨ã‚Šã‚ãˆãšç½®ãå ´ã€ã«ãªã£ã¦ã„ã¦ã€æœã¨ç´™è¢‹ã®åœ°å±¤ãŒã§ãã‚„ã™ã„ã‚«ã‚ªã‚¹æ²¼ã‚¿ã‚¤ãƒ—ã€‚ç‰‡ã¥ã‘ãŸã„æ°—æŒã¡ã¯ã‚ã‚‹ã®ã«ã€ã„ã–å§‹ã‚ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚¹ã‚¿ãƒŸãƒŠãŒã‚¼ãƒ­ã«ãªã‚‹ã‚ã‚‹ã‚ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚',
    tip:'ä»Šæ—¥ã®ä¸€æ‰‹ï¼šéƒ¨å±‹å…¨ä½“ã§ã¯ãªãã€åºŠä¸€ãƒã‚¹ã ã‘ã€æœºã®å³åŠåˆ†ã ã‘ãªã©ã€ç¬‘ãˆã‚‹ãã‚‰ã„å°ã•ã„ã‚¨ãƒªã‚¢ã ã‘ç‰‡ã¥ã‘ã‚‹ã€‚çµ‚ã‚ã‚‰ãªãã¦ã‚ˆãã¦ã€Œã“ã“ã ã‘ã‚¯ãƒªã‚¢ã€ã§åˆæ ¼ã«ã™ã‚‹ã€‚'
  },
  {
    id:'G2',
    min:40,max:59,
    emo:'ğŸŒŠ',
    label:'ã‚µãƒã‚¤ãƒãƒ«ç”Ÿæ´»ãƒ¬ãƒ™ãƒ«',
    img:'t02.webp',
    alt:'æ•£ã‚‰ã‹ã£ãŸéƒ¨å±‹ã®äºŒäºº',
    title:'ã‚®ãƒªã‚®ãƒªã§ã„ã¤ã‚‚ç”Ÿãã¦ã„ãŸã„äºº',
    sub:'æ´—æ¿¯ã¯ã‚®ãƒªã€ã‚·ãƒ³ã‚¯ã«ã¯ã‚³ãƒƒãƒ—å¸¸é§ã€é€šçŸ¥ã¯äºŒæ¡â€¦ã§ã‚‚ãªãœã‹è‡´å‘½å‚·ã«ã¯ãªã‚‰ãªã„ã‚µãƒã‚¤ãƒãƒ«ç”Ÿæ´»ã‚¿ã‚¤ãƒ—ã€‚æœ¬æ°—ã‚’å‡ºã›ã°æ•´ã†ã®ã¯åˆ†ã‹ã£ã¦ã„ã‚‹ã®ã§ã€ã¤ã„ã€Œæ˜æ—¥ã®è‡ªåˆ†ã€ã«ä¸¸æŠ•ã’ã—ãŒã¡ãªäººã§ã™ã€‚',
    tip:'ä»Šæ—¥ã®ä¸€æ‰‹ï¼šæœªæ¥ã®è‡ªåˆ†ã«ã ã‘ã¯å„ªã—ã„ã‚¾ãƒ¼ãƒ³ã‚’ä¸€ã¤æ±ºã‚ã‚‹ã€‚ãƒ™ãƒƒãƒ‰å‘¨ã‚Šã ã‘æ¯æ—¥ãƒªã‚»ãƒƒãƒˆã€ã‚·ãƒ³ã‚¯ã ã‘å¯ã‚‹å‰ã«ç©ºã«ã™ã‚‹ãªã©ã€å ´æ‰€é™å®šã§ã€Œã“ã“ã ã‘ã¯å®ˆã‚‹ã€ã‚’ä½œã‚‹ã€‚'
  },
  {
    id:'G3',
    min:60,max:74,
    emo:'ğŸŒ¤',
    label:'ã¨ã‚Šã‚ãˆãšç”Ÿæ´»ãƒ¬ãƒ™ãƒ«',
    img:'t03.webp',
    alt:'æ™®é€šã®ãƒ¯ãƒ³ãƒ«ãƒ¼ãƒ ã®äºŒäºº',
    title:'äººã¯å‘¼ã¹ã‚‹ã‘ã©ã€é–‹ã‘ã¦ã»ã—ããªã„æ‰‰ãŒã‚ã‚‹äºº',
    sub:'ãƒªãƒ“ãƒ³ã‚°ã¯ãã‚Œãªã‚Šã«æ•´ã£ã¦ã„ã¦ã€äººã¯æ™®é€šã«å‘¼ã¹ã‚‹ã€‚ã‘ã‚Œã©ã‚¯ãƒ­ãƒ¼ã‚¼ãƒƒãƒˆã‚„ãƒ‡ã‚¹ã‚¯ã®å¼•ãå‡ºã—ã ã‘ã¯çµ¶å¯¾ã«é–‹ã‘ã¦ã»ã—ããªã„è¡¨é¢ãã‚Œã„ç³»ã‚¿ã‚¤ãƒ—ã€‚å¤–ã‹ã‚‰ã¯ã¡ã‚ƒã‚“ã¨ã—ã¦è¦‹ãˆã‚‹ã¶ã‚“ã€è‡ªåˆ†ã ã‘ã‚«ã‚ªã‚¹ã‚’çŸ¥ã£ã¦ã„ã¦ãƒ¢ãƒ¤ãƒ¢ãƒ¤ã—ã‚„ã™ã„ã§ã™ã€‚',
    tip:'ä»Šæ—¥ã®ä¸€æ‰‹ï¼šè¦‹ã›ãŸããªã„ã‚¾ãƒ¼ãƒ³ã‚’ä¸€ã‹æ‰€ã ã‘é¸ã³ã€äº”åˆ†ã‚¿ã‚¤ãƒãƒ¼ã§è§¦ã‚‹ã€‚ãã‚Œã„ã«ã—åˆ‡ã‚‰ãªãã¦ã‚ˆãã¦ã€Œã“ã“ã¾ã§ã¯å‹•ã„ãŸã€ã¨ã„ã†ãƒ­ã‚°ã‚’æ®‹ã›ã‚Œã°ã‚¯ãƒªã‚¢ã«ã™ã‚‹ã€‚'
  },
  {
    id:'G4',
    min:75,max:89,
    emo:'ğŸ“š',
    label:'ãã“ãã“æ•´ãˆä¸Šæ‰‹ãƒ¬ãƒ™ãƒ«',
    img:'t04.webp',
    alt:'ç‰‡ã¥ã„ãŸãƒªãƒ“ãƒ³ã‚°ã®äºŒäºº',
    title:'ç”Ÿæ´»ã‚’ã ã„ãŸã„ç®¡ç†ã§ãã¦ã„ã‚‹äºº',
    sub:'äºˆå®šã¨æ´—æ¿¯ã‚µã‚¤ã‚¯ãƒ«ã¨å†·è”µåº«ã®ä¸­èº«ãŒãªã‚“ã¨ãªãé ­ã«å…¥ã£ã¦ã„ã‚‹ç¾å®Ÿæ´¾ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚¿ã‚¤ãƒ—ã€‚å´©ã‚Œã¦ã‚‚çŸ­æœŸé–“ã§å¾©æ—§ã§ãã‚‹ä¸€æ–¹ã§ã€å°‘ã—ä¹±ã‚ŒãŸã ã‘ã§ã‚‚ã€Œå‰ã®è‡ªåˆ†ãªã‚‰â€¦ã€ã¨è‡ªåˆ†ã«ãƒ€ãƒ¡å‡ºã—ã—ãŒã¡ãªçœŸé¢ç›®ã•ã‚‚ã‚ã‚Šã¾ã™ã€‚',
    tip:'ä»Šæ—¥ã®ä¸€æ‰‹ï¼šã“ã“ã¯å…«åç‚¹ã§ã‚ˆã—ã¨ã™ã‚‹ã‚¨ãƒªã‚¢ã‚’ä¸€ã¤ä½œã‚‹ã€‚æ´—æ¿¯ç‰©ã¯ãƒãƒ³ã‚¬ãƒ¼åç´ã§ã‚ˆã„ã€æ›¸é¡ã¯æœˆä¸€ã§ã–ã£ãã‚Šè¦‹ã‚‹ã ã‘ãªã©ã€ã‚ãˆã¦ã‚†ã‚‹ã‚ã‚‹å ´æ‰€ã‚’æ±ºã‚ã¦è‚©ã®åŠ›ã‚’æŠœãã€‚'
  },
  {
    id:'G5',
    min:90,max:100,
    emo:'ğŸ§Š',
    label:'ãƒŸãƒ‹ãƒãƒ«ç®¡ç†ãƒã‚¹ã‚¿ãƒ¼',
    img:'t05.webp',
    alt:'æ•´ã£ãŸãƒŸãƒ‹ãƒãƒ«éƒ¨å±‹ã®äºŒäºº',
    title:'ç’°å¢ƒãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ãŒè¶£å‘³ãƒ¬ãƒ™ãƒ«ã®äºº',
    sub:'ãƒ¢ãƒã‚‚äºˆå®šã‚‚ã‹ãªã‚Šçµã‚Šè¾¼ã‚ã‚‹ãƒŸãƒ‹ãƒãƒ«ç®¡ç†ã‚¿ã‚¤ãƒ—ã€‚åˆ¤æ–­å›æ•°ã‚’æ¸›ã‚‰ã—ã¦é›†ä¸­ã—ãŸã„ã“ã¨ã«ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å›ã›ã‚‹ä¸€æ–¹ã§ã€ä»–äººã®ç”Ÿæ´»ã®ã‚†ã‚‹ã•ã«ã‚¤ãƒ©ãƒƒã¨ã—ã‚„ã™ãã€è‡ªåˆ†ãŒã‚„ã£ãŸæ–¹ãŒæ—©ã„æ²¼ã«è½ã¡ãŒã¡ãªäººã§ã‚‚ã‚ã‚Šã¾ã™ã€‚',
    tip:'ä»Šæ—¥ã®ä¸€æ‰‹ï¼šè‡ªåˆ†ã®ãƒ«ãƒ¼ãƒ«ãŒé€šã‚‹ãƒ†ãƒªãƒˆãƒªãƒ¼ã‚’ä¸€ã¤ã ã‘æ±ºã‚ã€ãã‚Œä»¥å¤–ã¯ã€Œã¾ã‚äººãã‚Œãã‚Œã€ã¨æµã™ç·´ç¿’ã‚’ã™ã‚‹ã€‚å®ˆã‚‹ã®ã¯å®Œç’§ãªéƒ¨å±‹ã§ã¯ãªãã€è‡ªåˆ†ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã ã¨è€ƒãˆã¦ã¿ã‚‹ã€‚'
  }
];

/* ã‚¹ã‚³ã‚¢å¸¯ã‹ã‚‰ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚’å–å¾—ï¼ˆç·åˆã¯æ•°å­—ãŒé«˜ã„ã»ã©æ•´ã„æ°—å‘³ï¼‰ */
function gradeFromScore(pct){
  for(const g of GRADE_DEF){
    if(pct >= g.min && pct <= g.max) return g;
  }
  return GRADE_DEF[2]; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä¸­é–“
}

/* ===== çŠ¶æ…‹ ===== */
let idx = 0;
let answers = new Array(QUESTIONS.length).fill(null);

/* ===== è¦ç´ å–å¾— ===== */
const $qnum = document.getElementById('qnum');
const $qtag = document.getElementById('qtag');
const $qtext = document.getElementById('qtext');
const $opts = document.getElementById('opts');
const $prev = document.getElementById('prevBtn');
const $quiz = document.getElementById('quiz');
const $result = document.getElementById('result');
const $resultImg = document.getElementById('resultImg');
const $resultTitle = document.getElementById('resultTitle');
const $resultSubtitle = document.getElementById('resultSubtitle');
const $resultLines = document.getElementById('resultLines');
const $bars = document.getElementById('bars');
const $restart = document.getElementById('restartBtn');
const $toast = document.getElementById('toast');
const $prologue = document.getElementById('prologue');
const $startBtn = document.getElementById('startBtn');
const $rankBadge = document.querySelector('.rank');
const $gradeBadge = document.getElementById('gradeBadge');
const $scoreBadge = document.getElementById('scoreBadge');

/* ===== åˆæœŸè¡¨ç¤ºï¼šå¾©å…ƒ or ãƒ—ãƒ­ãƒ­ãƒ¼ã‚° ===== */
(function init(){
  updateProgress(0);
  let savedAns = null;
  let savedIdx = 0;
  try{
    savedAns = JSON.parse(localStorage.getItem(LS_ANS) || 'null');
    savedIdx = JSON.parse(localStorage.getItem(LS_IDX) || '0');
  }catch(_){}
  const validArray = Array.isArray(savedAns) && savedAns.length === QUESTIONS.length;
  const hasAny = validArray && savedAns.some(v => v !== null);
  const allDone = validArray && savedAns.every(v => v !== null);

  if(allDone){
    answers = savedAns;
    idx = QUESTIONS.length - 1;
    renderQuestion(); // å†…éƒ¨çŠ¶æ…‹ã ã‘
    enterResultMode();
    showResult();
    return;
  }
  if(hasAny){
    answers = savedAns;
    idx = Math.min(Math.max(0, +savedIdx || 0), QUESTIONS.length-1);
    renderQuestion();
    enterQuizMode();
    return;
  }
  // å®Œå…¨æ–°è¦
  enterPrologueMode();
})();

/* ===== è¡¨ç¤ºåˆ‡æ›¿ ===== */
function enterPrologueMode(){
  if($prologue) $prologue.style.display = 'block';
  if($quiz) $quiz.style.display = 'none';
  if($result) $result.style.display = 'none';
  if($rankBadge){
    $rankBadge.innerHTML = '<span>ğŸ§º</span><span>ãƒ©ãƒ³ã‚¯æœªåˆ¤å®š</span>';
  }
  updateProgress(0);
}
function enterQuizMode(){
  if($prologue) $prologue.style.display = 'none';
  if($quiz) $quiz.style.display = 'block';
  if($result) $result.style.display = 'none';
}
function enterResultMode(){
  if($prologue) $prologue.style.display = 'none';
  if($quiz) $quiz.style.display = 'none';
  if($result) $result.style.display = 'block';
}

/* ===== è³ªå•æç”» ===== */
function renderQuestion(){
  const q = QUESTIONS[idx];
  $qnum.textContent = `Q${idx+1}/${QUESTIONS.length}`;
  $qtext.textContent = q.t;

  // ã‚¿ã‚°ã¯å› å­ãŒãƒãƒ¬ãªã„ã‚ˆã†ã«å…±é€šãƒ©ãƒ™ãƒ«ã«å›ºå®š
  if($qtag){
    $qtag.innerHTML = `<span>ğŸ§º</span><span>ç”Ÿæ´»ãƒã‚§ãƒƒã‚¯</span>`;
  }

  // é¸æŠè‚¢
  $opts.innerHTML = '';
  LABELS.forEach((lab,i)=>{
    const btn = document.createElement('button');
    btn.type = 'button';
    btn.className = 'btn';
    btn.setAttribute('aria-pressed', answers[idx]===i ? 'true':'false');
    btn.innerHTML =
      `<span class="btn-label">${lab}</span><span class="opt-note">${descFor(i)}</span>`;
    btn.addEventListener('click',()=> selectAnswer(i));
    $opts.appendChild(btn);
  });

  // ã€Œã‚‚ã©ã‚‹ã€ãƒœã‚¿ãƒ³
  $prev.disabled = (idx===0);

  // é€²æ—ãƒãƒ¼
  const done = answers.filter(v=>v!==null).length;
  updateProgress(Math.round(done/QUESTIONS.length*100));

  // ãƒ˜ãƒƒãƒ€ã®ãƒ©ãƒ³ã‚¯ã¯è¨­å•ä¸­ã¯å¸¸ã«ã€Œæœªåˆ¤å®šã€
  if($rankBadge){
    $rankBadge.innerHTML = '<span>ğŸ§º</span><span>ãƒ©ãƒ³ã‚¯æœªåˆ¤å®š</span>';
  }
}

function descFor(i){
  return ['ã»ã¨ã‚“ã©ãªã„','ã‚ã¾ã‚Šãªã„','åŠã€…ãã‚‰ã„','ã‘ã£ã“ã†ã‚ã‚‹','ã¨ã¦ã‚‚ã‚ˆãã‚ã‚‹'][i] || '';
}

/* ===== å›ç­”å‡¦ç† ===== */
function selectAnswer(v){
  answers[idx] = v; // 0â€“4
  persist();
  markPressed(v);
  showToast(); // âœ…ã ã‘
  setTimeout(()=>{
    if(idx < QUESTIONS.length-1){
      idx++;
      renderQuestion();
    }else{
      enterResultMode();
      showResult();
    }
  },140);
}
function markPressed(v){
  [...$opts.children].forEach((el,i)=>{
    el.setAttribute('aria-pressed', i===v ? 'true' : 'false');
  });
}
$prev.addEventListener('click', ()=>{
  if(idx>0){
    idx--;
    persist();
    renderQuestion();
  }
});

/* ãƒ—ãƒ­ãƒ­ãƒ¼ã‚° â†’ ã‚¹ã‚¿ãƒ¼ãƒˆ */
$startBtn.addEventListener('click', ()=>{
  if(!answers.some(v=>v!==null)){
    idx = 0;
    renderQuestion();
  }
  enterQuizMode();
  window.scrollTo({top:0,behavior:'smooth'});
});

/* ===== ä¿å­˜ ===== */
function persist(){
  try{
    localStorage.setItem(LS_ANS, JSON.stringify(answers));
    localStorage.setItem(LS_IDX, JSON.stringify(idx));
  }catch(_){}
}

/* ===== ã‚¹ã‚³ã‚¢è¨ˆç®— ===== */
/* å„å› å­0â€“4 â†’ 0â€“100ã®ã€Œã ã‚‰ã—ãªã•ï¼…ã€ã«å¤‰æ›ã€‚
   ç·åˆã‚¹ã‚³ã‚¢ã¯ã€Œæ•´ã„åº¦ã€ï¼ˆ100-ã ã‚‰ã—ãªã•å¹³å‡ï¼‰ã¨ã—ã¦æ‰±ã†ã€‚ */
function computeScores(){
  const sums = {TIME:0,ROOM:0,RHYTHM:0,MONEY:0,DIGITAL:0,SELFCARE:0};
  const counts = {TIME:0,ROOM:0,RHYTHM:0,MONEY:0,DIGITAL:0,SELFCARE:0};
  QUESTIONS.forEach((q,i)=>{
    let v = answers[i];
    if(v == null) v = 0;
    sums[q.key] += v;
    counts[q.key] += 1;
  });

  const pct = {};
  FACTS.forEach(k=>{
    const avg0 = (sums[k]/(counts[k]||1)); // 0â€“4ï¼ˆã ã‚‰ã—ãªã•ï¼‰
    const sloppyPct = Math.round((avg0/4)*100); // 0â€“100ï¼ˆé«˜ã„ã»ã©ã ã‚‰ã—ãªã„ï¼‰
    pct[k] = sloppyPct;
  });

  // ç·åˆã ã‚‰ã—ãªã•ï¼…ã¨æ•´ã„åº¦ï¼…
  let sumSloppy = 0;
  FACTS.forEach(k=> sumSloppy += pct[k]);
  const avgSloppy = sumSloppy / FACTS.length;
  const totalSloppyPct = Math.round(avgSloppy);      // é«˜ã„ã»ã©ã ã‚‰ã—ãªã„
  const totalNeatPct   = Math.round(100 - avgSloppy); // é«˜ã„ã»ã©æ•´ã„æ°—å‘³

  return {pct,totalPct: totalNeatPct,totalSloppyPct};
}

/* ===== çµæœè¡¨ç¤º ===== */
function showResult(){
  const {pct,totalPct,totalSloppyPct} = computeScores();
  const grade = gradeFromScore(totalPct);

  // ãƒ©ãƒ³ã‚¯ãƒãƒƒã‚¸ in header
  if($rankBadge){
    $rankBadge.innerHTML =
      `<span>${grade.emo}</span><span>${grade.label}</span>`;
  }

  // ç”»åƒï¼ˆt01ã€œt05ã¯ã‚¹ã‚³ã‚¢å¸¯ã§å‰²å½“ï¼‰
  const IMG_BASE = '/shindan/assets/results/sloppy-life-check/';
  $resultImg.src = IMG_BASE + grade.img;
  $resultImg.alt = grade.alt || 'ç”Ÿæ´»ã ã‚‰ã—ãªã•ãƒ©ãƒ³ã‚¯';

  // çµæœã‚¿ã‚¤ãƒˆãƒ«ãƒ»ã‚µãƒ–
  $resultTitle.textContent = `ã‚ãªãŸã®ç”Ÿæ´»ãƒ©ãƒ³ã‚¯ï¼š${grade.label}`;
  $resultSubtitle.textContent =
    `ç”Ÿæ´»ã ã‚‰ã—ãªã•ãƒ¬ãƒ™ãƒ«ï¼š${totalSloppyPct} / 100ï¼ˆæ•°å­—ãŒé«˜ã„ã»ã©ã‚«ã‚ªã‚¹å¯„ã‚Šï¼‰`;

  // ãƒãƒƒã‚¸é¡
  if($gradeBadge){
    $gradeBadge.innerHTML =
      `<span>${grade.emo}</span><span>${grade.label}</span>`;
  }
  if($scoreBadge){
    $scoreBadge.textContent = `æ•´ã„åº¦ã‚¹ã‚³ã‚¢ ${totalPct} / 100`;
  }

  // æœ¬æ–‡ï¼šå¼·ã¿ï¼‹è½ã¨ã—ç©´ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ï¼‰ï¼‹ ä»Šæ—¥ã®ä¸€æ‰‹ï¼ˆæ ã§å¼·èª¿ï¼‰
  const body = `${grade.title}
${grade.sub}`;
  const tip = grade.tip || '';

  // å…ˆé ­ã®ã€Œä»Šæ—¥ã®ä¸€æ‰‹ï¼šã€ã¯è¦‹ãŸç›®ã§ä»˜ã‘ã‚‹ã®ã§è¡¨ç¤ºæ™‚ã«ã¯å¤–ã™
  const cleanTip = tip.replace(/^ä»Šæ—¥ã®ä¸€æ‰‹[ï¼š:]\s*/,'');

  const html =
    body.replace(/\n/g,'<br>') +
    `<div class="tip-inline">
       <span class="tip-label">ã€ä»Šæ—¥ã®ä¸€æ‰‹ã€‘</span>
       <span class="tip-body">${cleanTip}</span>
     </div>`;

  $resultLines.innerHTML = html;

  // å› å­ãƒãƒ¼æç”»ï¼ˆã ã‚‰ã—ãªã•ï¼…ï¼‰
  $bars.innerHTML = '';
  FACTS.forEach(k=>{
    const v = pct[k];
    const wrap = document.createElement('div');
    wrap.className = 'bar';
    const desc = FACT_DESC[k] || '';
    wrap.innerHTML = `
      <div class="h"><span>${FACT_LABEL[k]}</span><span>${v}%</span></div>
      <div class="track"><div class="fill" style="width:${v}%"></div></div>
      <div class="bar-desc">${desc}</div>
    `;
    $bars.appendChild(wrap);
  });

  // å®Œäº†ãƒ•ãƒ©ã‚°ï¼å‰å›å›ç­”ä¿å­˜
  try{ localStorage.setItem(LS_DONE, String(Date.now())); }catch(_){}
  try{
    localStorage.setItem(LS_LASTANS, JSON.stringify({answers: answers.slice(), ts: Date.now()}));
  }catch(_){}

  buildPrevAnswers();

  document.dispatchEvent(new Event('result:ready'));
}

/* ===== å‰å›å›ç­”ä¸€è¦§ ===== */
function buildPrevAnswers(){
  const $block = document.getElementById('prevBlock');
  const $list  = document.getElementById('prevList');
  if(!$block || !$list) return;

  let prev = null;
  try{
    prev = JSON.parse(localStorage.getItem(LS_LASTANS) || 'null');
  }catch(_){}

  if(!prev || !Array.isArray(prev.answers)) return;

  $list.innerHTML = '';
  prev.answers.forEach((v,i)=>{
    const li = document.createElement('li');
    li.className = 'prev-item';
    const lab = (typeof v === 'number' && v>=0 && v<LABELS.length) ? LABELS[v] : 'â€”';
    li.innerHTML =
      `<span class="prev-q">Q${i+1}ï¼š${QUESTIONS[i].t}</span><span class="prev-a">ã€Œ${lab}ã€</span>`;
    $list.appendChild(li);
  });

  $block.open = false;
}

/* ===== ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ ===== */
function restartQuiz(){
  answers = new Array(QUESTIONS.length).fill(null);
  idx = 0;
  try{
    localStorage.removeItem(LS_ANS);
    localStorage.removeItem(LS_IDX);
  }catch(_){}
  enterPrologueMode();
  window.scrollTo({top:0,behavior:'smooth'});
  showToast(); // ã“ã“ã‚‚âœ…ã ã‘
}
$restart.addEventListener('click', restartQuiz);

/* ===== ãƒˆãƒ¼ã‚¹ãƒˆï¼ˆâœ…ã®ã¿ï¼‰ ===== */
let toastTimer = null;
function showToast(){
  if(!$toast) return;
  $toast.textContent = 'âœ…';
  $toast.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(()=> $toast.classList.remove('show'), 750);
}
</script>

<!-- ã‚ãªãŸã®ã“ã“ã‚Lvï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿ï¼‰ -->
<script>(function(){
  var DONE_KEY='specimens:open:byid', TOTAL_KEY='specimens:open:total';
  var MY_ID=document.body.getAttribute('data-id')||'sloppy-life-check';
  var marked=false;
  function mark(){ if(marked) return; marked=true;
    try{
      // ã‚ãªãŸã®ã“ã“ã‚Lvï¼ˆå…¨è¨ºæ–­åˆè¨ˆï¼‰
      var t=(+localStorage.getItem(TOTAL_KEY)||0)+1;
      localStorage.setItem(TOTAL_KEY,String(t));
      // è¨ºæ–­ã”ã¨ã®ã‚«ã‚¦ãƒ³ãƒˆ
      var map={}; try{ map=JSON.parse(localStorage.getItem(DONE_KEY)||'{}'); }catch(_){}
      map[MY_ID]=(map[MY_ID]||0)+1;
      localStorage.setItem(DONE_KEY, JSON.stringify(Object.assign({},map,{_ts:Date.now()})));
    }catch(_){}
  }
  document.addEventListener('result:ready', mark);
  setTimeout(mark, 2000); // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
}());</script>
</body>
</html>