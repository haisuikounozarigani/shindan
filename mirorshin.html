<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ğŸª é¡ãƒŠãƒ«ã‚·ã‚¹ãƒˆè¨ºæ–­</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{ --brand:#b86b77; --bg:#fdf6f0; --card:#fff; --muted:#6b6b6b; }
    *{ box-sizing:border-box }
    body{ font-family:sans-serif; background:var(--bg); color:#333; padding:18px; }
    h1{ text-align:center; color:var(--brand); margin:0 0 8px; }
    .sub{ text-align:center; color:var(--muted); margin:0 0 16px; }

    form{ max-width:900px; margin:0 auto; background:#fff; padding:16px;
          border-radius:12px; box-shadow:0 4px 14px rgba(184,107,119,.12);}
    .q{ margin:18px 0; }
    .q p{ margin:0 0 8px; font-weight:600; }
    .opt{ display:block; margin:6px 0; padding:9px 10px; background:#f4f4f4;
          border-radius:8px; cursor:pointer; border:1px solid transparent; }
    .opt.on{ border-color:#e6c6ce; background:#fff6f8; }
    .opt input{ margin-right:6px; }

    button{ display:block; margin:22px auto 0; padding:12px 22px; font-size:1.05em;
            background:var(--brand); color:#fff; border:none; border-radius:10px; cursor:pointer; }

    #result{ display:none; max-width:900px; margin:16px auto 0; background:#fff; padding:16px;
             border-radius:12px; box-shadow:0 4px 14px rgba(184,107,119,.12);}
    #result h2{ margin:0 0 6px; color:#7b3f4a; text-align:center; }
    .kpi{ text-align:center; margin:6px 0 10px; color:#7b3f4a; }
    .badge{ display:inline-block; background:#fdecef; color:#7b3f4a; padding:4px 10px;
            border-radius:999px; font-size:.85em; margin-left:6px; }
    .row{ display:grid; grid-template-columns:1fr 1fr; gap:14px; }
    .card{ background:#fff7f9; border:1px solid #f1cbd2; border-radius:10px; padding:12px; }
    .note{ color:#6b6b6b; font-size:.9em; margin-top:10px; text-align:left; }

    .img{width:100%;height:auto;border-radius:10px;box-shadow:0 8px 20px rgba(0,0,0,.08);margin:10px 0}

    .links{ display:flex; gap:10px; margin-top:12px; flex-wrap:wrap }
    .btnlink{ flex:1; display:inline-block; padding:10px 14px; text-align:center;
              background:#ffe7eb; border:1px solid #f1cbd2; color:#7b3f4a;
              border-radius:8px; text-decoration:none; font-weight:700; }
    @media (max-width:720px){ .row{ grid-template-columns:1fr; } }
  </style>
</head>
<body>
  <h1>ğŸª é¡ãƒŠãƒ«ã‚·ã‚¹ãƒˆè¨ºæ–­</h1>
  <p class="sub">14å•ãƒ»5ä»¶æ³•ã€‚çµæœã¯ï¼…è¡¨ç¤ºï¼‹çŸ­ã„èª¬æ˜ï¼‹ã‚µã‚¤ãƒˆå†…ç”»åƒã€‚</p>

  <form id="quizForm"></form>
  <button type="button" onclick="calculate()">è¨ºæ–­ã™ã‚‹</button>

  <section id="result">
    <h2 id="title">çµæœ</h2>
    <p class="kpi" id="overall"></p>

    <img id="mirrorImg" class="img" alt="çµæœç”»åƒ" decoding="async" />

    <div class="row">
      <div class="card">
        <strong>è‡ªå·±è³›ç¾ï¼ˆAdmirationï¼‰</strong>
        <div id="admBrief" class="note"></div>
      </div>
      <div class="card">
        <strong>ç«¶äº‰/å„ªè¶Šï¼ˆRivalryï¼‰</strong>
        <div id="rivBrief" class="note"></div>
      </div>
    </div>

    <div class="links">
      <a class="btnlink" href="/shindan/">ğŸ”™ è¨ºæ–­ä¸€è¦§ã¸æˆ»ã‚‹</a>
      <a class="btnlink" href="#" onclick="window.scrollTo({top:0,behavior:'smooth'});return false;">ğŸ” ã‚‚ã†ä¸€åº¦ã‚„ã‚‹</a>
    </div>
  </section>

  <script>
    // è¨­å•ï¼šå‰åŠ7=Admirationã€å¾ŒåŠ7=Rivalry
    const questions = [
      // Admiration
      "è‡ªåˆ†ã®é­…åŠ›ã¯ã‚‚ã£ã¨è©•ä¾¡ã•ã‚Œã¦ã‚‚è‰¯ã„ã¨æ€ã†",
      "åˆå¯¾é¢ã§è‰¯ã„å°è±¡ã‚’ä¸ãˆã‚‹ã®ã¯å¾—æ„ã ",
      "æ³¨ç›®ã‚’æµ´ã³ã‚‹ã¨ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒæ¹§ã„ã¦ãã‚‹",
      "å¤§ããªæˆåŠŸã¯è‡ªåˆ†ã«ãµã•ã‚ã—ã„ã¨æ„Ÿã˜ã‚‹",
      "å‹äººã‚°ãƒ«ãƒ¼ãƒ—ã§ã¯ä¸­å¿ƒã«ãªã‚‹ã“ã¨ãŒå¤šã„",
      "è‡ªåˆ†ã®æ„è¦‹ã¯ä»–ã®äººã‚ˆã‚Šèª¬å¾—åŠ›ãŒã‚ã‚‹æ–¹ã ",
      "é¡ã‚„ã‚«ãƒ¡ãƒ©ã§èº«ã ã—ãªã¿ã‚’ã‚ˆãç¢ºèªã™ã‚‹",
      // Rivalry
      "æ‰¹åˆ¤ã•ã‚Œã‚‹ã¨ã€ã¤ã„åè«–ã—ãŸããªã‚‹",
      "è‡ªåˆ†ã‚ˆã‚Šç›®ç«‹ã¤äººã‚’è¦‹ã‚‹ã¨è² ã‘ãŸããªã„ã¨æ€ã†",
      "å¤±æ•—ã‚’èªã‚ã‚‹ã®ã¯ã©ã¡ã‚‰ã‹ã¨ã„ãˆã°è‹¦æ‰‹ã ",
      "å½¹ã«ç«‹ãŸãªã„ã¨æ„Ÿã˜ã‚‹äººã¨ã¯è·é›¢ã‚’ç½®ããŸã„",
      "è‡ªåˆ†ã‚’è»½ãè¦‹ãŸç›¸æ‰‹ã¯è¦‹è¿”ã—ãŸã„ã¨æ€ã†",
      "ãƒ«ãƒ¼ãƒ«ã¯è‡ªåˆ†ã®åŠ›ã‚’åˆ¶é™ã™ã‚‹ã“ã¨ãŒã‚ã‚‹",
      "è¤’ã‚ã‚‰ã‚Œãªã„ã¨ã€ã‚„ã‚‹æ°—ãŒä¸‹ãŒã‚Šã‚„ã™ã„"
    ];
    const labels = ["1ï¼ˆã¾ã£ãŸãå½“ã¦ã¯ã¾ã‚‰ãªã„ï¼‰","2ï¼ˆã‚ã¾ã‚Šå½“ã¦ã¯ã¾ã‚‰ãªã„ï¼‰","3ï¼ˆã©ã¡ã‚‰ã¨ã‚‚ã„ãˆãªã„ï¼‰","4ï¼ˆã‚„ã‚„å½“ã¦ã¯ã¾ã‚‹ï¼‰","5ï¼ˆã¨ã¦ã‚‚å½“ã¦ã¯ã¾ã‚‹ï¼‰"];

    // è³ªå•æç”»
    const form = document.getElementById('quizForm');
    questions.forEach((q,i)=>{
      const wrap = document.createElement('div');
      wrap.className = 'q';
      wrap.innerHTML = `<p>Q${i+1}. ${q}</p>` + labels.map((lab,n)=>`
        <label class="opt"><input type="radio" name="q${i}" value="${n+1}"> ${lab}</label>
      `).join("");
      form.appendChild(wrap);
    });

    // é¸æŠã®è¦–èªæ€§ã‚¢ãƒƒãƒ—ï¼ˆé¸ã‚“ã è¡Œã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆï¼‰
    document.addEventListener('change', (e)=>{
      if (!e.target.name || !e.target.name.startsWith('q')) return;
      const name = e.target.name;
      document.querySelectorAll(`input[name="${name}"]`).forEach(inp=>{
        inp.closest('.opt').classList.toggle('on', inp.checked);
      });
    });

    // ï¼…è¨ˆç®—ã¨è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆ
    const pct = (sum,min,max)=> Math.round((sum-min)/(max-min)*100);

    // ç·åˆãƒãƒ³ãƒ‰ â†’ è¡¨ç¤ºãƒ©ãƒ™ãƒ«ï¼†ä¸€è¨€ï¼†ç”»åƒç”¨ã‚¹ãƒ©ãƒƒã‚°
    function bandLabel(p){
      if (p<=20) return {label:"ã‚´ãƒ¼ã‚¸ãƒ£ã‚¹",  badge:"éå¸¸ã«ä½ã„", one:"æ§ãˆã‚ãƒ»è‡ªç„¶ä½“", slug:"gorgeous"};
      if (p<=40) return {label:"ã‚¯ãƒªã‚¢",      badge:"ä½ã„",       one:"è½ã¡ç€ã„ãŸè‡ªå·±è‚¯å®š", slug:"clear"};
      if (p<=60) return {label:"ãƒãƒ¼ãƒãƒ«",    badge:"ä¸­ãã‚‰ã„",   one:"çŠ¶æ³ã§ON/OFF", slug:"normal"};
      if (p<=80) return {label:"ã‚¯ãƒ©ãƒƒã‚¯",    badge:"ã‚„ã‚„é«˜ã„",   one:"è‡ªå·±ä¸»å¼µãƒ»ç«¶äº‰å¿ƒå¼·ã‚", slug:"crack"};
      return        {label:"ã‚¹ãƒãƒƒã‚·ãƒ¥",    badge:"é«˜ã„",       one:"è‡ªå·±æ¼”å‡ºï¼†å¯¾æŠ—å¿ƒãŒå¼·ã„", slug:"smash"};
    }

    const briefAdm = (p)=>{
      if (p<=33) return `è‡ªå·±ä¸»å¼µã¯æ§ãˆã‚ï¼ˆ${p}%ï¼‰ã€‚è‡ªç„¶ä½“ã§è©•ä¾¡ã•ã‚ŒãŸã„ã‚¹ã‚¿ã‚¤ãƒ«ã€‚`;
      if (p<=66) return `è‡ªå·±è‚¯å®šã¨è¬™è™šã•ã®ãƒãƒ©ãƒ³ã‚¹è‰¯ã—ï¼ˆ${p}%ï¼‰ã€‚å ´é¢ã§ä¸Šæ‰‹ã«ã‚¹ã‚¤ãƒƒãƒã€‚`;
      return `é­…ã›æ–¹ä¸Šæ‰‹ï¼ˆ${p}%ï¼‰ã€‚è‡ªå·±ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚¹ãŒå¾—ç‚¹æºã€‚`;
    };
    const briefRiv = (p)=>{
      if (p<=33) return `ç«¶äº‰ã¯å¿…è¦æœ€å°é™ï¼ˆ${p}%ï¼‰ã€‚èª¿å’Œã‚’å„ªå…ˆã—ã‚„ã™ã„ã€‚`;
      if (p<=66) return `å¥å…¨ãªç«¶äº‰å¿ƒï¼ˆ${p}%ï¼‰ã€‚å‹ã¡è² ã‘ã‚ˆã‚Šæˆé•·é‡è¦–ã€‚`;
      return `å‹è² å‹˜ãŒé‹­ã„ï¼ˆ${p}%ï¼‰ã€‚åéª¨å¿ƒãŒãƒ‰ãƒ©ã‚¤ãƒ–ã«ãªã‚‹ã“ã¨ã‚‚ã€‚`;
    };

    // ç”»åƒè¡¨ç¤ºï¼ˆPNGâ†’å¤±æ•—æ™‚WebPï¼‰
    function setImage(imgEl, slug){
      const base = `/shindan/assets/results/mirror/${slug}/01`;
      imgEl.onerror = null;
      imgEl.src = `${base}.png`;
      imgEl.onerror = () => { if (imgEl.src.endsWith('.png')) imgEl.src = `${base}.webp`; };
    }

    function calculate(){
      let total=0, adm=0, riv=0;
      for (let i=0;i<questions.length;i++){
        const v = parseInt(document.querySelector(`input[name="q${i}"]:checked`)?.value);
        if (!v){ alert(`å…¨ã¦ã®è³ªå•ã«ç­”ãˆã¦ãã ã•ã„ã€‚æœªå›ç­”ï¼šQ${i+1}`); return; }
        total += v;
        if (i<7) adm+=v; else riv+=v;
      }
      const totalPct = pct(total,14,70);
      const admPct   = pct(adm,  7,35);
      const rivPct   = pct(riv,  7,35);

      const b = bandLabel(totalPct);
      document.getElementById('title').innerHTML = `ãƒŠãƒ«ã‚·ã‚¹ãƒˆåº¦ <span class="badge">${totalPct}%ï½œ${b.badge}</span>`;
      document.getElementById('overall').textContent = `é¡ã®çŠ¶æ…‹ï¼š${b.label}ï¼ˆ${b.one}ï¼‰`;
      document.getElementById('admBrief').textContent = briefAdm(admPct);
      document.getElementById('rivBrief').textContent = briefRiv(rivPct);

      const img = document.getElementById('mirrorImg');
      setImage(img, b.slug);

      document.getElementById('result').style.display = 'block';
      window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }
  </script>
</body>
</html>
