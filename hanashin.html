<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>èŠ±ã‚¿ã‚¤ãƒ—è¨ºæ–­</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    :root{ --brand:#8e5a5a; --bg1:#fffdf9; --bg2:#f3f0e7; --muted:#666; }
    body{
      font-family: system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN","Noto Sans JP",sans-serif;
      background: linear-gradient(var(--bg1),var(--bg2));
      color:#333; margin:0; padding:22px;
    }
    .wrap{max-width:720px;margin:0 auto}
    h1{color:var(--brand); text-align:center; margin:6px 0 10px; font-size:clamp(20px,3.8vw,28px)}
    .card{background:#fff; padding:18px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,.08)}
    .meta{display:flex; justify-content:space-between; color:var(--muted); font-size:12px; margin:0 2px 8px}
    .question{margin:18px 0 20px}
    .question p{margin:0 0 10px}
    .scale{display:grid; gap:8px}
    .scale label{display:flex; gap:10px; align-items:center; padding:10px; background:#f6f3f1; border-radius:10px; cursor:pointer}
    .scale input{accent-color:var(--brand)}
    .actions{display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:6px}
    .btn{background:var(--brand); color:#fff; border:none; border-radius:10px; padding:12px 18px; font-size:16px; cursor:pointer}
    .btn.secondary{background:#8a8a8a}

    /* result */
    #result{margin-top:18px}
    .result-head{ text-align:center; margin:0 0 10px; }
    .result-img{ width:100%; height:auto; display:block; border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.10) }
    .result-ctas{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:12px }
    .linkbtn{ display:inline-block; text-decoration:none; background:#fff; border:1px solid #e7d9d9; color:#533; padding:10px 14px; border-radius:999px }
    .linkbtn.primary{ background:var(--brand); color:#fff; border-color:transparent }
    .note{ color:var(--muted); text-align:center; margin-top:10px; font-size:.92em }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ğŸŒ¸ èŠ±ã‚¿ã‚¤ãƒ—è¨ºæ–­ ğŸŒ¸</h1>

    <div class="card">
      <div class="meta"><span id="progress">æœªå›ç­” 6 / 6</span><span>5ä»¶æ³•ï¼š1ã€œ5</span></div>
      <form id="quizForm"></form>

      <div class="actions">
        <button type="button" class="btn" onclick="calculate()">è¨ºæ–­ã™ã‚‹</button>
        <button type="button" class="btn secondary" onclick="resetForm()">ãƒªã‚»ãƒƒãƒˆ</button>
      </div>

      <div id="result" aria-live="polite"></div>
    </div>
  </div>

  <script>
  // è¨­å•
  const items = [
    "æ›‡ã‚Šã®æ—¥ã®æ–¹ãŒã€æ°—æŒã¡ãŒè½ã¡ç€ã",
    "æ˜”ã®å†™çœŸã‚„æ‰‹ç´™ã‚’ã€ãµã¨è¦‹è¿”ã—ãŸããªã‚‹",
    "ä¸–ç•Œã®ç´°éƒ¨ã«ã€æ„å‘³ã€ã‚’æ„Ÿã˜ã¦ã—ã¾ã†",
    "éŸ³æ¥½ã‚„åŒ‚ã„ã§ã€ä¸€ç¬ã«ã—ã¦è¨˜æ†¶ãŒè˜‡ã‚‹",
    "è‡ªåˆ†ã®æ„Ÿæƒ…ã«æ•æ„Ÿã ",
    "å­£ç¯€ã®å¤‰ã‚ã‚Šç›®ã«ã€å¿ƒãŒæºã‚Œã‚‹"
  ];
  const scaleLabels = [
    "1ï¼ˆã¾ã£ãŸããã†æ€ã‚ãªã„ï¼‰",
    "2ï¼ˆã‚ã¾ã‚Šãã†æ€ã‚ãªã„ï¼‰",
    "3ï¼ˆã©ã¡ã‚‰ã¨ã‚‚ã„ãˆãªã„ï¼‰",
    "4ï¼ˆå°‘ã—ãã†æ€ã†ï¼‰",
    "5ï¼ˆã¨ã¦ã‚‚ãã†æ€ã†ï¼‰"
  ];

  // èŠ±ã‚¿ã‚¤ãƒ—å®šç¾©ï¼ˆè¡¨ç¤ºåï¼‰
  const FLOWERS = {
    airisu:     { name:"ã‚¢ã‚¤ãƒªã‚¹ï¼ˆè’¼ã®å¢ƒç•Œç·šï¼‰" },
    ajisai:     { name:"ã‚¢ã‚¸ã‚µã‚¤ï¼ˆæ°´é¢ã®è¨˜æ†¶ï¼‰" },
    suzuran:    { name:"ã‚¹ã‚ºãƒ©ãƒ³ï¼ˆç¥ˆã‚Šã®éŸ³ï¼‰" },
    sakura:     { name:"æ¡œï¼ˆæ•£ã‚Šéš›ã®ç¾å­¦ï¼‰" },
    shiroibara: { name:"ç™½ã„ãƒãƒ©ï¼ˆé™ã‘ã•ã®èª“ã„ï¼‰" },
    himawari:   { name:"ã²ã¾ã‚ã‚Šï¼ˆå‘å…‰ã®ã¾ãªã–ã—ï¼‰" }
  };

  // ãƒ•ã‚©ãƒ¼ãƒ æç”»
  const form = document.getElementById("quizForm");
  const progressEl = document.getElementById("progress");
  items.forEach((q, i) => {
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML = `<p>Q${i+1}. ${q}</p>
      <div class="scale">
        ${scaleLabels.map((label, n) => {
          const id = `q${i+1}_${n+1}`;
          return `<label for="${id}">
            <input id="${id}" type="radio" name="q${i+1}" value="${n+1}"> ${label}
          </label>`;
        }).join("")}
      </div>`;
    form.appendChild(div);
  });

  function updateProgress(){
    const answered = items.filter((_,i)=>document.querySelector(`input[name="q${i+1}"]:checked`)).length;
    progressEl.textContent = `æœªå›ç­” ${items.length - answered} / ${items.length}`;
  }
  form.addEventListener("change", updateProgress);
  updateProgress();

  // åˆè¨ˆç‚¹â†’ã‚¿ã‚¤ãƒ—åˆ¤å®š
  function judge(total){
    if (total <= 10) return "airisu";
    if (total <= 14) return "ajisai";
    if (total <= 18) return "suzuran";
    if (total <= 22) return "sakura";
    if (total <= 26) return "shiroibara";
    return "himawari";
  }

  function calculate(){
    let total = 0;
    for(let i=1;i<=items.length;i++){
      const val = parseInt(document.querySelector(`input[name="q${i}"]:checked`)?.value);
      if(!val){ alert(`ã™ã¹ã¦ã®è³ªå•ã«ç­”ãˆã¦ãã ã•ã„ã€‚\næœªå›ç­”ã®è¨­å•ãŒã‚ã‚Šã¾ã™ï¼ˆQ${i}ï¼‰ã€‚`); return; }
      total += val;
    }
    const type = judge(total);
    renderResult({ total, type });
    window.scrollTo({ top: document.body.scrollHeight, behavior:"smooth" });
  }

  function resetForm(){
    form.reset();
    document.getElementById("result").innerHTML = "";
    updateProgress();
    window.scrollTo({top:0, behavior:"smooth"});
  }

  // çµæœæç”»ï¼šç”»åƒè¡¨ç¤ºï¼‹å°ç·šï¼ˆå†è¨ºæ–­ï¼ä¸€è¦§ã¸ï¼‰
  function renderResult({ total, type }){
    const flowerName = FLOWERS[type].name;
    const imgPath = `/shindan/assets/results/hana/${type}/01.png`; // ä¿å­˜ã—ãŸç”»åƒã¸

    const html = `
      <div class="result-head">
        <p>ã‚ãªãŸã®åˆè¨ˆã¯ <strong>${total} ç‚¹</strong>ã€‚</p>
        <p>èŠ±ã‚¿ã‚¤ãƒ—ï¼š<strong>${flowerName}</strong></p>
      </div>
      <img class="result-img" src="${imgPath}" alt="${flowerName} ã®çµæœç”»åƒ" loading="eager"
           onerror="this.alt='çµæœç”»åƒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“'; this.style.opacity=.3;">
      <div class="result-ctas">
        <a class="linkbtn primary" href="/shindan/hanashin.html">ã‚‚ã†ä¸€åº¦è¨ºæ–­</a>
        <a class="linkbtn" href="https://haisuikounozarigani.github.io/shindan/">è¨ºæ–­ä¸€è¦§ã¸æˆ»ã‚‹</a>
      </div>
      <p class="note">â€» ç”»åƒã¯ã‚µã‚¤ãƒˆå†…ï¼ˆ/assets/results/hana/...ï¼‰ã«ä¿å­˜ã•ã‚ŒãŸçµæœã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚</p>
    `;
    document.getElementById("result").innerHTML = html;
  }
  </script>
</body>
</html>
