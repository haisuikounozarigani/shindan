<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
<title>å†·é…·ã‚¢ã‚¤ã‚¹ã‚¯ãƒªãƒ¼ãƒ ãƒ»ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯ï¼ˆç‹¬è‡ªå†æ§‹æˆãƒ»20å•ï¼‰</title>
<meta name="description" content="20å•Ã—5ä»¶æ³•ã§â€œãƒã‚­ãƒ£ãƒ´ã‚§ãƒªã‚ºãƒ å‚¾å‘â€ã®é›°å›²æ°—ã‚’å¯è¦–åŒ–ã€‚Mach-IVãªã©ã®ç ”ç©¶çŸ¥è¦‹ã«ãƒ’ãƒ³ãƒˆã‚’å¾—ãŸç‹¬è‡ªå†æ§‹æˆã®ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯ã§ã™ï¼ˆã‚¨ãƒ³ã‚¿ãƒ¡ï¼‹è‡ªå·±ç†è§£å‘ã‘ï¼å…¬å¼ã®å¿ƒç†æ¤œæŸ»ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼åŒ»ç™‚ç”¨é€”ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚">
  <style>
    :root{ --brand:#b86b77; --chip:#f4f1ef; --bg:#fffaf6; --hl:#ffe7ee }
    *{box-sizing:border-box}
    body{font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans JP",sans-serif;background:var(--bg);color:#333;padding:20px;margin:0}
    h1{text-align:center;color:var(--brand);margin:0 0 14px}
    .legend{max-width:860px;margin:0 auto 16px;font-size:.95em;color:#555}

    .progress-wrap{max-width:860px;margin:0 auto 18px}
    .progress{height:10px;background:#eee;border-radius:999px;overflow:hidden}
    .bar{height:100%;width:0;background:var(--brand);transition:width .2s}
    .count{margin-top:6px;color:#666;font-size:.9em;text-align:right}

    form{max-width:860px;margin:auto;background:#fff;padding:18px;border-radius:12px;box-shadow:0 0 12px #e5d4cf}
    .question{margin:20px 0}
    .qhead{display:flex;justify-content:space-between;gap:8px;align-items:center;margin:0 0 8px;font-weight:600}
    .qstatus{font-weight:600;font-size:.85em;color:#888}
    .qstatus.done{color:var(--brand)}

    .scale{display:grid;grid-template-columns:1fr;gap:10px}

    /* ãƒ©ã‚¸ã‚ªï¼‹è¡Œãƒã‚¤ãƒ©ã‚¤ãƒˆ */
    .chip{display:flex;align-items:center;gap:10px;padding:12px 10px;border-radius:10px;background:var(--chip);
          border:1.5px solid #e9e1de; cursor:pointer; user-select:none; transition:.12s ease}
    .chip input{appearance:none; inline-size:1.05em; block-size:1.05em; border-radius:50%;
                border:2px solid #9d7a83; display:inline-block; position:relative; flex:0 0 auto; background:#fff}
    .chip input:checked{border-color:var(--brand)}
    .chip input:checked::after{content:""; position:absolute; inset:3px; border-radius:50%; background:var(--brand)}
    .chip.on{border-color:#e3bcc6; background:var(--hl); box-shadow:0 6px 18px rgba(184,107,119,.12)}
    .chip:focus-within{outline:3px solid #ffd9e1; outline-offset:2px}

    .btn{display:block;margin:22px auto 0;padding:12px 22px;font-size:1.05em;background:var(--brand);color:#fff;border:none;border-radius:10px;cursor:pointer}

    #result{max-width:860px;margin:22px auto 0;background:#fff;border:1px solid #eadad6;padding:18px;border-radius:10px}
    #result h2{margin:0 0 8px;color:#b16370}
    .row{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .tag{display:inline-block;background:#f6eef0;border:1px solid #e0cfd0;border-radius:999px;padding:6px 12px;font-size:.9em;color:#7b4d57}
    .lead{margin:8px 0 10px;color:#555}
    .img{width:100%;height:auto;border-radius:10px;box-shadow:0 8px 20px rgba(0,0,0,.08);margin:8px 0}

    /* äºŒè»¸ãƒãƒ¼ */
    .kbars{margin-top:8px;display:grid;gap:8px}
    .krow{display:flex;align-items:center;gap:10px}
    .klabel{min-width:9em;color:#7b4d57;font-weight:700}
    .kbar{flex:1;height:10px;background:#f1e7e5;border-radius:999px;overflow:hidden}
    .kbar span{display:block;height:100%;width:0;background:var(--brand);transition:width .4s ease}
    .knum{width:3.2em;text-align:right;color:#7b4d57;font-weight:700}

    .actions{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
    .a-btn{flex:1;text-align:center;text-decoration:none;background:#f7f2f1;border:1px solid #e3d2cd;padding:10px;border-radius:10px;color:#7b4d57;font-weight:700}
    .a-btn:hover{background:#f1e7e5}
  </style>
</head>
<body>
<h1>ğŸ¦ å†·é…·ã‚¢ã‚¤ã‚¹ã‚¯ãƒªãƒ¼ãƒ ãƒ»ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯ï¼ˆç‹¬è‡ªå†æ§‹æˆï¼‰</h1>
  <div class="legend">5ä»¶æ³•ï¼š1 ã¾ã£ãŸãå½“ã¦ã¯ã¾ã‚‰ãªã„ ï¼ 2 ã‚ã¾ã‚Šå½“ã¦ã¯ã¾ã‚‰ãªã„ ï¼ 3 ã©ã¡ã‚‰ã¨ã‚‚ã„ãˆãªã„ ï¼ 4 ã‚„ã‚„å½“ã¦ã¯ã¾ã‚‹ ï¼ 5 ã¨ã¦ã‚‚å½“ã¦ã¯ã¾ã‚‹</div>
<section id="legal-note" style="max-width:860px;margin:14px auto;background:#fff;border:1px solid #eadad6;border-radius:10px;padding:12px">
  <h2 style="margin:4px 0 6px;font-size:1rem;color:#7b4d57">ã”åˆ©ç”¨ã«ã‚ãŸã£ã¦</h2>
  <ul style="margin:6px 0 0 1.2em;line-height:1.8;color:#555">
    <li><strong>éææºãƒ»éå…¬å¼ï¼š</strong>æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ã€ŒMach-IVã€ç­‰ã®ç ”ç©¶çŸ¥è¦‹ã«<span style="white-space:nowrap">ãƒ’ãƒ³ãƒˆã‚’å¾—ãŸ</span><strong>ç‹¬è‡ªå†æ§‹æˆ</strong>ã§ã™ã€‚å…¬å¼ã®è³ªå•é …ç›®ãƒ»æ¡ç‚¹æ–¹æ³•ã¯ä½¿ç”¨ã—ã¦ãŠã‚‰ãšã€æ¨©åˆ©è€…ã®æ‰¿èªãƒ»ææºãƒ»æ¨å¥¨ã‚’æ„å‘³ã—ã¾ã›ã‚“ã€‚</li>
    <li><strong>åŒ»ç™‚ãƒ»å¿ƒç†è¨ºæ–­ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼š</strong>å¨¯æ¥½ï¼‹è‡ªå·±ç†è§£ã®ãŸã‚ã®ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯ã§ã‚ã‚Šã€åŒ»ç™‚çš„ãƒ»å¿ƒç†çš„ãªè¨ºæ–­ï¼æ²»ç™‚ï¼åŠ©è¨€ã‚’ç›®çš„ã¨ã—ã¾ã›ã‚“ã€‚ã¤ã‚‰ã•ã‚„ä¸èª¿ãŒç¶šãå ´åˆã¯å°‚é–€å®¶ã¸ã”ç›¸è«‡ãã ã•ã„ã€‚</li>
    <li><strong>ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ï¼š</strong>å›ç­”ã¯ç«¯æœ«å†…ã§ã®ã¿å‡¦ç†ã•ã‚Œã€ã‚µãƒ¼ãƒãƒ¼é€ä¿¡ã¯è¡Œã„ã¾ã›ã‚“ã€‚</li>
    <li><strong>è¡¨ç¾ã«ã¤ã„ã¦ï¼š</strong>ã€Œå†·é…·ã€ç­‰ã¯ä¾¿å®œä¸Šã®æ¯”å–©è¡¨ç¾ã§ã‚ã‚Šã€ç‰¹å®šã®å€‹äººãƒ»å›£ä½“ã«å¯¾ã™ã‚‹ä¾¡å€¤åˆ¤æ–­ã‚„ãƒ©ãƒ™ãƒªãƒ³ã‚°ã®æ„å›³ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</li>
    <li><strong>å…è²¬ï¼š</strong>æ³•ä»¤ã§èªã‚ã‚‰ã‚Œã‚‹ç¯„å›²ã§ã€æœ¬ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆ©ç”¨ã«ä¼´ã†æå¤±ãƒ»æå®³ã«ã¤ã„ã¦å½“ã‚µã‚¤ãƒˆã¯è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</li>
  </ul>
</section>
  <div class="progress-wrap">
    <div class="progress"><div id="bar" class="bar"></div></div>
    <div id="count" class="count">0 / 20 å›ç­”</div>
  </div>

  <form id="quizForm" aria-live="polite"></form>
  <button class="btn" type="button" onclick="calculate()">è¨ºæ–­ã™ã‚‹</button>

  <div id="result" style="display:none;"></div>

  <script>
    // ã‚¿ã‚¤ãƒ—â†’ç”»åƒãƒ•ã‚©ãƒ«ãƒ€ï¼ˆ01ã®ã¿ï¼‰
    const TYPE_TO_SLUG = {
      "ã‚½ãƒ•ãƒˆã‚¯ãƒªãƒ¼ãƒ ":"softcream",
      "ãƒãƒ‹ãƒ©ã‚¢ã‚¤ã‚¹":"vanilla",
      "ã‚¸ã‚§ãƒ©ãƒ¼ãƒˆ":"gelato",
      "ã‚½ãƒ«ãƒ™":"sorbet",
      "ã‚¯ãƒªã‚¹ã‚¿ãƒ«ã‚¢ã‚¤ã‚¹":"crystalice"
    };

    // ä¸€è¨€
    const TAGLINE = {
      "ã‚½ãƒ•ãƒˆã‚¯ãƒªãƒ¼ãƒ ":"é§†ã‘å¼•ãã‚¼ãƒ­ã€ç›´çƒã™ãã¦é€†ã«æœ€å¼·",
      "ãƒãƒ‹ãƒ©ã‚¢ã‚¤ã‚¹":"åŸºæœ¬ã¯æ­£æ”»æ³•ã€ã¨ãã©ãå°ãƒ¯ã‚¶",
      "ã‚¸ã‚§ãƒ©ãƒ¼ãƒˆ":"ç”˜ã•ã¨å†·é™ã•ã®ã‚¹ã‚¤ãƒƒãƒãƒ£ãƒ¼",
      "ã‚½ãƒ«ãƒ™":"æ°·ç‚¹ä¸‹ã®å†·é™ã€å‹ã¡ç­‹ç›´è¡Œ",
      "ã‚¯ãƒªã‚¹ã‚¿ãƒ«ã‚¢ã‚¤ã‚¹":"æ°·ã®ç­–å£«ã€æœ€é©è§£ã‚’å–ã‚Šã«ã„ã"
    };

    // Mach-IV 20é …ç›®ï¼ˆrev:true ã¯é€†è»¢ï¼‰ï¼‹ facet: tactics/viewsï¼ˆäºŒè»¸ï¼‰
    const items = [
      { text:"ç›®çš„ã®ãŸã‚ãªã‚‰æœ¬éŸ³ã‚’éš ã™ã“ã¨ã‚‚å¿…è¦ã ã¨æ€ã†",           rev:false, facet:"tactics" },
      { text:"é“å¾³çš„ã«æ­£ã—ã„ã¨ç¢ºä¿¡ã§ããªã„ãªã‚‰ã€è¡Œå‹•ã™ã¹ãã§ã¯ãªã„",   rev:true,  facet:"views"   },
      { text:"å‡ºä¸–ã™ã‚‹äººã®å¤šãã¯ã€æ­£ç›´ã§æ½”ç™½ã ã¨æ€ã†",               rev:true,  facet:"views"   },
      { text:"é‡è¦äººç‰©ã«ã¯ãŠä¸–è¾ã‚’ä½¿ã†ã®ãŒè³¢ã„ã‚„ã‚Šæ–¹ã ",             rev:false, facet:"tactics" },
      { text:"ãŸã¨ãˆä¸åˆ©ã§ã‚‚ã€ä»–äººã«ã†ãã‚’ã¤ãã¹ãã§ã¯ãªã„",         rev:true,  facet:"tactics" },
      { text:"äººã‚’å‹•ã‹ã™ã«ã¯ã€ç›¸æ‰‹ãŒèããŸã„ã“ã¨ã‚’è¨€ã†ã®ãŒä¸€ç•ªã ",     rev:false, facet:"tactics" },
      { text:"èª°ã‹ã‚’å®Œå…¨ã«ä¿¡é ¼ã™ã‚‹ã®ã¯å±é™ºã ã¨æ€ã†",                 rev:false, facet:"views"   },
      { text:"è¿‘é“ã‚’ä½¿ã‚ãšåŠªåŠ›ã™ã‚Œã°ã€å¿…ãšå ±ã‚ã‚Œã‚‹ã‚‚ã®ã ",           rev:true,  facet:"views"   },
      { text:"äººã¯åŸºæœ¬çš„ã«å–„è‰¯ã§ã€å…¬æ­£ã«æŒ¯ã‚‹èˆã†ã¨æ€ã†",             rev:true,  facet:"views"   },
      { text:"æˆåŠŸã«ã¯ã€æ™‚ã«ãƒ«ãƒ¼ãƒ«ã‚’æ›²ã’ã‚‹ã“ã¨ãŒæ¬ ã‹ã›ãªã„",         rev:false, facet:"tactics" },
      { text:"ãƒãƒ£ãƒ³ã‚¹ãŒã‚ã£ã¦ã‚‚ã€ä¸å…¬å¹³ãªåˆ©å¾—ã¯çµ¶å¯¾ã«å¾—ãªã„",       rev:true,  facet:"tactics" },
      { text:"ã†ã¾ãç«‹ã¡å›ã‚‹ã«ã¯ã€å¤šå°‘ã®â€œæ“ä½œâ€ã¯å¿…è¦ã ",             rev:false, facet:"tactics" },
      { text:"äººå‰ã§ã¯ã€æœ¬å¿ƒã‚’è¦‹ã›ãªã„æ–¹ãŒå®‰å…¨ã ã¨æ€ã†",             rev:false, facet:"tactics" },
      { text:"ãŸã¨ãˆæã§ã‚‚ã€æ­£ç›´ã•ã‚’æœ€å„ªå…ˆã™ã‚‹ã¹ãã ",               rev:true,  facet:"tactics" },
      { text:"å¤šãã®äººã¯ã€è¦‹è¿”ã‚ŠãŒãªã‘ã‚Œã°å”åŠ›ã—ãªã„ã¨æ€ã†",         rev:false, facet:"views"   },
      { text:"äººé–“é–¢ä¿‚ã§ã¯ã€èª æ„ã•ãˆã‚ã‚Œã°ååˆ†ã†ã¾ãã„ã",           rev:true,  facet:"views"   },
      { text:"äº¤æ¸‰ã§ã¯â€œè¦ç¯„â€ã‚ˆã‚Šâ€œçµæœâ€ã‚’é‡è¦–ã™ã‚‹ã¹ãã ",           rev:false, facet:"tactics" },
      { text:"äººã‚’åˆ©ç”¨ã™ã‚‹ãã‚‰ã„ãªã‚‰ã€æ©Ÿä¼šã‚’é€ƒã—ã¦ã‚‚ã‚ˆã„",           rev:true,  facet:"tactics" },
      { text:"é‡è¦ãªæƒ…å ±ã¯ã€æœ‰åˆ©ã«ãªã‚‹ã¾ã§ä¼ã›ã¦ãŠãã¹ãã ",         rev:false, facet:"tactics" },
      { text:"ç´„æŸã¯çŠ¶æ³ãŒå¤‰ã‚ã£ã¦ã‚‚ã€å¿…ãšå®ˆã‚‹ã¹ãã ",               rev:true,  facet:"tactics" }
    ];

    const scaleLabels = [
      "1ï¼ˆã¾ã£ãŸãå½“ã¦ã¯ã¾ã‚‰ãªã„ï¼‰","2ï¼ˆã‚ã¾ã‚Šå½“ã¦ã¯ã¾ã‚‰ãªã„ï¼‰",
      "3ï¼ˆã©ã¡ã‚‰ã¨ã‚‚ã„ãˆãªã„ï¼‰","4ï¼ˆã‚„ã‚„å½“ã¦ã¯ã¾ã‚‹ï¼‰","5ï¼ˆã¨ã¦ã‚‚å½“ã¦ã¯ã¾ã‚‹ï¼‰"
    ];

    const form   = document.getElementById("quizForm");
    const bar    = document.getElementById("bar");
    const count  = document.getElementById("count");
    const result = document.getElementById("result");

    // è³ªå•æç”»
    items.forEach((it, i) => {
      const fs = document.createElement("fieldset");
      fs.className = "question";
      const qid = `q${i}`;
      fs.innerHTML = `<legend class="qhead"><span>Q${i+1}. ${it.text}</span><span id="${qid}_status" class="qstatus">æœªé¸æŠ</span></legend>`;
      const scale = document.createElement("div");
      scale.className = "scale";
      for (let n=0;n<5;n++){
        const id = `${qid}_${n+1}`;
        scale.innerHTML += `
          <label class="chip">
            <input id="${id}" type="radio" name="${qid}" value="${n+1}">
            <span>${scaleLabels[n]}</span>
          </label>`;
      }
      fs.appendChild(scale);
      form.appendChild(fs);
    });

    // è¡Œãƒã‚¤ãƒ©ã‚¤ãƒˆï¼†é€²æ—
    document.addEventListener("change", (e) => {
      if (!e.target.matches('input[type="radio"][name^="q"]')) return;
      const name = e.target.name;
      document.querySelectorAll(`input[name="${name}"]`).forEach(inp=>{
        inp.closest('.chip').classList.toggle('on', inp.checked);
      });
      const st = document.getElementById(`${name}_status`);
      if (st){ st.textContent = "é¸æŠæ¸ˆ"; st.classList.add("done"); }
      updateProgress();
    });
    function updateProgress(){
      const answered = new Set([...document.querySelectorAll('input[type="radio"]:checked')].map(i=>i.name)).size;
      const totalQ = items.length;
      const pct = Math.round(answered/totalQ*100);
      bar.style.width = pct + "%";
      count.textContent = `${answered} / ${totalQ} å›ç­”`;
    }

    // ç”»åƒèª­è¾¼ï¼ˆ01.png â†’ ã ã‚ãªã‚‰ 01.webpï¼‰
    function setImage(imgEl, slug){
      const base = `/shindan/assets/results/ice/${slug}/01`;
      imgEl.onerror = null;
      imgEl.src = `${base}.png`;
      imgEl.onerror = ()=>{ if(imgEl.src.endsWith('.png')) imgEl.src = `${base}.webp`; };
    }

    function pct(sum, count){
      const min = 1 * count, max = 5 * count;
      return Math.round((sum - min) / (max - min) * 100);
    }

    function calculate(){
      // å›ç­”ãƒã‚§ãƒƒã‚¯
      for (let i=0;i<items.length;i++){
        if (!document.querySelector(`input[name="q${i}"]:checked`)){
          alert(`æœªå›ç­”ã®è¨­å•ãŒã‚ã‚Šã¾ã™ï¼ˆQ${i+1}ï¼‰`);
          return;
        }
      }

      // åˆè¨ˆï¼†äºŒè»¸é›†è¨ˆ
      let sumAll = 0;
      const facets = { tactics:0, views:0 };
      const counts = { tactics:0, views:0 };

      for (let i=0;i<items.length;i++){
        let v = parseInt(document.querySelector(`input[name="q${i}"]:checked`).value,10);
        if (items[i].rev) v = 6 - v;  // é€†è»¢
        sumAll += v;
        const f = items[i].facet;
        facets[f] += v;
        counts[f] += 1;
      }

      // 0ã€œ100% ã«å¤‰æ›
      const machPct = Math.round((sumAll - 20) / 80 * 100); // å…¨ä½“
      const tacticsPct = pct(facets.tactics, counts.tactics);
      const viewsPct   = pct(facets.views,   counts.views);

      // ã‚¿ã‚¤ãƒ—åˆ¤å®šï¼ˆå…¨ä½“ï¼…ã§ï¼‰
      let type="";
      if (machPct <= 20) type="ã‚½ãƒ•ãƒˆã‚¯ãƒªãƒ¼ãƒ ";
      else if (machPct <= 40) type="ãƒãƒ‹ãƒ©ã‚¢ã‚¤ã‚¹";
      else if (machPct <= 60) type="ã‚¸ã‚§ãƒ©ãƒ¼ãƒˆ";
      else if (machPct <= 80) type="ã‚½ãƒ«ãƒ™";
      else type="ã‚¯ãƒªã‚¹ã‚¿ãƒ«ã‚¢ã‚¤ã‚¹";

      const slug = TYPE_TO_SLUG[type];
      const tagline = TAGLINE[type] || "";

      // çµæœæç”»
      result.style.display = "block";
      result.innerHTML = `
        <h2>çµæœ</h2>
        <div class="row">
          <span class="tag">å†·é…·åº¦ï¼š${machPct}%</span>
          <span class="tag">${type}</span>
        </div>
        <p class="lead">ä¸€è¨€ã¾ã¨ã‚ï¼š${tagline}</p>

        <div class="kbars" aria-label="äºŒè»¸ã‚¹ã‚³ã‚¢">
          <div class="krow">
            <span class="klabel">è¨ˆç•¥ï¼ˆTacticsï¼‰</span>
            <div class="kbar"><span id="barTac"></span></div>
            <span id="pctTac" class="knum">${tacticsPct}%</span>
          </div>
          <div class="krow">
            <span class="klabel">æ‡ç–‘ï¼ˆViewsï¼‰</span>
            <div class="kbar"><span id="barView"></span></div>
            <span id="pctView" class="knum">${viewsPct}%</span>
          </div>
        </div>

        <img id="ice-img" class="img" alt="${type} ã®çµæœç”»åƒ" decoding="async">

        <div class="actions">
          <a class="a-btn" href="/shindan/">ğŸ”™ è¨ºæ–­ä¸€è¦§ã¸æˆ»ã‚‹</a>
          <a class="a-btn" href="#" onclick="window.scrollTo({top:0,behavior:'smooth'});return false;">ğŸ” ã‚‚ã†ä¸€åº¦ã‚„ã‚‹</a>
        </div>
      `;

      // ãƒãƒ¼ã¨ç”»åƒ
      document.getElementById('barTac').style.width  = tacticsPct + '%';
      document.getElementById('barView').style.width = viewsPct   + '%';
      setImage(document.getElementById('ice-img'), slug);

      window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }
  </script>
</body>
</html>
```î¨0î¨‚

