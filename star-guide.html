<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>流れ星の案内人</title>
<meta name="description" content="ボタンを押すと、流れ星が一通のことばを運んできます。時間帯ブースト対応。たまにレアな流れ星が混ざってるかも？">
<meta name="theme-color" content="#0b1026">
<meta property="og:type" content="website">
<meta property="og:title" content="流れ星の案内人">
<meta property="og:description" content="ボタンを押すと、流れ星が一通のことばを運んできます。">
<meta property="og:url" content="https://haisuikounozarigani.github.io/shindan/star-guide.html">
<meta property="og:image" content="/shindan/assets/results/star-guide/02.png">
<style>
:root{
  --ink:#121525; --paper:#fff; --muted:#8ea1c2; --line:#203055;
  --accent:#8ec5ff; --accent2:#ffd08c; --gold:#f6c453;
  --shadow:0 10px 30px rgba(0,0,0,.25);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;color:var(--paper);background:#0b1026;
  font-family:"Noto Sans JP",system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN","Yu Gothic",Meiryo,sans-serif;
  -webkit-font-smoothing:antialiased;
}
a{color:inherit}
.wrap{max-width:960px;margin:0 auto;min-height:100%;display:grid;grid-template-rows:auto 1fr auto}
header.hd{display:flex;align-items:center;gap:12px;padding:14px 16px}
.logo{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;background:linear-gradient(135deg,rgba(255,255,255,.1),rgba(255,255,255,.02))}
.logo span{font-size:22px}
h1{margin:0;font-size:clamp(20px,4.4vw,28px);letter-spacing:.02em}
.sub{margin:4px 0 0;color:#c8d6f2;font-size:.95em;opacity:.95}


/* カード */
.card{
  margin:10px 16px 18px;border:1px solid rgba(255,255,255,.12);
  background:rgba(13,17,38,.55);border-radius:18px;box-shadow:var(--shadow);
  overflow:hidden;backdrop-filter:blur(6px) saturate(1.2);
}
.card .pad{padding:14px 16px}

/* ヒーロー */
.hero{display:grid;place-items:center;min-height:44vh;padding:24px 16px;position:relative;isolation:isolate;text-align:center;overflow:hidden}
.btn{
  cursor:pointer;user-select:none;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.08);
  color:#fff;padding:12px 16px;border-radius:14px;font-weight:700;transition:transform .08s ease, background .2s ease, border-color .2s ease;
}
.btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));border-color:transparent;color:#0b1026}
.btn:active{transform:translateY(1px)}

/* シューティングスター（iPhone/Safari安定版） */
.shoot{ position:fixed; inset:0; pointer-events:none; z-index:1; }

.shoot .star{
  position:absolute;
  left:-34vw; top:12vh;               /* 入口は画面外 */
  width:min(90vw,520px); height:3px;
  opacity:0; border-radius:3px;
  background:linear-gradient(90deg,rgba(255,255,255,0),rgba(255,255,255,.95),rgba(255,255,255,0));
  filter:drop-shadow(0 0 14px rgba(255,255,255,.9));
  transform:rotate(10deg) translate3d(0,0,0); /* ← 角度を少しだけ浅く */
  will-change:transform,opacity;
  -webkit-backface-visibility:hidden;
}
.shoot .star::after{ /* 先端の小さな発光 */
  content:"";
  position:absolute; right:-9px; top:-7px;
  width:20px; height:20px; border-radius:50%;
  background:radial-gradient(circle, rgba(255,255,255,1) 0%, rgba(255,255,255,.9) 30%, rgba(255,255,255,0) 70%);
  filter:blur(1px) drop-shadow(0 0 10px rgba(255,255,255,.95));
}

/* レア色（任意：そのままでOK） */
.shoot .star.rare{
  background:linear-gradient(90deg,rgba(255,0,0,0),rgba(255,80,80,.95),rgba(255,0,0,0));
  filter:drop-shadow(0 0 10px rgba(255,80,80,.9));
}
.shoot .star.rare::after{
  background:radial-gradient(circle, rgba(255,120,120,1) 0%, rgba(255,120,120,.9) 32%, rgba(255,120,120,0) 70%);
  filter:blur(1px) drop-shadow(0 0 10px rgba(255,80,80,1));
}

/* 走らせる（.active 付与で発火） */
.shoot.active .star{
  animation: tailSoft 2.6s cubic-bezier(0.22,1,0.36,1) forwards;
}
@keyframes tailArc{
  /* 入口：やや上の左外から */
  0%   { opacity:0; transform:rotate(10deg) translate3d(-30vw,-12vh,0); }
  12%  { opacity:1; }

  /* 中継ポイントを複数置いて、ゆるい下向き弧にする */
  25%  { transform:rotate(10deg) translate3d(0vw,-6vh,0); }
  50%  { transform:rotate(10deg) translate3d(38vw,0vh,0); }
  75%  { transform:rotate(10deg) translate3d(74vw,10vh,0); }

  /* 終点：右外のやや下へ抜ける */
  100% { opacity:0; transform:rotate(10deg) translate3d(112vw,22vh,0); }
}

@keyframes tailSoft{
  0%   { opacity:0; transform:rotate(10deg) translate3d(-28vw,-6vh,0); }
  10%  { opacity:1; }
  95%  { opacity:1; }
  100% { opacity:0; transform:rotate(10deg) translate3d(110vw,8vh,0); }
}

/* 動作を減らす配慮 */
@media (prefers-reduced-motion: reduce){
  .shoot .star{ animation:none; transition:opacity .6s ease; }
  .shoot.static .star{ opacity:1; }
}

/* レター */
.letter{
  display:grid;gap:10px;margin:0 16px 16px;border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.1);border-radius:16px;backdrop-filter:blur(4px) saturate(1.1);
}
.letter header{
  display:flex;align-items:center;justify-content:space-between;padding:10px 12px 8px;border-bottom:1px dashed rgba(255,255,255,.14)
}
.badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.18);font-weight:700}
.badge.rare{background:linear-gradient(90deg,#5a0000,#3b0000);border-color:rgba(255,120,120,.6);color:#ffd4d4}
.body{padding:8px 14px 0;line-height:1.6;font-size:clamp(20px, 5.2vw, 28px);color:#fff;letter-spacing:.02em}
.tags{display:flex;flex-wrap:wrap;gap:8px;padding:0 14px 12px;color:#c8d6f2;font-size:.9em}
.tag{padding:3px 8px;border:1px solid rgba(255,255,255,.16);border-radius:999px;background:rgba(255,255,255,.06)}

/* 結果イメージ：正方形（1024x1024想定）を中央に、見切れなしで表示 */
.figure{
  display:flex; gap:10px; align-items:center; justify-content:center; flex-wrap:wrap;
  padding:6px 12px 12px;
}
.figure .thumb{
  width: min(86vw, 320px);          /* 端末に合わせて気持ち大きめ */
  aspect-ratio: 1 / 1;              /* 正方形枠 */
  margin: 12px auto 0;              /* ど真ん中 */
  display: grid; place-items: center;
  border-radius: 16px;
  background: #111a2b;
  border: 1px solid rgba(255,255,255,.12);
  overflow: hidden;
  box-shadow: 0 6px 18px rgba(0,0,0,.25);
}
.figure .thumb img{
  width: 100%; height: 100%; display: block;
  object-fit: contain;              /* ← 見切れなし。1024x1024は等倍で収まる */
  object-position: center;
  image-rendering: auto;
}
.figure .cap{
  flex:1; min-width:180px; color:#c8d6f2; font-size:.92em; line-height:1.5; text-align:center;
}
@media (max-width:560px){
  .figure{ justify-content:center; }
  .figure .thumb{ width: min(76vw, 360px); margin: 0 auto; }
}
 
/* フッター */

.footer{color:#c8d6f2;font-size:.92em}
.warn{background:rgba(20,27,54,.7);border:1px solid rgba(255,255,255,.16);border-radius:12px;padding:10px;margin:12px 16px}
.note{color:#c8d6f2;font-size:.92em;padding:0 16px 12px}
.note a{color:#fff;text-decoration:underline}
</style>
</head>
<body>

<main class="wrap" id="app">
  <header class="hd">
    <div class="logo" aria-hidden="true"><span>🌠</span></div>
    <div>
      <h1>流れ星の案内人</h1>
      <p class="sub">ボタンを押すと、流れ星が一通のことばを運んできます</p>
    </div>
  </header>

  <!-- 中央はこのボタンだけ -->
  <section class="card hero" aria-label="星に願いを">
    <div class="pad">
      <button class="btn primary" id="draw">流れ星に祈る</button>
    </div>
    <div class="shoot" aria-hidden="true"><div class="star" id="shootStar"></div></div>
  </section>

  <!-- 結果 -->
  <section class="letter" id="letter" role="region" aria-live="polite" aria-label="受け取った手紙" style="display:none">
    <header>
      <span class="badge" id="rarityBadge">✉️ 一通のことば</span>
      <span class="badge" id="timeTag">いつでも</span>
    </header>

    <div class="body" id="text">—</div>

    <!-- 正方形サムネ（背景は縦長のまま） -->
    <div class="figure" id="figure" style="display:none">
      <div class="thumb"><img id="figImg" src="" alt="" width="600" height="600" loading="lazy"></div>
      <div class="cap" id="figCap">—</div>
    </div>

    <div class="tags" id="tags"></div>

    <!-- 下部案内（戻るリンク／時間帯ブースト／“レア匂わせ”） -->
    <div class="note">
      <div style="margin:6px 0 8px"><a href="/shindan/" id="backLink" aria-label="診断一覧に戻る">診断一覧に戻る</a></div>
      <div id="boostNote" style="margin-top:4px">時間帯ブースト：<b>夜（18:00–04:59）／朝（05:00–10:59）</b>は、その時間に合う言葉が<b>少しだけ出やすく</b>なります（×<span id="boostVal">1.5</span>）。</div>
      <div id="rareNote" style="margin-top:4px">たまに、“特別な流れ星”が混ざっているかも？</div>
    </div>
  </section>

  <section class="footer">
    <div class="warn">
      <strong>注意：</strong>ここに届く言葉は<b>心の応援</b>です。医療・専門的助言ではありません。つらさが続くときは、信頼できる人や相談窓口に相談してください。<br>
      データは端末内で処理され、個人を特定する情報の送信・収集は行いません（ご利用環境によりアクセス解析等が動作する場合があります）。
    </div>
  </section>
</main>

<script>
(() => {
  // ====== アセット ======
  const ASSETS = "/shindan/assets/results/star-guide/";
  const URL_CONFIG  = ASSETS + "config.json";
  const URL_LETTERS = ASSETS + "letters.json";

  // 結果イメージ（5枚：01やさしさ / 02静けさ(夜) / 03希望 / 04守る / 05特別）
const IMGS = {
  "01": {alt:"夕暮れの浜辺の穏やかな波",  tags:["やさしさ","自己肯定","朝","morning"]},
  "02": {alt:"静かな夜の海と小さな星",    tags:["静けさ","不安","夜","night"]},
  "03": {alt:"小さな流星がいくつか流れる空",tags:["希望","再起"]},
  "04": {alt:"夜の灯台の光が海を照らす",  tags:["守る","安心"]},
  "05": {alt:"特別な流れ星のきらめき",    tags:["rare"]}
};
const TAG_MAP = {
  // 01：やさしさ・朝側
  "やさしさ":["01"], "自己肯定":["01"], "朝向け":["01"], "morning":["01"],
  "比較":["01"], "季節":["01"], "選択":["01"], "恋愛":["01"],

  // 02：静けさ・夜側
  "静けさ":["02"], "不安":["02"], "夜向け":["02"], "night":["02"],
  "罪悪感":["02"], "孤独":["02"], "お金":["02"],

  // 03：希望・再起・創作
  "希望":["03"], "再起":["03"], "創作":["03"], "転機":["03"],

  // 04：守る・安心・境界・家族/ペット/本番/からだ
  "守る":["04"], "安心":["04"], "境界":["04"], "家族":["04"],
  "ペット":["04"], "本番":["04"], "からだ":["04"], "怒り":["04"],

  // 05：レア専用
  "rare":["05"]
};

  // ====== 参照 ======
  const sky  = null; // 背景なし
  const shootStar = document.getElementById("shootStar");
  const draw = document.getElementById("draw");

  const letterBox = document.getElementById("letter");
  const rarityBadge = document.getElementById("rarityBadge");
  const timeTag = document.getElementById("timeTag");
  const textEl = document.getElementById("text");
  const tagsEl = document.getElementById("tags");
  const boostVal = document.getElementById("boostVal");

  const figWrap = document.getElementById("figure");
  const figImg  = document.getElementById("figImg");
  const figCap  = document.getElementById("figCap");

  // ====== 状態 ======
  let CONFIG = {
    rarity_weights: { rare: 0.05, common: 0.95 },
    time_boost: { night: 1.5, morning: 1.5 },
    button_label: "流れ星に祈る"
  };
  let LETTERS = [];

  const sleep = ms => new Promise(r => setTimeout(r, ms));

  function nowHint(){
    const h = new Date().getHours();
    if (h >= 5 && h <= 10) return "morning";
    if (h >= 18 || h <= 4) return "night";
    return "neutral";
  }
  function setSky(){} // 背景なし

  function weightedPick(obj){
    const entries = Object.entries(obj);
    const total = entries.reduce((s,[,w])=>s+Math.max(0,Number(w)||0),0) || 1;
    let r = Math.random()*total;
    for(const [k,w0] of entries){
      const w = Math.max(0,Number(w0)||0);
      if((r -= w) <= 0) return k;
    }
    return entries[0][0];
  }
  function weightedSample(items, weights){
    const sum = weights.reduce((s,w)=>s+(w>0?w:0),0) || 0;
    if(sum<=0) return items[Math.floor(Math.random()*items.length)];
    let r = Math.random()*sum;
    for(let i=0;i<items.length;i++){
      const w = weights[i]>0?weights[i]:0;
      if((r -= w) <= 0) return items[i];
    }
    return items[0];
  }

  function saveLast(){
    try{
      localStorage.setItem("specimens:last", JSON.stringify({ id:"star-guide", title:"流れ星の案内人", href: location.pathname }));
    }catch(e){}
  }

  // 画像選択：タグ＋時間帯でゆるくマッチ（正方形でトリミング表示）
  function pickImageFor(letter){
    // rare は固定で 05.png を表示
    if ((letter.rarity||"common")==="rare") {
      return { id:"05", alt:(IMGS["05"]?.alt||""), cap:"" };
    }
    const hint = nowHint();
    const tags = (letter.tags||[]).map(String);

    let cand = [];
    for(const t of tags){
      const arr = TAG_MAP[t];
      if(arr) cand = cand.concat(arr);
    }
    const nightSet = new Set(["02"]);
const morningSet = new Set(["01","03"]);

    if(cand.length){
      const weighted = cand.map(id=>{
        const bonus = (hint==="night" && nightSet.has(id)) ? 1.2
                    : (hint==="morning" && morningSet.has(id)) ? 1.2
                    : 1.0;
        return {id, w:bonus};
      });
      const ids = weighted.map(o=>o.id);
      const ws  = weighted.map(o=>o.w);
      const id  = weightedSample(ids, ws);
      return { id, alt: IMGS[id]?.alt || "", cap: (tags[0] ? "テーマ："+tags[0] : "テーマ：—") };
    }else{
      const id = (hint==="night" ? "02" : "01");
      return { id, alt: IMGS[id].alt, cap: "" };
    }
  }

  function renderImage(letter){
    const {id, alt, cap} = pickImageFor(letter);
    figImg.src = ASSETS + id + ".png";
    figImg.alt = alt || "";
    figCap.textContent = cap;
    figWrap.style.display = "";
  }

  function pickLetter(){
    if(!LETTERS.length) return null;
    const rarity = weightedPick(CONFIG.rarity_weights || {rare:.05, common:.95});
    let pool = LETTERS.filter(l => (l.rarity || "common") === rarity);
    if(!pool.length) pool = LETTERS.slice();

    const hint = nowHint();
    const logicalHint = (hint==="night"?"night":(hint==="morning"?"morning":null));
    const boost = (logicalHint && CONFIG.time_boost && Number(CONFIG.time_boost[logicalHint])) || 1;
    const weights = pool.map(l => {
      let w = 1;
      if(logicalHint && l.timeHint && l.timeHint === logicalHint) w *= boost;
      return w;
    });
    return weightedSample(pool, weights) || pool[0];
  }

  function escapeHtml(s){
    return s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
  }

  // レター描画
  function renderLetter(l){
    const isRare = ((l.rarity||"common")==="rare");
    rarityBadge.classList.toggle("rare", isRare);
    rarityBadge.textContent = isRare ? "💌 一通のことば（特別）" : "✉️ 一通のことば";
    timeTag.textContent = l.timeHint ? (l.timeHint==="night"?"夜向け":"朝向け") : "いつでも";

    textEl.textContent = l.text;

    tagsEl.innerHTML = "";
    if(Array.isArray(l.tags)){
      tagsEl.innerHTML = l.tags.slice(0,4).map(t=>`<span class="tag">#${escapeHtml(String(t))}</span>`).join("");
    }

    renderImage(l);
    letterBox.style.display = "";
    saveLast();
  }

  // ドロー（先に抽選→“特別”なら流星の色だけ静かに変える）
  async function doDraw(){
  const letter = pickLetter();
  if(!letter) return;

  const isRare = (letter.rarity||"common")==="rare";
  shootStar.classList.toggle("rare", isRare);

  // --- iPhone/Safari向け：再発火のためのリフロー & Reduce Motion配慮 ---
  const wrap = shootStar.parentElement;          // .shoot
  wrap.classList.remove("active","static");
  // 再計測でアニメを確実にリセット（Safari対策）
  void wrap.offsetWidth;

  const prefersReduce = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
  if(prefersReduce){
    wrap.classList.add("static");                // やさしい点灯のみ
    await new Promise(r=>setTimeout(r, 300));
    wrap.classList.remove("static");
  }else{
    wrap.classList.add("active");                // 走らせる
    await new Promise(r=>setTimeout(r, 900));    // アニメ時間＞CSSの12%～100%
    wrap.classList.remove("active");
  }

  renderLetter(letter);
}

  // ====== 初期ロード ======
  async function init(){
    try{
      const c = await fetch(URL_CONFIG, {cache:"no-store"}).then(r=>r.ok?r.json():null);
      if(c && typeof c==="object") CONFIG = {...CONFIG, ...c};
    }catch(e){}
    document.getElementById("boostVal").textContent = String((CONFIG.time_boost?.night)||1.5);
draw.textContent = CONFIG.button_label || "流れ星に祈る";

    try{
      const arr = await fetch(URL_LETTERS, {cache:"no-store"}).then(r=>r.ok?r.json():null);
      if(Array.isArray(arr)) LETTERS = arr;
    }catch(e){}
    if(!LETTERS.length){
      // フォールバック（拡張）
      LETTERS = [
  /* 自己肯定 */
  {"id":"star-self-01","text":"きみはもう、よくやってるよ。","tags":["自己肯定","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-self-02","text":"できない日も、きみはきみだよ。","tags":["自己肯定","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-self-03","text":"今日のきみも、ちゃんと愛しい。","tags":["自己肯定","やさしさ"],"rarity":"common","tone":"friend"},
  {"id":"star-self-04","text":"弱さが見えた？それで大丈夫。","tags":["自己肯定","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-self-05","text":"ここまで来たね、それがすごい。","tags":["自己肯定","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-self-06","text":"誰にも勝たなくていいよ。","tags":["自己肯定","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-self-07","text":"失敗あっても、価値は減らない。","tags":["自己肯定","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-self-08","text":"ため息、ここに置いてっていい。","tags":["自己肯定","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-self-09","text":"肩の力、すこし抜いていい。","tags":["自己肯定","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-self-10","text":"今日は生きてるだけでOK。","tags":["自己肯定","受容"],"rarity":"common","tone":"friend"},

  /* 不安 */
  {"id":"star-anx-01","text":"こわいね、わかるよ。そばにいる。","tags":["不安","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-anx-02","text":"未来はぼんやりで普通だよ。","tags":["不安","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-anx-03","text":"震えてても、きみは立派だよ。","tags":["不安","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-anx-04","text":"心配ばかりの夜、いっしょにいよう。","tags":["不安","夜向け"],"rarity":"common","tone":"friend"},
  {"id":"star-anx-05","text":"うまく言えなくていい、伝わってる。","tags":["不安","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-anx-06","text":"それ、きみのせいじゃないよ。","tags":["不安","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-anx-07","text":"小さく息して、小さく待とう。","tags":["不安","寄り添い"],"rarity":"common","tone":"friend"},

  /* 完璧主義 */
  {"id":"star-perf-01","text":"完璧じゃなくていい、きみでいい。","tags":["完璧主義","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-perf-02","text":"未完成のままでも、尊いよ。","tags":["完璧主義","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-perf-03","text":"間に合わなくても、嫌いにならない。","tags":["完璧主義","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-perf-04","text":"進めない夜も、仲間だよ。","tags":["完璧主義","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-perf-05","text":"ほつれた今日も、愛していい。","tags":["完璧主義","やさしさ"],"rarity":"common","tone":"friend"},
  {"id":"star-perf-06","text":"立ち止まってていい日もある。","tags":["完璧主義","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-perf-07","text":"60点で出して、次で磨こう。","tags":["完璧主義","励まし"],"rarity":"common","tone":"friend"},

  /* 比較 */
  {"id":"star-comp-01","text":"他の光は、きみを測るものじゃない。","tags":["比較","自己受容"],"rarity":"common","tone":"friend"},
  {"id":"star-comp-02","text":"画面は編集、きみは生の生活。","tags":["比較","自己受容"],"rarity":"common","tone":"friend"},
  {"id":"star-comp-03","text":"きみの速さが、きみのリズム。","tags":["比較","自己受容"],"rarity":"common","tone":"friend"},
  {"id":"star-comp-04","text":"うらやましさも、ちゃんと人間だよ。","tags":["比較","自己理解"],"rarity":"common","tone":"friend"},
  {"id":"star-comp-05","text":"今日は「昨日のきみ」だけを相手に。","tags":["比較","自己受容"],"rarity":"common","tone":"friend"},
  {"id":"star-comp-06","text":"無理に笑わなくていいよ。","tags":["比較","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-comp-07","text":"比べたくなる心も、抱いてていい。","tags":["比較","受容"],"rarity":"common","tone":"friend"},

  /* 再起 */
  {"id":"star-retry-01","text":"こけた場所、次の目印にしよ。","tags":["再起","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-retry-02","text":"うまくいかない日も、練習のうち。","tags":["再起","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-retry-03","text":"仮のままのきみも好きだよ。","tags":["再起","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-retry-04","text":"なくした分、手があくんだよ。","tags":["再起","やさしさ"],"rarity":"common","tone":"friend"},
  {"id":"star-retry-05","text":"やり直すきみ、かっこいいよ。","tags":["再起","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-retry-06","text":"戻らなくていい、ここからでいい。","tags":["再起","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-retry-07","text":"一歩でも、今日は十分だよ。","tags":["再起","励まし"],"rarity":"common","tone":"friend"},

  /* 孤独 */
  {"id":"star-solo-01","text":"ひとりに見えても、ここにいるよ。","tags":["孤独","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-solo-02","text":"返事がなくても、想ってる人はいる。","tags":["孤独","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-solo-03","text":"さみしいって言っていいよ。","tags":["孤独","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-solo-04","text":"きみの居場所、ちゃんとあるよ。","tags":["孤独","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-solo-05","text":"話したくなったら、いつでも聞く。","tags":["孤独","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-solo-06","text":"今日は無言でも、大丈夫だよ。","tags":["孤独","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-solo-07","text":"泣ける場所、ここにあるよ。","tags":["孤独","寄り添い"],"rarity":"common","tone":"friend"},

  /* 恋愛・人間関係 */
  {"id":"star-love-01","text":"好きの形、きみが決めていい。","tags":["恋愛","自己理解"],"rarity":"common","tone":"friend"},
  {"id":"star-love-02","text":"離れても、価値は減らないからね。","tags":["恋愛","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-love-03","text":"がんばりすぎないで、まず自分を。","tags":["恋愛","セルフケア"],"rarity":"common","tone":"friend"},
  {"id":"star-love-04","text":"合わないは悪じゃない、相性だよ。","tags":["恋愛","自己理解"],"rarity":"common","tone":"friend"},
  {"id":"star-love-05","text":"さようならのあとも、きみはきみ。","tags":["恋愛","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-love-06","text":"やさしさに、きみの分を残してね。","tags":["恋愛","境界"],"rarity":"common","tone":"friend"},

  /* 仕事・学業 */
  {"id":"star-work-01","text":"今日は疲れたね、それで当然だよ。","tags":["仕事","学業"],"rarity":"common","tone":"friend"},
  {"id":"star-work-02","text":"できた分だけで、充分えらい。","tags":["仕事","学業"],"rarity":"common","tone":"friend"},
  {"id":"star-work-03","text":"机に座れた？それだけで拍手。","tags":["仕事","学業"],"rarity":"common","tone":"friend"},
  {"id":"star-work-04","text":"予定どおりじゃなくても、OKだよ。","tags":["仕事","学業"],"rarity":"common","tone":"friend"},
  {"id":"star-work-05","text":"休むきみも、チームの一部だよ。","tags":["仕事","学業"],"rarity":"common","tone":"friend"},
  {"id":"star-work-06","text":"ちょっと嫌いになっても大丈夫。","tags":["仕事","学業"],"rarity":"common","tone":"friend"},
  {"id":"star-work-07","text":"今日は“ここまで”でえらい。","tags":["仕事","学業"],"rarity":"common","tone":"friend"},

  /* 夜向け（timeHint付与） */
  {"id":"star-night-01","text":"眠れない夜、いっしょにいるよ。","tags":["夜向け","寄り添い"],"rarity":"common","tone":"friend","timeHint":"night"},
  {"id":"star-night-02","text":"考え事は朝に預けていいよ。","tags":["夜向け","受容"],"rarity":"common","tone":"friend","timeHint":"night"},
  {"id":"star-night-03","text":"目を閉じるだけ、今日はそれでいい。","tags":["夜向け","受容"],"rarity":"common","tone":"friend","timeHint":"night"},
  {"id":"star-night-04","text":"起きてるきみを、責めないでね。","tags":["夜向け","受容"],"rarity":"common","tone":"friend","timeHint":"night"},
  {"id":"star-night-05","text":"しんどいって言えるきみ、強いよ。","tags":["夜向け","励まし"],"rarity":"common","tone":"friend","timeHint":"night"},
  {"id":"star-night-06","text":"月も残業中、きみだけじゃない。","tags":["夜向け","ユーモア"],"rarity":"common","tone":"friend","timeHint":"night"},
  {"id":"star-night-07","text":"眠れぬ夜も、朝は来るよ。","tags":["夜向け","希望"],"rarity":"common","tone":"friend","timeHint":"night"},

  /* 朝向け（timeHint付与） */
  {"id":"star-morn-01","text":"起きられたね、もうじゅうぶんえらい。","tags":["朝向け","励まし"],"rarity":"common","tone":"friend","timeHint":"morning"},
  {"id":"star-morn-02","text":"今日の白紙、雑でも大好きだよ。","tags":["朝向け","受容"],"rarity":"common","tone":"friend","timeHint":"morning"},
  {"id":"star-morn-03","text":"靴下は片方でも可愛いよ。","tags":["朝向け","ユーモア"],"rarity":"common","tone":"friend","timeHint":"morning"},
  {"id":"star-morn-04","text":"進まなくても、朝を迎えたきみが勝ち。","tags":["朝向け","励まし"],"rarity":"common","tone":"friend","timeHint":"morning"},
  {"id":"star-morn-05","text":"光を少し浴びよう。一緒に。","tags":["朝向け","励まし"],"rarity":"common","tone":"friend","timeHint":"morning"},

  /* レア（5%） */
  {"id":"star-rare-01","text":"ここまで来た勇気、もう揺らがないよ。","tags":["rare","自己肯定"],"rarity":"rare","tone":"friend"},
  {"id":"star-rare-02","text":"悲しみの分だけ、やさしさが広がってる。","tags":["rare","受容"],"rarity":"rare","tone":"friend"},
  {"id":"star-rare-03","text":"どこにも居場所がない日は、私がいる。","tags":["rare","寄り添い"],"rarity":"rare","tone":"friend"},
  {"id":"star-rare-04","text":"手放した手に、新しい風が入るよ。","tags":["rare","再起"],"rarity":"rare","tone":"friend"},
  {"id":"star-rare-05","text":"今日を越えたら、次の目印が見える。","tags":["rare","希望"],"rarity":"rare","tone":"friend"},
  {"id":"star-rare-06","text":"生き延びた日数ぶん、きみは強い。","tags":["rare","自己肯定"],"rarity":"rare","tone":"friend"},

  /* 罪悪感 */
  {"id":"star-guilt-01","text":"それ、ぜんぶ自分のせいじゃないよ。","tags":["罪悪感","慰め"],"rarity":"common","tone":"friend"},
  {"id":"star-guilt-02","text":"後悔してる時点で、もう十分やさしい。","tags":["罪悪感","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-guilt-03","text":"間違いは人間の色。きみは人間だよ。","tags":["罪悪感","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-guilt-04","text":"きびしさは少し置いていこう、ここでは。","tags":["罪悪感","寄り添い"],"rarity":"common","tone":"friend"},

  /* 怒り */
  {"id":"star-anger-01","text":"怒っていいよ。それは大事なサインだよ。","tags":["怒り","境界"],"rarity":"common","tone":"friend"},
  {"id":"star-anger-02","text":"きみの境界が傷んだんだね、わかる。","tags":["怒り","境界"],"rarity":"common","tone":"friend"},
  {"id":"star-anger-03","text":"いまは言葉にできなくて大丈夫。","tags":["怒り","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-anger-04","text":"ここでは安全。荒れた心も座っていていい。","tags":["怒り","寄り添い"],"rarity":"common","tone":"friend"},

  /* 選択 */
  {"id":"star-choice-01","text":"迷うのは、どれも大事にしたいからだよ。","tags":["選択","自己理解"],"rarity":"common","tone":"friend"},
  {"id":"star-choice-02","text":"正解はひとつじゃない。きみの時間でいい。","tags":["選択","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-choice-03","text":"どっちでも、きみの価値は変わらないよ。","tags":["選択","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-choice-04","text":"いま決めなくても、友だちは離れない。","tags":["選択","寄り添い"],"rarity":"common","tone":"friend"},

  /* 転機 */
  {"id":"star-change-01","text":"景色が変わると、心も揺れるよね。普通だよ。","tags":["転機","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-change-02","text":"なじむ前の居心地の悪さ、いっしょに持とう。","tags":["転機","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-change-03","text":"“はじめまして”の連続、よくやってるよ。","tags":["転機","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-change-04","text":"家みたいな場所は、あとからできる。","tags":["転機","希望"],"rarity":"common","tone":"friend"},

  /* 創作 */
  {"id":"star-create-01","text":"何も出ない日も、君の一部だよ。","tags":["創作","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-create-02","text":"好きの火は消えてない。灰の下で生きてる。","tags":["創作","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-create-03","text":"進んでなく見える時間も、芽の季節。","tags":["創作","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-create-04","text":"作品より先に、きみが大切だよ。","tags":["創作","セルフケア"],"rarity":"common","tone":"friend"},

  /* からだ */
  {"id":"star-body-01","text":"今日は体が重いね。責めなくていいよ。","tags":["からだ","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-body-02","text":"波みたいな日、きみは悪くない。","tags":["からだ","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-body-03","text":"しんどい体でここまで来た、それだけで立派。","tags":["からだ","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-body-04","text":"調子が悪い日は、世界の音が大きいよね。","tags":["からだ","寄り添い"],"rarity":"common","tone":"friend"},

  /* お金 */
  {"id":"star-money-01","text":"不安になるの、当然だよ。ひとりじゃない。","tags":["お金","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-money-02","text":"余裕がなくても、きみの価値は減らない。","tags":["お金","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-money-03","text":"心細さ、ここに置いていっていい。","tags":["お金","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-money-04","text":"先のことを心配できる時点で、もうえらいよ。","tags":["お金","励まし"],"rarity":"common","tone":"friend"},

  /* 家族 */
  {"id":"star-family-01","text":"近いからこそ、痛くなることってあるよね。","tags":["家族","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-family-02","text":"わかってほしいのに伝わらない、つらいよね。","tags":["家族","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-family-03","text":"その気持ち、ここでは否定しないよ。","tags":["家族","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-family-04","text":"きみの感じたことは本物だよ。","tags":["家族","受容"],"rarity":"common","tone":"friend"},

  /* ペット */
  {"id":"star-pet-01","text":"その子は、きみのやさしさで満たされてたよ。","tags":["ペット","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-pet-02","text":"会えなくても、あのぬくもりは消えない。","tags":["ペット","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-pet-03","text":"さみしいよね。ここで泣いていい。","tags":["ペット","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-pet-04","text":"思い出は、ずっと家にいるよ。","tags":["ペット","寄り添い"],"rarity":"common","tone":"friend"},

  /* 本番 */
  {"id":"star-stage-01","text":"緊張してるの、ちゃんと大事にしてる証拠だよ。","tags":["本番","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-stage-02","text":"震えるきみも、かっこいいよ。","tags":["本番","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-stage-03","text":"うまくいかなくても、きみは嫌いにならない。","tags":["本番","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-stage-04","text":"名前を呼ばれるだけで、よく来たねって思う。","tags":["本番","寄り添い"],"rarity":"common","tone":"friend"},

  /* 境界 */
  {"id":"star-border-01","text":"NOって言えるきみ、立派だよ。","tags":["境界","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-border-02","text":"嫌だった気持ち、ここでは尊重される。","tags":["境界","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-border-03","text":"断っても、やさしさはなくならない。","tags":["境界","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-border-04","text":"きみのスペースは、大切にしていい。","tags":["境界","セルフケア"],"rarity":"common","tone":"friend"},

  /* 季節 */
  {"id":"star-season-01","text":"光が少ない季節、元気も小さくて普通だよ。","tags":["季節","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-season-02","text":"雨の日の心は、濡れてて当たり前。","tags":["季節","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-season-03","text":"春待ちのあいだ、いっしょに灯を持とう。","tags":["季節","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-season-04","text":"冬のきみも、大切なきみだよ。","tags":["季節","受容"],"rarity":"common","tone":"friend"},
  
  /* 自己肯定 */
 {"id":"star-self-01","text":"きみはもう、よくやってるよ。","tags":["自己肯定","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-self-02","text":"できない日も、きみはきみだよ。","tags":["自己肯定","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-self-03","text":"今日のきみも、ちゃんと愛しい。","tags":["自己肯定","やさしさ"],"rarity":"common","tone":"friend"},
  {"id":"star-self-04","text":"弱さが見えた？それで大丈夫。","tags":["自己肯定","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-self-05","text":"ここまで来たね、それがすごい。","tags":["自己肯定","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-self-06","text":"誰にも勝たなくていいよ。","tags":["自己肯定","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-self-07","text":"失敗あっても、価値は減らない。","tags":["自己肯定","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-self-08","text":"ため息、ここに置いてっていい。","tags":["自己肯定","寄り添い"],"rarity":"common","tone":"friend"},

  /* 不安 */
  {"id":"star-anx-01","text":"こわいね、わかるよ。そばにいる。","tags":["不安","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-anx-02","text":"未来はぼんやりで普通だよ。","tags":["不安","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-anx-03","text":"震えてても、きみは立派だよ。","tags":["不安","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-anx-04","text":"心配ばかりの夜、いっしょにいよう。","tags":["不安","夜向け"],"rarity":"common","tone":"friend"},
  {"id":"star-anx-05","text":"うまく言えなくていい、伝わってる。","tags":["不安","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-anx-06","text":"それ、きみのせいじゃないよ。","tags":["不安","受容"],"rarity":"common","tone":"friend"},

  /* 完璧主義 */
  {"id":"star-perf-01","text":"完璧じゃなくていい、きみでいい。","tags":["完璧主義","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-perf-02","text":"未完成のままでも、尊いよ。","tags":["完璧主義","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-perf-03","text":"間に合わなくても、嫌いにならない。","tags":["完璧主義","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-perf-04","text":"進めない夜も、仲間だよ。","tags":["完璧主義","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-perf-05","text":"ほつれた今日も、愛していい。","tags":["完璧主義","やさしさ"],"rarity":"common","tone":"friend"},
  {"id":"star-perf-06","text":"立ち止まってていい日もある。","tags":["完璧主義","受容"],"rarity":"common","tone":"friend"},

  /* 比較 */
  {"id":"star-comp-01","text":"他の光は、きみを測るものじゃない。","tags":["比較","自己受容"],"rarity":"common","tone":"friend"},
  {"id":"star-comp-02","text":"画面は編集、きみは生の生活。","tags":["比較","自己受容"],"rarity":"common","tone":"friend"},
  {"id":"star-comp-03","text":"きみの速さが、きみのリズム。","tags":["比較","自己受容"],"rarity":"common","tone":"friend"},
  {"id":"star-comp-04","text":"うらやましさも、ちゃんと人間だよ。","tags":["比較","自己理解"],"rarity":"common","tone":"friend"},
  {"id":"star-comp-05","text":"今日は「昨日のきみ」だけを相手に。","tags":["比較","自己受容"],"rarity":"common","tone":"friend"},
  {"id":"star-comp-06","text":"無理に笑わなくていいよ。","tags":["比較","受容"],"rarity":"common","tone":"friend"},

  /* 再起 */
  {"id":"star-retry-01","text":"こけた場所、次の目印にしよ。","tags":["再起","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-retry-02","text":"うまくいかない日も、練習のうち。","tags":["再起","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-retry-03","text":"仮のままのきみも好きだよ。","tags":["再起","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-retry-04","text":"なくした分、手があくんだよ。","tags":["再起","やさしさ"],"rarity":"common","tone":"friend"},
  {"id":"star-retry-05","text":"やり直すきみ、かっこいいよ。","tags":["再起","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-retry-06","text":"戻らなくていい、ここからでいい。","tags":["再起","受容"],"rarity":"common","tone":"friend"},

  /* 孤独 */
  {"id":"star-solo-01","text":"ひとりに見えても、ここにいるよ。","tags":["孤独","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-solo-02","text":"返事がなくても、想ってる人はいる。","tags":["孤独","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-solo-03","text":"さみしいって言っていいよ。","tags":["孤独","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-solo-04","text":"きみの居場所、ちゃんとあるよ。","tags":["孤独","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-solo-05","text":"話したくなったら、いつでも聞く。","tags":["孤独","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-solo-06","text":"今日は無言でも、大丈夫だよ。","tags":["孤独","受容"],"rarity":"common","tone":"friend"},

  /* 恋愛・人間関係 */
  {"id":"star-love-01","text":"好きの形、きみが決めていい。","tags":["恋愛","自己理解"],"rarity":"common","tone":"friend"},
  {"id":"star-love-02","text":"離れても、価値は減らないからね。","tags":["恋愛","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-love-03","text":"がんばりすぎないで、まず自分を。","tags":["恋愛","セルフケア"],"rarity":"common","tone":"friend"},
  {"id":"star-love-04","text":"合わないは悪じゃない、相性だよ。","tags":["恋愛","自己理解"],"rarity":"common","tone":"friend"},
  {"id":"star-love-05","text":"さようならのあとも、きみはきみ。","tags":["恋愛","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-love-06","text":"やさしさに、きみの分を残してね。","tags":["恋愛","境界"],"rarity":"common","tone":"friend"},

  /* 仕事・学業 */
  {"id":"star-work-01","text":"今日は疲れたね、それで当然だよ。","tags":["仕事","学業"],"rarity":"common","tone":"friend"},
  {"id":"star-work-02","text":"できた分だけで、充分えらい。","tags":["仕事","学業"],"rarity":"common","tone":"friend"},
  {"id":"star-work-03","text":"机に座れた？それだけで拍手。","tags":["仕事","学業"],"rarity":"common","tone":"friend"},
  {"id":"star-work-04","text":"予定どおりじゃなくても、OKだよ。","tags":["仕事","学業"],"rarity":"common","tone":"friend"},
  {"id":"star-work-05","text":"休むきみも、チームの一部だよ。","tags":["仕事","学業"],"rarity":"common","tone":"friend"},
  {"id":"star-work-06","text":"ちょっと嫌いになっても大丈夫。","tags":["仕事","学業"],"rarity":"common","tone":"friend"},

  /* 夜向け（timeHint付与） */
  {"id":"star-night-01","text":"眠れない夜、いっしょにいるよ。","tags":["夜向け","寄り添い"],"rarity":"common","tone":"friend","timeHint":"night"},
  {"id":"star-night-02","text":"考え事は朝に預けていいよ。","tags":["夜向け","受容"],"rarity":"common","tone":"friend","timeHint":"night"},
  {"id":"star-night-03","text":"目を閉じるだけ、今日はそれでいい。","tags":["夜向け","受容"],"rarity":"common","tone":"friend","timeHint":"night"},
  {"id":"star-night-04","text":"起きてるきみを、責めないでね。","tags":["夜向け","受容"],"rarity":"common","tone":"friend","timeHint":"night"},
  {"id":"star-night-05","text":"しんどいって言えるきみ、強いよ。","tags":["夜向け","励まし"],"rarity":"common","tone":"friend","timeHint":"night"},
  {"id":"star-night-06","text":"月も残業中、きみだけじゃない。","tags":["夜向け","ユーモア"],"rarity":"common","tone":"friend","timeHint":"night"},

  /* 朝向け（timeHint付与） */
  {"id":"star-morn-01","text":"起きられたね、もうじゅうぶんえらい。","tags":["朝向け","励まし"],"rarity":"common","tone":"friend","timeHint":"morning"},
  {"id":"star-morn-02","text":"今日の白紙、雑でも大好きだよ。","tags":["朝向け","受容"],"rarity":"common","tone":"friend","timeHint":"morning"},
  {"id":"star-morn-03","text":"靴下は片方でも可愛いよ。","tags":["朝向け","ユーモア"],"rarity":"common","tone":"friend","timeHint":"morning"},
  {"id":"star-morn-04","text":"進まなくても、朝を迎えたきみが勝ち。","tags":["朝向け","励まし"],"rarity":"common","tone":"friend","timeHint":"morning"},

  /* レア（5%） */
  {"id":"star-rare-01","text":"ここまで来た勇気、もう揺らがないよ。","tags":["rare","自己肯定"],"rarity":"rare","tone":"friend"},
  {"id":"star-rare-02","text":"悲しみの分だけ、やさしさが広がってる。","tags":["rare","受容"],"rarity":"rare","tone":"friend"},
  {"id":"star-rare-03","text":"どこにも居場所がない日は、私がいる。","tags":["rare","寄り添い"],"rarity":"rare","tone":"friend"},
  {"id":"star-rare-04","text":"手放した手に、新しい風が入るよ。","tags":["rare","再起"],"rarity":"rare","tone":"friend"},
  {"id":"star-rare-05","text":"今日を越えたら、次の目印が見える。","tags":["rare","希望"],"rarity":"rare","tone":"friend"},
  {"id":"star-rare-06","text":"生き延びた日数ぶん、きみは強い。","tags":["rare","自己肯定"],"rarity":"rare","tone":"friend"},

  /* 罪悪感 */
  {"id":"star-guilt-01","text":"それ、ぜんぶ自分のせいじゃないよ。","tags":["罪悪感","慰め"],"rarity":"common","tone":"friend"},
  {"id":"star-guilt-02","text":"後悔してる時点で、もう十分やさしい。","tags":["罪悪感","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-guilt-03","text":"間違いは人間の色。きみは人間だよ。","tags":["罪悪感","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-guilt-04","text":"きびしさは少し置いていこう、ここでは。","tags":["罪悪感","寄り添い"],"rarity":"common","tone":"friend"},

  /* 怒り */
  {"id":"star-anger-01","text":"怒っていいよ。それは大事なサインだよ。","tags":["怒り","境界"],"rarity":"common","tone":"friend"},
  {"id":"star-anger-02","text":"きみの境界が傷んだんだね、わかる。","tags":["怒り","境界"],"rarity":"common","tone":"friend"},
  {"id":"star-anger-03","text":"いまは言葉にできなくて大丈夫。","tags":["怒り","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-anger-04","text":"ここでは安全。荒れた心も座っていていい。","tags":["怒り","寄り添い"],"rarity":"common","tone":"friend"},

  /* 選択 */
  {"id":"star-choice-01","text":"迷うのは、どれも大事にしたいからだよ。","tags":["選択","自己理解"],"rarity":"common","tone":"friend"},
  {"id":"star-choice-02","text":"正解はひとつじゃない。きみの時間でいい。","tags":["選択","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-choice-03","text":"どっちでも、きみの価値は変わらないよ。","tags":["選択","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-choice-04","text":"いま決めなくても、友だちは離れない。","tags":["選択","寄り添い"],"rarity":"common","tone":"friend"},

  /* 転機 */
  {"id":"star-change-01","text":"景色が変わると、心も揺れるよね。普通だよ。","tags":["転機","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-change-02","text":"なじむ前の居心地の悪さ、いっしょに持とう。","tags":["転機","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-change-03","text":"“はじめまして”の連続、よくやってるよ。","tags":["転機","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-change-04","text":"家みたいな場所は、あとからできる。","tags":["転機","希望"],"rarity":"common","tone":"friend"},

  /* 創作 */
  {"id":"star-create-01","text":"何も出ない日も、君の一部だよ。","tags":["創作","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-create-02","text":"好きの火は消えてない。灰の下で生きてる。","tags":["創作","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-create-03","text":"進んでなく見える時間も、芽の季節。","tags":["創作","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-create-04","text":"作品より先に、きみが大切だよ。","tags":["創作","セルフケア"],"rarity":"common","tone":"friend"},

  /* からだ */
  {"id":"star-body-01","text":"今日は体が重いね。責めなくていいよ。","tags":["からだ","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-body-02","text":"波みたいな日、きみは悪くない。","tags":["からだ","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-body-03","text":"しんどい体でここまで来た、それだけで立派。","tags":["からだ","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-body-04","text":"調子が悪い日は、世界の音が大きいよね。","tags":["からだ","寄り添い"],"rarity":"common","tone":"friend"},

  /* お金 */
  {"id":"star-money-01","text":"不安になるの、当然だよ。ひとりじゃない。","tags":["お金","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-money-02","text":"余裕がなくても、きみの価値は減らない。","tags":["お金","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-money-03","text":"心細さ、ここに置いていっていい。","tags":["お金","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-money-04","text":"先のことを心配できる時点で、もうえらいよ。","tags":["お金","励まし"],"rarity":"common","tone":"friend"},

  /* 家族 */
  {"id":"star-family-01","text":"近いからこそ、痛くなることってあるよね。","tags":["家族","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-family-02","text":"わかってほしいのに伝わらない、つらいよね。","tags":["家族","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-family-03","text":"その気持ち、ここでは否定しないよ。","tags":["家族","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-family-04","text":"きみの感じたことは本物だよ。","tags":["家族","受容"],"rarity":"common","tone":"friend"},

  /* ペット */
  {"id":"star-pet-01","text":"その子は、きみのやさしさで満たされてたよ。","tags":["ペット","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-pet-02","text":"会えなくても、あのぬくもりは消えない。","tags":["ペット","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-pet-03","text":"さみしいよね。ここで泣いていい。","tags":["ペット","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-pet-04","text":"思い出は、ずっと家にいるよ。","tags":["ペット","寄り添い"],"rarity":"common","tone":"friend"},

  /* 本番 */
  {"id":"star-stage-01","text":"緊張してるの、ちゃんと大事にしてる証拠だよ。","tags":["本番","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-stage-02","text":"震えるきみも、かっこいいよ。","tags":["本番","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-stage-03","text":"うまくいかなくても、きみは嫌いにならない。","tags":["本番","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-stage-04","text":"名前を呼ばれるだけで、よく来たねって思う。","tags":["本番","寄り添い"],"rarity":"common","tone":"friend"},

  /* 境界 */
  {"id":"star-border-01","text":"NOって言えるきみ、立派だよ。","tags":["境界","励まし"],"rarity":"common","tone":"friend"},
  {"id":"star-border-02","text":"嫌だった気持ち、ここでは尊重される。","tags":["境界","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-border-03","text":"断っても、やさしさはなくならない。","tags":["境界","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-border-04","text":"きみのスペースは、大切にしていい。","tags":["境界","セルフケア"],"rarity":"common","tone":"friend"},

  /* 季節 */
  {"id":"star-season-01","text":"光が少ない季節、元気も小さくて普通だよ。","tags":["季節","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-season-02","text":"雨の日の心は、濡れてて当たり前。","tags":["季節","受容"],"rarity":"common","tone":"friend"},
  {"id":"star-season-03","text":"春待ちのあいだ、いっしょに灯を持とう。","tags":["季節","寄り添い"],"rarity":"common","tone":"friend"},
  {"id":"star-season-04","text":"冬のきみも、大切なきみだよ。","tags":["季節","受容"],"rarity":"common","tone":"friend"}
  ,/* ==== 追加パック（共感・受容・励まし / 50通） ==== */
/* 自己肯定（+2） */
{"id":"star-extra-self-01","text":"小さな一歩、ちゃんと前だよ。","tags":["自己肯定","励まし"],"rarity":"common","tone":"friend"},
{"id":"star-extra-self-02","text":"今日は生き抜いた、それで十分。","tags":["自己肯定","受容"],"rarity":"common","tone":"friend"},

/* 不安（+2） */
{"id":"star-extra-anx-01","text":"考えすぎた心、ここで休ませよう。","tags":["不安","寄り添い"],"rarity":"common","tone":"friend","timeHint":"night"},
{"id":"star-extra-anx-02","text":"ぜんぶ決めなくていい、今は。","tags":["不安","受容"],"rarity":"common","tone":"friend"},

/* 完璧主義（+2） */
{"id":"star-extra-perf-01","text":"80点で出して、あとで磨こ。","tags":["完璧主義","励まし"],"rarity":"common","tone":"friend"},
{"id":"star-extra-perf-02","text":"ゆるんだ糸、今日は結ばなくていい。","tags":["完璧主義","受容"],"rarity":"common","tone":"friend"},

/* 比較（+2） */
{"id":"star-extra-comp-01","text":"よそはよそ、きみはきみの速さで。","tags":["比較","受容"],"rarity":"common","tone":"friend"},
{"id":"star-extra-comp-02","text":"光に目が慣れたら、きみの色が見える。","tags":["比較","やさしさ"],"rarity":"common","tone":"friend"},

/* 再起（+2） */
{"id":"star-extra-retry-01","text":"昨日のこけ方、もう上手になってる。","tags":["再起","励まし"],"rarity":"common","tone":"friend"},
{"id":"star-extra-retry-02","text":"やり直しは敗北じゃない、呼吸だよ。","tags":["再起","受容"],"rarity":"common","tone":"friend"},

/* 孤独（+2） */
{"id":"star-extra-lonely-01","text":"静かな部屋にも、味方はいるよ。","tags":["孤独","寄り添い"],"rarity":"common","tone":"friend","timeHint":"night"},
{"id":"star-extra-lonely-02","text":"言葉にならないなら、うなずくだけでいい。","tags":["孤独","受容"],"rarity":"common","tone":"friend"},

/* 恋愛・人間関係（+2） */
{"id":"star-extra-love-01","text":"優しさは、まず自分のぶんもね。","tags":["恋愛","寄り添い"],"rarity":"common","tone":"friend"},
{"id":"star-extra-love-02","text":"合わないは失敗じゃない、発見だよ。","tags":["恋愛","受容"],"rarity":"common","tone":"friend"},

/* 仕事・学業（+2） */
{"id":"star-extra-work-01","text":"一行だけ進めた？それで大進歩。","tags":["仕事","学業","励まし"],"rarity":"common","tone":"friend"},
{"id":"star-extra-work-02","text":"今日は『やめ時が上手』で花丸。","tags":["仕事","学業","受容"],"rarity":"common","tone":"friend"},

/* 夜向け（+2） */
{"id":"star-extra-night-01","text":"眠れない夜を、生きてるだけでえらい。","tags":["夜向け","寄り添い"],"rarity":"common","tone":"friend","timeHint":"night"},
{"id":"star-extra-night-02","text":"考え事は、月に一晩あずけよう。","tags":["夜向け","受容"],"rarity":"common","tone":"friend","timeHint":"night"},

/* 朝向け（+2） */
{"id":"star-extra-morn-01","text":"顔を洗えた？十分なスタート。","tags":["朝向け","励まし"],"rarity":"common","tone":"friend","timeHint":"morning"},
{"id":"star-extra-morn-02","text":"白紙の今日、落書きからでOK。","tags":["朝向け","受容"],"rarity":"common","tone":"friend","timeHint":"morning"},

/* 罪悪感（+2） */
{"id":"star-extra-guilt-01","text":"反省できる心、もう優しい証拠だよ。","tags":["罪悪感","寄り添い"],"rarity":"common","tone":"friend"},
{"id":"star-extra-guilt-02","text":"ぜんぶ背負わなくていい、分け合おう。","tags":["罪悪感","受容"],"rarity":"common","tone":"friend"},

/* 怒り（+2） */
{"id":"star-extra-anger-01","text":"怒りは境界のSOS、無視しないでね。","tags":["怒り","寄り添い"],"rarity":"common","tone":"friend"},
{"id":"star-extra-anger-02","text":"言葉はあとでいい、今は呼吸から。","tags":["怒り","受容"],"rarity":"common","tone":"friend"},

/* 選択（+2） */
{"id":"star-extra-choice-01","text":"どっちも大事なら、どっちも少しずつ。","tags":["選択","慰め"],"rarity":"common","tone":"friend"},
{"id":"star-extra-choice-02","text":"保留は逃げじゃない、整える時間。","tags":["選択","受容"],"rarity":"common","tone":"friend"},

/* 転機（+2） */
{"id":"star-extra-shift-01","text":"慣れない痛みは、芽が出る前触れ。","tags":["転機","寄り添い"],"rarity":"common","tone":"friend"},
{"id":"star-extra-shift-02","text":"仮住まいでも、ここに灯はともるよ。","tags":["転機","慰め"],"rarity":"common","tone":"friend"},

/* 創作（+2） */
{"id":"star-extra-create-01","text":"空白も材料、今日は集める日。","tags":["創作","励まし"],"rarity":"common","tone":"friend"},
{"id":"star-extra-create-02","text":"好きの火、灰の下でちゃんと生きてる。","tags":["創作","受容"],"rarity":"common","tone":"friend"},

/* からだ（+2） */
{"id":"star-extra-body-01","text":"重い体を運んだね、偉業だよ。","tags":["からだ","寄り添い"],"rarity":"common","tone":"friend"},
{"id":"star-extra-body-02","text":"世界がうるさい日は、耳を休ませよう。","tags":["からだ","受容"],"rarity":"common","tone":"friend"},

/* お金（+2） */
{"id":"star-extra-money-01","text":"不安は普通、ひとりで抱えなくていい。","tags":["お金","慰め"],"rarity":"common","tone":"friend"},
{"id":"star-extra-money-02","text":"価値は残高じゃ測れないよ。","tags":["お金","受容"],"rarity":"common","tone":"friend"},

/* 家族（+2） */
{"id":"star-extra-family-01","text":"近いほど痛む、その気持ちわかる。","tags":["家族","寄り添い"],"rarity":"common","tone":"friend"},
{"id":"star-extra-family-02","text":"わかってほしい願い、ここでは否定しない。","tags":["家族","受容"],"rarity":"common","tone":"friend"},

/* ペット（+2） */
{"id":"star-extra-pet-01","text":"ぬくもりは消えない、心に住んでる。","tags":["ペット","慰め"],"rarity":"common","tone":"friend"},
{"id":"star-extra-pet-02","text":"一緒の時間、あの子は幸せだったよ。","tags":["ペット","寄り添い"],"rarity":"common","tone":"friend"},

/* 本番（+2） */
{"id":"star-extra-stage-01","text":"震える手も、味方につけていこう。","tags":["本番","励まし"],"rarity":"common","tone":"friend"},
{"id":"star-extra-stage-02","text":"結果より、ここに来た勇気に拍手。","tags":["本番","受容"],"rarity":"common","tone":"friend"},

/* 境界（+2） */
{"id":"star-extra-bound-01","text":"NOを言えたね、よく守れた。","tags":["境界","励まし"],"rarity":"common","tone":"friend"},
{"id":"star-extra-bound-02","text":"断っても、やさしさは減らないよ。","tags":["境界","受容"],"rarity":"common","tone":"friend"},

/* 季節（+2） */
{"id":"star-extra-season-01","text":"曇り空の日は、心もふわっとでいい。","tags":["季節","慰め"],"rarity":"common","tone":"friend"},
{"id":"star-extra-season-02","text":"冬の静けさ、休む練習に使おう。","tags":["季節","受容"],"rarity":"common","tone":"friend"},

/* レア（+6 / 既存に追加） */
{"id":"star-extra-rare-01","text":"何度目の夜でも、明け方は来るよ。","tags":["rare","再起"],"rarity":"rare","tone":"friend"},
{"id":"star-extra-rare-02","text":"泣いていい夜がある、そして進める朝が来る。","tags":["rare","夜向け"],"rarity":"rare","tone":"friend","timeHint":"night"},
{"id":"star-extra-rare-03","text":"手放したぶん、軽く跳べる。","tags":["rare","転機"],"rarity":"rare","tone":"friend"},
{"id":"star-extra-rare-04","text":"今日の勇気は、未来の君の灯台になる。","tags":["rare","自己肯定"],"rarity":"rare","tone":"friend"},
{"id":"star-extra-rare-05","text":"ここまでの全部を連れて、次のドアへ。","tags":["rare","再起"],"rarity":"rare","tone":"friend"},
{"id":"star-extra-rare-06","text":"生き延びた日数ぶん、君は強い。","tags":["rare","自己肯定"],"rarity":"rare","tone":"friend"}
,/* ==== 追加パック02（40通） ==== */
/* 自己肯定（+4） */
{"id":"star-pack2-self-01","text":"小さな前進、ちゃんと前だよ。","tags":["自己肯定","励まし"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-self-02","text":"休めたなら、それも成果。","tags":["自己肯定","受容"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-self-03","text":"今日の君でいてくれて、うれしい。","tags":["自己肯定","やさしさ"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-self-04","text":"がんばれない日も、仲間だよ。","tags":["自己肯定","受容"],"rarity":"common","tone":"friend"},

/* 不安（+4） */
{"id":"star-pack2-anx-01","text":"怖さの中でも、呼吸は味方。","tags":["不安","寄り添い"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-anx-02","text":"結論は急がなくていいよ。","tags":["不安","受容"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-anx-03","text":"心配の波、いっしょにやり過ごそう。","tags":["不安","寄り添い"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-anx-04","text":"大丈夫を探すより、楽を探そう。","tags":["不安","セルフケア"],"rarity":"common","tone":"friend"},

/* 完璧主義（+3） */
{"id":"star-pack2-perf-01","text":"雑でも提出、未来の自分が助かる。","tags":["完璧主義","励まし"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-perf-02","text":"欠けたところも、作品の一部。","tags":["完璧主義","受容"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-perf-03","text":"今日は“やめ時が上手”で花丸。","tags":["完璧主義","セルフケア"],"rarity":"common","tone":"friend"},

/* 比較（+3） */
{"id":"star-pack2-comp-01","text":"光の強さじゃなく、色でいこう。","tags":["比較","自己受容"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-comp-02","text":"誰かの地図は、君の地図じゃない。","tags":["比較","自己理解"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-comp-03","text":"遅く見える日は、深く育ってる日。","tags":["比較","受容"],"rarity":"common","tone":"friend"},

/* 再起（+3） */
{"id":"star-pack2-retry-01","text":"転んだ跡は、次の踏み台。","tags":["再起","励まし"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-retry-02","text":"戻らなくていい、曲がり角でOK。","tags":["再起","受容"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-retry-03","text":"続けられない日は、続けない勇気。","tags":["再起","セルフケア"],"rarity":"common","tone":"friend"},

/* 孤独（+3） */
{"id":"star-pack2-solo-01","text":"声が出ない夜は、隣で黙ってる。","tags":["孤独","寄り添い","夜向け"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-solo-02","text":"既読も返信もなくていい時間。","tags":["孤独","受容"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-solo-03","text":"連絡先より、つながりは深いところにある。","tags":["孤独","希望"],"rarity":"common","tone":"friend"},

/* 恋愛・人間関係（+3） */
{"id":"star-pack2-love-01","text":"優しさは配りすぎず、自分にも。","tags":["恋愛","境界"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-love-02","text":"合わないは悪じゃない、相性。","tags":["恋愛","自己理解"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-love-03","text":"離れても、君の価値は動かない。","tags":["恋愛","受容"],"rarity":"common","tone":"friend"},

/* 仕事・学業（+3） */
{"id":"star-pack2-work-01","text":"五分だけやって、やめてもいい。","tags":["仕事","学業","励まし"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-work-02","text":"できた分に丸をつけよう。","tags":["仕事","学業","受容"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-work-03","text":"今日は“始めた人”として合格。","tags":["仕事","学業","励まし"],"rarity":"common","tone":"friend"},

/* 夜向け（+3｜timeHint: night） */
{"id":"star-pack2-night-01","text":"眠れない夜を生きてる、それだけで偉い。","tags":["夜向け","寄り添い"],"rarity":"common","tone":"friend","timeHint":"night"},
{"id":"star-pack2-night-02","text":"考え事は月に預けて、体だけ休もう。","tags":["夜向け","受容"],"rarity":"common","tone":"friend","timeHint":"night"},
{"id":"star-pack2-night-03","text":"明け方は来る、今日も。","tags":["夜向け","希望"],"rarity":"common","tone":"friend","timeHint":"night"},

/* 朝向け（+3｜timeHint: morning） */
{"id":"star-pack2-morn-01","text":"起きられたら合格、そこからでいい。","tags":["朝向け","励まし"],"rarity":"common","tone":"friend","timeHint":"morning"},
{"id":"star-pack2-morn-02","text":"白紙の今日、落書きから始めよう。","tags":["朝向け","受容"],"rarity":"common","tone":"friend","timeHint":"morning"},
{"id":"star-pack2-morn-03","text":"朝の一口の水でスタート。","tags":["朝向け","セルフケア"],"rarity":"common","tone":"friend","timeHint":"morning"},

/* 罪悪感（+2） */
{"id":"star-pack2-guilt-01","text":"責める声は小さく、息を大きく。","tags":["罪悪感","寄り添い"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-guilt-02","text":"反省できる時点で優しい人だよ。","tags":["罪悪感","受容"],"rarity":"common","tone":"friend"},

/* 怒り（+2） */
{"id":"star-pack2-anger-01","text":"怒りはSOS、無視しないでね。","tags":["怒り","境界"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-anger-02","text":"言葉はあと、まず体を落ち着かせよう。","tags":["怒り","セルフケア"],"rarity":"common","tone":"friend"},

/* 選択（+2） */
{"id":"star-pack2-choice-01","text":"保留は逃げじゃない、整える時間。","tags":["選択","受容"],"rarity":"common","tone":"friend"},
{"id":"star-pack2-choice-02","text":"どっちでも、君の価値は変わらない。","tags":["選択","受容"],"rarity":"common","tone":"friend"},

/* レア（+4） */
{"id":"star-pack2-rare-01","text":"今日の勇気は、未来の君を照らす灯台。","tags":["rare","自己肯定"],"rarity":"rare","tone":"friend"},
{"id":"star-pack2-rare-02","text":"泣いたぶんだけ、優しくなれる。","tags":["rare","受容"],"rarity":"rare","tone":"friend"},
{"id":"star-pack2-rare-03","text":"何度でも、ここから始められるよ。","tags":["rare","再起"],"rarity":"rare","tone":"friend"},
{"id":"star-pack2-rare-04","text":"全部連れて、次のドアへ。","tags":["rare","転機"],"rarity":"rare","tone":"friend"}
/* ==== 追加パック02ここまで ==== */
/* ==== 追加パックここまで ==== */
];


    draw.textContent = CONFIG.button_label || "流れ星に祈る";
    saveLast();
  }
}
  draw.addEventListener("click", doDraw, false);
  document.getElementById("backLink")?.addEventListener("click", saveLast);

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", init, {once:true});
  } else {
    init();
  }
})();
</script>
</body>
</html>
