<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>ã‚¯ãƒªã‚¹ãƒã‚¹ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆï½œã‚¹ãƒ­ãƒƒãƒˆæŠ½é¸ï¼ˆ10ç¨®ï¼‹ãƒã‚ºãƒ¬ï¼‰</title>
  <meta name="description" content="æŠ¼ã™ãŸã³æŠ½é¸ã€‚å‹•ç‰©ãƒ¡ã‚¿ãƒ•ã‚¡ã®â€œä»Šæ—¥ã®ä¸€æ‰‹â€ãŒ1ã¤å‡ºã‚‹ã€‚å‹•ç‰©3ã¤æƒã„ã§å½“ãŸã‚Šã€‚">
  <meta name="theme-color" content="#fff4ec">

  <meta property="og:type" content="website">
  <meta property="og:title" content="ã‚¯ãƒªã‚¹ãƒã‚¹ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ">
  <meta property="og:description" content="æŠ¼ã™ãŸã³æŠ½é¸ï¼š10ç¨®ï¼‹ãƒã‚ºãƒ¬ã€‚å‹•ç‰©3ã¤æƒã„ã§å½“ãŸã‚Šã€‚">
  <meta property="og:url" content="https://haisuikounozarigani.github.io/shindan/christmas-present.html">
  <meta property="og:image" content="https://haisuikounozarigani.github.io/shindan/assets/results/christmas-present/t00.webp">
  <meta name="twitter:card" content="summary">

  <style>
    :root{
      --bg:#fff7f1;
      --panel:rgba(255,255,255,.92);
      --ink:#111;
      --muted:#444;
      --line:rgba(0,0,0,.12);

      --a1:#ff2f4f;
      --a2:#2ecc71;
      --a3:#ffd06b;
      --a4:#1fc8ff;

      --shadow:0 16px 42px rgba(0,0,0,.18);
      --r:18px;
      --r2:26px;

      --comicDot: rgba(0,0,0,.045);
      --comicDot2: rgba(0,0,0,.028);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Hiragino Sans", "Noto Sans JP", "Yu Gothic", "Meiryo", sans-serif;
      color:var(--ink);
      line-height:1.6;

      /* æ¼«ç”»ã£ã½ã„: ãƒãƒ¼ãƒ•ãƒˆãƒ¼ãƒ³ï¼‹å¼·ã‚å…‰ */
      background:
        radial-gradient(900px 520px at 12% -10%, rgba(255,47,79,.20), transparent 62%),
        radial-gradient(900px 520px at 92% 0%, rgba(46,204,113,.18), transparent 60%),
        radial-gradient(1000px 520px at 70% 110%, rgba(31,200,255,.14), transparent 60%),
        radial-gradient(1200px 700px at 40% 120%, rgba(255,208,107,.16), transparent 58%),

        radial-gradient(2px 2px at 12% 18%, rgba(255,255,255,.95) 40%, transparent 45%),
        radial-gradient(2px 2px at 32% 38%, rgba(255,255,255,.80) 40%, transparent 45%),
        radial-gradient(2px 2px at 62% 22%, rgba(255,255,255,.88) 40%, transparent 45%),
        radial-gradient(2px 2px at 82% 48%, rgba(255,255,255,.74) 40%, transparent 45%),
        radial-gradient(2px 2px at 52% 72%, rgba(255,255,255,.82) 40%, transparent 45%),

        /* ãƒãƒ¼ãƒ•ãƒˆãƒ¼ãƒ³ */
        radial-gradient(circle at 0 0, var(--comicDot) 0 1px, transparent 1px 6px),
        radial-gradient(circle at 3px 3px, var(--comicDot2) 0 1px, transparent 1px 6px),

        var(--bg);
      background-size:
        auto,auto,auto,auto,
        auto,auto,auto,auto,auto,
        12px 12px, 12px 12px,
        auto;
    }

    .wrap{max-width:980px;margin:0 auto;padding:16px 14px 70px}

    header{
      padding:10px 4px 8px;
      display:flex; flex-wrap:wrap; gap:10px;
      align-items:flex-end; justify-content:space-between;
    }
    .ttlbox{min-width:260px}
    .kicker{
      display:inline-flex; gap:8px; align-items:center;
      font-size:12px; color:var(--muted);
      padding:6px 10px;
      border:2px solid rgba(0,0,0,.18);
      border-radius:999px;
      background:rgba(255,255,255,.82);
      box-shadow:0 10px 22px rgba(0,0,0,.12);
      backdrop-filter: blur(10px);
      letter-spacing:.06em;
      font-weight:900;
    }
    h1{margin:10px 0 4px; font-size:20px; letter-spacing:.2px}
    .sub{margin:0; color:var(--muted); font-size:13.5px}

    .bottom-nav{
      margin-top:14px;
      display:flex;
      justify-content:flex-end;
      padding:0 4px;
    }
    .btnlink{
      appearance:none;
      border:2px solid rgba(0,0,0,.16);
      background:rgba(255,255,255,.88);
      color:var(--ink);
      border-radius:999px;
      padding:10px 12px;
      font-weight:1100;
      font-size:12.5px;
      text-decoration:none;
      display:inline-flex; align-items:center; gap:8px;
      box-shadow:0 12px 26px rgba(0,0,0,.16);
      backdrop-filter: blur(10px);
      opacity:.95;
    }
    .btnlink:active{transform:translateY(1px)}

    /* ç­ä½“ */
    .cabinet{
      margin-top:12px;
      border-radius:var(--r2);
      background:linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.80));
      border:2px solid rgba(0,0,0,.16);
      box-shadow:var(--shadow);
      overflow:hidden;
      position:relative;
    }

    /* æ¼«ç”»ã®é›†ä¸­ç·šã£ã½ã„ */
    .cabinet::before{
      content:"";
      position:absolute; inset:-60px;
      background:
        conic-gradient(from 180deg,
          rgba(0,0,0,.00),
          rgba(0,0,0,.00) 10%,
          rgba(0,0,0,.07) 12%,
          rgba(0,0,0,.00) 14%,
          rgba(0,0,0,.00) 20%,
          rgba(0,0,0,.06) 22%,
          rgba(0,0,0,.00) 24%,
          rgba(0,0,0,.00) 30%,
          rgba(0,0,0,.05) 32%,
          rgba(0,0,0,.00) 34%,
          rgba(0,0,0,.00)
        );
      opacity:.28;
      filter: blur(.2px);
      pointer-events:none;
      transform:rotate(8deg);
      mix-blend-mode:multiply;
    }
    .cabinet::after{
      content:"";
      position:absolute; inset:0;
      border-radius:var(--r2);
      box-shadow: inset 0 0 0 2px rgba(255,255,255,.55);
      pointer-events:none;
    }

    .cabinet-top{
      padding:14px 14px 10px;
      background:
        linear-gradient(180deg, rgba(255,47,79,.10), rgba(46,204,113,.08)),
        radial-gradient(650px 120px at 30% 0%, rgba(255,208,107,.20), transparent 65%);
      border-bottom:2px solid rgba(0,0,0,.12);
      display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between;
      position:relative;
      z-index:1;
    }

    .lights{
      display:flex; gap:7px; align-items:center;
      padding:6px 10px;
      border:2px solid rgba(0,0,0,.12);
      border-radius:999px;
      background:rgba(255,255,255,.72);
    }
    .lamp{
      width:10px; height:10px; border-radius:50%;
      background:rgba(255,255,255,.10);
      box-shadow:none;
      animation: blink 1.1s infinite;
    }
    .lamp:nth-child(2){animation-delay:.14s}
    .lamp:nth-child(3){animation-delay:.28s}
    .lamp:nth-child(4){animation-delay:.42s}
    .lamp:nth-child(5){animation-delay:.56s}
    @keyframes blink{
      0%,55%{background:rgba(255,255,255,.10); box-shadow:none}
      70%{background:rgba(255,208,107,.90); box-shadow:0 0 18px rgba(255,208,107,.55)}
      100%{background:rgba(255,79,122,.82); box-shadow:0 0 18px rgba(255,79,122,.45)}
    }

    .meter{
      display:flex; gap:10px; align-items:center;
      color:var(--muted);
      font-size:12.5px;
      font-weight:1100;
    }
    .meter b{color:var(--ink)}
    .meter .pill{
      padding:6px 10px;
      border-radius:999px;
      border:2px solid rgba(0,0,0,.12);
      background:rgba(255,255,255,.72);
      white-space:nowrap;
    }

    .slot-area{
      padding:14px;
      background:
        linear-gradient(180deg, rgba(255,255,255,.72), rgba(255,255,255,.56));
      position:relative;
      z-index:1;
    }

    .reels{
      display:grid;
      grid-template-columns:1fr 1fr 1fr;
      gap:10px;
      position:relative;
    }

    /* æ¼«ç”»ã£ã½ã„ã€Œæ“¬éŸ³ã€ãƒ¬ã‚¤ãƒ¤ãƒ¼ */
    .sfx{
      position:absolute;
      inset:-8px;
      pointer-events:none;
      z-index:5;
      display:none;
    }
    .sfx.show{display:block}
    .sfx .txt{
      position:absolute;
      font-weight:1200;
      letter-spacing:.18em;
      color:rgba(0,0,0,.18);
      text-shadow:0 1px 0 rgba(255,255,255,.75);
      transform:rotate(-10deg);
      filter: blur(.1px);
      user-select:none;
    }
    .sfx .t1{left:6px; top:10px; font-size:34px}
    .sfx .t2{right:4px; top:44px; font-size:28px; transform:rotate(12deg)}
    .sfx .t3{left:18px; bottom:10px; font-size:26px; transform:rotate(6deg)}
    .sfx.reach .txt{animation: sfxPulse .22s ease-in-out 0s 10}
    .sfx.win .txt{animation: sfxPulse .18s ease-in-out 0s 14}
    @keyframes sfxPulse{
      0%{transform:scale(1) rotate(var(--rot,0deg)); opacity:.55}
      50%{transform:scale(1.03) rotate(var(--rot,0deg)); opacity:.78}
      100%{transform:scale(1) rotate(var(--rot,0deg)); opacity:.60}
    }

    .reels.win::after{
      content:"æ±º ç€";
      position:absolute;
      left:50%; top:50%;
      transform:translate(-50%,-50%) rotate(-2deg);
      padding:9px 16px;
      border-radius:999px;
      border:2px solid rgba(0,0,0,.14);
      background:rgba(255,255,255,.94);
      box-shadow:0 20px 55px rgba(0,0,0,.20);
      font-weight:1200;
      letter-spacing:.42em;
      opacity:0;
      animation: hitTag .52s ease-out 0s 1 forwards;
      pointer-events:none;
      z-index:6;
    }
    @keyframes hitTag{
      0%{opacity:0; transform:translate(-50%,-50%) rotate(-2deg) scale(.92)}
      60%{opacity:1; transform:translate(-50%,-50%) rotate(-2deg) scale(1.04)}
      100%{opacity:1; transform:translate(-50%,-50%) rotate(-2deg) scale(1)}
    }

    .reel{
      border-radius:var(--r);
      border:2px solid rgba(0,0,0,.16);
      background:linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.72));
      min-height:92px;
      display:flex; align-items:center; justify-content:center;
      position:relative;
      overflow:hidden;
      box-shadow:
        inset 0 0 0 2px rgba(255,255,255,.55),
        0 10px 22px rgba(0,0,0,.08);
      transition: filter .15s ease, transform .12s ease;
    }
    .reel::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(700px 100px at 50% -10%, rgba(255,255,255,.14), transparent 58%),
        radial-gradient(10px 10px at 20% 30%, rgba(0,0,0,.06) 0 2px, transparent 3px 10px),
        radial-gradient(10px 10px at 60% 60%, rgba(0,0,0,.05) 0 2px, transparent 3px 10px);
      pointer-events:none;
      mix-blend-mode:multiply;
      opacity:.55;
    }

    .glyph{
      font-size:42px;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.25));
      transform: translateZ(0);
    }
    .reel.spin .glyph{ animation: jiggle .09s infinite linear; }
    @keyframes jiggle{
      0%{transform:translateY(0)}
      50%{transform:translateY(1px)}
      100%{transform:translateY(0)}
    }

    .reels.reach .reel{
      animation: reachPulse .20s ease-in-out 0s 8;
      filter: saturate(1.16) contrast(1.03);
      box-shadow:
        inset 0 0 0 2px rgba(255,255,255,.55),
        0 0 0 3px rgba(255,208,107,.28),
        0 0 28px rgba(255,208,107,.22);
    }
    @keyframes reachPulse{
      0%{transform:translateY(0)}
      50%{transform:translateY(-3px)}
      100%{transform:translateY(0)}
    }

    .reels.win .reel{
      box-shadow:
        inset 0 0 0 2px rgba(255,255,255,.55),
        0 0 0 3px rgba(255,208,107,.40),
        0 0 34px rgba(255,47,79,.14);
      animation: winBreathe .32s ease-in-out 0s 6;
      filter: saturate(1.10);
    }
    @keyframes winBreathe{
      0%{transform:translateY(0)}
      50%{transform:translateY(-2px)}
      100%{transform:translateY(0)}
    }

    .cabinet.shake{ animation: cabinetShake .20s ease-in-out 0s 6; }
    @keyframes cabinetShake{
      0%{transform:translateX(0)}
      25%{transform:translateX(2px)}
      50%{transform:translateX(-2px)}
      75%{transform:translateX(2px)}
      100%{transform:translateX(0)}
    }

    .controls{
      margin-top:12px;
      display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between;
    }
    .btnrow{display:flex; gap:10px; flex-wrap:wrap; align-items:center}

    button{
      appearance:none;
      border:2px solid rgba(0,0,0,.16);
      background:rgba(255,255,255,.88);
      color:var(--ink);
      border-radius:999px;
      padding:12px 14px;
      font-weight:1200;
      font-size:14px;
      cursor:pointer;
      box-shadow:0 14px 28px rgba(0,0,0,.16);
      transition:transform .06s ease, filter .2s ease;
      letter-spacing:.05em;
    }
    button:active{transform:translateY(1px)}
    button[disabled]{opacity:.55; cursor:not-allowed}

    .spinbtn{
      position:relative;
      background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(0,0,0,.08));
    }
    .spinbtn::before{
      content:"";
      position:absolute; inset:-1px;
      border-radius:999px; padding:1px;
      background:linear-gradient(90deg, rgba(255,79,122,.92), rgba(41,194,106,.92), rgba(255,208,107,.92));
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events:none;
    }
    .quiet{ background:rgba(255,255,255,.08); color:var(--muted); }

    .minihelp{
      margin:10px 2px 0;
      font-size:13.5px;
      color:var(--muted);
      font-weight:900;
      letter-spacing:.03em;
    }

    /* çµæœ */
    .result{
      margin-top:14px;
      border-radius:var(--r2);
      background:linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.84));
      border:2px solid rgba(0,0,0,.16);
      box-shadow:var(--shadow);
      overflow:hidden;
      display:none;
      position:relative;
    }
    .result::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(500px 120px at 30% 0%, rgba(255,208,107,.18), transparent 62%),
        radial-gradient(600px 160px at 80% 10%, rgba(31,200,255,.12), transparent 65%);
      pointer-events:none;
      opacity:.70;
    }
    .result-head{
      padding:14px 14px 14px;
      border-bottom:2px solid rgba(0,0,0,.10);
      background:
        linear-gradient(180deg, rgba(41,194,106,.10), rgba(255,255,255,.74));
      display:flex; gap:12px; align-items:flex-start; justify-content:space-between; flex-wrap:wrap;
      position:relative;
      z-index:1;
    }
    .res-left{min-width:240px; flex:1}
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding:7px 10px;
      border-radius:999px;
      border:2px solid rgba(0,0,0,.12);
      background:rgba(255,255,255,.74);
      color:var(--muted);
      font-size:12px;
      font-weight:1200;
      white-space:nowrap;
      letter-spacing:.06em;
    }
    .rt{ margin:8px 0 0; font-size:18px; letter-spacing:.2px; font-weight:1200}
    .comment{ margin:8px 0 0; color:var(--ink); font-size:14.4px; font-weight:900}

    .res-media{
      width:min(200px, 40vw);
      aspect-ratio: 1 / 1;
      border-radius:18px;
      border:2px solid rgba(0,0,0,.12);
      background:rgba(255,255,255,.80);
      overflow:hidden;
      box-shadow:0 12px 26px rgba(0,0,0,.12);
      display:flex; align-items:center; justify-content:center;
      position:relative;
      z-index:1;
    }
    .res-media img{ width:100%; height:100%; object-fit:cover; display:block; }
    .placeholder{
      font-weight:1100;
      color:var(--muted);
      font-size:12.5px;
      padding:10px;
      text-align:center;
    }

    .action-box{
      margin:12px 14px 14px;
      border-radius:var(--r2);
      border:2px solid rgba(255,208,107,.45);
      background:linear-gradient(180deg, rgba(255,208,107,.18), rgba(255,255,255,.74));
      padding:12px 12px;
      box-shadow:0 12px 26px rgba(0,0,0,.10);
      position:relative;
      z-index:1;
    }
    .action-ttl{ margin:0 0 6px; font-weight:1200; display:flex; gap:8px; align-items:center; letter-spacing:.06em;}
    .action-txt{ margin:0; color:var(--ink); font-size:14.2px; font-weight:900}

    .method-box{
      margin:0 14px 14px;
      border-radius:var(--r2);
      border:2px solid rgba(0,0,0,.12);
      background:linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.80));
      padding:12px 12px;
      box-shadow:0 12px 28px rgba(0,0,0,.12);
      display:none;
      position:relative;
      z-index:1;
    }
    .method-head{
      margin:0 0 10px;
      font-weight:1200;
      display:flex; gap:8px; align-items:center;
      letter-spacing:.06em;
    }
    .method-grid{
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
    }
    @media (min-width:780px){
      .method-grid{ grid-template-columns:1fr 1fr; }
    }
    .method-col{
      border:2px solid rgba(0,0,0,.10);
      border-radius:16px;
      background:rgba(255,255,255,.78);
      padding:10px 10px;
    }
    .method-ttl{
      margin:0 0 8px;
      font-weight:1200;
      color:var(--ink);
      font-size:13px;
      letter-spacing:.08em;
    }
    .method-list{
      margin:0;
      padding-left:18px;
      font-size:13.6px;
      color:var(--ink);
      line-height:1.55;
      font-weight:900;
    }
    .method-list.muted{ color:var(--muted); font-weight:900; }
    .method-list li{ margin:6px 0; }

    .foot{
      margin-top:14px;
      color:var(--muted);
      font-size:12.5px;
      padding:0 4px;
      font-weight:900;
    }
    .warn{
      margin-top:10px;
      padding:10px 12px;
      border:2px solid rgba(0,0,0,.12);
      border-radius:var(--r);
      background:rgba(255,255,255,.76);
    }

    /* å›³é‘‘ */
    .dex{
      margin-top:14px;
      border-radius:var(--r2);
      background:linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.82));
      border:2px solid rgba(0,0,0,.16);
      box-shadow:var(--shadow);
      padding:12px 14px;
      position:relative;
    }
    .dex::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(600px 130px at 20% 0%, rgba(255,47,79,.14), transparent 62%),
        radial-gradient(600px 130px at 80% 0%, rgba(46,204,113,.12), transparent 62%);
      opacity:.60;
      pointer-events:none;
    }
    .dex-head{
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      padding-bottom:10px;
      border-bottom:2px solid rgba(0,0,0,.10);
      position:relative;
      z-index:1;
    }
    .dex-ttl{font-weight:1200; letter-spacing:.10em}
    .dex-meta{
      padding:6px 10px;
      border-radius:999px;
      border:2px solid rgba(0,0,0,.12);
      background:rgba(255,255,255,.74);
      font-weight:1200;
      color:var(--muted);
      letter-spacing:.06em;
    }
    .dex-grid{
      margin-top:10px;
      display:grid;
      grid-template-columns:repeat(5, 1fr);
      gap:10px;
      position:relative;
      z-index:1;
    }
    @media (min-width:780px){
      .dex-grid{ grid-template-columns:repeat(10, 1fr); }
    }
    .dex-cell{
      border-radius:14px;
      border:2px solid rgba(0,0,0,.12);
      background:rgba(255,255,255,.76);
      overflow:hidden;
      aspect-ratio:1/1;
      position:relative;
      display:flex; align-items:center; justify-content:center;
    }
    .dex-cell img{
      width:100%; height:100%;
      object-fit:cover;
      display:block;
    }
    .dex-lock{
      position:absolute; inset:0;
      display:flex; align-items:center; justify-content:center;
      font-weight:1200;
      color:rgba(0,0,0,.45);
      background:linear-gradient(180deg, rgba(255,255,255,.90), rgba(255,255,255,.76));
      letter-spacing:.12em;
    }
    .dex-note{
      margin:10px 0 0;
      color:var(--muted);
      font-size:12.5px;
      font-weight:900;
      position:relative;
      z-index:1;
    }

    /* ===== FXï¼ˆåˆ¥ãƒ¬ã‚¤ãƒ¤ãƒ¼æ¼”å‡ºï¼‰ ===== */
    .reach-banner{
      position:fixed;
      left:50%; top:14px;
      transform:translateX(-50%) rotate(-2deg);
      background:rgba(255,255,255,.95);
      border:2px solid rgba(0,0,0,.14);
      border-radius:999px;
      padding:10px 14px;
      font-weight:1200;
      letter-spacing:.22em;
      box-shadow:0 18px 40px rgba(0,0,0,.18);
      display:none;
      z-index:9998;
      pointer-events:none;
    }
    .reach-banner.show{
      display:block;
      animation: reachIn .22s ease-out, reachBlink .22s ease-in-out 0s 10;
    }
    @keyframes reachIn{
      from{opacity:0; transform:translateX(-50%) translateY(-10px) rotate(-2deg)}
      to{opacity:1; transform:translateX(-50%) translateY(0) rotate(-2deg)}
    }
    @keyframes reachBlink{
      0%{filter:saturate(1)}
      50%{filter:saturate(1.35) contrast(1.05)}
      100%{filter:saturate(1)}
    }

    .fx{
      position:fixed; inset:0;
      display:none;
      align-items:center; justify-content:center;
      z-index:9999;
      pointer-events:none;
    }
    .fx.show{display:flex}

    /* æ±ºç€BONUS: æ´¾æ‰‹ãªèƒŒæ™¯ */
    .fx-bg{
      position:absolute; inset:0;
      background:
        conic-gradient(
          from 0deg,
          rgba(255,47,79,.34),
          rgba(46,204,113,.30),
          rgba(255,208,107,.34),
          rgba(31,200,255,.30),
          rgba(255,47,79,.34)
        );
      animation: raysSpin 1.10s linear infinite;
      filter: blur(1px);
      opacity:.92;
    }
    @keyframes raysSpin{to{transform:rotate(360deg)}}

    /* ã•ã‚‰ã«é›†ä¸­ç·š */
    .fx-lines{
      position:absolute; inset:-80px;
      background:
        conic-gradient(from 180deg,
          rgba(0,0,0,.00),
          rgba(0,0,0,.00) 6%,
          rgba(0,0,0,.10) 7%,
          rgba(0,0,0,.00) 8%,
          rgba(0,0,0,.00) 14%,
          rgba(0,0,0,.08) 15%,
          rgba(0,0,0,.00) 16%,
          rgba(0,0,0,.00) 22%,
          rgba(0,0,0,.07) 23%,
          rgba(0,0,0,.00) 24%,
          rgba(0,0,0,.00)
        );
      opacity:.22;
      pointer-events:none;
      mix-blend-mode:multiply;
      animation: linesWobble .8s ease-in-out infinite;
    }
    @keyframes linesWobble{
      0%{transform:rotate(-2deg)}
      50%{transform:rotate(2deg)}
      100%{transform:rotate(-2deg)}
    }

    .fx-dim{
      position:absolute; inset:0;
      background:rgba(255,255,255,.56);
      backdrop-filter: blur(2px);
    }

    .fx-card{
      position:relative;
      background:rgba(255,255,255,.94);
      border:2px solid rgba(0,0,0,.14);
      border-radius:22px;
      padding:14px 16px;
      text-align:center;
      box-shadow:0 22px 60px rgba(0,0,0,.26);
      min-width:min(90vw,620px);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
      transform:rotate(-1deg);
    }

    /* æ–œã‚å¸¯ */
    .fx-ribbon{
      position:absolute;
      left:-46px; top:16px;
      transform:rotate(-12deg);
      padding:8px 70px;
      background:linear-gradient(90deg, rgba(0,0,0,.86), rgba(0,0,0,.66));
      color:rgba(255,255,255,.95);
      border:2px solid rgba(255,255,255,.18);
      letter-spacing:.22em;
      font-weight:1200;
      font-size:12px;
      box-shadow:0 12px 28px rgba(0,0,0,.22);
      border-radius:999px;
    }

    .fx-top{
      font-weight:1200;
      letter-spacing:.22em;
      font-size:12.5px;
      color:#333;
      text-transform:uppercase;
    }
    .fx-mid{
      margin-top:2px;
      font-weight:1200;
      font-size:30px;
      letter-spacing:.08em;
      color:#111;
      text-shadow:0 2px 0 rgba(255,208,107,.55), 0 0 18px rgba(255,47,79,.20);
      animation: pop .22s ease-out 0s 4;
    }
    @keyframes pop{
      0%{transform:scale(.97)}
      60%{transform:scale(1.04)}
      100%{transform:scale(1)}
    }
    .fx-sub{
      margin-top:4px;
      font-size:13px;
      font-weight:1000;
      color:#333;
      max-width:56ch;
      margin-inline:auto;
      white-space:normal;
      line-height:1.35;
      letter-spacing:.02em;
    }
    .fx-media{
      width:min(240px, 62vw);
      aspect-ratio: 1 / 1;
      border-radius:18px;
      border:2px solid rgba(0,0,0,.12);
      background:rgba(255,255,255,.82);
      overflow:hidden;
      box-shadow:0 14px 30px rgba(0,0,0,.16);
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .fx-media img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    /* ãƒˆãƒ¼ã‚¹ãƒˆ */
    .toast{
      position:fixed; left:50%; bottom:18px;
      transform:translateX(-50%);
      background:rgba(255,255,255,.95);
      color:var(--ink);
      border:2px solid rgba(0,0,0,.14);
      padding:10px 12px;
      border-radius:999px;
      font-size:12.5px;
      box-shadow:0 18px 40px rgba(0,0,0,.18);
      opacity:0;
      pointer-events:none;
      transition:opacity .18s ease, transform .18s ease;
      z-index:10000;
      max-width:min(92vw,760px);
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      font-weight:1100;
      letter-spacing:.06em;
    }
    .toast.show{opacity:1; transform:translateX(-50%) translateY(-6px)}

    @media (min-width:780px){
      h1{font-size:24px}
      .reel{min-height:106px}
      .glyph{font-size:48px}
      .rt{font-size:20px}
      .res-media{width:220px}
      .sfx .t1{font-size:40px}
      .sfx .t2{font-size:32px}
      .sfx .t3{font-size:30px}
    }
  </style>
</head>

<body data-id="christmas-present">
  <div class="wrap">
    <header aria-label="ãƒ˜ãƒƒãƒ€ãƒ¼">
      <div class="ttlbox">
        <div class="kicker"><span>ğŸ</span><span>ã‚¯ãƒªã‚¹ãƒã‚¹ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ</span><span>ãƒ»</span><span>æŠ¼ã™ãŸã³æŠ½é¸</span><span>ãƒ»</span><span>ä¸‰ã¤æƒãˆã°æ±ºç€</span></div>
        <h1>ã‚¯ãƒªã‚¹ãƒã‚¹ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ</h1>
        <p class="sub">æŠ¼ã—ã¦å›ã™ã ã‘ã€‚<b>ä»Šæ—¥ã®ä¸€æ‰‹</b>ãŒ1ã¤å‡ºã‚‹ã€‚ãŸã¾ã«<b>å‡çµ</b>ã€ãŸã¾ã«<b>æ¿€ã‚¢ãƒ„</b>ã€‚</p>
      </div>
    </header>

    <section class="cabinet" id="cabinet" aria-label="ã‚¹ãƒ­ãƒƒãƒˆç­ä½“">
      <div class="cabinet-top">
        <div class="lights" aria-hidden="true">
          <span class="lamp"></span><span class="lamp"></span><span class="lamp"></span><span class="lamp"></span><span class="lamp"></span>
        </div>
        <div class="meter" aria-label="ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹">
          <span class="pill">é€£æ‰“æ•° <b id="spinCount">0</b></span>
          <span class="pill">éŸ³ <b id="sndMode">OFF</b></span>
        </div>
      </div>

      <div class="slot-area">
        <div class="reels" id="reels" aria-label="ãƒªãƒ¼ãƒ«è¡¨ç¤º">
          <div class="sfx" id="sfxLayer" aria-hidden="true">
            <div class="txt t1">ã‚´ã‚´ã‚´</div>
            <div class="txt t2">ã‚¶ãƒ¯</div>
            <div class="txt t3">ãƒ‰ãƒ³</div>
          </div>

          <div class="reel" id="reel1"><div class="glyph" id="g1" aria-live="polite">â„ï¸</div></div>
          <div class="reel" id="reel2"><div class="glyph" id="g2" aria-live="polite">ğŸ„</div></div>
          <div class="reel" id="reel3"><div class="glyph" id="g3" aria-live="polite">ğŸ</div></div>
        </div>

        <div class="controls" aria-label="æ“ä½œ">
          <div class="btnrow">
            <button class="spinbtn" id="spinBtn" type="button" aria-label="ã‚¹ãƒ­ãƒƒãƒˆã‚’å›ã™ï¼ˆã‚¹ãƒšãƒ¼ã‚¹ã§ã‚‚å¯ï¼‰">
              ğŸ° å›ã™ï¼ˆSPACEï¼‰
            </button>
            <button class="quiet" id="resetBtn" type="button" aria-label="é€£æ‰“æ•°ã¨ä¿å­˜ã‚’ãƒªã‚»ãƒƒãƒˆ">
              â†©ï¸ ãƒªã‚»ãƒƒãƒˆ
            </button>
          </div>
          <div class="btnrow">
            <button class="quiet" id="toggleSnd" type="button" aria-pressed="false" aria-label="åŠ¹æœéŸ³ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹">
              ğŸ”ˆ éŸ³ï¼šOFF
            </button>
          </div>
        </div>

        <p class="minihelp">
          <b>å½“ãŸã‚Š</b>ï¼šå‹•ç‰©ãŒ3ã¤æƒã† ï¼ <b>ãƒªãƒ¼ãƒ</b>ï¼š2ã¤æƒã„ ï¼ <b>å‡çµ</b>ï¼šä¸€ç¬ã®é™å¯‚ãŒæ¥ã‚‹ã€‚
        </p>
      </div>
    </section>

    <section class="result" id="resultPanel" aria-label="çµæœ">
      <div class="result-head">
        <div class="res-left">
          <div class="badge" id="badgeLine">â€”</div>
          <h2 class="rt" id="resTitle">â€”</h2>
          <p class="comment" id="resComment">â€”</p>
        </div>

        <div class="res-media" aria-label="çµæœç”»åƒ">
          <img id="resImg" alt="" loading="lazy" decoding="async">
          <div class="placeholder" id="resImgPlaceholder" style="display:none">ç”»åƒãŒèª­ã¿è¾¼ã‚ã¾ã›ã‚“</div>
        </div>
      </div>

      <div class="action-box" aria-label="ä»Šæ—¥ã®ä¸€æ‰‹">
        <p class="action-ttl"><span aria-hidden="true">ğŸ§­</span><span>ä»Šæ—¥ã®ä¸€æ‰‹ï¼ˆ30ã€œ90ç§’ï¼‰</span></p>
        <p class="action-txt" id="resAction">â€”</p>
      </div>

      <div class="method-box" id="methodBox" aria-label="ã‚¹ãƒˆãƒ¬ã‚¹è»½æ¸›ã®ã‚„ã‚Šæ–¹ã¨ç ”ç©¶ãƒ¡ãƒ¢">
        <p class="method-head"><span aria-hidden="true">ğŸ§ </span><span>ã‚„ã‚Šæ–¹ï¼ˆã‚†ã£ãã‚Šèª­ã‚ã‚‹ç‰ˆï¼‰</span></p>

        <div class="method-grid">
          <div class="method-col">
            <p class="method-ttl">æ‰‹é †</p>
            <ul class="method-list" id="methodHow"></ul>
          </div>

          <div class="method-col">
            <p class="method-ttl">ç ”ç©¶ãƒ¡ãƒ¢</p>
            <ul class="method-list muted" id="methodMemo"></ul>
          </div>
        </div>
      </div>
    </section>

    <section class="dex" id="dexPanel" aria-label="å‹•ç‰©å›³é‘‘">
      <div class="dex-head">
        <div class="dex-ttl">ğŸ“— å›³é‘‘</div>
        <div class="dex-meta"><span id="dexCount">0</span>/10</div>
      </div>
      <div class="dex-grid" id="dexGrid"></div>
      <p class="dex-note" id="dexNote">å½“ãŸã‚Šï¼ˆ3ã¤æƒã„ï¼‰ã§åŸ‹ã¾ã‚‹ã€‚</p>
    </section>

    <div class="foot" style="padding:0 14px 14px">
      <div class="warn">
        â€»å¨¯æ¥½ï¼‹è‡ªå·±ã‚±ã‚¢ã®è£œåŠ©ã§ã™ã€‚ç—‡çŠ¶ã‚„ä¸èª¿ãŒç¶šãå ´åˆã¯å°‚é–€æ©Ÿé–¢ã¸ã€‚<br>
        â€»ã‚¹ãƒ­ãƒƒãƒˆé¢¨ã¯æ¼”å‡ºã§ã™ã€‚ãŠé‡‘ã¯å¢—ãˆã¾ã›ã‚“ã€‚
      </div>
    </div>

    <nav class="bottom-nav" aria-label="ä¸‹éƒ¨ãƒŠãƒ“">
      <a class="btnlink" href="/shindan/" aria-label="è¨ºæ–­ä¸€è¦§ã«æˆ»ã‚‹ï¼ˆä¸‹ï¼‰">
        <span>ğŸ“š</span><span>è¨ºæ–­ä¸€è¦§ã«æˆ»ã‚‹</span>
      </a>
    </nav>

    <div class="foot" aria-label="ãƒ•ãƒƒã‚¿ãƒ¼">
      <p style="margin:14px 0 0">ä¿å­˜ï¼šå‰å›çµæœã¨è¨­å®šã‚’ localStorage ã«ä¿æŒï¼ˆç«¯æœ«å†…ã®ã¿ï¼‰ã€‚</p>
      <p style="margin:6px 0 0">ç”»åƒï¼š/shindan/assets/results/christmas-present/ ã® t01.webpã€œt10.webp ã‚’ä½¿ç”¨ã€‚</p>
    </div>
  </div>

  <div class="reach-banner" id="reachBanner" aria-hidden="true">R E A C H</div>

  <!-- å‡çµ -->
  <div class="fx" id="freezeFx" aria-hidden="true">
    <div class="fx-dim"></div>
    <div class="fx-card">
      <div class="fx-ribbon">é™ å¯‚</div>
      <div class="fx-top">FREEZE</div>
      <div class="fx-mid">â€¦â€¦</div>
      <div class="fx-sub" id="freezeSub">â€”</div>
    </div>
  </div>

  <!-- BONUS -->
  <div class="fx" id="bonusFx" aria-hidden="true">
    <div class="fx-bg"></div>
    <div class="fx-lines"></div>
    <div class="fx-card">
      <div class="fx-ribbon" id="bxRibbon">æ±º ç€</div>
      <div class="fx-top" id="bxTop">BONUS</div>
      <div class="fx-mid" id="bxMid">HIT</div>

      <div class="fx-media" aria-label="å½“ãŸã‚Šç”»åƒ">
        <img id="bxImg" alt="" loading="lazy" decoding="async">
        <div class="placeholder" id="bxImgPlaceholder" style="display:none">ç”»åƒãŒèª­ã¿è¾¼ã‚ã¾ã›ã‚“</div>
      </div>

      <div class="fx-sub" id="bxSub">â€”</div>
    </div>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
  (function(){
    var SLUG = document.body.getAttribute('data-id') || 'christmas-present';
    var STATE_KEY = 'specimens:' + SLUG + ':state';
    var DEX_KEY   = 'specimens:' + SLUG + ':dex';

    /* ã“ã“ã¯ /shindan/christmas-present.html å‰æã§ç›¸å¯¾ã«ã—ã¦ã‚‹ */
    var IMG_BASE  = 'assets/results/christmas-present/';

    // ===== DOM =====
    var $toast = document.getElementById('toast');
    var $spinBtn = document.getElementById('spinBtn');
    var $resetBtn = document.getElementById('resetBtn');
    var $toggleSnd = document.getElementById('toggleSnd');

    var $spinCount = document.getElementById('spinCount');
    var $sndMode = document.getElementById('sndMode');

    var $cabinet = document.getElementById('cabinet');

    var $reels = document.getElementById('reels');
    var $reel1 = document.getElementById('reel1');
    var $reel2 = document.getElementById('reel2');
    var $reel3 = document.getElementById('reel3');
    var $g1 = document.getElementById('g1');
    var $g2 = document.getElementById('g2');
    var $g3 = document.getElementById('g3');

    var $sfx = document.getElementById('sfxLayer');

    var $panel = document.getElementById('resultPanel');
    var $badge = document.getElementById('badgeLine');
    var $resTitle = document.getElementById('resTitle');
    var $resComment = document.getElementById('resComment');
    var $resAction = document.getElementById('resAction');
    var $resImg = document.getElementById('resImg');
    var $resImgPlaceholder = document.getElementById('resImgPlaceholder');

    var $methodBox = document.getElementById('methodBox');
    var $methodHow = document.getElementById('methodHow');
    var $methodMemo = document.getElementById('methodMemo');

    var $reachBanner = document.getElementById('reachBanner');
    var $freezeFx = document.getElementById('freezeFx');
    var $freezeSub = document.getElementById('freezeSub');

    var $bonusFx = document.getElementById('bonusFx');
    var $bxRibbon = document.getElementById('bxRibbon');
    var $bxTop = document.getElementById('bxTop');
    var $bxMid = document.getElementById('bxMid');
    var $bxSub = document.getElementById('bxSub');
    var $bxImg = document.getElementById('bxImg');
    var $bxImgPlaceholder = document.getElementById('bxImgPlaceholder');

    var $dexGrid = document.getElementById('dexGrid');
    var $dexCount = document.getElementById('dexCount');
    var $dexNote = document.getElementById('dexNote');

    // ===== ãƒ‡ãƒ¼ã‚¿ï¼š10ç¨®ï¼ˆt01..t10.webpï¼‰=====
    var RESULTS = [
      { key:'DOG',  glyph:'ğŸ¶', name:'çŠ¬ï¼šåŒ‚ã„ã§å¿ƒã‚’å›ºå®š', img:'t01.webp', alt:'ã‚µãƒ³ã‚¿ã¨çŠ¬',
        comment:'ç©ºæ°—ã®å¤‰åŒ–ã«æ°—ã¥ãã®ãŒæ—©ã„ã€‚ã ã‹ã‚‰å…ˆã«ç–²ã‚Œã‚‹ã€‚å…ˆã«ä¼‘ã‚€ã®ã‚‚æ‰èƒ½ã€‚',
        action:'å¥½ããªé¦™ã‚Šã‚’10ç§’ã‚†ã£ãã‚Šå¸ã†â†’åãÃ—3ã€‚æœ€å¾Œã«ã€Œã„ã¾æˆ»ã£ãŸã€ã¨1å›ã ã‘è¨€ã£ã¦çµ‚äº†ã€‚',
        howSteps:[
          'å¥½ããªé¦™ã‚Šã‚’ç”¨æ„ï¼ˆã‚³ãƒ¼ãƒ’ãƒ¼/æ´—å‰¤/ãƒãƒ³ãƒ‰ã‚¯ãƒªãƒ¼ãƒ ãªã©ã§OKï¼‰ã€‚',
          'é¼»ã‹ã‚‰å¸ã†â†’å£ã‹ã‚‰åãï¼ˆåãé•·ã‚ï¼‰ã‚’3å›ã€‚',
          'æœ€å¾Œã«ã€Œã„ã¾æˆ»ã£ãŸã€ã¨å¿ƒã®ä¸­ã§1å›ã ã‘è¨€ã£ã¦çµ‚ã‚ã‚Šã€‚'
        ],
        memo:[
          'å—…è¦šåˆºæ¿€ï¼ˆé¦™ã‚Šï¼‰ãŒæ°—åˆ†ã‚„ã‚¹ãƒˆãƒ¬ã‚¹åå¿œã«å½±éŸ¿ã—å¾—ã‚‹ã¨ã„ã†ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯è¤‡æ•°ã‚ã‚‹ã€‚ã€”ç¢ºåº¦ï¼šä¸­ã€•',
          'åŒ‚ã„åˆºæ¿€ã®åŠ¹æœã¯æ¡ä»¶ã‚„å€‹äººå·®ãŒå¤§ãã„ã€‚ã€”ç¢ºåº¦ï¼šä½ã€•'
        ]
      },
      { key:'CAT',  glyph:'ğŸ±', name:'çŒ«ï¼šè‚©ã‚’ã»ã©ã„ã¦äººé–“ã«æˆ»ã‚‹', img:'t02.webp', alt:'ã‚µãƒ³ã‚¿ã¨çŒ«',
        comment:'é ­ã§è€ãˆã‚‹ã»ã©ã€è‚©ãŒå…ˆã«æŠ—è­°ã™ã‚‹ã€‚èº«ä½“ã¯å˜˜ã‚’ã¤ã‹ãªã„ã€‚',
        action:'è‚©ç”²éª¨ã‚’å¯„ã›ã¦5ç§’â†’è„±åŠ›10ç§’Ã—2ã€‚æœ€å¾Œã«é¦–ã‚’å·¦å³ã¸å„1å›ã€‚',
        howSteps:[
          'è‚©ç”²éª¨ã‚’å¯„ã›ã¦5ç§’ã‚­ãƒ¼ãƒ—â†’è„±åŠ›10ç§’ï¼ˆ2å›ï¼‰ã€‚',
          'é¦–ã‚’å·¦å³ã«ã‚†ã£ãã‚Šå€’ã—ã¦å„1å›ï¼ˆç—›ã¿ã®ãªã„ç¯„å›²ï¼‰ã€‚',
          'èƒŒä¼¸ã³ã‚’1å›ã—ã¦çµ‚ã‚ã‚Šã€‚'
        ],
        memo:[
          'è»½ã„ã‚¹ãƒˆãƒ¬ãƒƒãƒãŒä¸»è¦³çš„ã‚¹ãƒˆãƒ¬ã‚¹ä½ä¸‹ã«ã¤ãªãŒã‚‹å ±å‘ŠãŒã‚ã‚‹ã€‚ã€”ç¢ºåº¦ï¼šä¸­ã€•',
          'èº«ä½“æ´»å‹•ã¨ä¸å®‰/æ°—åˆ†ã®æ”¹å–„ã¯å¤šãã®ç ”ç©¶ã§ç¤ºå”†ã€‚ã€”ç¢ºåº¦ï¼šä¸­ã€•'
        ]
      },
      { key:'SLOTH', glyph:'ğŸ¦¥', name:'ãƒŠãƒã‚±ãƒ¢ãƒï¼š0.5å€é€Ÿã§é®åœ§', img:'t03.webp', alt:'ã‚µãƒ³ã‚¿ã¨ãƒŠãƒã‚±ãƒ¢ãƒ',
        comment:'ç„¦ã‚ŠãŒå‡ºãŸã‚‰ã€ã¾ãšé€Ÿåº¦ã‚’è½ã¨ã™ã€‚æ€è€ƒã®æš´èµ°ã¯ç‡ƒæ–™ãŒæ¸›ã‚‹ã¨æ­¢ã¾ã‚‹ã€‚',
        action:'ä»Šã®å‹•ä½œã‚’â€œ25%ã ã‘â€ã‚†ã£ãã‚Š20ç§’â†’æ·±å‘¼å¸1å›ï¼ˆåãé•·ã‚ï¼‰ã€‚',
        howSteps:[
          'ä»Šã—ã¦ã‚‹å‹•ä½œã‚’25%ã ã‘é…ãã™ã‚‹ï¼ˆæ­©ã/å…¥åŠ›/ç‰‡ä»˜ã‘ç­‰ï¼‰ã€‚',
          '20ç§’ç¶šã‘ã‚‹ã€‚',
          'æ·±å‘¼å¸1å›ï¼ˆåãé•·ã‚ï¼‰ã§ç· ã‚ã‚‹ã€‚'
        ],
        memo:[
          'è¡Œå‹•ãƒ†ãƒ³ãƒã‚’è½ã¨ã™ã¨è¦šé†’ã‚’ä¸‹ã’ã‚„ã™ã„ã€‚ã€”ç¢ºåº¦ï¼šä¸­ã€•',
          'ç„¦ã‚Šãƒ«ãƒ¼ãƒ—ï¼ˆé€Ÿãå‹•ãâ†’ã•ã‚‰ã«ç„¦ã‚‹ï¼‰ã‚’æ–­ã¡åˆ‡ã‚Šã‚„ã™ã„ã€‚ã€”ç¢ºåº¦ï¼šä¸­ã€•'
        ]
      },
      { key:'PENG', glyph:'ğŸ§', name:'ãƒšãƒ³ã‚®ãƒ³ï¼šèƒ¸ã«æ‰‹ã‚’ç½®ã„ã¦è€ä¹…', img:'t04.webp', alt:'ã‚µãƒ³ã‚¿ã¨ãƒšãƒ³ã‚®ãƒ³',
        comment:'ä»–äººã®å¸­ã¯ç”¨æ„ã§ãã‚‹ã®ã«ã€è‡ªåˆ†ã ã‘ç«‹ãŸã›ãŒã¡ã€‚ä»Šæ—¥ã¯åº§ã‚‹ç•ªã€‚',
        action:'èƒ¸ã«æ‰‹â†’å¸ã†4ç§’ï¼åã6ç§’Ã—3ã€‚æœ€å¾Œã«è‚©ã‚’ã‚¹ãƒˆãƒ³ã¨è½ã¨ã™ã€‚',
        howSteps:[
          'ç‰‡æ‰‹ã‚’èƒ¸ï¼ˆé–éª¨ã®å°‘ã—ä¸‹ï¼‰ã«ç½®ãã€‚',
          'å¸ã†4ç§’â†’åã6ç§’ã‚’3å›ï¼ˆåãé•·ã‚ï¼‰ã€‚',
          'è‚©ã‚’ã‚¹ãƒˆãƒ³ã¨è½ã¨ã—ã¦çµ‚äº†ã€‚'
        ],
        memo:[
          'å‘¼æ°—ã‚’é•·ãã™ã‚‹å‘¼å¸æ³•ã¯ãƒªãƒ©ã‚¯ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³åå¿œã¨é–¢é€£ã€‚ã€”ç¢ºåº¦ï¼šä¸­ã€•',
          'ã‚»ãƒ«ãƒ•ã‚¿ãƒƒãƒã¯å®‰å¿ƒæ„Ÿã‚’ä½œã‚Šã‚„ã™ã„ä»‹å…¥ã¨ã—ã¦ç ”ç©¶ãŒã‚ã‚‹ã€‚ã€”ç¢ºåº¦ï¼šä¸­ã€•'
        ]
      },
      { key:'REIN', glyph:'ğŸ¦Œ', name:'ãƒˆãƒŠã‚«ã‚¤ï¼šè„šã§å¼·åˆ¶é€€å‹¤', img:'t05.webp', alt:'ã‚µãƒ³ã‚¿ã¨ãƒˆãƒŠã‚«ã‚¤',
        comment:'è€ƒãˆã™ãã‚‹ã¨â€œè„³ã ã‘æ®‹æ¥­â€ãŒå§‹ã¾ã‚‹ã€‚è„šã‚’å‹•ã‹ã™ã¨é€€å‹¤å‘½ä»¤ãŒé€šã‚‹ã€‚',
        action:'ãã®å ´è¶³è¸ã¿orã‹ã‹ã¨ä¸Šã’30ç§’â†’æ°´ã‚’ä¸€å£ã€‚',
        howSteps:[
          'ãã®å ´ã§è¶³è¸ã¿orã‹ã‹ã¨ä¸Šã’ã‚’30ç§’ã€‚',
          'æ°´ã‚’ä¸€å£ï¼ˆé£²ã‚“ã æ„Ÿè¦šã‚’1ç§’ã ã‘æ„è­˜ï¼‰ã€‚',
          'çµ‚ã‚ã‚Šã€‚'
        ],
        memo:[
          'çŸ­ã„ä¼‘æ†©ã‚„è»½é‹å‹•ãŒç–²åŠ´æ„Ÿãƒ»ç·Šå¼µã®ä½ä¸‹ã«å¯„ä¸ã™ã‚‹å ±å‘Šã€‚ã€”ç¢ºåº¦ï¼šä¸­ã€•',
          'â€œè€ƒãˆã‚’æ­¢ã‚ã‚‹â€ã‚ˆã‚Šâ€œä½“ã‚’å‹•ã‹ã™â€ã®æ–¹ãŒå®Ÿè£…ã—ã‚„ã™ã„ã€‚ã€”ç¢ºåº¦ï¼šé«˜ã€•'
        ]
      },
      { key:'OWL', glyph:'ğŸ¦‰', name:'ãƒ•ã‚¯ãƒ­ã‚¦ï¼šå…‰é‡ã‚’ä¸‹ã’ã¦æ²ˆé™', img:'t06.webp', alt:'ã‚µãƒ³ã‚¿ã¨ãƒ•ã‚¯ãƒ­ã‚¦',
        comment:'æƒ…å ±ãŒå¤šã„ã»ã©å†´ãˆã‚‹ãŒã€åŒã˜ã ã‘æ¶ˆè€—ã™ã‚‹ã€‚å…‰ã¯é¨’éŸ³ã«ã‚‚ãªã‚‹ã€‚',
        action:'ç”»é¢ã®æ˜ã‚‹ã•ã‚’ä¸€æ®µè½ã¨ã™â†’20ç§’é ãã‚’è¦‹ã‚‹â†’ç›®ã‚’2ç§’ã‚®ãƒ¥ãƒƒâ†’è„±åŠ›ã€‚',
        howSteps:[
          'ç”»é¢ã®æ˜ã‚‹ã•ã‚’1æ®µéšä¸‹ã’ã‚‹ï¼ˆå¤œã¯ç‰¹ã«ï¼‰ã€‚',
          '20ç§’ã ã‘é ãã‚’è¦‹ã‚‹ã€‚',
          'ç›®ã‚’2ç§’ã‚®ãƒ¥ãƒƒâ†’è„±åŠ›ã—ã¦çµ‚äº†ã€‚'
        ],
        memo:[
          'å¤œé–“ã®å¼·ã„å…‰ã¯ç¡çœ é–¢é€£ãƒ›ãƒ«ãƒ¢ãƒ³ã‚’æŠ‘åˆ¶ã—å¾—ã‚‹ã€‚ã€”ç¢ºåº¦ï¼šé«˜ã€•',
          'é ãã‚’è¦‹ã‚‹ä¼‘æ†©ã¯çœ¼ç²¾ç–²åŠ´å¯¾ç­–ã¨ã—ã¦åºƒãæ¨å¥¨ã€‚ã€”ç¢ºåº¦ï¼šä¸­ã€•'
        ]
      },
      { key:'RAB', glyph:'ğŸ°', name:'ã‚¦ã‚µã‚®ï¼šå™›ã‚“ã§å›è·¯ã‚’å¤‰ãˆã‚‹', img:'t07.webp', alt:'ã‚µãƒ³ã‚¿ã¨ã†ã•ã',
        comment:'æ€è€ƒãŒå›ã‚‹æ™‚ã»ã©å£ãŒæ­¢ã¾ã‚‹ã€‚ãªã‚‰å™›ã‚“ã§ã€å›è·¯ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã€‚',
        action:'ã‚¬ãƒ 10å›ï¼ˆãªã‘ã‚Œã°æ°´ã‚’ä¸€å£å«ã¿å‘³ã«10ç§’é›†ä¸­ï¼‰â†’è‚©ã‚’1å›è½ã¨ã™ã€‚',
        howSteps:[
          'ã‚¬ãƒ ãŒã‚ã‚Œã°10å›å™›ã‚€ï¼ˆä¸€å®šãƒªã‚ºãƒ ï¼‰ã€‚',
          'ãªã‘ã‚Œã°æ°´ã‚’ä¸€å£å«ã‚“ã§å‘³/æ¸©åº¦ã«10ç§’é›†ä¸­ã€‚',
          'è‚©ã‚’1å›ã‚¹ãƒˆãƒ³ã¨è½ã¨ã—ã¦çµ‚äº†ã€‚'
        ],
        memo:[
          'å’€åš¼ï¼ˆã‚¬ãƒ ï¼‰ã§ä¸»è¦³ã‚¹ãƒˆãƒ¬ã‚¹ã‚„æŒ‡æ¨™ãŒæ”¹å–„ã—ãŸå ±å‘ŠãŒã‚ã‚‹ã€‚ã€”ç¢ºåº¦ï¼šä¸­ã€•',
          'æ³¨æ„ã‚’èº«ä½“æ„Ÿè¦šã¸å¯„ã›ã€æ€è€ƒãƒ«ãƒ¼ãƒ—ã‚’åˆ‡ã‚Šã‚„ã™ã„ã€‚ã€”ç¢ºåº¦ï¼šä¸­ã€•'
        ]
      },
      { key:'FOX', glyph:'ğŸ¦Š', name:'ã‚­ãƒ„ãƒï¼šæ„Ÿæƒ…ã‚’ä¸€èªã§å°å°', img:'t08.webp', alt:'ã‚µãƒ³ã‚¿ã¨ã‚­ãƒ„ãƒ',
        comment:'è„³å†…ã§è£åˆ¤ãŒå§‹ã¾ã£ãŸã‚‰ã€è¨¼æ‹ é›†ã‚ã‚’æ­¢ã‚ã¦â€œåå‰â€ã‚’ã¤ã‘ã‚‹ã€‚',
        action:'ãƒ¡ãƒ¢ã«ã€Œã„ã¾ï¼šã€‡ã€‡ï¼ˆä¸å®‰/ç„¦ã‚Š/ã ã‚‹ã„ç­‰ï¼‰ã€ã¨1è¡Œã ã‘ã€‚ç†ç”±ã¯æ›¸ã‹ãªã„ã€‚',
        howSteps:[
          'ç´™ã‹ãƒ¡ãƒ¢ã‚¢ãƒ—ãƒªã‚’é–‹ãã€‚',
          'ã€Œã„ã¾ï¼šã€‡ã€‡ï¼ˆä¸å®‰/ç„¦ã‚Š/ã ã‚‹ã„/æ€’ã‚Šï¼‰ã€ã¨1è¡Œã ã‘æ›¸ãã€‚',
          'ç†ç”±ã¯æ›¸ã‹ãšã«é–‰ã˜ã‚‹ï¼ˆã“ã“ãŒåŠ¹ãï¼‰ã€‚'
        ],
        memo:[
          'æ„Ÿæƒ…ãƒ©ãƒ™ãƒªãƒ³ã‚°ã¯æƒ…å‹•åå¿œã®é®é™ã¨é–¢é€£ã™ã‚‹å ±å‘Šã€‚ã€”ç¢ºåº¦ï¼šä¸­ã€•',
          'åˆ†æã§ç‡ƒæ–™æŠ•ä¸‹ã—ã‚„ã™ã„ã®ã§1è¡Œç¸›ã‚ŠãŒå®Ÿç”¨çš„ã€‚ã€”ç¢ºåº¦ï¼šé«˜ã€•'
        ]
      },
      { key:'DOL', glyph:'ğŸ¬', name:'ã‚¤ãƒ«ã‚«ï¼šé¼»æ­Œã§æ’æ°—', img:'t09.webp', alt:'ã‚µãƒ³ã‚¿ã¨ã‚¤ãƒ«ã‚«',
        comment:'é»™ã£ã¦è€ãˆã‚‹ã»ã©å†…å´ãŒé¨’ãŒã—ããªã‚‹ã€‚å‡ºå£ã¯â€œéŸ³â€ã§ä½œã‚Œã‚‹ã€‚',
        action:'é¼»ã‹ã‚‰å¸ã†â†’å£ã‚’é–‰ã˜ã€Œã‚“ãƒ¼ãƒ¼ã€ã§10ç§’åãÃ—3ï¼ˆåãï¼å¸ã†ï¼‰ã€‚',
        howSteps:[
          'é¼»ã‹ã‚‰å¸ã†ï¼ˆç´„3ç§’ï¼‰ã€‚',
          'å£ã‚’é–‰ã˜ãŸã¾ã¾ã€Œã‚“ãƒ¼ãƒ¼ã€ã¨åãï¼ˆç´„7ã€œ10ç§’ï¼‰ã€‚',
          'ã“ã‚Œã‚’3å›ï¼ˆåãï¼å¸ã†ï¼‰ã€‚'
        ],
        memo:[
          'ãƒãƒŸãƒ³ã‚°å‘¼å¸ãŒç”Ÿç†æŒ‡æ¨™ã‚’æ”¹å–„ã—ãŸå°è¦æ¨¡å ±å‘ŠãŒã‚ã‚‹ã€‚ã€”ç¢ºåº¦ï¼šä¸­ã€•',
          'åŠ¹æœã¯æ¡ä»¶å·®ãŒå¤§ãã„ã®ã§â€œå‡ºãŸã‚‰å„²ã‘â€ãã‚‰ã„ã§ã€‚ã€”ç¢ºåº¦ï¼šä½ã€•'
        ]
      },
      { key:'OCT', glyph:'ğŸ™', name:'ã‚¿ã‚³ï¼šæ¡ã‚‹â†’ã»ã©ãï¼ˆçŸ­ç¸®PMRï¼‰', img:'t10.webp', alt:'ã‚µãƒ³ã‚¿ã¨ã‚¿ã‚³',
        comment:'ç·Šå¼µã™ã‚‹ã¨æ‰‹ãŒå¢—ãˆã‚‹ï¼ˆæ¯”å–©ï¼‰ã€‚ã¾ãšæ¡ã£ã¦ã»ã©ãã€‚äººé–“ã«æˆ»ã‚‹ã€‚',
        action:'ã“ã¶ã—5ç§’â†’è„±åŠ›10ç§’ï¼è‚©ã™ãã‚5ç§’â†’è„±åŠ›10ç§’ï¼å¥¥æ­¯5ç§’â†’ã‚†ã‚‹ã‚10ç§’ã€‚ã“ã‚Œã‚’2å‘¨ã€‚',
        howSteps:[
          'ã“ã¶ã—ã‚’å¼·ãæ¡ã‚‹5ç§’â†’ä¸€æ°—ã«è„±åŠ›10ç§’ã€‚',
          'è‚©ã‚’ã™ãã‚ã‚‹5ç§’â†’ã‚¹ãƒˆãƒ³ã¨è½ã¨ã—ã¦è„±åŠ›10ç§’ã€‚',
          'å¥¥æ­¯ã‚’è»½ãå™›ã‚€5ç§’â†’å£ã‚’ã‚†ã‚‹ã‚ã‚‹10ç§’ã€‚',
          'ä¸Šã®3ã¤ã‚’ã‚‚ã†1å‘¨ï¼ˆåˆè¨ˆ2å‘¨ï¼‰ã€‚'
        ],
        memo:[
          'æ¼¸é€²çš„ç­‹å¼›ç·©ï¼ˆPMRï¼‰ãŒä¸å®‰ãªã©ã®æŒ‡æ¨™ã‚’æ”¹å–„ã—ãŸå ±å‘ŠãŒã‚ã‚‹ã€‚ã€”ç¢ºåº¦ï¼šä¸­ã€•',
          'ã“ã“ã§ã¯å°å…¥ç”¨ã®çŸ­ç¸®ç‰ˆã€‚é•·ã„ãƒ—ãƒ­ãƒˆã‚³ãƒ«åŒç­‰ã¯æœŸå¾…ã—ãªã„ã€‚ã€”ç¢ºåº¦ï¼šä¸­ã€•'
        ]
      }
    ];

    /* ãƒã‚ºãƒ¬å¢—é‡ï¼šç¨®é¡ã‚’å¢—ã‚„ã—ã¦â€œå›ã™æ„å‘³â€ã‚’ä½œã‚‹ */
    var MISSES = [
      { glyph:'ğŸ§¦', name:'ç‰‡æ–¹ã ã‘ã®é´ä¸‹',
        comment:'å™›ã¿åˆã‚ãªã„æ—¥ã¯ã‚ã‚‹ã€‚ä»Šæ—¥ã¯ãã‚Œã€‚äººæ ¼ã§ã¯ãªãå¤©å€™ã€‚',
        action:'10ç§’ã ã‘è‚©ã®åŠ›ã‚’æŠœãâ†’åãé•·ã‚ã‚’1å›ã€‚çµ‚ã‚ã‚Šã€‚'
      },
      { glyph:'ğŸ§¾', name:'ãƒ¬ã‚·ãƒ¼ãƒˆã ã‘',
        comment:'é ­ã®ä¸­ãŒä¼šè¨ˆå‡¦ç†ä¸­ã€‚å›ã—ã¦ã‚‚æ™¯æ°—ã¯ä¸ŠãŒã‚‰ãªã„ã€‚ä»•æ§˜ã€‚',
        action:'ç›®ç·šã‚’é ãã«20ç§’â†’ã¾ã°ãŸã3å›ã€‚çµ‚ã‚ã‚Šã€‚'
      },
      { glyph:'ğŸª™', name:'ã‚³ã‚¤ãƒ³1æš',
        comment:'ã€Œæ¬¡ã„ãã€ãŒè¨€ãˆãŸã‚‰å‹ã¡ã€‚åˆ‡ã‚Šæ›¿ãˆç­‹ãƒˆãƒ¬å›ã€‚',
        action:'æ°´ã‚’ä¸€å£â†’é£²ã‚“ã æ„Ÿè¦šã ã‘5ç§’è¦‹ã‚‹ã€‚çµ‚ã‚ã‚Šã€‚'
      },
      { glyph:'ğŸˆ', name:'é¢¨èˆ¹ï¼ˆãªãœã‹è»½ã„ï¼‰',
        comment:'çœŸé¢ç›®ã«å›ã—ã™ãã‚‹ã¨ã€ãŸã¾ã«ã‚®ãƒ£ã‚°ãŒå‡ºã‚‹ã€‚å›å¾©ã¯è»½ã•ã‹ã‚‰ã€‚',
        action:'å£è§’ã¡ã‚‡ã„ä¸Šã’â†’å¸ã£ã¦åãã‚’1å›ã€‚çµ‚ã‚ã‚Šã€‚'
      },
      { glyph:'ğŸ§Š', name:'æ°·ã ã‘',
        comment:'å†·ãˆã¦ã‚‹ã®ã¯æ‚ªã˜ã‚ƒãªã„ã€‚å†·ãˆãªã„ã¨ç‡ƒãˆã™ãã‚‹ã€‚',
        action:'é ¬ã«æ‰‹ã‚’å½“ã¦ã¦3å‘¼å¸ï¼ˆåãé•·ã‚ï¼‰ã€‚çµ‚ã‚ã‚Šã€‚'
      },
      { glyph:'ğŸ“', name:'ã‚¯ãƒªãƒƒãƒ—ã ã‘',
        comment:'æ­¢ã‚ã‚‹ã¨ã“ã‚ã‚’é–“é•ãˆã‚‹ã¨ã€å…¨éƒ¨ãŒã‚ºãƒ¬ã‚‹ã€‚ä»Šæ—¥ã¯â€œæ­¢ã‚ã©ã“ã‚â€ã®è©±ã€‚',
        action:'ã€Œä»Šã‚„ã‚‹1ã¤ã€ã‚’å¿ƒã§æ±ºã‚ã‚‹â†’ãã‚Œä»¥å¤–ã¯ä¸€æ—¦ä¿ç•™ã€‚çµ‚ã‚ã‚Šã€‚'
      },
      { glyph:'ğŸª¡', name:'ç³¸ã¨é‡ã ã‘',
        comment:'ä¿®å¾©ã¯æ´¾æ‰‹ã˜ã‚ƒãªã„ã€‚ã ã‘ã©ã€ã“ã“ã§ç¸«ãˆã°å´©ã‚Œãªã„ã€‚',
        action:'æ•£ã‚‰ã‹ã‚Š1ç‚¹ã ã‘æˆ»ã™ï¼ˆ10ç§’ä»¥å†…ï¼‰ã€‚çµ‚ã‚ã‚Šã€‚'
      },
      { glyph:'ğŸ•¯ï¸', name:'ãƒ­ã‚¦ã‚½ã‚¯1æœ¬',
        comment:'æš—é—‡ã¯ä¸€æ°—ã«æ¶ˆã›ãªã„ã€‚ãªã‚‰ä¸€æœ¬åˆ†ã ã‘ç…§ã‚‰ã™ã€‚',
        action:'ç”»é¢ã®æ˜ã‚‹ã•ã‚’ä¸€æ®µè½ã¨ã™ã€‚çµ‚ã‚ã‚Šã€‚'
      },
      { glyph:'ğŸ§©', name:'ãƒ‘ã‚ºãƒ«ã®æ¬ ç‰‡',
        comment:'æ­£è§£ã¯â€œæ¬¡ã®1ãƒ”ãƒ¼ã‚¹â€ã‹ã‚‰ã—ã‹å§‹ã¾ã‚‰ãªã„ã€‚',
        action:'ä½œæ¥­ã‚’15ç§’ã ã‘ç€æ‰‹â†’ç¶šã‘ã‚‹ã‹ã¯ãã®å¾Œæ±ºã‚ã‚‹ã€‚çµ‚ã‚ã‚Šã€‚'
      },
      { glyph:'ğŸªŸ', name:'çª“ã®æŒ‡ç´‹',
        comment:'å…‰ãŒå…¥ã‚‹ã¨æ±šã‚ŒãŒè¦‹ãˆã‚‹ã€‚è¦‹ãˆãŸã‚‰ã€æ‹­ã‘ã°ã„ã„ã ã‘ã€‚',
        action:'ç”»é¢/æœºã‚’1æ‹­ãã€‚çµ‚ã‚ã‚Šã€‚'
      },
      { glyph:'ğŸ§µ', name:'çµ¡ã‚“ã ç³¸',
        comment:'ã»ã©ãã®ã¯â€œåŠ›â€ã˜ã‚ƒãªãâ€œä½™ç™½â€ã€‚',
        action:'æ¯ã‚’åããªãŒã‚‰è‚©ã‚’å›ã™Ã—2ã€‚çµ‚ã‚ã‚Šã€‚'
      },
      { glyph:'ğŸ›ï¸', name:'éˆ´ã ã‘ï¼ˆãƒãƒªãƒ³ï¼‰',
        comment:'æ³¨æ„å–šèµ·ã¯å°ã•ãé³´ã‚‹ã€‚ç„¡è¦–ã™ã‚‹ã¨ã€ã‚ã¨ã§å¤§éŸ³é‡ã«ãªã‚‹ã€‚',
        action:'é€šçŸ¥ã‚’1ã¤ã ã‘æ¶ˆã™ï¼ˆæœªèª­ã§ã‚‚å¯ï¼‰ã€‚çµ‚ã‚ã‚Šã€‚'
      }
    ];

    /* ã‚»ãƒªãƒ•ï¼ˆã‚ªãƒªã‚¸ãƒŠãƒ«ï¼‰ */
    var QUOTES = [
  { t:"é›»å­ãƒ¬ãƒ³ã‚¸ã¯å„ªã—ã„é¡”ã—ã¦ã‚‹ãŒã€é‡‘å±ã‚’å…¥ã‚Œã‚‹ã¨ç‰™ã‚’ã‚€ãã€‚äººé–“é–¢ä¿‚ã‚‚åŒã˜ã ã€‚ç›¸æ€§ã®æ‚ªã„â€œé‡‘å±â€ã‚’æŒã¡è¾¼ã‚€ãªã€‚", by:"" },
  { t:"ãƒ¬ã‚·ãƒ¼ãƒˆã¯æ¨ã¦ã¦ã‚‚ã€æ”¯æ‰•ã„ã¯æ¶ˆãˆãªã„ã€‚å…ˆå»¶ã°ã—ã¯â€œç¾å®Ÿã‚’è¦‹ãªã„å„€å¼â€ã ã€‚", by:"" },
  { t:"é™é›»æ°—ã¯è¦‹ãˆãªã„ãŒã€è§¦ã‚ŒãŸç¬é–“ã«åˆ†ã‹ã‚‹ã€‚å«Œãªäºˆæ„Ÿã‚‚åŒã˜ã ã€‚è¦‹ãˆãªã„ã†ã¡ã«è·é›¢ã‚’å–ã‚Œã€‚", by:"" },
  { t:"ã‚¹ãƒãƒ›ã®ãƒãƒƒãƒ†ãƒªãƒ¼ã¯0%ã«ãªã‚‹ã¾ã§åƒãã€‚ã ãŒ0%ã®å¾Œã«å‡ºã‚‹ã®ã¯â€œæ ¹æ€§â€ã˜ã‚ƒãªãâ€œå¼·åˆ¶çµ‚äº†â€ã ã€‚", by:"" },
  { t:"ã‚·ãƒ£ãƒ³ãƒ—ãƒ¼ã¯æ³¡ç«‹ã¤ã»ã©ã€Œæ´—ãˆãŸæ°—ã€ã«ãªã‚‹ã€‚å¿™ã—ã•ã‚‚åŒã˜ã ã€‚æ³¡ã§æº€è¶³ã—ã¦ã€æ±šã‚ŒãŒæ®‹ã‚‹ã€‚", by:"" },
  { t:"ãƒ“ãƒ‹ãƒ¼ãƒ«å‚˜ã¯æ°—è»½ã ãŒã€é¢¨ã«å¼±ã„ã€‚â€œã¨ã‚Šã‚ãˆãšâ€ã§ä½œã£ãŸäºˆå®šã¯ã€ã ã„ãŸã„åµã§æŠ˜ã‚Œã‚‹ã€‚", by:"" },
  { t:"ä¿¡å·ã¯æ€¥ã„ã§ã‚‹äººã»ã©èµ¤ã«è¦‹ãˆãªã„ã€‚äººç”Ÿã®èµ¤ã¯ã€ç„¡è¦–ã™ã‚‹ã¨â€œäº‹æ•…ã¨ã—ã¦è«‹æ±‚â€ã•ã‚Œã‚‹ã€‚", by:"" },
  { t:"ãƒ‘ã‚ºãƒ«ã¯åŠ›ã§æŠ¼ã—è¾¼ã‚€ã¨ã€æ­£è§£ã§ã‚‚æ­ªã‚€ã€‚é ‘å¼µã‚Šæ–¹ãŒé›‘ã ã¨ã€æˆåŠŸãŒâ€œå¾Œéºç—‡â€ã«ãªã‚‹ã€‚", by:"" },
  { t:"å†·è”µåº«ã¯ä½•ã§ã‚‚ä¿å­˜ã§ãã‚‹é¡”ã‚’ã—ã¦ã€æœŸé™ã¯å¹³ç­‰ã«éãã‚‹ã€‚æˆ‘æ…¢ã‚‚åŒã˜ã ã€‚è²¯ã‚ã‚‹ã»ã©ã€è…ã‚‹ã€‚", by:"" },
  { t:"ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼ã¯æŠ¼ã—ç¶šã‘ã¦ã‚‚é€Ÿããªã‚‰ãªã„ã€‚ä¸å®‰ã‚‚åŒã˜ã ã€‚é€£æ‰“ã—ã¦ã‚‚ç¾å®Ÿã¯åŠ é€Ÿã—ãªã„ã€‚", by:"" },
  { t:"ã‚«ãƒ¼ãƒ†ãƒ³ã¯è–„ã„ã»ã©å…‰ãŒå…¥ã‚‹ãŒã€å¤œã«ä¸¸è¦‹ãˆã«ãªã‚‹ã€‚ã‚ªãƒ¼ãƒ—ãƒ³ã™ãã‚‹å„ªã—ã•ã¯ã€æ™‚ã€…è‡ªåˆ†ã‚’æ™’ã™ã€‚", by:"" },
  { t:"è¾æ›¸ã¯åˆ†åšã„ãŒã€é–‹ã‹ãªã„ã¨ä¸€æ–‡å­—ã‚‚åŠ©ã‘ãªã„ã€‚çŸ¥è­˜ã‚‚åŒã˜ã ã€‚â€œæŒã£ã¦ã‚‹â€ã ã‘ã§ã¯æˆ¦ãˆãªã„ã€‚", by:"" },
  { t:"æ°´ãŸã¾ã‚Šã¯é¿ã‘ãŸã¤ã‚‚ã‚Šã§ã€é´ã®ä¸­ã«å…¥ã‚‹ã€‚å•é¡Œã‚‚åŒã˜ã ã€‚é¿ã‘ã‚‹ã»ã©ã€åˆ¥ã®å½¢ã§ä¾µå…¥ã™ã‚‹ã€‚", by:"" },
  { t:"é§è»Šã¯â€œå…¥ã‚Œã‚‹æŠ€è¡“â€ã‚ˆã‚Šâ€œå‡ºã‚‹ä½™ç™½â€ãŒå¤§äº‹ã ã€‚äºˆå®šã‚‚åŒã˜ã ã€‚è©°ã‚ã‚‹ã ã‘è©°ã‚ã‚‹ã¨ã€æŠœã‘ã‚‰ã‚Œãªã„ã€‚", by:"" },
  { t:"è›å…‰ç¯ã¯åˆ‡ã‚Œã‚‹ç›´å‰ã»ã©ãƒã‚«ãƒã‚«ã—ã¦ç›®ç«‹ã¤ã€‚é™ç•Œã‚‚åŒã˜ã ã€‚æ´¾æ‰‹ã«ãªã‚‹å‰ã«äº¤æ›ã—ã‚ã€‚", by:"" },
  { t:"ç‚­é…¸ã¯æŒ¯ã‚‹ã»ã©å‹¢ã„ãŒå‡ºã‚‹ãŒã€é–‹ã‘ã‚‹ã¨æº¢ã‚Œã‚‹ã€‚æ„Ÿæƒ…ã‚‚åŒã˜ã ã€‚æºã‚‰ã—ãŸåˆ†ã ã‘ã€ã‚ã¨ã§å™´ãã€‚", by:"" },
  { t:"ãƒã‚°ã‚«ãƒƒãƒ—ã¯ç†±ã„ã»ã©æŒã¡æ–¹ãŒé›£ã—ã„ã€‚å¤§äº‹ãªã‚‚ã®ã»ã©ã€â€œæ‰±ã„æ–¹â€ãŒå•ã‚ã‚Œã‚‹ã€‚", by:"" },
  { t:"åœ°å›³ã‚¢ãƒ—ãƒªã¯è¿·ã£ã¦ã‹ã‚‰èµ·å‹•ã™ã‚‹äººã«ã ã‘å†·ãŸã„ã€‚æº–å‚™ã¯ã„ã¤ã‚‚ã€é…ã„å´ã®å‘³æ–¹ã‚’ã—ãªã„ã€‚", by:"" },
  { t:"æ´—æ¿¯ç‰©ã¯â€œç•³ã¾ãªã„è‡ªç”±â€ã‚’ä¸ãˆã‚‹ã¨ã€éƒ¨å±‹ã‚’æ”¯é…ã™ã‚‹ã€‚å°ã•ãªæ”¾ç½®ã¯ã€å¿…ãšç‹ã«ãªã‚‹ã€‚", by:"" },
  { t:"ã‚³ãƒ”ãƒ¼æ©Ÿã¯ç´™è©°ã¾ã‚Šã®ã¨ãã»ã©ã€Œæ—©ãã—ã¦ã€ã¨æ€¥ã‹ã™ã€‚ãƒˆãƒ©ãƒ–ãƒ«ã¯å¿™ã—ã„æ—¥ã«æ¥ã‚‹ã€‚ç¤¼å„€ãŒãªã„ã€‚", by:"" },
  { t:"ç›®è–¬ã¯ä¸€æ»´ã§ä¸–ç•Œã‚’å¤‰ãˆã‚‹ãŒã€åˆºã—ãŸç¬é–“ã¯ç—›ã„ã€‚æ”¹å–„ã‚‚åŒã˜ã ã€‚åŠ¹ãã»ã©ã€æœ€åˆã¯é•å’Œæ„ŸãŒã‚ã‚‹ã€‚", by:"" },
  { t:"å†·ã‚ãŸã‚³ãƒ¼ãƒ’ãƒ¼ã¯ã€æ¸©ã‚ç›´ã—ã¦ã‚‚â€œæ·¹ã‚ŒãŸã¦â€ã«ã¯ãªã‚‰ãªã„ã€‚å›å¾©ã‚‚åŒã˜ã ã€‚ã ã‹ã‚‰å…ˆã«å†·ã¾ã™ãªã€‚", by:"" },
  { t:"ã‚¤ãƒ¤ãƒ›ãƒ³ã¯çµ¡ã‚€ã€‚å¿…ãšçµ¡ã‚€ã€‚äººé–“é–¢ä¿‚ã‚‚åŒã˜ã ã€‚æ”¾ç½®ã™ã‚‹ã¨â€œã»ã©ãæ™‚é–“â€ãŒå¢—ãˆã‚‹ã€‚", by:"" },
  { t:"çª“ã®æŒ‡ç´‹ã¯ã€å…‰ãŒå·®ã—ã¦åˆã‚ã¦è¦‹ãˆã‚‹ã€‚å•é¡Œã‚‚åŒã˜ã ã€‚æ˜ã‚‹ã„æ™‚ã»ã©ã€æ±šã‚ŒãŒç›®ç«‹ã¤ã€‚", by:"" },
  { t:"ã‚¢ã‚¤ã‚¹ã¯æº¶ã‘ã¦ã‚‚ç”˜ã„é¡”ã‚’ã—ã¦ã„ã‚‹ã€‚å„ªã—ã•ã‚‚åŒã˜ã ã€‚æº¶ã‘ãŸã‚‰å½¢ã¯æˆ»ã‚‰ãªã„ã€‚", by:"" },
  { t:"ã‚³ãƒ³ãƒ“ãƒ‹ã®ãƒ¬ã‚¸å‰ã¯ã€ã¤ã„ä½™è¨ˆãªã‚‚ã®ã‚’æ´ã¾ã›ã‚‹ã€‚èª˜æƒ‘ã¯ã„ã¤ã‚‚â€œå‡ºå£â€ã«ç«‹ã£ã¦ã„ã‚‹ã€‚", by:"" },
  { t:"é‹ã®å¹ãã“ã¼ã‚Œã¯ã€è¦‹ã¦ãªã„10ç§’ã§èµ·ãã‚‹ã€‚äººç”Ÿã®å´©å£Šã‚‚ã ã„ãŸã„ã€ãã®10ç§’ã§æ¥ã‚‹ã€‚", by:"" },
  { t:"è‡ªè»¢è»Šã®ãƒã‚§ãƒ¼ãƒ³ã¯å¤–ã‚ŒãŸç¬é–“ã€è„šåŠ›ãŒã‚¼ãƒ­ã«ãªã‚‹ã€‚ä»•çµ„ã¿ãŒå£Šã‚Œã‚‹ã¨ã€åŠªåŠ›ã¯ç„¡éŸ³ã«ãªã‚‹ã€‚", by:"" },
  { t:"ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¯é€²æ—ãŒ99%ã§æ­¢ã¾ã‚‹ã€‚â€œã‚‚ã†ã™ãå¤§ä¸ˆå¤«â€ã£ã¦è¨€è‘‰ã¯ã€å±é™ºãªéº»é…”ã ã€‚", by:"" },
  { t:"éå¸¸å£ã®ãƒãƒ¼ã‚¯ã¯æ™®æ®µãƒ€ã‚µã„ãŒã€å¿…è¦ãªæ™‚ã«ç¥ã«ãªã‚‹ã€‚ç¿’æ…£ã‚‚åŒã˜ã ã€‚å¹³å‡¡ãªã‚‚ã®ãŒå‘½ç¶±ã«ãªã‚‹ã€‚", by:"" }
];

    // ===== state / storage =====
    function loadJson(key, fallback){
      try{
        var v = localStorage.getItem(key);
        if(!v) return fallback;
        return JSON.parse(v);
      }catch(_){
        return fallback;
      }
    }
    function saveJson(key, obj){
      try{ localStorage.setItem(key, JSON.stringify(obj)); }catch(_){}
    }

    var state = loadJson(STATE_KEY, null) || {
      spins: 0,
      soundOn: false,
      missStreak: 0,
      last: null
    };

    var dex = loadJson(DEX_KEY, {}) || {};

    function applyStateUI(){
      if($spinCount) $spinCount.textContent = String(state.spins || 0);
      if($sndMode) $sndMode.textContent = state.soundOn ? 'ON' : 'OFF';
      if($toggleSnd){
        $toggleSnd.setAttribute('aria-pressed', state.soundOn ? 'true' : 'false');
        $toggleSnd.textContent = 'ğŸ”ˆ éŸ³ï¼š' + (state.soundOn ? 'ON' : 'OFF');
      }
    }

    // ===== toast =====
    function toast(msg){
      if(!$toast) return;
      $toast.textContent = msg;
      $toast.classList.add('show');
      setTimeout(function(){ $toast.classList.remove('show'); }, 1200);
    }

    // ===== audio / vib =====
    var audioCtx = null;
    function ensureAudio(){
      if(!state.soundOn) return null;
      if(audioCtx) return audioCtx;
      try{
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        return audioCtx;
      }catch(_){
        return null;
      }
    }
    function vib(p){
      try{ if(navigator && navigator.vibrate) navigator.vibrate(p); }catch(_){}
    }
    function beep(freq, ms, gain){
      var ctx = ensureAudio();
      if(!ctx) return;
      try{
        var o = ctx.createOscillator();
        var g = ctx.createGain();
        o.type = 'sine';
        o.frequency.value = freq;
        g.gain.value = gain || 0.03;
        o.connect(g);
        g.connect(ctx.destination);
        o.start();
        setTimeout(function(){ try{o.stop();}catch(_){ } }, ms);
      }catch(_){}
    }
    function jingleHit(tier){
      if(tier==='SUPER'){
        beep(880,90,0.05); setTimeout(function(){beep(988,90,0.05)},100);
        setTimeout(function(){beep(1175,140,0.055)},210);
        setTimeout(function(){beep(1319,160,0.058)},360);
      }else if(tier==='BIG'){
        beep(784,90,0.045); setTimeout(function(){beep(880,130,0.045)},110);
        setTimeout(function(){beep(988,150,0.045)},280);
      }else{
        beep(660,70,0.032); setTimeout(function(){beep(880,95,0.04)},90);
      }
    }

    function pickIndex(len){ return (len<=1) ? 0 : Math.floor(Math.random()*len); }

    function escapeHtml(s){
      return String(s || '')
        .replace(/&/g,'&amp;')
        .replace(/</g,'&lt;')
        .replace(/>/g,'&gt;')
        .replace(/"/g,'&quot;')
        .replace(/'/g,'&#39;');
    }

    // ===== dex =====
    function dexUnlockedCount(){
      var n = 0;
      for(var i=0;i<RESULTS.length;i++){
        var k = RESULTS[i].key;
        if(dex && dex[k]) n++;
      }
      return n;
    }

    function renderDex(){
      if(!$dexGrid) return;
      $dexGrid.innerHTML = '';

      for(var i=0;i<RESULTS.length;i++){
        var r = RESULTS[i];
        var cell = document.createElement('div');
        cell.className = 'dex-cell';

        if(dex && dex[r.key]){
          var img = document.createElement('img');
          img.loading = 'lazy';
          img.decoding = 'async';
          img.src = IMG_BASE + r.img;
          img.alt = r.name || 'å›³é‘‘';
          cell.appendChild(img);
        }else{
          var lock = document.createElement('div');
          lock.className = 'dex-lock';
          lock.textContent = '???';
          cell.appendChild(lock);
        }
        $dexGrid.appendChild(cell);
      }

      if($dexCount){
        var c = dexUnlockedCount();
        $dexCount.textContent = String(c);
        if($dexNote){
          $dexNote.textContent = (c >= 10)
            ? '10/10é”æˆï¼šç§°å·ã€Œå†¬ã®å›³é‘‘ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆã€'
            : 'å½“ãŸã‚Šï¼ˆ3ã¤æƒã„ï¼‰ã§åŸ‹ã¾ã‚‹ã€‚';
        }
      }
    }

    function unlockDex(key){
      if(!key) return;
      if(!dex) dex = {};
      if(dex[key]) return;
      dex[key] = true;
      saveJson(DEX_KEY, dex);
      renderDex();
    }

    // ===== UI reel helpers =====
    function setReelSpin(on){
      [$reel1,$reel2,$reel3].forEach(function(r){
        if(!r) return;
        if(on) r.classList.add('spin');
        else r.classList.remove('spin');
      });
    }
    function clearReelFx(){
      if($reels){
        $reels.classList.remove('reach');
        $reels.classList.remove('win');
      }
      if($sfx){
        $sfx.classList.remove('show','reach','win');
      }
    }
    function tickGlyph(el, arr){
      if(!el) return;
      el.textContent = arr[Math.floor(Math.random()*arr.length)];
    }

    // ===== FX =====
    function showSfx(mode){
      if(!$sfx) return;
      $sfx.classList.add('show');
      $sfx.classList.remove('reach','win');
      if(mode) $sfx.classList.add(mode);
      setTimeout(function(){
        if($sfx){
          $sfx.classList.remove('show','reach','win');
        }
      }, (mode==='win') ? 1600 : 1300);
    }

    function showReach(){
      if($reachBanner){
        $reachBanner.classList.add('show');
        setTimeout(function(){ if($reachBanner) $reachBanner.classList.remove('show'); }, 1550);
      }
      if($reels) $reels.classList.add('reach');
      showSfx('reach');
      setTimeout(function(){
        if($reels) $reels.classList.remove('reach');
      }, 1550);
    }

    function showFreeze(sub, ms){
      if(!$freezeFx || !$freezeSub) return;
      $freezeSub.textContent = sub || 'ï¼ˆæ²ˆé»™ã®ã‚ã¨â€¦ä½•ã‹ãŒæ¥ã‚‹ï¼‰';
      $freezeFx.classList.add('show');
      beep(180, 110, 0.03);
      setTimeout(function(){ if($freezeFx) $freezeFx.classList.remove('show'); }, Math.max(900, ms||1400));
    }

    function showBonus(tier, quote, hitRes){
      if(!$bonusFx) return;

      if($bxRibbon){
        $bxRibbon.textContent = (tier==='SUPER') ? 'æ¥µ' : (tier==='BIG') ? 'ç†±' : 'æ±ºç€';
      }
      if($bxTop) $bxTop.textContent = (tier==='SUPER') ? 'SUPER BONUS' : (tier==='BIG') ? 'BIG BONUS' : 'BONUS';
      if($bxMid) $bxMid.textContent = (hitRes && hitRes.name) ? (hitRes.name + 'ï¼') : 'HITï¼';

      if($bxSub){
        if(quote && quote.t){
          $bxSub.textContent = 'ã€Œ' + quote.t + 'ã€';
        }else{
          $bxSub.textContent = 'â€”';
        }
      }

      if($bxImg && $bxImgPlaceholder){
        $bxImg.onload = null;
        $bxImg.onerror = null;

        if(hitRes && hitRes.img){
          $bxImgPlaceholder.style.display = 'none';
          $bxImg.style.display = '';

          $bxImg.onload = function(){ $bxImgPlaceholder.style.display='none'; };
          $bxImg.onerror = function(){
            $bxImg.style.display = 'none';
            $bxImgPlaceholder.textContent = 'ç”»åƒãŒèª­ã¿è¾¼ã‚ã¾ã›ã‚“ï¼š' + hitRes.img;
            $bxImgPlaceholder.style.display = '';
          };
          $bxImg.src = IMG_BASE + hitRes.img;
          $bxImg.alt = hitRes.alt || hitRes.name || 'å½“ãŸã‚Šç”»åƒ';
        }else{
          $bxImg.style.display = 'none';
          $bxImg.removeAttribute('src');
          $bxImg.alt = '';
          $bxImgPlaceholder.style.display = 'none';
        }
      }

      /* æ¼”å‡ºæ™‚é–“ï¼šé•·ã‚ */
      var dur = (tier==='SUPER') ? 6200 : (tier==='BIG') ? 5400 : 4700;

      $bonusFx.classList.add('show');
      showSfx('win');
      jingleHit(tier);
      setTimeout(function(){ if($bonusFx) $bonusFx.classList.remove('show'); }, dur);
    }

    // ===== result rendering =====
    function setResultImage(r, isMiss){
      if(!$resImg || !$resImgPlaceholder) return;
      $resImg.onload = null;
      $resImg.onerror = null;

      if(isMiss || !r || !r.img){
        $resImg.removeAttribute('src');
        $resImg.setAttribute('alt','');
        $resImg.style.display = 'none';
        $resImgPlaceholder.style.display = 'none';
        return;
      }

      $resImgPlaceholder.style.display = 'none';
      $resImg.style.display = '';

      $resImg.onload = function(){ $resImgPlaceholder.style.display='none'; };
      $resImg.onerror = function(){
        $resImg.style.display = 'none';
        $resImgPlaceholder.textContent = 'ç”»åƒãŒèª­ã¿è¾¼ã‚ã¾ã›ã‚“ï¼š' + r.img;
        $resImgPlaceholder.style.display = '';
      };

      $resImg.src = IMG_BASE + r.img;
      $resImg.alt = r.alt || r.name || 'çµæœç”»åƒ';
    }

    function fillList($ul, items){
      if(!$ul) return;
      $ul.innerHTML = '';
      (items || []).forEach(function(txt){
        var li = document.createElement('li');
        li.textContent = txt;
        $ul.appendChild(li);
      });
    }

    function renderMethodBlock(r){
      if(!$methodBox || !$methodHow || !$methodMemo) return;
      if(!r || !r.howSteps || !r.memo){
        $methodBox.style.display = 'none';
        $methodHow.innerHTML = '';
        $methodMemo.innerHTML = '';
        return;
      }
      fillList($methodHow, r.howSteps);
      fillList($methodMemo, r.memo);
      $methodBox.style.display = 'block';
    }

    function renderHit(resIdx, quoteIdx, tier){
      var r = RESULTS[resIdx];
      var q = QUOTES[quoteIdx];

      unlockDex(r.key);

      if($panel) $panel.style.display = 'block';
      if($badge){
        var b = (tier==='SUPER') ? 'âœ¨ æ¥µå½“ãŸã‚Š' : (tier==='BIG') ? 'ğŸŒŸ æ¿€å½“ãŸã‚Š' : 'ğŸ¯ å½“ãŸã‚Š';
        $badge.textContent = r.glyph + ' ' + b;
      }
      if($resTitle) $resTitle.textContent = r.glyph + ' ' + r.name;

      var line1 = r.comment;
      var line2 = (q && q.t) ? ('ã€Œ' + q.t + 'ã€') : '';
      if($resComment){
        $resComment.innerHTML =
          '<span>' + escapeHtml(line1) + '</span>' +
          '<br><br>' +
          '<span style="color:var(--muted); font-weight:1100">' + escapeHtml(line2) + '</span>';
      }

      if($resAction) $resAction.textContent = r.action;
      setResultImage(r, false);
      renderMethodBlock(r);

      state.missStreak = 0;
      state.last = { kind:'HIT', resIdx:resIdx, quoteIdx:quoteIdx, tier:tier };
      saveJson(STATE_KEY, state);

      document.dispatchEvent(new Event('result:ready'));
    }

    function renderMiss(missIdx, quoteIdx){
      var m = MISSES[missIdx];
      var q = QUOTES[quoteIdx];

      if($panel) $panel.style.display = 'block';
      if($badge) $badge.textContent = 'ğŸ’¥ ãƒã‚ºãƒ¬';
      if($resTitle) $resTitle.textContent = m.glyph + ' ãƒã‚ºãƒ¬ï¼š' + m.name;

      var line1 = m.comment;
      var line2 = (q && q.t) ? ('ã€Œ' + q.t + 'ã€') : '';
      if($resComment){
        $resComment.innerHTML =
          '<span>' + escapeHtml(line1) + '</span>' +
          '<br><br>' +
          '<span style="color:var(--muted); font-weight:1100">' + escapeHtml(line2) + '</span>';
      }

      if($resAction) $resAction.textContent = m.action;
      setResultImage(null, true);
      renderMethodBlock(null);

      state.missStreak = (state.missStreak || 0) + 1;
      state.last = { kind:'MISS', missIdx:missIdx, quoteIdx:quoteIdx };
      saveJson(STATE_KEY, state);

      document.dispatchEvent(new Event('result:ready'));
    }

    // ===== lottery =====
    function rollOutcome(){
      /* ä½“æ„Ÿã‚’æ¿ƒã: ãƒªãƒ¼ãƒ/å‡çµ/å½“ãŸã‚ŠãŒå‡ºã‚‹ä¸–ç•Œ */
      var baseHit = 0.12;     // 12%
      var reachOnMiss = 0.34; // å¤–ã‚Œæ™‚ã®ãƒªãƒ¼ãƒç‡
      var freezeOnReach = 0.28;

      var ms = (state.missStreak || 0);
      var add = 0;
      if(ms >= 7){
        add = Math.min(0.14, (ms - 7 + 1) * 0.014); // æœ€å¤§+14%
      }
      var hitRate = Math.min(0.30, baseHit + add);

      var isHit = (Math.random() < hitRate);
      var isNearMiss = (!isHit) && (Math.random() < reachOnMiss);

      var tier = 'NORMAL';
      if(isHit){
        var r = Math.random();
        tier = (r < 0.035) ? 'SUPER' : (r < 0.24) ? 'BIG' : 'NORMAL';
      }

      var willFreeze = false;
      if(isNearMiss || isHit){
        willFreeze = (Math.random() < freezeOnReach);
      }

      return { isHit:isHit, isNearMiss:isNearMiss, willFreeze:willFreeze, tier:tier };
    }

    // ===== spin core =====
    var running = false;

    function spin(){
      if(running) return;
      running = true;

      /* ä½•ãŒèµ·ãã¦ã‚‚å¸°ã£ã¦ãã‚‹ä¿é™º */
      var watchdog = setTimeout(function(){
        try{ clearReelFx(); }catch(_){}
        try{ setReelSpin(false); }catch(_){}
        try{ if($spinBtn) $spinBtn.disabled = false; }catch(_){}
        running = false;
      }, 15000);

      try{
        state.spins = (state.spins || 0) + 1;
        applyStateUI();
        saveJson(STATE_KEY, state);

        clearReelFx();
        if($spinBtn) $spinBtn.disabled = true;

        var glyphs = RESULTS.map(function(r){ return r.glyph; });

        var out = rollOutcome();
        var quoteIdx = pickIndex(QUOTES.length);

        var winIdx = null;
        if(out.isHit){
          winIdx = pickIndex(RESULTS.length);
        }

        var final1, final2, final3;

        if(out.isHit){
          final1 = RESULTS[winIdx].glyph;
          final2 = final1;
          final3 = final1;
        }else if(out.isNearMiss){
          var reachGlyph = glyphs[Math.floor(Math.random()*glyphs.length)];
          final1 = reachGlyph;
          final2 = reachGlyph;

          final3 = glyphs[Math.floor(Math.random()*glyphs.length)];
          var guard=0;
          while(final3 === reachGlyph && guard < 20){
            final3 = glyphs[Math.floor(Math.random()*glyphs.length)];
            guard++;
          }
        }else{
          final1 = glyphs[Math.floor(Math.random()*glyphs.length)];
          do { final2 = glyphs[Math.floor(Math.random()*glyphs.length)]; } while(final2 === final1);
          do { final3 = glyphs[Math.floor(Math.random()*glyphs.length)]; } while(final3 === final1 || final3 === final2);
        }

        /* æ¼”å‡ºæ™‚é–“ï¼šé•·ã‚ï¼ˆæ¥½ã—ã‚ã‚‹ç‰ˆï¼‰ */
        var tick = 32;       // æ›´æ–°é–“éš”
        var stop1 = 980;     // 1åœæ­¢
        var stop2 = 1560;    // 2åœæ­¢
        var freezeAdded = false;

        beep(420, 55, 0.02);
        setReelSpin(true);
        vib(10);

        var t = 0;
        var stopped1=false, stopped2=false, stopped3=false;

        var timer = setInterval(function(){
          try{
            t += tick;

            if(!stopped1) tickGlyph($g1, glyphs);
            if(!stopped2) tickGlyph($g2, glyphs);
            if(!stopped3) tickGlyph($g3, glyphs);

            if(!stopped1 && t >= stop1){
              stopped1 = true;
              $g1.textContent = final1;
              beep(520, 40, 0.02);
              vib(10);
            }

            if(!stopped2 && t >= stop2){
              stopped2 = true;
              $g2.textContent = final2;
              beep(560, 45, 0.02);
              vib(12);

              if(final1 === final2){
                showReach();
                if(out.willFreeze){
                  freezeAdded = true;
                  showFreeze(out.isHit ? 'ï¼ˆç©ºæ°—ãŒå¤‰ã‚ã£ãŸâ€¦æƒã†æ°—ãŒã™ã‚‹ï¼‰' : 'ï¼ˆæƒã†â€¦ï¼Ÿ æƒã‚ãªã„â€¦ï¼Ÿï¼‰', 1700);
                }
              }
            }

            var stop3 = stop2 + 820 + (freezeAdded ? 1400 : 0);
            if(!stopped3 && t >= stop3){
              stopped3 = true;

              var tease = (out.isNearMiss && !out.isHit && final1 === final2);
              if(tease){
                $g3.textContent = final1; // ä¸€ç¬ã ã‘æƒã„
              }else{
                $g3.textContent = final3;
              }

              beep(620, 55, 0.02);
              vib(16);

              function finish(){
                clearInterval(timer);
                clearTimeout(watchdog);

                setReelSpin(false);
                if($spinBtn) $spinBtn.disabled = false;
                running = false;

                try{
                  if($cabinet){
                    $cabinet.classList.add('shake');
                    setTimeout(function(){ $cabinet.classList.remove('shake'); }, 720);
                  }
                }catch(_){}

                var isWin = (final1===final2 && final2===final3);

                if(isWin){
                  if($reels) $reels.classList.add('win');

                  var tier = out.tier || 'NORMAL';
                  showBonus(tier, QUOTES[quoteIdx], RESULTS[winIdx]);
                  renderHit(winIdx, quoteIdx, tier);
                  toast('æ±ºç€ãƒƒï¼ï¼š' + RESULTS[winIdx].name);
                }else{
                  /* ãƒªãƒ¼ãƒå¤–ã‚Œ: çµæœæ›´æ–°ã—ãªã„ï¼ˆå‰å›ã®å½“ãŸã‚Šã‚’å®ˆã‚‹ï¼‰ */
                  if(out.isNearMiss){
                    state.missStreak = (state.missStreak || 0) + 1;
                    saveJson(STATE_KEY, state);
                    toast('ãƒªãƒ¼ãƒâ€¦ï¼ ã ãŒã€ã“ã“ã§æ­¢ã¾ã‚‹ã‹');
                    document.dispatchEvent(new Event('result:ready'));
                    return;
                  }

                  var missIdx = pickIndex(MISSES.length);
                  renderMiss(missIdx, quoteIdx);
                  toast('æ•—åŒ—â€¦ã ãŒå­¦ã¹ï¼š' + MISSES[missIdx].name);
                }

                setTimeout(function(){
                  if($reels) $reels.classList.remove('win');
                }, 2200);
              }

              if(tease){
                setTimeout(function(){
                  $g3.textContent = final3; // ãšã‚‰ã™
                  finish();
                }, 360);
              }else{
                finish();
              }
            }
          }catch(err){
            try{ clearInterval(timer); }catch(_){}
            try{ clearTimeout(watchdog); }catch(_){}
            try{ clearReelFx(); }catch(_){}
            try{ setReelSpin(false); }catch(_){}
            try{ if($spinBtn) $spinBtn.disabled = false; }catch(_){}
            running = false;
            toast('ã‚¨ãƒ©ãƒ¼ï¼šã‚‚ã†ä¸€åº¦å›ã›ã‚‹');
          }
        }, tick);

      }catch(err){
        try{ clearTimeout(watchdog); }catch(_){}
        try{ if($spinBtn) $spinBtn.disabled = false; }catch(_){}
        running = false;
        toast('ã‚¨ãƒ©ãƒ¼ï¼šã‚‚ã†ä¸€åº¦å›ã›ã‚‹');
      }
    }

    function resetAll(){
      if(running) return;
      state.spins = 0;
      state.last = null;
      state.missStreak = 0;
      saveJson(STATE_KEY, state);

      dex = {};
      saveJson(DEX_KEY, dex);

      applyStateUI();
      renderDex();
      clearReelFx();

      if($panel) $panel.style.display = 'none';
      if($methodBox) $methodBox.style.display = 'none';

      if($g1) $g1.textContent = 'â„ï¸';
      if($g2) $g2.textContent = 'ğŸ„';
      if($g3) $g3.textContent = 'ğŸ';

      if($resImg){
        $resImg.style.display='none';
        $resImg.removeAttribute('src');
        $resImg.setAttribute('alt','');
      }
      if($resImgPlaceholder) $resImgPlaceholder.style.display = 'none';

      toast('ãƒªã‚»ãƒƒãƒˆå®Œäº†');
    }

    // ===== events =====
    if($spinBtn) $spinBtn.addEventListener('click', function(){
      if(state.soundOn){
        var ctx = ensureAudio();
        if(ctx && ctx.state === 'suspended'){ ctx.resume().catch(function(){}); }
      }
      spin();
    });

    if($resetBtn) $resetBtn.addEventListener('click', resetAll);

    if($toggleSnd) $toggleSnd.addEventListener('click', function(){
      state.soundOn = !state.soundOn;
      applyStateUI();
      saveJson(STATE_KEY, state);
      toast('éŸ³ï¼š' + (state.soundOn ? 'ON' : 'OFF'));
      if(state.soundOn){
        var ctx = ensureAudio();
        if(ctx && ctx.state === 'suspended'){ ctx.resume().catch(function(){}); }
        beep(660, 70, 0.04);
      }
    });

    document.addEventListener('keydown', function(e){
      if(e.code !== 'Space') return;
      var tag = (document.activeElement && document.activeElement.tagName || '').toLowerCase();
      if(tag === 'input' || tag === 'textarea') return;
      e.preventDefault();
      spin();
    });

    // init
    applyStateUI();
    renderDex();

    if(state.last){
      if(state.last.kind === 'HIT'){
        renderHit(state.last.resIdx, state.last.quoteIdx, state.last.tier || 'NORMAL');
      }else if(state.last.kind === 'MISS'){
        renderMiss(state.last.missIdx, state.last.quoteIdx);
      }
    }
  }());
  </script>

  <script>(function(){
    // ã€Œã‚ãªãŸã®ã“ã“ã‚Lvã€ï¼šçµæœç¢ºå®šï¼ˆå½“ãŸã‚Š/ãƒã‚ºãƒ¬/ãƒªãƒ¼ãƒï¼‰ã§æ¯å›åŠ ç®—
    var DONE_KEY='specimens:open:byid', TOTAL_KEY='specimens:open:total';
    var MY_ID=document.body.getAttribute('data-id')||'christmas-present';
    function mark(){
      try{
        var t=(+localStorage.getItem(TOTAL_KEY)||0)+1;
        localStorage.setItem(TOTAL_KEY,String(t));
        var map={}; try{ map=JSON.parse(localStorage.getItem(DONE_KEY)||'{}'); }catch(_){}
        map[MY_ID]=(map[MY_ID]||0)+1;
        localStorage.setItem(DONE_KEY, JSON.stringify(Object.assign({},map,{_ts:Date.now()})));
      }catch(_){}
    }
    document.addEventListener('result:ready', function(){ mark(); });
  }());</script>
</body>
</html>