<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>å®çŸ³ã‚¿ã‚¤ãƒ—æ‹æ„›è¨ºæ–­</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{ --brand:#b86b77; --card:#fff; --bg:#fdf6f0; }
    body{ font-family: system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN","Noto Sans JP",sans-serif;
          background: var(--bg); color:#333; margin:0; padding:22px; }
    .wrap{ max-width:880px; margin:0 auto; }
    h1{ text-align:center; color:var(--brand); margin:4px 0 14px; font-size:clamp(20px,4vw,30px); }
    .card{ background:var(--card); padding:20px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,.08); }
    .meta{ display:flex; justify-content:space-between; gap:12px; color:#666; font-size:12px; margin:0 2px 12px; }
    .question{ margin:22px 0; }
    .question p{ margin:0 0 10px; font-weight:600; }
    .scale{ display:grid; gap:8px; }
    .scale label{ display:flex; align-items:center; gap:10px; background:#f4f4f4; padding:10px; border-radius:10px; cursor:pointer; }
    .scale input{ accent-color:var(--brand); }
    .actions{ display:flex; justify-content:center; gap:10px; flex-wrap:wrap; margin-top:18px; }
    .btn{ background:var(--brand); color:#fff; border:none; border-radius:10px; padding:12px 18px; font-size:16px; cursor:pointer; }
    .btn.secondary{ background:#8a8a8a; }
    #result{ text-align:center; color:var(--brand); margin-top:22px; white-space:pre-line; }
    #link{ text-align:center; margin-top:12px; }
    #link a{ display:inline-block; background:var(--brand); color:#fff; text-decoration:none; padding:10px 16px; border-radius:10px; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ğŸ’ å®çŸ³ã‚¿ã‚¤ãƒ— æ‹æ„›è¨ºæ–­ ğŸ’</h1>

    <div class="card">
      <div class="meta">
        <span id="progress">æœªå›ç­” 32 / 32</span>
        <span>5ä»¶æ³•ï¼š1ï¼ˆã¾ã£ãŸãå½“ã¦ã¯ã¾ã‚‰ãªã„ï¼‰ã€œ5ï¼ˆã¨ã¦ã‚‚å½“ã¦ã¯ã¾ã‚‹ï¼‰</span>
      </div>

      <form id="quizForm"></form>

      <div class="actions">
        <button type="button" class="btn" onclick="calculate()">è¨ºæ–­ã™ã‚‹</button>
        <button type="button" class="btn secondary" onclick="resetForm()">ãƒªã‚»ãƒƒãƒˆ</button>
      </div>

      <h2 id="result"></h2>
      <div id="link"></div>
    </div>
  </div>

  <script>
    // è³ªå•ï¼ˆ32å•ï¼‰
    const questions = [
      // Erosï¼ˆæƒ…ç†±ï¼‰
      "æ‹æ„›ã¯é‹å‘½ã®ã‚ˆã†ãªã‚‚ã®ã§ã‚ã‚‹ã¨æ„Ÿã˜ã‚‹",
      "ä¸€ç›®æƒšã‚Œã™ã‚‹ã“ã¨ãŒå¤šã„",
      "æ‹æ„›ä¸­ã¯ç†æƒ³ã‚’è¿½ã„æ±‚ã‚ãŒã¡",
      "æ‹æ„›ã¯æ„Ÿæƒ…ãŒã™ã¹ã¦ã ã¨æ€ã†",
      // Ludusï¼ˆéŠæˆ¯ï¼‰
      "æ‹æ„›ã¯ã‚²ãƒ¼ãƒ ã®ã‚ˆã†ãªæ¥½ã—ã•ãŒå¤§äº‹",
      "è¤‡æ•°ã®äººã«åŒæ™‚ã«å¥½æ„ã‚’æŒã¤ã“ã¨ãŒã‚ã‚‹",
      "æ‹æ„›ã«è‡ªç”±ãŒå¿…è¦ã ã¨æ€ã†",
      "æ·±åˆ»ã™ãã‚‹æ‹æ„›ã¯è‹¦æ‰‹",
      // Storgeï¼ˆå‹æ„›ï¼‰
      "æ‹æ„›ã¯å‹æƒ…ã‹ã‚‰å§‹ã¾ã‚‹ã®ãŒç†æƒ³",
      "ä¿¡é ¼é–¢ä¿‚ã‚’å¤§äº‹ã«ã—ãŸã„",
      "æ‹äººã¨ã¯é•·ã„æ™‚é–“ã‚’ã‹ã‘ã¦é–¢ä¿‚ã‚’ç¯‰ããŸã„",
      "æ‹äººã¨è¦ªå‹ã®ã‚ˆã†ãªé–¢ä¿‚ãŒç†æƒ³",
      // Maniaï¼ˆç†±ç‹‚ï¼‰
      "ç›¸æ‰‹ãŒè‡ªåˆ†ã‚’ã©ã†æ€ã£ã¦ã„ã‚‹ã‹å¸¸ã«æ°—ã«ãªã‚‹",
      "æ‹äººã«ä¸å®‰ã‚’æ„Ÿã˜ã‚‹ã“ã¨ãŒå¤šã„",
      "æ‹æ„›ä¸­ã¯ç›¸æ‰‹ã«ä¾å­˜ã—ã‚„ã™ã„",
      "å°‘ã—ã®å¤‰åŒ–ã§ä¸å®‰ã«ãªã‚‹",
      // Pragmaï¼ˆå®Ÿåˆ©ï¼‰
      "ç›¸æ‰‹ã®æ¡ä»¶ï¼ˆä»•äº‹ãƒ»æ€§æ ¼ãªã©ï¼‰ã‚’é‡è¦–ã™ã‚‹",
      "æ‹æ„›ã«ãŠã„ã¦æå¾—ã‚’è€ƒãˆã‚‹ã“ã¨ãŒã‚ã‚‹",
      "å®‰å®šã—ãŸå°†æ¥ã‚’æƒ³åƒã§ãã‚‹ç›¸æ‰‹ã‚’é¸ã¶",
      "æ‹äººé¸ã³ã¯è¨ˆç”»çš„ã«ã—ãŸã„",
      // Agapeï¼ˆç„¡å„Ÿï¼‰
      "ç›¸æ‰‹ã®å¹¸ã›ã‚’è‡ªåˆ†ã®ã“ã¨ã®ã‚ˆã†ã«æ€ã†",
      "æ‹æ„›ã§ã¯è‡ªåˆ†ã‚’çŠ ç‰²ã«ã—ã¦ã‚‚æ§‹ã‚ãªã„",
      "ç›¸æ‰‹ã®æˆé•·ã‚’æ”¯ãˆãŸã„ã¨æ€ã†",
      "æ‹äººã«ç„¡æ¡ä»¶ã®æ„›ã‚’æ³¨ãã¹ãã ã¨æ€ã†",
      // ä¸å®‰ï¼ˆAnxiousï¼‰
      "æ‹äººãŒé›¢ã‚Œã¦ã„ãã®ã§ã¯ã¨ä¸å®‰ã«ãªã‚‹",
      "äº›ç´°ãªã“ã¨ã§å«Œã‚ã‚ŒãŸã¨æ„Ÿã˜ã¦ã—ã¾ã†",
      "æ‹äººã®è¿”ä¿¡ãŒé…ã„ã¨æ°—ã«ãªã£ã¦ã—ã¾ã†",
      "æ‹æ„›é–¢ä¿‚ãŒå£Šã‚Œã‚‹ã®ãŒæ€–ã„",
      // å›é¿ï¼ˆAvoidantï¼‰
      "äººã«é ¼ã‚‹ã“ã¨ãŒè‹¦æ‰‹",
      "æ‹æ„›ã«è¸ã¿è¾¼ã¿ã™ãã‚‹ã¨ä¸å®‰ã«ãªã‚‹",
      "è¦ªå¯†ã«ãªã‚‹ã¨é€ƒã’ãŸããªã‚‹",
      "è·é›¢æ„Ÿã‚’ä¿ã£ãŸé–¢ä¿‚ã®æ–¹ãŒè½ã¡ç€ã"
    ];

    const scaleLabels = [
      "1ï¼ˆã¾ã£ãŸãå½“ã¦ã¯ã¾ã‚‰ãªã„ï¼‰",
      "2ï¼ˆã‚ã¾ã‚Šå½“ã¦ã¯ã¾ã‚‰ãªã„ï¼‰",
      "3ï¼ˆã©ã¡ã‚‰ã¨ã‚‚ã„ãˆãªã„ï¼‰",
      "4ï¼ˆã‚„ã‚„å½“ã¦ã¯ã¾ã‚‹ï¼‰",
      "5ï¼ˆã¨ã¦ã‚‚å½“ã¦ã¯ã¾ã‚‹ï¼‰"
    ];

    const form = document.getElementById("quizForm");
    const progressEl = document.getElementById("progress");

    // è¨­å•ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
    questions.forEach((q, i) => {
      const div = document.createElement("div");
      div.className = "question";
      div.innerHTML = `<p>Q${i + 1}. ${q}</p>
        <div class="scale">
          ${scaleLabels.map((label, n) => `
            <label><input type="radio" name="q${i + 1}" value="${n + 1}"> ${label}</label>
          `).join("")}
        </div>`;
      form.appendChild(div);
    });

    // é€²æ—è¡¨ç¤º
    function updateProgress(){
      const answered = Array.from({length: questions.length})
        .filter((_,i)=>document.querySelector(`input[name="q${i+1}"]:checked`)).length;
      progressEl.textContent = `æœªå›ç­” ${questions.length - answered} / ${questions.length}`;
    }
    form.addEventListener("change", updateProgress);
    updateProgress();

    // è¨ˆç®—
    function calculate() {
      let scores = {
        eros: 0, ludus: 0, storge: 0, mania: 0, pragma: 0, agape: 0,
        anxiety: 0, avoidance: 0
      };

      for (let i = 1; i <= questions.length; i++) {
        const val = parseInt(document.querySelector(`input[name='q${i}']:checked`)?.value);
        if (!val) { alert(`å…¨ã¦ã®è³ªå•ã«ç­”ãˆã¦ãã ã•ã„ã€‚\næœªå›ç­”ã®è¨­å•ãŒã‚ã‚Šã¾ã™ï¼ˆQ${i}ï¼‰ã€‚`); return; }
        if (i <= 4) scores.eros += val;
        else if (i <= 8) scores.ludus += val;
        else if (i <= 12) scores.storge += val;
        else if (i <= 16) scores.mania += val;
        else if (i <= 20) scores.pragma += val;
        else if (i <= 24) scores.agape += val;
        else if (i <= 28) scores.anxiety += val;
        else scores.avoidance += val;
      }

      // æ‹æ„›ã‚¹ã‚¿ã‚¤ãƒ«ã®æœ€å¤§ã‚¹ã‚³ã‚¢
      const loveType = Object.entries(scores).slice(0,6).sort((a,b)=>b[1]-a[1])[0][0];

      // æ„›ç€ã‚¿ã‚¤ãƒ—åˆ¤å®š
      let attachType = "secure";
      if (scores.anxiety >= 11 && scores.avoidance >= 11) attachType = "fearful";
      else if (scores.anxiety >= 11) attachType = "anxious";
      else if (scores.avoidance >= 11) attachType = "avoidant";

      // è¡¨ç¤ºç”¨ãƒ©ãƒ™ãƒ«
      const loveJP = { eros:"æƒ…ç†±", ludus:"éŠæˆ¯", storge:"å‹æ„›", mania:"ç†±ç‹‚", pragma:"å®Ÿåˆ©", agape:"ç„¡å„Ÿ" };
      const attachJP = { secure:"å®‰å®š", anxious:"ä¸å®‰", avoidant:"å›é¿", fearful:"æã‚Œå›é¿" };

      // ã‚¹ã‚¿ã‚¤ãƒ«Ã—æ„›ç€ â†’ å®çŸ³
      const gemMap = {
        eros:   { anxious:"ãƒ•ã‚¡ã‚¤ã‚¢ã‚ªãƒ‘ãƒ¼ãƒ«", secure:"ã‚¬ãƒ¼ãƒãƒƒãƒˆ",      avoidant:"ã‚¹ãƒ”ãƒãƒ«",        fearful:"ãƒ«ãƒ“ãƒ¼" },
        ludus:  { anxious:"ã‚¿ãƒ³ã‚¶ãƒŠã‚¤ãƒˆ",     secure:"ã‚·ãƒˆãƒªãƒ³",        avoidant:"ã‚¿ãƒ¼ã‚³ã‚¤ã‚º",      fearful:"ã‚¢ãƒ‘ã‚¿ã‚¤ãƒˆ" },
        storge: { anxious:"ãƒ ãƒ¼ãƒ³ã‚¹ãƒˆãƒ¼ãƒ³",   secure:"ã‚¢ã‚¯ã‚¢ãƒãƒªãƒ³",    avoidant:"ãƒšãƒªãƒ‰ãƒƒãƒˆ",      fearful:"ãƒ©ãƒ–ãƒ©ãƒ‰ãƒ©ã‚¤ãƒˆ" },
        pragma: { anxious:"ãƒ–ãƒ«ãƒ¼ãƒˆãƒ‘ãƒ¼ã‚º",   secure:"ã‚µãƒ•ã‚¡ã‚¤ã‚¢",      avoidant:"ãƒ–ãƒ©ãƒƒã‚¯ã‚ªãƒ‹ã‚­ã‚¹", fearful:"ã‚¹ãƒ¢ãƒ¼ã‚­ãƒ¼ã‚¯ã‚©ãƒ¼ãƒ„" },
        mania:  { anxious:"ã‚¨ãƒ¡ãƒ©ãƒ«ãƒ‰",       secure:"ã‚¢ãƒ¬ã‚­ã‚µãƒ³ãƒ‰ãƒ©ã‚¤ãƒˆ", avoidant:"ã‚ªãƒ–ã‚·ãƒ‡ã‚£ã‚¢ãƒ³", fearful:"ã‚ªãƒ‘ãƒ¼ãƒ«" },
        agape:  { anxious:"ãƒ”ãƒ³ã‚¯ãƒˆãƒ«ãƒãƒªãƒ³", secure:"ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰",    avoidant:"ãƒ¢ãƒ«ã‚¬ãƒŠã‚¤ãƒˆ",    fearful:"ãƒ­ãƒ¼ã‚ºã‚¯ã‚©ãƒ¼ãƒ„" }
      };

      const gem = gemMap[loveType]?.[attachType] || "ä¸æ˜";

      // çµæœè¡¨ç¤º
      const result = document.getElementById("result");
      result.textContent =
        `ã‚ãªãŸã®å®çŸ³ã‚¿ã‚¤ãƒ—ã¯ã€Œ${gem}ã€\nï¼ˆæ‹æ„›ã‚¹ã‚¿ã‚¤ãƒ«ï¼š${loveJP[loveType]} Ã— æ„›ç€ï¼š${attachJP[attachType]}ï¼‰`;

      // ã‚¹ã‚¿ã‚¤ãƒ«åˆ¥è§£èª¬ãƒšãƒ¼ã‚¸ã¸ã®ãƒªãƒ³ã‚¯
      const styleToUrl = {
        eros:   "https://seikaku.my.canva.site/houseki-eros",
        ludus:  "https://seikaku.my.canva.site/houseki-ludus",
        storge: "https://seikaku.my.canva.site/houseki-storge",
        pragma: "https://seikaku.my.canva.site/houseki-pragma",
        mania:  "https://seikaku.my.canva.site/houseki-mania",
        agape:  "https://seikaku.my.canva.site/houseki-agape"
      };
      document.getElementById("link").innerHTML =
        `<a href="${styleToUrl[loveType] || '#'}" target="_blank" rel="noopener">â–¶ ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—ã®è§£èª¬ã‚’è¦‹ã‚‹</a>`;

      updateProgress();
      window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" });
    }

    function resetForm(){
      document.getElementById("quizForm").reset();
      document.getElementById("result").textContent = "";
      document.getElementById("link").innerHTML = "";
      updateProgress();
      window.scrollTo({top:0, behavior:"smooth"});
    }
  </script>
</body>
</html>
