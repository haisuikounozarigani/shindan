<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ä¼šè©±ã‚ªãƒ¼ãƒ—ãƒŠãƒ¼è¨ºæ–­</title>
<meta name="description" content="è‡ªå·±è©•å®š20é …ç›®ï¼ˆ0ã€œ4ã®5ä»¶æ³•ï¼‰ã§â€œä¼šè©±ã®é–‹ãã‚„ã™ã•â€ã‚’æ¸¬ã‚‹ãƒ•ãƒ«ç‰ˆãƒ†ã‚¹ãƒˆã€‚åˆè¨ˆ0ã€œ80ç‚¹ã‚’5æ®µéšã«ãƒ©ãƒ³ã‚¯ï¼ˆå³é‡ä¿ç®¡åº«â†’é–‹ã„ãŸã‚¢ãƒ¼ãƒï¼‰ã€‚å› å­åˆ¥ã®æ£’ã‚°ãƒ©ãƒ•ã¨ã€è©³ã—ã„çµæœã‚³ãƒ¡ãƒ³ãƒˆï¼‹ãƒ¡ãƒªãƒƒãƒˆè§£èª¬ï¼‹æ¬¡ã«åŠ¹ãâ€œéµâ€ã‚¹ã‚­ãƒ«ã‚’æç¤ºã—ã¾ã™ï¼ˆã‚¨ãƒ³ã‚¿ãƒ¡ç”¨ï¼‰ã€‚">
<meta name="theme-color" content="#f7f9ff">
<!-- OG -->
<meta property="og:type" content="website">
<meta property="og:title" content="ä¼šè©±ã‚ªãƒ¼ãƒ—ãƒŠãƒ¼è¨ºæ–­">
<meta property="og:description" content="è‡ªå·±è©•å®š20é …ç›®ã§â€œä¼šè©±ã®é–‹ãã‚„ã™ã•â€ã‚’ãƒã‚§ãƒƒã‚¯ã€‚0ã€œ80ç‚¹ã‚’5æ®µéšã«åˆ†é¡ã—ã€å› å­ã‚°ãƒ©ãƒ•ã¨è©³ã—ã„ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’è¡¨ç¤ºã€‚">
<meta property="og:url" content="https://haisuikounozarigani.github.io/shindan/opener.html">
<meta property="og:image" content="/shindan/assets/results/opener/05.png">

<style>
:root{
  --accent:#4aa8ff; --accent2:#a48bff;
  --ink:#1f2732; --muted:#667087; --paper:#fff;
  --bg1:#f7f9ff; --bg2:#f6f3ff; --line:#e6ecf7;
  --good:#40c057; --mid:#fab005; --low:#ff6b6b;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--ink);
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  font-family:"Noto Sans JP",system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN",sans-serif;
}
a{color:inherit}

.wrap{max-width:980px;margin:18px auto;padding:0 14px}

header.hd{display:grid;grid-template-columns:56px 1fr;gap:12px;align-items:center;margin:8px 0}
.logo{width:56px;height:56px;border-radius:14px;background:linear-gradient(135deg,#e1f2ff,#ece6ff);display:grid;place-items:center;font-size:28px}
h1{margin:0;font-size:clamp(22px,4.6vw,34px);letter-spacing:.02em}
.sub{margin:4px 0 0;color:var(--muted);font-size:.96em}

.card{background:var(--paper);border:1px solid var(--line);border-radius:16px;padding:14px}
.section{margin:14px 0}

.pill{display:inline-block;padding:4px 8px;border:1px solid var(--line);border-radius:999px;background:#fff;color:#6b6a77;font-size:.88em}
.meta{display:flex;gap:8px;flex-wrap:wrap}

.sticky{position:sticky;top:0;z-index:10;margin:-6px -14px 12px;padding:8px 14px;background:rgba(255,255,255,.8);backdrop-filter:blur(6px) saturate(1.05);border-bottom:1px solid #e9edf7;display:flex;align-items:center;gap:10px}
.progress{height:8px;background:#edf2fb;border-radius:999px;flex:1;overflow:hidden}
.progress>span{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--accent2))}
.btn{padding:10px 14px;border:1px solid var(--line);border-radius:12px;background:#fff;cursor:pointer}
.btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));border-color:transparent;color:#fff;font-weight:700}

fieldset.q{border:1px solid var(--line);border-radius:12px;padding:10px;margin:10px 0;background:#fff}
legend{font-weight:700}
.scale{display:grid;grid-template-columns:repeat(5,minmax(66px,1fr));gap:8px;margin-top:8px}
.scale input{position:absolute;opacity:0;pointer-events:none}
.scale label{display:grid;place-items:center;border:1px solid #e5e9f3;border-radius:10px;padding:8px;cursor:pointer;user-select:none;background:#fff}
.scale input:checked+label{outline:2px solid var(--accent);border-color:transparent}
mark.need{animation:need 1.6s ease}
@keyframes need{0%{box-shadow:0 0 0 0 rgba(74,168,255,.45)}100%{box-shadow:0 0 0 0 rgba(74,168,255,0)}}

.result-head{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;font-weight:700}
.total{font-size:26px;font-weight:800}
.small{color:var(--muted);font-size:.92em}

.hero-vert{
  display:grid;place-items:center;border:1px solid var(--line);border-radius:16px;background:#fff;overflow:hidden
}
.hero-vert figure{margin:0;width:min(600px,95vw);aspect-ratio:3/4;border-bottom:1px solid var(--line);background:#f7f9ff}
.hero-vert img{width:100%;height:100%;object-fit:cover;display:block}
.hero-vert figcaption{padding:10px}
.hero-vert .capline{font-weight:800}
.hero-vert .poem{font-style:italic;letter-spacing:.02em;margin-top:4px;color:#445;opacity:.9}
.hero-vert .capmini{font-size:.95em;color:var(--muted);margin-top:4px}

.grid2{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px}
.stat{border:1px solid var(--line);border-radius:12px;padding:10px;background:#fff}
.stat .big{font-size:22px;font-weight:800}
.hr{height:1px;background:var(--line);margin:10px 0}

.klist{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px}
.kpill{border:1px solid var(--line);border-radius:999px;padding:6px 10px;background:#fff;font-size:.9em}

.bars{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px}
.bar{border:1px solid var(--line);border-radius:12px;padding:10px;background:#fff}
.bar .row{height:10px;background:#edf2fb;border-radius:999px;overflow:hidden;margin-top:6px}
.bar .row>span{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--accent2))}
.bar .hint{font-size:.9em;color:var(--muted);margin-top:6px}
.band{display:inline-block;border-radius:6px;padding:2px 6px;margin-left:6px;font-size:.8em}
.band.good{background:#e6fcf5;color:#0b8f5e;border:1px solid #c3fae8}
.band.mid{background:#fff9db;color:#946200;border:1px solid #ffe066}
.band.low{background:#fff5f5;color:#a61e4d;border:1px solid #ffa8a8}

.footer{color:var(--muted);font-size:.92em}
.warn{background:#f8fbff;border:1px solid #e1ebf7;border-radius:12px;padding:10px;margin:12px 0}

.back-area{display:flex;justify-content:center;margin-top:10px}
a.back{display:inline-flex;align-items:center;gap:6px;padding:10px 14px;border:1px solid var(--line);border-radius:12px;background:#fff;text-decoration:none}
</style>
</head>
<body data-id="opener">
<main class="wrap" id="app">
  <header class="hd">
    <div class="logo">ğŸ”‘</div>
    <div>
      <h1>ä¼šè©±ã‚ªãƒ¼ãƒ—ãƒŠãƒ¼è¨ºæ–­</h1>
      <p class="sub">è‡ªå·±è©•å®š20é …ç›®ï¼ˆ0ã€œ4ã®5ä»¶æ³•ï¼‰ã€‚åˆè¨ˆ0ã€œ80ç‚¹ã‚’5æ®µéšã§è¡¨ç¤ºã—ã€å› å­åˆ¥ã‚°ãƒ©ãƒ•ãƒ»è©³ã—ã„çµæœã‚³ãƒ¡ãƒ³ãƒˆãƒ»â€œæ¬¡ã®éµâ€ã‚¹ã‚­ãƒ«ã‚’æç¤ºã—ã¾ã™ã€‚</p>
    </div>
  </header>

  <div class="sticky" aria-live="polite">
    <span>ğŸ“Š</span>
    <div class="progress" aria-label="å›ç­”é€²æ—"><span id="prog"></span></div>
    <button class="btn primary" id="doScore">è¨ºæ–­ã™ã‚‹</button>
  </div>

  <section class="card section" id="desc">
    <h2 style="margin:4px 0 8px">èª¬æ˜</h2>
    <div class="meta" style="margin-bottom:8px">
      <span class="pill">è³ªå•æ•°ï¼š20</span>
      <span class="pill">å½¢å¼ï¼š0â€“4ï¼ˆ0=ã¾ã£ãŸããªã„ / 4=ã¨ã¦ã‚‚ã‚ˆãå½“ã¦ã¯ã¾ã‚‹ï¼‰</span>
      <span class="pill">åˆè¨ˆï¼š0â€“80ç‚¹</span>
    </div>
    <p class="small">ä¼šè©±ã®â€œé–‹ãã‚„ã™ã•â€ã¨â€œå®‰å…¨ãªå¢ƒç•Œâ€ã®ãƒãƒ©ãƒ³ã‚¹ã‚’è¦‹ã‚‹ãŸã‚ã®ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯ã§ã™ã€‚</p>
  </section>

  <!-- è¨­å•ï¼ˆâ˜…ã®è¡¨ç¤ºã‚„é€†è»¢æ¡ˆå†…ã¯å‡ºã•ãªã„ï¼‰ -->
  <section class="card section" id="questions">
    <h2 style="margin:4px 0 8px">è¨­å•ï¼ˆ0=ã¾ã£ãŸããªã„ï¼1=ã‚ã¾ã‚Šãªã„ï¼2=ã©ã¡ã‚‰ã¨ã‚‚ï¼3=ã ã„ãŸã„ï¼4=ã¨ã¦ã‚‚ã‚ã‚‹ï¼‰</h2>
    <div id="qWrap"></div>
    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px">
      <button class="btn" id="clearAns">å›ç­”ã‚’ã‚¯ãƒªã‚¢</button>
      <button class="btn primary" id="doScore2">è¨ºæ–­ã™ã‚‹</button>
    </div>
  </section>

  <!-- çµæœ -->
  <section class="card section" id="result" aria-live="polite">
    <div id="resEmpty">
      <span class="badge">ã¾ã çµæœã¯ã‚ã‚Šã¾ã›ã‚“</span>
      <p class="small">å…¨20å•ã«å›ç­”ã—ã¦ã€Œè¨ºæ–­ã™ã‚‹ã€ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚</p>
    </div>

    <div id="resArea" style="display:none">
      <div class="result-head">
        <span class="badge">çµæœ</span>
        <div class="total" id="typeLine">â€”</div>
      </div>

      <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼ˆ3:4å¤§ããï¼‰ -->
      <div class="hero-vert section" role="region" aria-label="ãƒ¬ãƒ™ãƒ«ã®ã‚¤ãƒ¡ãƒ¼ã‚¸">
        <figure>
          <img id="heroImg" src="/shindan/assets/results/opener/01.png" alt="é‹¼é‰„ã®é‡‘åº«æ‰‰ï¼ˆé–‹æ”¾åº¦1/5ï¼‰" loading="lazy" width="600" height="800">
        </figure>
        <figcaption>
          <div class="capline" id="heroTitle">â€”</div>
          <div class="poem" id="heroPoem">â€”</div>
          <div class="capmini" id="heroCopy">â€”</div>
        </figcaption>
      </div>

      <!-- æ•°å€¤ -->
      <div class="grid2">
        <article class="stat" aria-label="åˆè¨ˆç‚¹">
          <div><strong>åˆè¨ˆç‚¹</strong></div>
          <div class="big"><span id="sumVal">0</span> / 80</div>
          <div class="small">ã‚¹ã‚³ã‚¢ã¯â€œé–‹æ”¾â€ã¨â€œå¢ƒç•Œâ€ã®ä»Šã®ãƒãƒ©ãƒ³ã‚¹ã®ç›®å®‰ã§ã™ã€‚</div>
        </article>
        <article class="stat" aria-label="ã‚ªãƒ¼ãƒ—ãƒŠãƒ¼ã‚¹ã‚³ã‚¢ã®ãƒ¡ãƒªãƒƒãƒˆ">
          <div><strong>ã‚ªãƒ¼ãƒ—ãƒŠãƒ¼ã‚¹ã‚³ã‚¢ãŒé«˜ã„ã¨</strong></div>
          <ul class="small" style="margin:6px 0 0 18px;line-height:1.6">
            <li>åˆå¯¾é¢ã‚„ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ã‚‚å¿ƒç†çš„å®‰å…¨ãŒç”Ÿã¾ã‚Œã‚„ã™ã„</li>
            <li>ç›¸æ‰‹ã®æœ¬é¡Œã‚„ãƒ‹ãƒ¼ã‚ºã«æ—©ãå±Šãã€å›ã‚Šé“ãŒæ¸›ã‚‹</li>
            <li>ã‚ºãƒ¬ã‚„èª¤è§£ãŒèµ·ãã¦ã‚‚ã€å¯¾è©±ã§ä¿®æ­£ã—ã‚„ã™ã„</li>
            <li>é–¢ä¿‚ã®ã€Œã‚¹ãƒ”ãƒ¼ãƒ‰é•åã€ï¼ˆæŠ¼ã—ã™ãï¼èãã™ãï¼‰ã‚’é¿ã‘ã‚„ã™ã„</li>
          </ul>
        </article>
      </div>

      <!-- å› å­ã‚°ãƒ©ãƒ• -->
      <div class="section">
        <h3 style="margin:8px 0">å› å­åˆ¥ã‚¹ã‚³ã‚¢</h3>
        <div class="bars" id="bars"><!-- JS --></div>
      </div>

      <div class="hr"></div>
      <div id="longCopy" class="small"><!-- JSï¼ˆãƒ¬ãƒ™ãƒ«åˆ¥ã®é•·æ–‡ã‚³ãƒ¡ãƒ³ãƒˆï¼‰ --></div>

      <div class="hr"></div>
      <!-- è¿½åŠ ï¼šãƒ•ãƒ¬ãƒ¼ã‚ºä¾‹ -->
      <div class="section" id="phraseSec">
        <strong>è©±ã—æ–¹ã®ãƒ•ãƒ¬ãƒ¼ã‚ºä¾‹ï¼ˆãã®ã¾ã¾ä½¿ãˆã‚‹ï¼‰</strong>
        <ul id="phraseList" class="small" style="margin:6px 0 0 18px;line-height:1.8"><!-- JS --></ul>
      </div>

      <div class="hr"></div>
      <div>
        <strong>æ¬¡ã®éµï¼ˆãŠã™ã™ã‚1ã€œ3ï¼‰</strong>
        <div class="klist" id="keyList"></div>
        <div class="small" id="keyTips" style="margin-top:6px">â€”</div>
      </div>

      <div class="back-area" style="margin-top:12px">
        <a class="back" href="/shindan/" id="backLink" aria-label="è¨ºæ–­ä¸€è¦§ã«æˆ»ã‚‹">è¨ºæ–­ä¸€è¦§ã«æˆ»ã‚‹</a>
      </div>
    </div>
  </section>

  <section class="footer card">
    <h2 style="margin:4px 0 8px">ã”åˆ©ç”¨ã«ã‚ãŸã£ã¦</h2>
    <p class="warn"><strong>æ³¨æ„ï¼š</strong>ã“ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯<b>ã‚¨ãƒ³ã‚¿ãƒ¡ç”¨ã®ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯</b>ã§ã™ã€‚åŒ»ç™‚ãƒ»è¨ºæ–­ãƒ»æ²»ç™‚ãƒ»ã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°ç­‰ã®ç›®çš„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚çµæœã®è§£é‡ˆãƒ»åˆ©ç”¨ã¯ã”è‡ªèº«ã®åˆ¤æ–­ã¨è²¬ä»»ã«ã¦ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚<br>
ãƒ‡ãƒ¼ã‚¿ã¯ç«¯æœ«å†…ã§å‡¦ç†ã•ã‚Œã€å€‹äººã‚’ç‰¹å®šã™ã‚‹æƒ…å ±ã®é€ä¿¡ãƒ»åé›†ã¯è¡Œã„ã¾ã›ã‚“ï¼ˆã”åˆ©ç”¨ç’°å¢ƒã«ã‚ˆã‚Šã‚¢ã‚¯ã‚»ã‚¹è§£æç­‰ãŒå‹•ä½œã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼‰ã€‚<br>
å®—æ•™çš„ãƒ»å€«ç†çš„ä¾¡å€¤åˆ¤æ–­ã‚’æ„å›³ã›ãšã€å› å­åãƒ»æ¯”å–©ã¯<b>æ¼”å‡ºè¡¨ç¾</b>ã§ã™ã€‚</p>
  </section>
</main>

<script>
(() => {
  // ====== ãƒšãƒ¼ã‚¸æƒ…å ± ======
  const SLUG = "opener";
  const TITLE = "ä¼šè©±ã‚ªãƒ¼ãƒ—ãƒŠãƒ¼è¨ºæ–­";
  const IMG_BASE = "/shindan/assets/results/opener/"; // æœ«å°¾/
  const ANS_KEY  = "specimens:"+SLUG+":answers"; // â† ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ã‚­ãƒ¼

  // ====== ç”»åƒä»•æ§˜ï¼ˆ5æ®µéšï¼‹è©©çš„ã‚­ãƒ£ãƒƒãƒï¼‰ ======
  const LV_DEF = {
    1:{min:0,  max:26, img:"01.png", label:"å³é‡ä¿ç®¡åº« (Vault)", alt:"é‹¼é‰„ã®é‡‘åº«æ‰‰ï¼ˆé–‹æ”¾åº¦1/5ï¼‰",
       poem:"éµã¯ã¾ã èƒ¸ã®å†…ã€æ²ˆé»™ã®å‘ã“ã†ã§ç¯ã‚ŠãŒå¾…ã¤ã€‚",
       copy:`ã„ã¾ã®ã‚ãªãŸã¯ã€å¯¾è©±ã‚’å®‰å…¨ã«ä¿ã¤æ„Ÿè¦šãŒå¼·ãåƒã„ã¦ã„ã¾ã™ã€‚æ²ˆé»™ã‚„ç›¸æ‰‹ã®æœªå®Œäº†ãŒè½ã¡ç€ã‹ãšã€ã¤ã„çµè«–ã‚„åŠ©è¨€ã¸æ€¥ãã‚„ã™ã„ã¨ãã¯ã€åè©1èªã§è¦ç´„ã—ã¦ã‹ã‚‰10ç§’ã ã‘å¾…ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚å¾…ã¤é–“ã«ã€Œæ™‚é–“æ ã€ã¨ã€Œã‚´ãƒ¼ãƒ«ã€ã‚’ä¸€è¨€ã§ç½®ã‘ã°ã€ç›¸æ‰‹ã‚‚ã‚ãªãŸã‚‚å®‰å¿ƒã—ã¦æ¬¡ã¸é€²ã‚ã¾ã™ã€‚`},
    2:{min:27, max:42, img:"02.png", label:"é‡ã„é‰„æ‰‰ (Iron)", alt:"è¦—ãç©´ã®ã‚ã‚‹é‰„æ‰‰ï¼ˆé–‹æ”¾åº¦2/5ï¼‰",
       poem:"ãã—ã‚€æ‰‰ã®å‘ã“ã†ã‹ã‚‰ã€ã‚ãŸãŸã‹ã„æ°—é…ãŒã®ããã€‚",
       copy:`é–‹ãå§‹ã‚ã®æ®µéšã€‚å…·ä½“çš„ã«èã‘ã‚‹ä¸€æ–¹ã§ã€è¿”ä¿¡ãŒé…ã„ã¨è¿½æ’ƒã—ãŸã‚Šã€æ²ˆé»™ã‚’åŸ‹ã‚ã™ããŸã‚ŠãŒå‡ºã‚„ã™ã„å¸¯ã§ã™ã€‚å•ã„ã¯WHã§1ã¤ã«çµã‚Šã€è¨€ã„ã‹ã‘ã‚’é£²ã¿è¾¼ã‚€å ´é¢ã‚’1å›ã¤ãã‚‹ã ã‘ã§ã€ä¼šè©±ã®å‘¼å¸ãŒæ•´ã„ã¾ã™ã€‚`},
    3:{min:43, max:56, img:"03.png", label:"æœ¨ã®æ‰‰ï¼ˆæ–½éŒ ï¼‰ (Wood)", alt:"éµç©´ã ã‘ã®æœ¨ã®æ‰‰ï¼ˆé–‹æ”¾åº¦3/5ï¼‰",
       poem:"éµç©´ãŒå›ã‚Šã€ã“ã¨ã“ã¨ã¨ç¯ã‚ŠãŒå¿œãˆã‚‹ã€‚",
       copy:`åœŸå°ã¯ã§ãã¦ã„ã¾ã™ã€‚è¦ç´„â†’æ„Ÿæƒ…ã®åæ˜ â†’ã‚‚ã†ä¸€æ­©ã®å…·ä½“è³ªå•ã®é †ã§å›ã›ã‚‹ã¨ã€éµç©´ãŒã‚«ãƒãƒƒã¨å›ã‚‹æ„Ÿè¦šã«ã€‚è‡ªåˆ†ã®è©±ã¯æ©‹æ¸¡ã—1è¡Œã«ç•™ã‚ã€åˆå›³ï¼ˆã‚¹ãƒ«ãƒ¼OKï¼‰ã‚’å…ˆã«ç½®ãã¨ã€å®‰å¿ƒã—ã¦æœ¬é¡Œã«å…¥ã‚Œã¾ã™ã€‚`},
    4:{min:57, max:68, img:"04.png", label:"åŠé–‹ã (Ajar)", alt:"åŠé–‹ãã®æ‰‰ï¼ˆé–‹æ”¾åº¦4/5ï¼‰",
      poem:"åŠé–‹ãã®éš™é–“é¢¨ã€å‘¼å¸ãŒåˆãˆã°ç¯ã‚Šã¯åºƒãŒã‚‹ã€‚",
      copy:`å‘¼å¸ã¨é–“åˆã„ãŒåˆã£ã¦ãã¦ã„ã¾ã™ã€‚æ™‚é–“æ ã¨ã‚´ãƒ¼ãƒ«ã®å®£è¨€ãŒåŠ¹ã„ã¦ã€è„±ç·šã—ã¦ã‚‚æˆ»ã‚Œã‚‹å¼·ã•ãŒã‚ã‚Šã¾ã™ã€‚ã“ã“ã‹ã‚‰ã¯â€œæ·±ã•âˆ’1â€ã®ç›¸äº’é–‹ç¤ºã§é€Ÿåº¦é•åã‚’é˜²ãã¤ã¤ã€æœªå®Œäº†ã¯ä¿å­˜ã—ã¦ç¶šãã¸ã€‚é–¢ä¿‚ãŒé•·æŒã¡ã—ã¾ã™ã€‚`},
    5:{min:69, max:80, img:"05.png", label:"é–‹ã„ãŸã‚¢ãƒ¼ãƒ (Arch)", alt:"é–‹ã„ãŸã‚¢ãƒ¼ãƒé–€ï¼ˆé–‹æ”¾åº¦5/5ï¼‰",
       poem:"é–‹ã„ãŸã‚¢ãƒ¼ãƒã«é¢¨ãŒé€šã‚Šã€è¨€è‘‰ã¯ã‚„ã•ã—ãå¾€å¾©ã™ã‚‹ã€‚",
       copy:`é–‹æ”¾ã¨å¢ƒç•Œã®ãƒãƒ©ãƒ³ã‚¹ãŒã¨ã¦ã‚‚è‰¯ã„çŠ¶æ…‹ã€‚ç›¸æ‰‹ã®è¨€è‘‰é¸ã³ã‚„ãƒšãƒ¼ã‚¹ã‚’å°Šé‡ã—ãªãŒã‚‰ã€å¿…è¦ãªã¨ãã¯ãã£ã¨ç¯ã‚Šã‚’è¶³ã›ã¾ã™ã€‚ä¸‰æ‹å­ï¼ˆå…·ä½“è¦ç´„â†’æ„Ÿæƒ…åæ˜ â†’å…·ä½“è³ªå•ï¼‰ã§æœ¬è³ªã«å±Šãã€åˆæ„å½¢æˆã‚‚ã‚¹ãƒ ãƒ¼ã‚ºã§ã™ã€‚`}
  };

  // ====== å› å­ãƒãƒƒãƒ—ï¼ˆ6å› å­ï¼‰ ======
  // SPEC=å…·ä½“åŒ–, EMPA=åæ˜ , PACE=ãƒšãƒ¼ã‚¹&æ²ˆé»™, BOUND=å¢ƒç•Œ&è¿½æ’ƒ, FRAME=æ &ã‚´ãƒ¼ãƒ«, BRIDGE=æ©‹æ¸¡ã—
  const FACTORS = {
    SPEC : {name:"å…·ä½“åŒ–", items:[1,9,16,3], hint:"æŠ½è±¡èªã‚’å…·ä½“ã«ç½®ãæ›ãˆã¦ã‚ºãƒ¬ã‚’æ¸›ã‚‰ã™"},
    EMPA : {name:"åæ˜ ", items:[2,11,14,15], hint:"æ„Ÿæƒ…ã‚’æ˜ ã—ã€ä¸»å½¹ã‚’ç›¸æ‰‹ã«æˆ»ã™"},
    PACE : {name:"ãƒšãƒ¼ã‚¹&æ²ˆé»™", items:[5,8,17], hint:"é€Ÿã•ã¨é–“ã‚’åˆã‚ã›ã€æ²ˆé»™ã‚’å‘³æ–¹ã«"},
    BOUND: {name:"å¢ƒç•Œ&è¿½æ’ƒ", items:[10,6,18,19], hint:"å¢ƒç•Œã¨è¿”ä¿¡ã®é–“åˆã„ã§å®‰å…¨ã‚’å®ˆã‚‹"},
    FRAME: {name:"æ &ã‚´ãƒ¼ãƒ«", items:[7,12,20], hint:"æ™‚é–“ãƒ»ç›®çš„ã‚’æ˜ç¢ºã«ã—è¿·å­ã‚’é˜²ã"},
    BRIDGE:{name:"æ©‹æ¸¡ã—", items:[4,15], hint:"è‡ªåˆ†ã®è©±ã¯â€œã¤ãªãâ€ã«ç•™ã‚ã‚‹"}
  };

  // ====== è³ªå•ï¼ˆâ˜…é€†è»¢ã¯å†…éƒ¨å‡¦ç†ã®ã¿ã€‚UIã«ã¯è¡¨ç¤ºã—ãªã„ï¼‰ ======
  // â€»Q1,9,11,12 ã‚’åˆ†ã‹ã‚Šã‚„ã™ãã€Q4/Q11ã¯ä¾‹ã‚’æ˜ç¤ºã€‚Q18ã‚’ã‚ˆã‚Šå¹³æ˜“ã«å¤‰æ›´ã€‚
  const ITEMS = [
    // å…·ä½“åŒ–
    {id:1 , rev:false, text:"ç›¸æ‰‹ã®è©±ã‹ã‚‰å…·ä½“çš„ãªå ´é¢ã‚’1ã¤é¸ã‚“ã§èã‘ã‚‹ï¼ˆä¾‹ï¼šä¸€ç•ªå¤§å¤‰ã ã£ãŸå ´é¢ã¯ï¼Ÿï¼‰"},
    {id:9 , rev:false, text:"ã€Œã™ã”ã„ã€ãªã©ã®æ„Ÿæƒ³ã§ã¯ãªãã€ç›¸æ‰‹ã®è¨€è‘‰ã‚’å…·ä½“ã«è¨€ã„æ›ãˆã¦è¿”ã›ã‚‹ï¼ˆä¾‹ï¼šç· åˆ‡ã®ä¸å®‰ã£ã¦ã“ã¨ã ã­ï¼‰"},
    {id:16, rev:false, text:"åŒºåˆ‡ã‚Šãƒ•ãƒ¬ãƒ¼ã‚ºã§è¦ç‚¹ã‚’æ•´ç†ã§ãã‚‹ï¼ˆã€Œã¤ã¾ã‚Šâ€¦ã€ã€Œã„ã¡ã°ã‚“ã¯â€¦ã€ï¼‰"},
    {id:3 , rev:true , text:"ã™ãã«çµè«–ã‚„åŠ©è¨€ã‚’å£ã«ã—ã¦ã—ã¾ã†"},
    // åæ˜ 
    {id:2 , rev:false, text:"ç›¸æ‰‹ã®æ„Ÿæƒ…ã‚’è¨€èªåŒ–ã—ã¦è¿”ã›ã‚‹ï¼ˆã€Œç·Šå¼µã‚‚ã‚ã£ãŸï¼Ÿã€ï¼‰"},
    {id:11, rev:false, text:"ç›¸æ‰‹ãŒ1æ®µæ·±ãè©±ã—ãŸã¨ãã€è‡ªåˆ†ã¯æµ…ã„é–‹ç¤ºã§è¿”ã›ã‚‹ï¼ˆä¾‹ï¼šç›¸æ‰‹ï¼å®¶æ—ã®æ‚©ã¿â†’è‡ªåˆ†ï¼æœ€è¿‘ã®å°ã•ãªå¿ƒé…ï¼‰"},
    {id:14, rev:false, text:"å£°è‰²ãƒ»è¡¨æƒ…ãªã©éè¨€èªã®å¤‰åŒ–ã«ä¸€è¨€ããˆã‚‰ã‚Œã‚‹"},
    {id:15, rev:true , text:"ç›¸æ‰‹ã®è©±ã®é€”ä¸­ã§è‡ªåˆ†ã®ä½“é¨“ã«ã™ã‚Šæ›¿ãˆãŒã¡"},
    // ãƒšãƒ¼ã‚¹&æ²ˆé»™
    {id:5 , rev:false, text:"ç›¸æ‰‹ã®è©±é€Ÿãƒ»é–“ã«åˆã‚ã›ã‚‰ã‚Œã‚‹"},
    {id:8 , rev:true , text:"æ²ˆé»™ãŒæ€–ãã¦åŸ‹ã‚ç¶šã‘ã¦ã—ã¾ã†"},
    {id:17, rev:true , text:"æ²ˆé»™ãŒç¶šãã¨è©±é¡Œã‚’ã™ãåˆ‡ã‚Šæ›¿ãˆã¦ã—ã¾ã†"},
    // å¢ƒç•Œ&è¿½æ’ƒ
    {id:10, rev:false, text:"è©±ã—ãŸããªã„è©±é¡Œã®å¢ƒç•Œã‚’å°Šé‡ã—ã€åˆå›³ã‚’å¾…ã¦ã‚‹"},
    {id:6 , rev:false, text:"è¿”ä¿¡ãŒé…ãã¦ã‚‚ä¸å®‰ã§è¿½æ’ƒã—ãªã„"},
    {id:18, rev:false, text:"æœ€åˆã«â€œè©±ã›ã‚‹ç¯„å›²â€ã‚’ä¸€è¨€ã§ç¢ºèªã§ãã‚‹ï¼ˆä¾‹ï¼šã€Œè©±ã—ãŸããªã„è©±é¡ŒãŒã‚ã£ãŸã‚‰åˆå›³ã—ã¦ã­ã€ï¼‰"},
    {id:19, rev:false, text:"è¿”ä¿¡ã®ç›®å®‰ã‚’ä¸€è¨€ã§åˆæ„ã§ãã‚‹ï¼ˆä¾‹ï¼šæ˜æ—¥ã¾ã§ã«è¿”ã™ã­ï¼‰"},
    // æ &ã‚´ãƒ¼ãƒ«
    {id:7 , rev:false, text:"ç›¸è«‡ã§ã¯æ™‚é–“æ ã¨ã‚´ãƒ¼ãƒ«ã‚’å…ˆã«ç¤ºã›ã‚‹ï¼ˆã€Œ15åˆ†ã ã‘â€¦ã€ï¼‰"},
    {id:12, rev:true , text:"è©±ãŒé€”ä¸­ã§ã‚‚çµè«–ã‚’æ€¥ã„ã§ã—ã¾ã†"},
    {id:20, rev:true , text:"ã€Œã§ã€ã©ã†ã™ã‚‹ï¼Ÿã€ãªã©çµæœ«ã‚’æ—©ãæ±‚ã‚ãŒã¡"},
    // æ©‹æ¸¡ã—
    {id:4 , rev:false, text:"è‡ªåˆ†ã®è©±ã¯ä¸€è¨€ã®â€œæ©‹æ¸¡ã—â€ã«ç•™ã‚ã‚‰ã‚Œã‚‹ï¼ˆä¾‹ï¼šã€Œè‡ªåˆ†ã‚‚ä¼¼ãŸå ´é¢ãŒã‚ã£ãŸã‚ˆã€ã¨ã ã‘æ·»ãˆã¦ã€ã™ãç›¸æ‰‹ã«æˆ»ã™ï¼‰"},
  ];

  // 5ä»¶æ³•ãƒ©ãƒ™ãƒ«ï¼ˆ0ã€œ4ï¼‰
  const LABELS = ["0 ã¾ã£ãŸããªã„","1 ã‚ã¾ã‚Šãªã„","2 ã©ã¡ã‚‰ã¨ã‚‚","3 ã ã„ãŸã„","4 ã¨ã¦ã‚‚ã‚ã‚‹"];

  // â€œéµâ€ã‚¹ã‚­ãƒ«è¾æ›¸
  const KEY_DICT = {
    1:{name:"å…·ä½“è³ªå•", tip:"WHã§ã€ä¸€ç•ªã€ã‚’èãï¼ˆä¾‹ï¼šã©ã®å ´é¢ãŒä¸€ç•ªã—ã‚“ã©ã‹ã£ãŸï¼Ÿï¼‰", btn:"å…·ä½“è³ªå•"},
    2:{name:"æ„Ÿæƒ…åæ˜ ", tip:"æ°—æŒã¡èªã‚’å…ˆã«ç½®ãï¼ˆä¾‹ï¼šç·Šå¼µã‚‚ã‚ã£ãŸï¼Ÿï¼‰", btn:"æ„Ÿæƒ…ã‚’æ˜ ã™"},
    3:{name:"ã‚¸ãƒ£ãƒƒã‚¸æŠ‘åˆ¶â†’å…·ä½“åŒ–", tip:"çµè«–å…ˆè¡Œã‚’æ§ãˆã€ã€ã©ã“ãŒåŠ©ã‹ã£ãŸã‹ã€ã¸å…·ä½“åŒ–", btn:"å…·ä½“åŒ–ã‚¹ã‚¤ãƒƒãƒ"},
    4:{name:"æ©‹æ¸¡ã—ä¸€è¨€", tip:"è‡ªåˆ†ã®è©±ã¯10ç§’/1è¡Œã ã‘â€œæ©‹æ¸¡ã—â€", btn:"æ©‹æ¸¡ã—1è¡Œ"},
    5:{name:"ãƒšãƒ¼ã‚¹åˆã‚ã›", tip:"ç›¸æ‰‹ã®é€Ÿã•ãƒ»é–“ã‚’ãƒŸãƒ©ãƒ¼ã™ã‚‹", btn:"ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°"},
    6:{name:"è¿½æ’ƒæŠ‘åˆ¶", tip:"è¿”ä¿¡ã¯24æ™‚é–“ã¯è¿½ã‚ãªã„", btn:"è¿½æ’ƒã¯1å›ã¾ã§"},
    7:{name:"æ ãƒ»ã‚´ãƒ¼ãƒ«å®£è¨€", tip:"ã€15åˆ†ã ã‘ã€ã€ä»Šæ—¥ã®ã‚´ãƒ¼ãƒ«ã¯æ•´ç†ã€", btn:"15åˆ†å®£è¨€"},
    8:{name:"æ²ˆé»™è¨±å®¹", tip:"10ç§’ã‚’å¿ƒã®ä¸­ã§æ•°ãˆã‚‹", btn:"æ²ˆé»™10ç§’"},
    9:{name:"å…·ä½“è¦ç´„", tip:"æœ€å¾Œã®åè©ã‚’ç¹°ã‚Šè¿”ã—ã¦è¿”ã™", btn:"å…·ä½“è¦ç´„"},
    10:{name:"å¢ƒç•Œå°Šé‡", tip:"ã€ã‚¹ãƒ«ãƒ¼OKã€ã€ã“ã“ã¾ã§ã§OKã€ã‚’å…ˆã«ç½®ã", btn:"å¢ƒç•Œã®åˆå›³"},
    11:{name:"ç›¸äº’é–‹ç¤ºï¼ˆæ·±ã•âˆ’1ï¼‰", tip:"ç›¸æ‰‹ã‚ˆã‚Šä¸€æ®µæµ…ã„é–‹ç¤ºã§å®‰å…¨ã«", btn:"æ·±ã•âˆ’1"},
    12:{name:"æœªå®Œäº†ã‚’æ€¥ãŒãªã„", tip:"ã€ç¶šãã¯ã¾ãŸã€ã§ä¿å­˜ã‚’é¸ã¶", btn:"ç¶šãã¯ã¾ãŸ"},
    14:{name:"éè¨€èªã®æ‹¾ã„", tip:"è¡¨æƒ…ãƒ»å£°è‰²ã®å¤‰åŒ–ã«ä¸€è¨€ããˆã‚‹", btn:"éè¨€èªã«ä¸€è¨€"},
    16:{name:"åŒºåˆ‡ã‚Šè¦ç´„", tip:"ã€ã¤ã¾ã‚Šï¼ä¸€ç•ªã¯ã€ã§æ–¹å‘ã¥ã‘", btn:"åŒºåˆ‡ã‚Šè¦ç´„"},
    18:{name:"è©±ã›ã‚‹ç¯„å›²ã®åˆå›³", tip:"æœ€åˆã«è©±é¡Œã®OK/NGã‚’ç¢ºèªã™ã‚‹", btn:"åˆå›³OK?"},
    19:{name:"è¿”ä¿¡é–“éš”ã®åˆæ„", tip:"è¿”ä¿¡ã®ç›®å®‰ã‚’ä¸€è¨€ã§å…±æœ‰", btn:"è¿”ä¿¡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«"},
    20:{name:"çµæœ«ã‚’æ€¥ãŒãªã„", tip:"ã€ä»Šã¯ã“ã“ã¾ã§ã§OKã€ã‚’è¨€è‘‰ã«", btn:"æ€¥ãŒãªã„"}
  };

  // ãƒ¬ãƒ™ãƒ«é•·æ–‡ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆæ—¢å­˜ï¼‰
  const LV_LONG = {
    1:`ã„ã¾ã®ã‚ãªãŸã¯ã€å¯¾è©±ã‚’å®‰å…¨ã«ä¿ã¤æ„Ÿè¦šãŒå¼·ãåƒã„ã¦ã„ã¾ã™ã€‚æ²ˆé»™ã‚„ç›¸æ‰‹ã®æœªå®Œäº†ãŒè½ã¡ç€ã‹ãšã€ã¤ã„çµè«–ã‚„åŠ©è¨€ã¸æ€¥ãã‚„ã™ã„ã¨ãã¯ã€åè©1èªã§è¦ç´„ã—ã¦ã‹ã‚‰10ç§’ã ã‘å¾…ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚å¾…ã¤é–“ã«ã€Œæ™‚é–“æ ã€ã¨ã€Œã‚´ãƒ¼ãƒ«ã€ã‚’ä¸€è¨€ã§ç½®ã‘ã°ã€ç›¸æ‰‹ã‚‚ã‚ãªãŸã‚‚å®‰å¿ƒã—ã¦æ¬¡ã¸é€²ã‚ã¾ã™ã€‚`,
    2:`ä¼šè©±ã®æ‰‰ã¯é–‹ãã¯ã˜ã‚ã¦ã„ã¾ã™ã€‚å…·ä½“è³ªå•ã¯ã§ãã¦ã„ã‚‹ã®ã§ã€æ¬¡ã¯â€œåŸ‹ã‚ãƒˆãƒ¼ã‚¯â€ã‚’1å›æ¸›ã‚‰ã™ã“ã¨ã«æŒ‘æˆ¦ã€‚è¿”ä¿¡ãŒé…ãã¦ã‚‚è¿½æ’ƒã›ãšã€ç¿Œæ—¥ã®ãƒªãƒã‚¤ãƒ³ãƒ‰ã«å›ã™ã ã‘ã§ã€ä¿¡é ¼ã®è²¯é‡‘ãŒå¢—ãˆã¾ã™ã€‚åŒºåˆ‡ã‚Šè¦ç´„ï¼ˆã€Œã¤ã¾ã‚Šâ€¦ã€ï¼‰ãŒã‚ã‚‹ã¨ã€è©±ã®è»¸ãŒã¶ã‚Œã¾ã›ã‚“ã€‚`,
    3:`åœŸå°ã¯ã—ã£ã‹ã‚Šã€‚è¦ç´„â†’æ„Ÿæƒ…åæ˜ â†’å…·ä½“è³ªå•ã®ä¸‰æ‹å­ãŒãƒãƒã‚‹ã¨ã€ç›¸æ‰‹ã®æœ¬é¡Œã«å±Šãã‚„ã™ããªã‚Šã¾ã™ã€‚ã‚ãªãŸã®ä½“é¨“ã¯æ©‹æ¸¡ã—1è¡Œã«é™å®šã—ã€å¢ƒç•Œã®åˆå›³ï¼ˆã‚¹ãƒ«ãƒ¼OKï¼‰ã‚’å…ˆã«ç½®ãã¨ã€å®‰å¿ƒã®å¹…ãŒã•ã‚‰ã«åºƒãŒã‚Šã¾ã™ã€‚`,
    4:`å‘¼å¸ãŒåˆã£ã¦ãã¦ã€åŠé–‹ãã®æ‰‰ã‹ã‚‰ã‚ãŸãŸã‹ã„å…‰ãŒæ¼ã‚Œã¦ã„ã¾ã™ã€‚æ™‚é–“æ ãƒ»ã‚´ãƒ¼ãƒ«ã®å®£è¨€ã¨ã€â€œæ·±ã•âˆ’1â€ã®ç›¸äº’é–‹ç¤ºãŒåŠ¹ã„ã¦ã„ã¾ã™ã€‚æœªå®Œäº†ã¯æ€¥ãŒãšä¿å­˜ã—ã€ã€Œç¶šãã¯ã¾ãŸã€ã§é–¢ä¿‚ã‚’é•·æŒã¡ã•ã›ã‚‹é‹è»¢ãŒã§ãã¦ã„ã¾ã™ã€‚`,
    5:`é–‹ã„ãŸã‚¢ãƒ¼ãƒã€‚ã‚ãªãŸã¯é–‹æ”¾ã¨å¢ƒç•Œã®ä¸¡ç«‹ãŒå¾—æ„ã§ã™ã€‚éè¨€èªã®å¤‰åŒ–ã‚’æ‹¾ã„ã€å¿…è¦ãªã¨ãã ã‘ç¯ã‚Šã‚’è¶³ã™ã€‚ä¸‰æ‹å­ï¼ˆå…·ä½“è¦ç´„â†’æ„Ÿæƒ…åæ˜ â†’å…·ä½“è³ªå•ï¼‰ã§åˆæ„ãŒç”Ÿã¾ã‚Œã€èª¤è§£ãŒèµ·ãã¦ã‚‚å¯¾è©±ã§ä¿®æ­£ã§ãã¾ã™ã€‚ã‚¹ã‚­ãƒ«åã‚’è»½ãå…±æœ‰ã™ã‚‹ã¨ã€å†ç¾æ€§ãŒã•ã‚‰ã«ä¸ŠãŒã‚Šã¾ã™ã€‚`
  };

  // ãƒ¬ãƒ™ãƒ«åˆ¥ãƒ•ãƒ¬ãƒ¼ã‚ºä¾‹ï¼ˆæ–°è¦è¿½åŠ ï¼‰
  const LV_PHRASES = {
    1:[
      "ã€Œã¤ã¾ã‚Šã€ä»Šã„ã¡ã°ã‚“ä¸å®‰ãªã®ã¯â€œç· åˆ‡â€ã§åˆã£ã¦ã‚‹ï¼Ÿã€",
      "ã€Œ3åˆ†ã ã‘çŠ¶æ³ã‚’æ•´ç†ã—ã‚ˆã†ã€‚çµè«–ã¯æ€¥ãŒãªãã¦OKã€",
      "ï¼ˆæ²ˆé»™10ç§’ï¼‰ã€Œä»Šã¯ã“ã“ã¾ã§ã§OKã€‚ç¶šãã¯ã¾ãŸã«ã—ã‚ˆã†ã€",
      "ã€Œè©±ã—ãŸããªã„è©±é¡ŒãŒã‚ã‚Œã°åˆå›³ã—ã¦ã­ã€‚é£›ã°ã—ã¦å¤§ä¸ˆå¤«ã€",
      "ã€Œè¿”ä¿¡ã¯æ˜æ—¥ã§å¤§ä¸ˆå¤«ï¼Ÿ ç„¡ç†ãªã‚‰è¨€ã£ã¦ã­ã€"
    ],
    2:[
      "ã€Œä¸€ç•ªå¤§å¤‰ã ã£ãŸå ´é¢ã£ã¦ã€ã©ã“ã ã£ãŸï¼Ÿã€",
      "ã€Œãã‚Œã€å°‘ã—ç·Šå¼µã‚‚ã‚ã£ãŸï¼Ÿã€",
      "ã€ŒåŒºåˆ‡ã‚‹ãªã‚‰ä»Šæ—¥ã¯ã“ã“ã¾ã§ã«ã—ã¦ã€æ˜æ—¥ç¶šãã‚’èã‹ã›ã¦ã€",
      "ã€Œä»Šã®è©±ã€ã¤ã¾ã‚Šâ€œäººæ‰‹ä¸è¶³â€ãŒæ ¸å¿ƒã£ã¦ã“ã¨ã‹ãªï¼Ÿã€",
      "ã€Œæœªèª­ã§ã‚‚OKã€‚è¿½æ’ƒã—ãªã„ã§å¾…ã£ã¦ã‚‹ã­ã€"
    ],
    3:[
      "ã€Œã¤ã¾ã‚Šâ€œç¢ºèªã®æ‰‹é–“â€ãŒä¸€ç•ªã®è² æ‹…ã€ã§åˆã£ã¦ã‚‹ï¼Ÿã€â†’ã€Œãã®å ´é¢ã€ã„ã¤ãŒå¤šã„ï¼Ÿã€",
      "ã€Œï¼ˆè‡ªåˆ†ã®è©±ã¯1è¡Œã ã‘ï¼‰è‡ªåˆ†ã‚‚ä¼¼ãŸå ´é¢ã‚ã£ãŸã‚ˆã€‚â€¦ã§ã€ä»Šã©ã“ã¾ã§è©±ã›ãã†ï¼Ÿã€",
      "ã€Œã‚¹ãƒ«ãƒ¼OKã ã‹ã‚‰ã€è¨€ã„ã¥ã‚‰ã„è©±é¡Œã¯é£›ã°ã—ã¦ã­ã€",
      "ã€Œæœ€å¾Œã®åè©ã ã‘è¿”ã™ã­ã€‚â€œè¦‹ç©ã‚Šâ€ãŒç„¦ç‚¹ã€ã ã‚ˆã­ã€",
      "ã€Œç¶šãã¯ã¾ãŸã€‚ä»Šæ—¥ã¯â€œæ•´ç†â€ãŒã‚´ãƒ¼ãƒ«ã§ã€"
    ],
    4:[
      "ã€Œ15åˆ†ã ã‘ã€ä»Šæ—¥ã®ã‚´ãƒ¼ãƒ«ã¯â€œæ•´ç†â€ã€‚æ·±æ˜ã‚Šã¯æ¬¡å›ã§ã„ã„ï¼Ÿã€",
      "ã€Œãã®æ™‚ã€å°‘ã—ãƒ›ãƒƒã¨ã—ãŸï¼Ÿ ãã‚Œã¨ã‚‚ãƒ¢ãƒ¤ãƒƒã¨ï¼Ÿã€",
      "ã€Œåˆå›³ã¯ğŸ‘‹ã§ã€‚è©±é¡Œå¤‰ãˆãŸã„æ™‚ã¯ã™ãå¤‰ãˆã‚ˆã†ã€",
      "ã€Œä»Šã¯ä¿å­˜ã§OKã€‚â€œç¶šãã¯ã¾ãŸâ€ã«ã—ã¦ãŠã“ã†ã€",
      "ã€Œãƒšãƒ¼ã‚¹ã¯ã‚ãªãŸã«åˆã‚ã›ã‚‹ã­ã€‚ã‚†ã£ãã‚Šã§å¤§ä¸ˆå¤«ã€"
    ],
    5:[
      "ã€Œè¦ã™ã‚‹ã«â€œæ‹…å½“ã®æ›–æ˜§ã•â€ãŒãƒãƒƒã‚¯ã§ã€å°‘ã—æ‚”ã—ã„ã€‚åˆã£ã¦ã‚‹ï¼Ÿ â†’ æ¬¡ã«ã©ã“ã‚’å‹•ã‹ã™ï¼Ÿã€",
      "ã€Œå…·ä½“â†’æ„Ÿæƒ…â†’å…·ä½“ã®é †ã§ã„ãã­ã€‚ä»Šã®â€œä¸åœ¨é€£çµ¡â€ã€ã©ã®å ´é¢ã§ä¸€ç•ªå›°ã‚‹ï¼Ÿã€",
      "ã€Œé€Ÿåº¦ã¯ã‚ãªãŸã®ãƒšãƒ¼ã‚¹ã§ã€‚æ€¥ãŒãªãã¦å¤§ä¸ˆå¤«ã€",
      "ã€Œã“ã®ã‚¹ã‚­ãƒ«åã¯â€œå…·ä½“è¦ç´„â€ã€‚ä»Šã‚‚ãã‚Œã‚’ä½¿ã£ã¦ã‚‹ã‚ˆã€",
      "ã€Œä»Šæ—¥ã¯ã“ã“ã¾ã§ã§OKã€‚ç¶šãã‚’ã¾ãŸäºˆå®šåˆã‚ã›ã‚ˆã†ã€"
    ]
  };

  // ====== è¦ç´ å‚ç…§ ======
  const qWrap   = document.getElementById("qWrap");
  const prog    = document.getElementById("prog");
  const resEmpty= document.getElementById("resEmpty");
  const resArea = document.getElementById("resArea");
  const typeLine= document.getElementById("typeLine");
  const heroImg = document.getElementById("heroImg");
  const heroTitle= document.getElementById("heroTitle");
  const heroPoem = document.getElementById("heroPoem");
  const heroCopy = document.getElementById("heroCopy");
  const sumVal  = document.getElementById("sumVal");
  const bars    = document.getElementById("bars");
  const longCopy= document.getElementById("longCopy");
  const keyList = document.getElementById("keyList");
  const keyTips = document.getElementById("keyTips");
  const phraseList = document.getElementById("phraseList");

  // ====== ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ======
  function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }

  // ====== è¨­å•ç”Ÿæˆï¼ˆé€†è»¢è¡¨ç¤ºã¯ã—ãªã„ï¼‰ ======
  function buildQuestions(){
    const pool = shuffle([...ITEMS]);
    qWrap.innerHTML = pool.map(q => `
      <fieldset class="q" id="fs-${q.id}">
        <legend>${q.id}. ${q.text}</legend>
        <div class="scale" role="radiogroup" aria-label="${q.text}">
          ${[0,1,2,3,4].map(v=>`
            <div style="position:relative">
              <input id="q${q.id}-${v}" type="radio" name="q${q.id}" value="${v}">
              <label for="q${q.id}-${v}" title="${LABELS[v]}">${LABELS[v]}</label>
            </div>
          `).join("")}
        </div>
      </fieldset>
    `).join("");

    qWrap.querySelectorAll('input[type="radio"]').forEach(el=>{
  el.addEventListener('change', function(){
    saveAnswers();       // â† é¸ã¶ãŸã³ä¿å­˜
    updateProgress();
  }, false);
});
restoreAnswers();        // â† ãƒšãƒ¼ã‚¸å†è¨ªã§å¾©å…ƒ
updateProgress();
  }

  function updateProgress(){
  const total = ITEMS.length;
  const answered = qWrap.querySelectorAll('input[type="radio"]:checked').length;
  const pct = Math.round(100*answered/total);
  prog.style.width = pct + "%";
  const bar = prog.parentElement;
  if(bar){
    bar.setAttribute("aria-valuemin","0");
    bar.setAttribute("aria-valuemax", String(total));
    bar.setAttribute("aria-valuenow", String(answered));
    bar.setAttribute("aria-label", "å›ç­”é€²æ—ï¼š"+answered+" / "+total);
  }
}

// å›ç­”ã®ä¿å­˜/å¾©å…ƒ â€” kusemonäº’æ› {ts, ans:{Q01:..}} å½¢å¼
function saveAnswers(){
  try{
    const out = {};
    for(const q of ITEMS){
      const chk = qWrap.querySelector(`#fs-${q.id} input[type="radio"]:checked`);
      if(chk){
        const key = "Q"+String(q.id).padStart(2,"0");
        out[key] = parseInt(chk.value,10);
      }
    }
    localStorage.setItem(ANS_KEY, JSON.stringify({ts: Date.now(), ans: out}));
  }catch(e){}
}
function restoreAnswers(){
  try{
    const raw = localStorage.getItem(ANS_KEY);
    if(!raw) return;
    const data = JSON.parse(raw), ans = (data && data.ans) || {};
    Object.keys(ans).forEach((qk)=>{
      const id = parseInt(qk.replace(/^Q/,""),10);
      const v  = ans[qk];
      const input = qWrap.querySelector(`#q${id}-${v}`);
      if(input){ input.checked = true; }
    });
  }catch(e){}
}
function wipeAnswers(){ try{ localStorage.removeItem(ANS_KEY); }catch(e){} }
  // ====== æ¡ç‚¹ ======
  function score(){
  saveAnswers(); // â† ç›´å‰ã®å…¥åŠ›ã‚‚ç¢ºå®Ÿã«ä¿å­˜
    const missing = [];
    const ans = new Map(); // id -> point(0-4 after reverse)
    for(const q of ITEMS){
      const chk = qWrap.querySelector(`#fs-${q.id} input[type="radio"]:checked`);
      const raw = chk ? parseInt(chk.value,10) : null;
      if(raw===null) { missing.push(q.id); continue; }
      const point = q.rev ? (4 - raw) : raw; // é€†è»¢ã¯å†…éƒ¨ã§å‡¦ç†ã€UIã«ã¯éè¡¨ç¤º
      ans.set(q.id, point);
    }
    if (missing.length){
      alert("æœªå›ç­”ãŒã‚ã‚Šã¾ã™ã€‚å…¨20å•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚");
      const fs = document.getElementById(`fs-${missing[0]}`);
      fs.scrollIntoView({behavior:"smooth", block:"center"});
      fs.classList.add("need");
      setTimeout(()=>fs.classList.remove("need"),1600);
      return;
    }
    // åˆè¨ˆ
    let sum = 0;
    for(const v of ans.values()) sum += v;
    render(sum, ans);
  }

  // ãƒ©ãƒ³ã‚¯åˆ¤å®š
  function rankOf(sum){
    for(const lv of [1,2,3,4,5]){
      const d = LV_DEF[lv];
      if(sum>=d.min && sum<=d.max) return lv;
    }
    return 1;
  }

  // å› å­ã‚¹ã‚³ã‚¢ï¼ˆ0-100%ï¼‰
  function factorScores(ans){
    const toPct = v => Math.round((v/4)*100);
    const out = {};
    for(const [key, def] of Object.entries(FACTORS)){
      const vals = def.items.map(id => ans.get(id)).filter(v=>typeof v==="number");
      const avg = vals.reduce((s,v)=>s+v,0)/vals.length;
      out[key] = { pct: Math.max(0, Math.min(100, toPct(avg))), count: def.items.length };
    }
    return out;
  }

  // ä½ã‚¹ã‚³ã‚¢éµ Top1-3
  function lowestKeys(ans){
    const arr = ITEMS.map(q=>({id:q.id, point: ans.get(q.id)}));
    arr.sort((a,b)=> a.point - b.point || a.id - b.id);
    return arr.slice(0,3).map(o=>o.id);
  }

  // ====== è¡¨ç¤º ======
  function render(sum, ans){
    // ãƒ©ãƒ³ã‚¯
    const lv = rankOf(sum);
    const D = LV_DEF[lv];

    // ãƒ’ãƒ¼ãƒ­ãƒ¼
    heroImg.src = IMG_BASE + D.img;
    heroImg.alt = D.alt;
    heroTitle.textContent = `ã‚ãªãŸã®ã‚ªãƒ¼ãƒ—ãƒŠãƒ¼åº¦ï¼šLv${lv}ï¼ˆ${D.label}ï¼‰`;
    heroPoem.textContent  = D.poem;
    heroCopy.textContent  = D.copy;

    // åˆè¨ˆ
    sumVal.textContent = String(sum);
    typeLine.textContent = `Lv${lv}ï¼ˆ${D.label}ï¼‰ / ${sum}ç‚¹`;

    // å› å­ãƒãƒ¼
    const fs = factorScores(ans);
    const bandClass = pct => pct>=70 ? "good" : (pct>=40 ? "mid" : "low");
    const bandLabel = pct => pct>=70 ? "é«˜" : (pct>=40 ? "ä¸­" : "ä½");
    const order = ["SPEC","EMPA","PACE","BOUND","FRAME","BRIDGE"];
    bars.innerHTML = order.map((key)=>{
      const def = FACTORS[key];
      const pct = fs[key].pct;
      return `
        <article class="bar" aria-label="${def.name}">
          <div><strong>${def.name}</strong><span class="band ${bandClass(pct)}">${bandLabel(pct)}</span></div>
          <div class="row" aria-hidden="true"><span style="width:${pct}%"></span></div>
          <div class="small" style="margin-top:4px">${pct} / 100</div>
          <div class="hint">${def.hint}</div>
        </article>
      `;
    }).join("");

    // é•·æ–‡ã‚³ãƒ¡ãƒ³ãƒˆ
    longCopy.textContent = LV_LONG[lv];

    // ãƒ•ãƒ¬ãƒ¼ã‚ºä¾‹
    const phrases = LV_PHRASES[lv] || [];
    phraseList.innerHTML = phrases.map(t=>`<li>${t}</li>`).join("");

    // æ¬¡ã®éµï¼šä½ã‚¹ã‚³ã‚¢é …ç›® Top1-3
    const lowIds = lowestKeys(ans);
    keyList.innerHTML = lowIds.map(i=>`<span class="kpill">#${i} ${KEY_DICT[i]?.name ?? "â€”"}</span>`).join("");
    keyTips.textContent = lowIds.map(i=>KEY_DICT[i]?.tip).filter(Boolean).join("ï¼");

    // è¡¨ç¤ºåˆ‡æ›¿
    // è¡¨ç¤ºåˆ‡æ›¿
    resEmpty.style.display = "none";
    resArea.style.display = "";
    document.getElementById("result").scrollIntoView({behavior:"smooth", block:"start"});

    // ã“ã“ã‚Lvåˆå›³ï¼‹ä¸€è¦§ã®ã€Œã¤ã¥ãã‹ã‚‰å†é–‹ã€
    try{
      document.dispatchEvent(new Event('result:ready')); // â† åˆå›³
      localStorage.setItem("specimens:last", JSON.stringify({ id: SLUG, title: TITLE, href: location.pathname }));
    }catch(e){}
  }

  // ====== ã‚¯ãƒªã‚¢ ======
  function clearAnswers(){
  qWrap.querySelectorAll('input[type="radio"]').forEach(el=>el.checked=false);
  try{ localStorage.removeItem(ANS_KEY); }catch(e){} // â† ä¿å­˜ã‚¯ãƒªã‚¢
  prog.style.width = "0%";
  resEmpty.style.display = "";
  resArea.style.display = "none";
  document.getElementById("app").scrollIntoView({behavior:"smooth", block:"start"});
}

  // ====== åˆæœŸåŒ– ======
  buildQuestions();
  document.getElementById("doScore").addEventListener("click", score);
  document.getElementById("doScore2").addEventListener("click", score);
  document.getElementById("clearAns").addEventListener("click", clearAnswers);
  document.getElementById("backLink")?.addEventListener("click", ()=>{
    try{
      localStorage.setItem("specimens:last", JSON.stringify({ id: SLUG, title: TITLE, href: location.pathname }));
    }catch(e){}
  });
})();
</script>
<script>
/* ã“ã“ã‚Lv/æ¸ˆã‚«ã‚¦ãƒ³ãƒˆï¼ˆçµæœæç”»ã®åˆå›³ã§ä¸€åº¦ã ã‘ï¼‰ */
(function(){
  'use strict';
  var DONE_KEY    = 'specimens:open:byid';
  var TOTAL_KEY   = 'specimens:open:total';
  var GLOBAL_LAST = 'specimens:open:global:last';
  var MY_ID = (document.body && document.body.getAttribute('data-id')) || 'unknown';
  var COUNTAPI_NS  = 'haisuikounozarigani_shindan';
  var COUNTAPI_KEY = 'specimens_open_total';
  function hitEveryone(){
    var url = 'https://api.countapi.xyz/hit/'+COUNTAPI_NS+'/'+COUNTAPI_KEY;
    if(navigator.sendBeacon){ try{ navigator.sendBeacon(url); }catch(_){ }
    }else{ fetch(url, {mode:'cors', cache:'no-store', keepalive:true}).catch(function(){}); }
  }
  var marked=false;
  function markOnce(){
    if(marked) return; marked=true;
    try{
      localStorage.setItem(TOTAL_KEY, String((+localStorage.getItem(TOTAL_KEY)||0)+1));
      var map={}; try{ map=JSON.parse(localStorage.getItem(DONE_KEY)||'{}'); }catch(_){}
      map[MY_ID]=(map[MY_ID]||0)+1;
      localStorage.setItem(DONE_KEY, JSON.stringify(Object.assign({},map,{_ts:Date.now()})));
      hitEveryone();
      try{ localStorage.setItem(GLOBAL_LAST, String((+localStorage.getItem(GLOBAL_LAST)||0)+1)); }catch(_){}
    }catch(_){}
  }
  document.addEventListener('result:ready', markOnce);
  setTimeout(markOnce, 2000); // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
})();
</script>
</body>
</html>