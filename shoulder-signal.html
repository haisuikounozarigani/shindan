<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<!-- =========================
  æ¤œç´¢ç½®æ›ãƒã‚¤ãƒ³ãƒˆï¼ˆæœ€ä½é™ã“ã“ã ã‘ï¼‰
  1) TITLE / description
  2) og:title / og:description
  3) og:url
  4) og:image ã® slug
  5) body data-id / SLUG
========================= -->
<title>è‚©ã“ã‚Šä¿¡å·è¨ºæ–­ï½œãƒ†ãƒ³ãƒ—ãƒ¬</title>
<meta name="description" content="è‚©ã“ã‚Šã¨å¿ƒç†ã®çµ¡ã¾ã‚Šå…·åˆã‚’â€œä¿¡å·â€ã§è¦‹ãˆã‚‹åŒ–ã™ã‚‹è¨ºæ–­ï¼ˆé››å½¢ï¼‰ã€‚">
<meta name="theme-color" content="#fff7fd">

<!-- OG -->
<meta property="og:type" content="website">
<meta property="og:title" content="è‚©ã“ã‚Šä¿¡å·è¨ºæ–­">
<meta property="og:description" content="è‚©ã“ã‚Šã¨å¿ƒç†ã®çµ¡ã¾ã‚Šå…·åˆã‚’â€œä¿¡å·â€ã§è¦‹ãˆã‚‹åŒ–ã™ã‚‹è¨ºæ–­ï¼ˆé››å½¢ï¼‰ã€‚">
<meta property="og:url" content="https://haisuikounozarigani.github.io/shindan/shoulder-signal.html">
<meta property="og:image" content="https://haisuikounozarigani.github.io/shindan/assets/results/shoulder-signal/t00.webp">

<style>
:root{
  --bg:#fdf7ff;
  --paper:#fff;
  --ink:#201322;
  --muted:#6a5b70;
  --line:#ece3f5;

  /* åŸºæœ¬ã‚¢ã‚¯ã‚»ãƒ³ãƒˆï¼ˆãƒšãƒ¼ã‚¸å…¨ä½“ï¼‰ */
  --accent:#8c6bff;
  --accent2:#ff8fc7;

  /* ä¿¡å·è‰²ï¼ˆUIã®æ„å‘³ä»˜ã‘ï¼‰ */
  --sig-blue:#4aa8ff;
  --sig-yellow:#ffd54a;
  --sig-red:#ff4a6a;
  --sig-gray:#b8a9c6;
  --sig-ink:#2a1930;
}
html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);
  font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans JP","Hiragino Sans","Yu Gothic",Meiryo,sans-serif;
  -webkit-text-size-adjust:100%;
  text-size-adjust:100%;
}
a{color:#5b2ea8;text-decoration:none}
.wrap{max-width:980px;margin:0 auto;padding:16px}

header.hd{
  background:linear-gradient(160deg,#fff7fd,#f3ecff);
  border-bottom:1px solid var(--line);
}
header.hd .wrap{padding:20px 16px 10px}
.ttl{
  font-weight:900;font-size:1.35rem;letter-spacing:.02em;
  display:flex;gap:10px;align-items:center;flex-wrap:wrap;
}
.sub{color:var(--muted);font-size:.95rem}

/* å›ºå®šé€²æ—ãƒãƒ¼ */
.progress-fixed{
  position:sticky;top:0;z-index:20;
  height:8px;background:var(--line)
}
.progress-bar{
  height:100%;border-radius:6px;
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  transition:width .2s ease
}
[role="progressbar"]{width:100%}

/* ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼ˆæ­£æ–¹å½¢å›ºå®šï¼‰ */
figure.hero{
  margin:12px 0;border:1px solid var(--line);
  border-radius:16px;overflow:hidden;background:#fff;
}
figure.hero img{
  display:block;width:100%;
  aspect-ratio:1/1;object-fit:cover;
}

/* å…±é€šã‚«ãƒ¼ãƒ‰ */
.paper{
  background:var(--paper);
  border:1px solid var(--line);
  border-radius:16px;
  padding:16px;
  margin:14px 0;
}

/* ãƒ—ãƒ­ãƒ­ãƒ¼ã‚° */
#prologue h2{margin-top:0;font-size:1.1rem}
#prologue p{margin:.45rem 0;color:var(--muted)}
#prologue .note{color:var(--muted);font-size:.9rem}
.start-btn{
  margin-top:12px;width:100%;
  padding:12px 16px;border-radius:999px;border:0;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#1b0f1c;font-weight:900;letter-spacing:.03em;
  cursor:pointer;box-shadow:0 10px 20px rgba(140,107,255,.18);
  display:inline-flex;align-items:center;justify-content:center;gap:8px;
}
.start-btn span.emo{font-size:1.2rem}

/* è³ªå• */
.qhead{display:flex;justify-content:space-between;align-items:center;gap:8px}
.qnum{font-weight:900;color:#4c2b5f}
.qtag{
  font-size:.8rem;color:#7a6c86;
  padding:2px 8px;border-radius:999px;
  border:1px solid var(--line);
  background:#f9f3ff;
  display:inline-flex;align-items:center;gap:4px;
}
.qtext{margin:.65rem 0 1rem;font-weight:850}
.opts{display:grid;grid-template-columns:1fr;gap:8px}
.btn{
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  padding:12px 14px;border:1px solid var(--line);
  border-radius:12px;background:#fff;cursor:pointer;transition:.12s;
}
.btn[aria-pressed="true"]{outline:2px solid var(--accent2);background:#fff4fa}
.btn:hover{transform:translateY(-1px)}
.btn-label{font-weight:850}
.opt-note{color:#8b7b93;font-size:.9rem;white-space:nowrap}
.ctrls{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
.ctrls button{
  padding:10px 14px;border-radius:10px;border:1px solid var(--line);
  background:#faf5ff;cursor:pointer;font-weight:800;
}
.ctrls button:disabled{opacity:.55;cursor:not-allowed}

/* çµæœ */
.result{display:none}
.flex{display:flex;gap:16px;flex-wrap:wrap}
.result .imgbox{flex:1 1 280px;min-width:260px}
.result .imgbox img{
  width:100%;aspect-ratio:1/1;object-fit:cover;
  border-radius:14px;border:1px solid var(--line);display:block;
}
.result .text{flex:2 1 360px;min-width:300px}

.badge-line{display:flex;flex-wrap:wrap;gap:6px;align-items:center;margin:.2rem 0 .55rem}
.badge-pill{
  display:inline-flex;align-items:center;gap:6px;
  padding:3px 10px;border-radius:999px;background:#fff1fb;font-size:.85rem;
  border:1px solid rgba(236,227,245,.9);
}
.result-title-main{margin:.1rem 0 0}
.result-title-sub{margin:.15rem 0 .8rem;font-size:.9rem;color:var(--muted)}
.result-comment{
  margin:.35rem 0 .9rem;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid var(--line);
  background:linear-gradient(180deg,#fff,#fff6fb);
}
.result-comment p{margin:.25rem 0;color:#5a3a4f}
.result-comment .rc-ttl{font-weight:950;color:#3a2433}

/* ä»Šæ—¥ã®ä¸€æ‰‹ */
.today-box{
  margin:.9rem 0 .2rem;
  padding:12px 12px 10px;
  border-radius:16px;
  border:1px solid rgba(140,107,255,.35);
  background:linear-gradient(135deg, rgba(140,107,255,.14), rgba(255,143,199,.12));
  box-shadow:0 10px 22px rgba(140,107,255,.12);
}
.today-head{
  display:inline-flex;align-items:center;gap:8px;
  font-weight:950;color:#2b1830;
  padding:2px 10px;border-radius:999px;
  background:rgba(255,255,255,.75);
  border:1px solid rgba(236,227,245,.9);
}
.today-text{margin:.55rem 0 0;font-weight:850;color:#2b1830}

/* å› å­ãƒãƒ¼ */
.bars{display:grid;grid-template-columns:1fr;gap:10px;margin-top:10px}
.bar{background:transparent;border-radius:10px;padding:4px 0 6px}
.bar .h{
  display:grid;
  grid-template-columns: 1fr auto;
  align-items:center;
  gap:10px;
  padding:2px 10px 6px;
  font-size:.92rem;
}
.bar .h span:first-child{font-weight:900}
.bar .pct{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width:58px;
  padding:3px 10px;
  border-radius:999px;
  border:1px solid var(--line);
  background:#fff;
  color:#3a2433;
  font-weight:950;
  font-variant-numeric: tabular-nums;
}
.bar .track{
  margin:0 10px 4px;
  height:12px;
  border-radius:999px;
  background:#f3e9ff;
  border:1px solid var(--line);
  overflow:hidden;
  position:relative;
}
.bar .fill{
  height:100%;
  width:0%;
  border-radius:inherit;
  transition:width .25s ease-out, filter .25s ease-out;
  opacity:1;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.35);
}
.bar-desc{padding:0 10px 2px;font-size:.8rem;color:var(--muted)}

/* å‰å›å›ç­” */
.prev-list{list-style:none;padding-left:0;margin:.4rem 0 .2rem .9rem}
.prev-item{
  display:flex;gap:8px;align-items:flex-start;
  padding:6px 0;border-bottom:1px solid var(--line);
}
.prev-q{
  flex:1;min-width:0;
  display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;
  overflow:hidden;overflow-wrap:anywhere;
}
.prev-a{
  flex:0 0 auto;white-space:nowrap;
  border:1px solid var(--line);border-radius:999px;padding:2px 8px;
  font-size:.9rem;background:#faf5ff;
}

/* ã‚®ãƒ£ãƒ©ãƒªãƒ¼ */
.gallery{margin-top:2px;display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;}
.gallery figure{
  margin:0;border:1px solid var(--line);border-radius:12px;background:#fff;
  padding:6px;text-align:center;font-size:.85rem;color:var(--muted);
  display:flex;flex-direction:column;gap:4px;
}
.gallery img{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:8px;display:block}

/* æŠ˜ã‚ŠãŸãŸã¿ */
.fold-card{
  margin:10px 0 8px;padding:8px 10px;border-radius:12px;
  border:1px solid var(--line);background:#fff;color:var(--muted);font-size:.9rem;
}
.fold-card summary{
  cursor:pointer;list-style:none;font-weight:850;
  display:flex;align-items:center;justify-content:space-between;
}
.fold-card[open]{background:#fdf7ff;box-shadow:0 3px 8px rgba(0,0,0,.03)}
.fold-card[open] summary{margin-bottom:6px}

/* ç ”ç©¶ãƒ¡ãƒ¢ */
.meta-note{
  margin-top:8px;padding:8px 10px;border-radius:12px;
  border:1px solid var(--line);background:#fdf7ff;color:var(--muted);font-size:.9rem;
}
.meta-note summary{
  cursor:pointer;list-style:none;font-weight:850;
  display:flex;align-items:center;justify-content:space-between;
}
.meta-note[open]{background:#fff}
.meta-note ul{margin:.5rem 0 0 1.1rem;padding-left:0}
.meta-note ul li + li{margin-top:10px;padding-top:6px;border-top:1px dashed var(--line)}

/* ãƒ•ãƒƒã‚¿ */
.meta{color:#7a6c86;font-size:.92rem;clear:both;margin-top:.6rem}
.back-row{display:flex;gap:10px;flex-wrap:wrap;margin:12px 0 6px;}
.back{
  flex:1 1 220px;
  display:inline-flex;align-items:center;justify-content:center;gap:8px;
  padding:12px 16px;border-radius:999px;
  border:1px solid var(--line);background:#fff;color:var(--ink);
  font-weight:900;letter-spacing:.02em;cursor:pointer;
  font-size:1rem;
  box-shadow:0 12px 24px rgba(140,107,255,.14);
  transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;
}
.back:hover{transform:translateY(-1px);box-shadow:0 16px 30px rgba(140,107,255,.18);border-color:#ead9f2}
.back:active{transform:translateY(0);box-shadow:0 10px 20px rgba(140,107,255,.14)}
.back:focus-visible{outline:3px solid rgba(182,156,255,.35);outline-offset:3px}
.back-primary{
  border:0;background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#1b0f1c;box-shadow:0 14px 28px rgba(140,107,255,.22);
}
.back-ghost{background:linear-gradient(180deg,#fff,#fff6fb)}
.back .chev{
  display:inline-grid;place-items:center;width:22px;height:22px;border-radius:999px;
  background:rgba(182,156,255,.18);color:rgba(32,19,34,.75);
  font-size:1.15rem;line-height:1;
}

/* ãƒˆãƒ¼ã‚¹ãƒˆ */
.mini-toast{
  position:fixed;left:50%;bottom:24px;
  transform:translateX(-50%) translateY(20px);
  opacity:0;background:#4c2b5f;color:#fff;
  padding:8px 12px;border-radius:999px;
  font-size:1.1rem;transition:.25s;z-index:40;
}
.mini-toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

/* ====== é¸æŠè‚¢ï¼šä¿¡å·ã£ã½ã„UI ====== */
.btn{
  position:relative;
}
.btn-left{
  display:flex;
  align-items:center;
  gap:10px;
  min-width:0;
}
.opt-signal{
  flex:0 0 auto;
  width:22px;
  padding:4px;
  border-radius:999px;
  border:1px solid var(--line);
  background:linear-gradient(180deg,#fff,#faf5ff);
  display:grid;
  gap:4px;
  box-shadow:0 8px 14px rgba(140,107,255,.10);
}
.opt-signal .dot{
  width:12px;height:12px;border-radius:999px;
  margin:0 auto;
  background:rgba(184,169,198,.28);
  border:1px solid rgba(0,0,0,.06);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.55);
  opacity:.55;
}

/* 0-4 ã®å›ç­”ãƒ¬ãƒ™ãƒ«ã‚’ã€ä¿¡å·ã£ã½ãç‚¹ç¯ã•ã›ã‚‹
   0=é’ / 1=é’å¼± / 2=é»„ / 3=èµ¤ / 4=èµ¤ç‚¹æ»… */
.opt-signal[data-level="0"] .dot.d1{background:var(--sig-blue); opacity:1; box-shadow:0 0 0 3px rgba(74,168,255,.16), 0 10px 16px rgba(74,168,255,.16)}
.opt-signal[data-level="1"] .dot.d1{background:var(--sig-blue); opacity:.72}
.opt-signal[data-level="2"] .dot.d2{background:var(--sig-yellow); opacity:1; box-shadow:0 0 0 3px rgba(255,213,74,.16), 0 10px 16px rgba(255,213,74,.16)}
.opt-signal[data-level="3"] .dot.d3{background:var(--sig-red); opacity:1; box-shadow:0 0 0 3px rgba(255,74,106,.14), 0 10px 16px rgba(255,74,106,.16)}
.opt-signal[data-level="4"] .dot.d3{background:var(--sig-red); opacity:1; animation:blink 1.0s steps(1,end) infinite}

.btn-label{
  min-width:0;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

/* æŠ¼ä¸‹æ™‚ã€ãƒŸãƒ‹ä¿¡å·ã‚‚å°‘ã—å¼·èª¿ */
.btn[aria-pressed="true"] .opt-signal{
  border-color:rgba(140,107,255,.40);
  box-shadow:0 10px 18px rgba(140,107,255,.18);
}

/* ========= ä¿¡å·UIï¼ˆã“ã“ãŒä»Šå›ã®â€œæ–¬æ–°éƒ¨åˆ†â€ï¼‰ ========= */
.signal-wrap{
  display:flex;align-items:center;gap:10px;flex-wrap:wrap;
}
.signal{
  width:36px;
  padding:6px;
  border-radius:999px;
  border:1px solid var(--line);
  background:linear-gradient(180deg,#fff,#faf5ff);
  box-shadow:0 10px 18px rgba(140,107,255,.12);
  display:grid;
  gap:6px;
}
.light{
  width:24px;height:24px;border-radius:999px;
  margin:0 auto;
  background:rgba(184,169,198,.35);
  border:1px solid rgba(0,0,0,.06);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.5);
  position:relative;
}
.light::after{
  content:"";
  position:absolute;inset:5px;
  border-radius:999px;
  background:rgba(255,255,255,.25);
  filter:blur(.2px);
  opacity:.6;
}

/* active */
.signal[data-state="blue"]  .light[data-k="blue"]  {background:var(--sig-blue); box-shadow:0 0 0 3px rgba(74,168,255,.18), 0 10px 18px rgba(74,168,255,.22)}
.signal[data-state="yellow"].light, .signal[data-state="yellow"] .light[data-k="yellow"]{}
.signal[data-state="yellow"] .light[data-k="yellow"]{background:var(--sig-yellow); box-shadow:0 0 0 3px rgba(255,213,74,.20), 0 10px 18px rgba(255,213,74,.22)}
.signal[data-state="red"]   .light[data-k="red"]   {background:var(--sig-red); box-shadow:0 0 0 3px rgba(255,74,106,.18), 0 10px 18px rgba(255,74,106,.22)}
.signal[data-state="blink"] .light[data-k="red"]   {background:var(--sig-red); animation:blink 1.0s steps(1,end) infinite}
.signal[data-state="dead"]  {filter:saturate(.45) grayscale(.15)}
.signal[data-state="dead"]  .light{background:rgba(184,169,198,.22)}
.signal[data-state="dead"]  .light::after{opacity:.25}

@keyframes blink{
  0%,49%{opacity:1}
  50%,100%{opacity:.15}
}

.rank{
  display:inline-flex;align-items:center;gap:8px;
  padding:.3em .75em;border-radius:999px;
  background:#f3e9ff;color:#4b266e;font-weight:850;font-size:.85rem;
}

/* ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰ï¼ˆçµæœã§ä¿¡å·ãŒã©ã‚Œã‹æ˜ç¤ºï¼‰ */
.legend{
  margin:.6rem 0 .2rem;
  border:1px solid var(--line);
  border-radius:14px;
  background:#fff;
  padding:10px 10px 6px;
}
.legend-title{
  font-weight:950;color:var(--sig-ink);
  display:flex;align-items:center;gap:8px;margin-bottom:6px;
}
.legend-grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap:8px;
}
.legend-item{
  border:1px solid var(--line);
  border-radius:12px;
  padding:8px 10px;
  display:flex;align-items:center;gap:10px;
  background:linear-gradient(180deg,#fff,#fff7fd);
  opacity:.72;
}
.legend-item.active{
  opacity:1;
  box-shadow:0 10px 18px rgba(140,107,255,.14);
  border-color:rgba(140,107,255,.35);
}
.legend-dot{
  width:14px;height:14px;border-radius:999px;
  border:1px solid rgba(0,0,0,.06);
}
.legend-dot.blue{background:var(--sig-blue)}
.legend-dot.yellow{background:var(--sig-yellow)}
.legend-dot.red{background:var(--sig-red)}
.legend-dot.blink{
  background:var(--sig-red);
  animation:blink 1.0s steps(1,end) infinite;
}
.legend-dot.dead{background:var(--sig-gray)}
.legend-cap{font-weight:900}
.legend-sub{font-size:.85rem;color:var(--muted);margin-left:auto}

/* å°ç”»é¢ */
@media (max-width:600px){
  header.hd .wrap{padding:16px 12px 8px}
  .paper{padding:14px 12px}
}
</style>
</head>

<body data-id="shoulder-signal">
<header class="hd" role="banner">
  <div class="wrap">
    <div class="ttl">
      <span aria-hidden="true">ğŸš¦</span>
      <span id="pageTitle">è‚©ã“ã‚Šä¿¡å·è¨ºæ–­</span>

      
    </div>

    <div class="sub" id="pageSub">
      è‚©ã¨å¿ƒã®çµ¡ã¾ã‚Šå…·åˆã‚’ã€ä¿¡å·ã«ç¿»è¨³ã™ã‚‹ã€‚æ·±åˆ»ã˜ã‚ƒãªã„ã€‚è¦³æ¸¬ã ã€‚
    </div>
  </div>
</header>

<div class="progress-fixed" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
  <div class="progress-bar" style="width:0%"></div>
</div>

<main class="wrap" id="app" role="main" aria-live="polite">

  <figure class="hero">
    <img id="heroImg" src="/shindan/assets/results/shoulder-signal/t00.webp" alt="ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ" loading="lazy">
  </figure>

  <section id="prologue" class="paper" aria-label="ãƒ—ãƒ­ãƒ­ãƒ¼ã‚°">
    <h2 id="proTitle">ã‚ãªãŸã®è‚©ã“ã‚Šã€ä½•è‰²ï¼Ÿ</h2>
    <p id="proLine1">ãƒãƒƒã‚µãƒ¼ã‚¸è¡Œã£ã¦ã‚‚æ²»ã‚‰ãªã„è¬ã€ä»Šã‹ã‚‰è§£æ˜ã—ã¾ã™ã€‚</p>
    <p id="proLine2">ãŸã£ãŸ1åˆ†ã§ã€ã‚ãªãŸã®è‚©ã“ã‚ŠãŒ<span style="color: #4169e1;">ğŸ”µé’ä¿¡å·</span>ãªã®ã‹<span style="color: #dc143c;">ğŸ”´èµ¤ä¿¡å·</span>ãªã®ã‹ã€ãƒãƒ¬ã¾ã™ã€‚</p>
    <p id="proLine3">æº–å‚™ã¯ã„ã„ï¼Ÿ ãƒœã‚¿ãƒ³æŠ¼ã—ãŸã‚‰ã‚‚ã†å¾Œæˆ»ã‚Šã§ããªã„ã€‚<br>ï¼ˆå˜˜ã€‚é€”ä¸­ã§ã‚„ã‚ã‚‰ã‚Œã‚‹ï¼‰</p>

    <p class="note">â€»çµæœè¦‹ã¦ã€Œã‚ã€ã“ã‚Œç§ã ã€ã£ã¦ãªã‚‹äººç¶šå‡ºä¸­ã€‚</p>

    <button type="button" id="startBtn" class="start-btn" aria-label="è¨ºæ–­ã‚’å§‹ã‚ã‚‹">
      <span class="emo">ğŸš¦</span><span id="startLabel">ä¿¡å·åˆ¤å®šã‚¹ã‚¿ãƒ¼ãƒˆ</span>
    </button>
</section>

  <section id="quiz" class="paper" aria-label="è³ªå•ã‚»ã‚¯ã‚·ãƒ§ãƒ³" style="display:none">
    <div class="qhead">
      <div class="qnum" id="qnum">Q1/??</div>
      <div class="qtag" id="qtag"><span aria-hidden="true">ğŸ§·</span><span>è‚©ãƒ­ã‚°</span></div>
    </div>
    <div class="qtext" id="qtext">â€¦</div>
    <div class="opts" id="opts" role="group" aria-label="å›ç­”ã‚’é¸æŠ"></div>

    <div class="ctrls">
      <button type="button" id="prevBtn" aria-label="å‰ã®è¨­å•ã¸æˆ»ã‚‹">ã‚‚ã©ã‚‹</button>
    </div>
  </section>

  <section id="result" class="paper result" aria-label="çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³">
    <h2 style="margin-top:0">çµæœ</h2>

    <div class="flex">
      <div class="imgbox">
        <img id="resultImg" src="" alt="" loading="lazy">
      </div>
      <div class="text">
        <div class="badge-line">
          <span class="badge-pill" id="gradeBadge"><span aria-hidden="true">ğŸš¦</span><span>æœªåˆ¤å®š</span></span>
          <span class="badge-pill" id="scoreBadge">ã‚¹ã‚³ã‚¢ â€”ç‚¹</span>
        </div>

        <!-- ä¿¡å·ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰ï¼ˆã©ã‚Œã«å€¤ã™ã‚‹ã‹ã€ã“ã“ã§æ˜ç¢ºã«ï¼‰ -->
        <div class="legend" aria-label="ä¿¡å·ã®æ„å‘³">
          <div class="legend-title"><span aria-hidden="true">ğŸ§­</span><span>ä¿¡å·ã®å¯¾å¿œï¼ˆã©ã‚Œã«å€¤ã™ã‚‹ã‹ï¼‰</span></div>
          <div class="legend-grid" id="legendGrid">
            <!-- JSã§ active ã‚’ä»˜ä¸ -->
          </div>
        </div>

        <h3 class="result-title-main" id="resultTitle">â€”</h3>
        <p class="result-title-sub" id="resultSubtitle">â€”</p>

        <div class="result-comment" id="resultComment" aria-label="çµæœã‚³ãƒ¡ãƒ³ãƒˆ">
          <p class="rc-ttl">â€”</p>
          <p>â€”</p>
        </div>

        <div class="today-box" aria-label="ä»Šæ—¥ã®ä¸€æ‰‹">
          <div class="today-head"><span aria-hidden="true">ğŸ§©</span><span>ä»Šæ—¥ã®ä¸€æ‰‹</span></div>
          <div class="today-text" id="todayText">â€”</div>
        </div>

        <div class="bars" id="bars" aria-label="å› å­ãƒãƒ¼"></div>
      </div>
    </div>

    <details id="prevBlock" class="fold-card">
      <summary>ğŸ“ å‰å›ã®å›ç­”<span aria-hidden="true">â–¾</span></summary>
      <ul id="prevList" class="prev-list"></ul>
    </details>

    <details id="galleryBlock" class="fold-card">
      <summary>ğŸ–¼ ãƒ©ãƒ³ã‚¯ã®ã‚®ãƒ£ãƒ©ãƒªãƒ¼<span aria-hidden="true">â–¾</span></summary>
      <div class="gallery" id="gallery"></div>
    </details>

    <details class="meta-note" id="researchNotes">
      <summary>ğŸ“š ç ”ç©¶ãƒ¡ãƒ¢<span aria-hidden="true">â–¾</span></summary>
      <ul id="researchList">
  <li>
    <strong>æ¨ªæ–­ï¼ˆå¤§å­¦ç”Ÿ N=23ï¼‰</strong>ï¼šè‚©ã“ã‚ŠãŒã‚ã‚‹äººã¯ã€<strong>ä¸»è¦³ã‚¹ãƒˆãƒ¬ã‚¹</strong>ãŒã‹ãªã‚Šé«˜ã‚ã€‚
    <br>ã ã„ãŸã„ <strong>59/100</strong> ãã‚‰ã„ vs ãªã—ç¾¤ã¯ <strong>11/100</strong> ãã‚‰ã„ï¼ˆå·®ã¯ç´„ <strong>+48</strong>ï¼‰ã€‚
    <br><small>é™ç•Œï¼šäººæ•°ãŒå°‘ãªã„ã®ã§ã€Œå‚¾å‘ç¢ºèªã€ãƒ¬ãƒ™ãƒ«ã€‚</small>
  </li>

  <li>
    <strong>ã‚³ãƒ›ãƒ¼ãƒˆï¼ˆä¸€èˆ¬æˆäºº N=604ãƒ»7å¹´ï¼‰</strong>ï¼šé¦–è‚©ã®ç—›ã¿ãŒ<strong>æ¯æ—¥ã‚ã‚‹</strong>äººã¯ã€7å¹´å¾Œã«<strong>æ°—åˆ†ã®è½ã¡è¾¼ã¿ï¼ˆæŠ‘ã†ã¤ï¼‰</strong>ãŒå‡ºã‚‹å‰²åˆãŒé«˜ã‚ã€‚
    <br>æ¯æ—¥ç—›ã„ç¾¤ï¼š<strong>ç´„28%</strong> ï¼ ç—›ã¿ãªã—ç¾¤ï¼š<strong>ç´„10%</strong>ã€‚ã–ã£ãã‚Š<strong>2ã€œ3å€</strong>ã€‚
    <br><small>é™ç•Œï¼šã€Œç—›ã¿â†’æ°—åˆ†ã€ã ã‘ã§ãªãã€ç”Ÿæ´»è¦å› ã‚‚æ··ã–ã‚‹å¯èƒ½æ€§ã‚ã‚Šã€‚</small>
  </li>

  <li>
    <strong>ã‚³ãƒ›ãƒ¼ãƒˆï¼ˆåŠ´åƒè€… N=3123ãƒ»ç´„4å¹´ï¼‰</strong>ï¼š<strong>ä»•äº‹ã®è² è·</strong>ï¼ˆåå¾©ä½œæ¥­ãªã©ï¼‰ã«åŠ ãˆã¦ã€<strong>å¼·ã„ã‚¹ãƒˆãƒ¬ã‚¹çŠ¶æ…‹</strong>ã‚‚ã€Œæ–°ã—ãé¦–è‚©ã®ç—›ã¿ãŒå‡ºã‚‹ã€ç¢ºç‡ã‚’ä¸Šã’ã‚‹ã€‚
    <br>è¿½è·¡ã§æ–°è¦ã®é¦–è‚©ç—›ï¼š<strong>ç´„14%</strong>ï¼ˆãã®ã†ã¡å¼·ã„åœ§ç—›ã¤ãã¯ <strong>ç´„2%</strong>ï¼‰ã€‚
    <br><small>é™ç•Œï¼šè·ç¨®ã‚„ç’°å¢ƒã§å¼·ã•ã¯å¤‰ã‚ã‚‹ã€‚</small>
  </li>

  <li>
    <strong>ä»‹å…¥ï¼ˆã‚¹ãƒˆãƒ¬ã‚¹å¯¾ç­–ã®RCT N=53ãƒ»8é€±ï¼‰</strong>ï¼šå‘¼å¸ãƒ»ç­‹ã‚†ã‚‹ã‚ç­‰ã®<strong>ã‚¹ãƒˆãƒ¬ã‚¹ç®¡ç†</strong>ã‚’8é€±é–“ã‚„ã‚‹ã¨ã€
    <strong>ã‚¹ãƒˆãƒ¬ã‚¹/ä¸å®‰</strong>ãŒä¸‹ãŒã‚Šã€<strong>ç—›ã¿</strong>ã‚„<strong>ç”Ÿæ´»ã®ã—ã‚“ã©ã•</strong>ã‚‚æ”¹å–„ã—ã‚„ã™ã„ï¼ˆå¯¾ç…§ç¾¤ã‚ˆã‚Šæ”¹å–„ãŒå¤§ãã„ï¼‰ã€‚
    <br><small>é™ç•Œï¼šå°è¦æ¨¡ãªã®ã§ã€ŒåŠ¹ãäººãŒã„ã‚‹ã€ç¨‹åº¦ã®ç¢ºåº¦ã€‚</small>
  </li>

  <li>
    <strong>ä»‹å…¥ï¼ˆç‘æƒ³ vs é‹å‹•ã®RCT N=89ãƒ»8é€±ï¼‰</strong>ï¼šå®‰é™æ™‚ã®é¦–ã®ç—›ã¿ãŒã€
    ç‘æƒ³ã¯ <strong>ç´„46â†’22</strong> ã«ä¸‹ãŒã‚Šã€é‹å‹•ã¯ <strong>ç´„44â†’38</strong> ç¨‹åº¦ã€‚
    <br>å·®ã¯ã ã„ãŸã„ <strong>13/100</strong> ãã‚‰ã„ï¼ˆç—›ã¿ãŒè»½ããªã‚‹æ–¹å‘ï¼‰ã€‚
    <br><small>é™ç•Œï¼šè„±è½ãŒå¤šã‚ã§ã€é•·æœŸåŠ¹æœã¯åˆ¥é€”ã€‚</small>
  </li>
</ul>
</details>

    <p class="meta">â€»æœ¬ãƒšãƒ¼ã‚¸ã¯å¨¯æ¥½ï¼‹è‡ªå·±ç†è§£ã®è£œåŠ©ã‚’ç›®çš„ã¨ã—ãŸç°¡æ˜“ãƒ†ã‚¹ãƒˆã§ã™ã€‚ä½“èª¿ã‚„ä¸èª¿ãŒç¶šãå ´åˆã¯å°‚é–€æ©Ÿé–¢ã¸ã”ç›¸è«‡ãã ã•ã„ã€‚</p>

    <div class="back-row" aria-label="æ“ä½œãƒ¡ãƒ‹ãƒ¥ãƒ¼">
      <button type="button" class="back back-primary" id="restartBtn" aria-label="æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™">
        <span aria-hidden="true">ğŸ”</span><span>æœ€åˆã‹ã‚‰</span>
      </button>

      <a class="back back-ghost" href="/shindan/" aria-label="è¨ºæ–­ä¸€è¦§ã«æˆ»ã‚‹">
        <span aria-hidden="true">ğŸ§ª</span><span>è¨ºæ–­ä¸€è¦§ã¸</span><span class="chev" aria-hidden="true">â€º</span>
      </a>
    </div>
  </section>
</main>

<div class="mini-toast" id="toast" role="status" aria-live="polite">âœ…</div>

<script>
function updateProgress(p){
  var bar = document.querySelector('.progress-bar');
  var wrap = document.querySelector('.progress-fixed');
  var val = Math.max(0,Math.min(100,p));
  if(bar) bar.style.width = val + '%';
  if(wrap) wrap.setAttribute('aria-valuenow', String(val));
}

/* ========= æ¤œç´¢ç½®æ›ï¼šã“ã“ã‚’ slug ã« ========= */
const SLUG = 'shoulder-signal';
const IMG_BASE = `/shindan/assets/results/${SLUG}/`;

const LS_ANS     = `shindan:${SLUG}:answers`;
const LS_IDX     = `shindan:${SLUG}:index`;
const LS_LASTANS = `shindan:${SLUG}:lastAnswers`;

const LABELS = ['ãœã‚“ãœã‚“','ã‚ã¾ã‚Š','ã©ã¡ã‚‰ã¨ã‚‚','ã‚ã‚Šã¨','ã¨ã¦ã‚‚'];
function descFor(i){
  return ['ã»ã¼ãªã„','ã™ã“ã—','åŠã€…','ã‚ˆãã‚ã‚‹','ã‚ã£ã¡ã‚ƒã‚ã‚‹'][i] || '';
}

/* ========= EDIT HERE =========
   è¨­å•ã¯å¾Œã§å·®ã—æ›¿ãˆå‰æï¼ˆã„ã¾ã¯ãƒ€ãƒŸãƒ¼ï¼‰ã€‚
   å› å­ã‚‚å¾Œã§å¢—æ¸›OKã€‚ã¾ãšçµ„ã¿ç«‹ã¤å½¢ã«ã™ã‚‹ã€‚ */

/* å› å­ï¼ˆ5æœ¬ï¼šå¿ƒç†å¯„ã‚Šã«ç½®ã„ã¦ã‚ã‚‹ï¼‰ */
/* å› å­ï¼ˆ5æœ¬ï¼šå¿ƒç†å¯„ã‚Šã«ç½®ã„ã¦ã‚ã‚‹ï¼‰ */
const FACTS = ['STRESS','ANX','LOWMOOD','CATA','SEFF'];
const FACT_LABEL = {
  STRESS:'ã‚¹ãƒˆãƒ¬ã‚¹/ç·Šå¼µ',
  ANX:'ä¸å®‰/è­¦æˆ’',
  LOWMOOD:'æ°—åˆ†ã®è½ã¡',
  CATA:'ç ´å±€åŒ–ï¼ˆç—›ã¿æ€è€ƒï¼‰',
  SEFF:'è‡ªå·±åŠ¹åŠ›æ„Ÿ'
};
const FACT_DESC = {
  STRESS:'è‡ªè¦šã‚¹ãƒˆãƒ¬ã‚¹ã‚„â€œå¼µã‚Šè©°ã‚â€ã®å¼·ã•ã€‚',
  ANX:'ä¸å®‰ãƒ»è­¦æˆ’ã§ä½“ãŒå›ºã¾ã‚Šã‚„ã™ã„åº¦åˆã„ã€‚',
  LOWMOOD:'æ°—åˆ†ãŒè½ã¡ã¦å›å¾©åŠ›ãŒä¸‹ãŒã£ã¦ã„ã‚‹ã‚µã‚¤ãƒ³ã€‚',
  CATA:'ã€Œæ‚ªåŒ–ã™ã‚‹/çµ‚ã‚ã£ãŸã€æ€è€ƒã«å¸ã‚ã‚Œã‚‹å‚¾å‘ã€‚',
  SEFF:'ç—›ã¿ãŒã‚ã£ã¦ã‚‚å¯¾å‡¦ã§ãã‚‹è‡ªä¿¡ï¼ˆé«˜ã„ã»ã©è‰¯ã„ï¼‰ã€‚'
};

/* è¨­å•ï¼ˆãƒ€ãƒŸãƒ¼ï¼šã‚ã¨ã§å…¨éƒ¨å…¥ã‚Œæ›¿ãˆOKï¼‰
   reverse:true ã¯é€†è»¢ï¼ˆä¾‹ï¼šè‡ªå·±åŠ¹åŠ›æ„Ÿã¯é«˜ã„ã»ã©è‰¯ã„ã®ã§ reverse ã‚’ä½¿ã†ï¼‰ */
const QUESTIONS = [
  // STRESSï¼ˆã‚¹ãƒˆãƒ¬ã‚¹/ç·Šå¼µï¼‰Ã—4
  {t:'å¿™ã—ã„æ™‚æœŸã¯ã€è‚©ã«åŠ›ãŒå…¥ã£ãŸã¾ã¾æŠœã‘ã«ãã„ã€‚', key:'STRESS'},
  {t:'ã‚¤ãƒ©ã‚¤ãƒ©ã‚„ç„¦ã‚ŠãŒç¶šãã¨ã€è‚©ã“ã‚ŠãŒå¼·ããªã‚‹ã€‚', key:'STRESS'},
  {t:'ä»•äº‹ã‚„äºˆå®šã®ã“ã¨ã‚’è€ƒãˆã‚‹ã¨ã€é¦–ã‚„è‚©ãŒã“ã‚ã°ã‚‹ã€‚', key:'STRESS'},
  {t:'ä¼‘æ†©ã—ã¦ã‚‚ã€è‚©ã®ç·Šå¼µãŒæ®‹ã‚Šã‚„ã™ã„ã€‚', key:'STRESS'},

  // ANXï¼ˆä¸å®‰/è­¦æˆ’ï¼‰Ã—4
  {t:'ç—›ã¿ã‚„ã“ã‚ŠãŒã‚ã‚‹ã¨ã€Œä½•ã‹é‡å¤§ãªå•é¡Œã‹ã‚‚ã€ã¨ä¸å®‰ã«ãªã‚‹ã€‚', key:'ANX'},
  {t:'é¦–ã‚„è‚©ã®é•å’Œæ„ŸãŒã‚ã‚‹ã¨ã€ä½“ã‚’å‹•ã‹ã™ã®ãŒæ€–ããªã‚‹ã€‚', key:'ANX'},
  {t:'ä½“èª¿ã®å¤‰åŒ–ã«æ•æ„Ÿã§ã€æ‚ªåŒ–ã‚’å…ˆã«æƒ³åƒã—ã‚„ã™ã„ã€‚', key:'ANX'},
  {t:'è‚©ã“ã‚ŠãŒã‚ã‚‹æ—¥ã¯ã€å‘¨å›²ã«æ°—ã‚’å¼µã‚Šã‚„ã™ã„ã€‚', key:'ANX'},

  // LOWMOODï¼ˆæ°—åˆ†ã®è½ã¡ï¼‰Ã—4
  {t:'è‚©ãŒé‡ã„æ—¥ã¯ã€æ°—åˆ†ã‚‚æ²ˆã¿ã‚„ã™ã„ã€‚', key:'LOWMOOD'},
  {t:'è‚©ã“ã‚ŠãŒç¶šãã¨ã€ä½•ã‚’ã™ã‚‹ã«ã‚‚å„„åŠ«ã«ãªã‚‹ã€‚', key:'LOWMOOD'},
  {t:'æœ€è¿‘ã€ç–²ã‚ŒãŒæŠœã‘ã«ããæ„æ¬²ãŒè½ã¡ã¦ã„ã‚‹ã€‚', key:'LOWMOOD'},
  {t:'ä¸èª¿ãŒã‚ã‚‹ã¨ã€æ¥½ã—ã•ã‚’æ„Ÿã˜ã«ãã„ã€‚', key:'LOWMOOD'},

  // CATAï¼ˆç ´å±€åŒ–ï¼‰Ã—4
  {t:'è‚©ãŒã“ã‚‹ã¨ã€Œã“ã®å…ˆãšã£ã¨è‰¯ããªã‚‰ãªã„ã‹ã‚‚ã€ã¨è€ƒãˆãŒã¡ã€‚', key:'CATA'},
  {t:'ç—›ã¿ãŒå‡ºã‚‹ã¨ã€æœ€æ‚ªã®ã‚·ãƒŠãƒªã‚ªã‚’æƒ³åƒã—ã¦ã—ã¾ã†ã€‚', key:'CATA'},
  {t:'è‚©ã“ã‚ŠãŒã‚ã‚‹ã¨ã€Œè‡ªåˆ†ã¯ã‚‚ã†ãƒ€ãƒ¡ã ã€ã¨æ¥µç«¯ã«æ„Ÿã˜ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚', key:'CATA'},
  {t:'ç—›ã¿ã‚„ã“ã‚ŠãŒã‚ã‚‹ã¨ã€é ­ã®ä¸­ãŒãã®ã“ã¨ã§åŸ‹ã¾ã‚Šã‚„ã™ã„ã€‚', key:'CATA'},

  // SEFFï¼ˆè‡ªå·±åŠ¹åŠ›æ„Ÿï¼‰Ã—4ï¼ˆé«˜ã„ã»ã©è‰¯ã„ â†’ reverse:trueï¼‰
  {t:'è‚©ãŒã“ã£ã¦ã„ã¦ã‚‚ã€å¿…è¦ãªç”¨äº‹ã¯ã“ãªã›ã‚‹è‡ªä¿¡ãŒã‚ã‚‹ã€‚', key:'SEFF', reverse:true},
  {t:'ä¸èª¿ãŒã‚ã£ã¦ã‚‚ã€å¯¾å‡¦æ³•ã‚’è©¦ã—ã¦ç«‹ã¦ç›´ã›ã‚‹ã¨æ€ã†ã€‚', key:'SEFF', reverse:true},
  {t:'ç—›ã¿ã‚„ã“ã‚ŠãŒã‚ã£ã¦ã‚‚ã€è½ã¡ç€ã„ã¦å¯¾å¿œã§ãã‚‹ã€‚', key:'SEFF', reverse:true},
  {t:'ä½“ã®é•å’Œæ„ŸãŒã‚ã£ã¦ã‚‚ã€æ—¥å¸¸ã¯å›ã›ã‚‹ã¨æ€ãˆã‚‹ã€‚', key:'SEFF', reverse:true}
];


/* ãƒ©ãƒ³ã‚¯ï¼ˆä¿¡å·ï¼‰ */
const GRADE_DEF = [
  {
    min:0, max:39,  state:'blue',  sig:'é’ï¼ˆå¿«èª¿ï¼‰',  emo:'ğŸ”µ', label:'å¿«èª¿',
    img:'t01.webp', alt:'é’ã®å¿«èª¿',
    headline:'é’ä¿¡å·ã€‚é‡‘æ›œ18æ™‚ã®è‚©ã€‚ã¾ã äººé–“ã€‚',
    story:'ã€Œã¡ã‚‡ã£ã¨å‡ã£ã¦ã‚‹ã‹ã‚‚ã€ã§æ¸ˆã‚€ã€æœ‰çµ¦ãŒæ®‹ã£ã¦ã‚‹äººç”Ÿã€‚ã§ã‚‚ã“ã“ã§æ”¾ç½®ã—ã¦æœˆæ›œã‚’3å›è¿ãˆã‚‹ã¨ã€ã€Œè‚©ã“ã‚Š å³åŠ¹ã€ã§Googleæ¤œç´¢ã—ãªãŒã‚‰ã‚¨ãƒŠã‚¸ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯é£²ã‚€äººé–“ã«ãªã‚‹ã€‚ãƒ‡ã‚¹ã‚¯ã§ã‚³ã‚½ã‚³ã‚½è‚©å›ã—ã¦ã‚‹æ™‚ç‚¹ã§é»„è‰²ä¿¡å·ã®å…¥ã‚Šå£ã€‚ä»Šãªã‚‰ã‚¹ãƒˆãƒ¬ãƒƒãƒ1å›ã§æˆ»ã‚‹ã€‚æˆ»ã‚‰ãªããªã‚‹å‰ã«æˆ»ã›ã€‚',
    action:'è‚©ç”²éª¨ã‚’å¾Œã‚ã«10å›å¼•ãã€‚ä¼šè­°ä¸­ã®ã‚«ãƒ¡ãƒ©ã‚ªãƒ•ã§ã‚„ã‚Œã€‚ãƒãƒ¬ã¦ã‚‚ã€Œä¼¸ã³ã—ã¦ã¾ã—ãŸã€ã§é€šã‚‹ã€‚'
  },
  {
    min:40, max:59, state:'yellow', sig:'é»„ï¼ˆæ³¨æ„ï¼‰', emo:'ğŸŸ¡', label:'æ³¨æ„',
    img:'t02.webp', alt:'é»„ã®æ³¨æ„',
    headline:'é»„è‰²ã€‚Teamsé€šçŸ¥ã§è‚©ãŒä¸ŠãŒã‚‹é ˜åŸŸã€‚',
    story:'æ¤…å­ã‚’3ä¸‡å††ã®ã«å¤‰ãˆãŸã®ã«æ²»ã‚‰ãªã„è¬ã€‚ç­”ãˆï¼šè„³ãŒã€Œæœˆæ›œã€œé‡‘æ›œã¯è‡¨æˆ¦ãƒ¢ãƒ¼ãƒ‰ã€ã§å›ºå®šã•ã‚Œã¦ã‚‹ã€‚ä¸Šå¸ã®ã€Œã¡ã‚‡ã£ã¨ã„ã„ï¼Ÿã€ã§åå°„çš„ã«è‚©ãŒã‚®ãƒ¥ãƒƒã¦ãªã‚‹äººã€å®Œå…¨ã«ã“ã‚Œã€‚ãƒãƒƒã‚µãƒ¼ã‚¸ã‚¬ãƒ³è²·ã£ãŸã‘ã©ä½¿ã†ã®ã‚ã‚“ã©ãã•ããªã£ã¦å……é›»åˆ‡ã‚Œã¦ã‚‹ã‚„ã¤ã€æœ¬æ£šã®è‚¥ã‚„ã—ã«ãªã£ã¦ãªã„ï¼Ÿ ç­‹è‚‰ã‚ˆã‚Šå…ˆã«ã€ã€Œå¸¸æ™‚ã‚¹ã‚¿ãƒ³ãƒã‚¤ãƒ¢ãƒ¼ãƒ‰ã€ã‚’è§£é™¤ã—ã‚ã€‚',
    action:'ã‚¿ã‚¤ãƒãƒ¼2åˆ†ã€ãƒˆã‚¤ãƒ¬å€‹å®¤ã§é¦–ã‚’é•·ãã™ã‚‹ã€‚ã€Œæ—©ãæˆ»ã‚‰ãªãã‚ƒã€ã£ã¦ç„¦ã‚‹ãªã€‚ãã®2åˆ†ã™ã‚‰è¨±ã•ãªã„ä¼šç¤¾ãªã‚‰ãã‚Œåˆ¥ã®å•é¡Œã€‚'
  },
  {
    min:60, max:74, state:'red',   sig:'èµ¤ï¼ˆåœæ­¢ï¼‰', emo:'ğŸ”´', label:'åœæ­¢',
    img:'t03.webp', alt:'èµ¤ã®åœæ­¢',
    headline:'èµ¤ã€‚ã€Œé€±æ˜ã‘ãŒæ€–ã„ã€ãŒè‚©ã«ä½ã¿ç€ã„ã¦ã‚‹ã€‚',
    story:'æ—¥æ›œ20æ™‚ã‹ã‚‰è‚©ãŒãƒã‚­ãƒã‚­ã«ãªã‚‹ã‚„ã¤ã€‚ä¸å®‰ãŒç—›ã¿ã‚’5å€å¢—ã—ã§æ„Ÿã˜ã•ã›ã¦ã‚‹ã‚¬ãƒæ¡ˆä»¶ã€‚ã€Œã¾ã ã‚„ã‚Œã‚‹ã€ã£ã¦æ€ã„ãªãŒã‚‰ãƒ¢ãƒ‹ã‚¿ãƒ¼3æšè¦‹ã¦ã‚‹äººã€ãã‚Œè‡ªå‚·è¡Œç‚ºãªã€‚ã‚ã¨å¯ã‚‹å‰ã«ã€Œæ˜æ—¥ã®ä¼šè­°è³‡æ–™â€¦ã€ã£ã¦è€ƒãˆãªãŒã‚‰ã‚¹ãƒˆãƒ¬ãƒƒãƒã—ã¦ã‚‚æ„å‘³ãªã„ã€‚è„³ãŒã€Œç·Šæ€¥äº‹æ…‹ã§ã™ï¼ã€ã£ã¦å«ã‚“ã§ã‚‹çŠ¶æ…‹ã§ç­‹è‚‰ã ã‘ã»ãã—ã¦ã‚‚ã€ç§’ã§æˆ»ã‚‹ã€‚ãƒãƒƒã‚µãƒ¼ã‚¸å±‹ã§ã€ŒãŠå®¢ã•ã‚“ã‚ã¡ã‚ƒãã¡ã‚ƒå›ºã„ã§ã™ã­ã€â†’ã€Œä»•äº‹å¿™ã—ãã¦â€¦ã€â†’ã€Œç„¡ç†ã—ãªã„ã§ãã ã•ã„ã­ã€ã®ãƒ†ãƒ³ãƒ—ãƒ¬ä¼šè©±ã€ã‚‚ã†é£½ããŸã‚ï¼Ÿ',
    action:'ã€Œæœ€æ‚ªã®ã‚±ãƒ¼ã‚¹æƒ³å®šã—ã¦ãªã„ï¼Ÿã€ã‚’è‡ªå•ã€‚å¤§ä½“ã€èµ·ããªã„ã€‚èµ·ãã¦ã‚‚æ­»ãªãªã„ã€‚ä¸Šå¸ã‚‚äººé–“ã€‚ãŸã¶ã‚“ã€‚'
  },
  {
    min:75, max:89, state:'blink', sig:'èµ¤ç‚¹æ»…ï¼ˆå±é™ºï¼‰', emo:'ğŸš¨', label:'å±é™º',
    img:'t04.webp', alt:'èµ¤ç‚¹æ»…ã®å±é™º',
    headline:'èµ¤ç‚¹æ»…ã€‚PCé–‹ã„ãŸç¬é–“ã€è‚©ãŒãƒã‚°ã‚‹ã€‚',
    story:'æœˆæ›œæœã€Teamsé–‹ã„ãŸã ã‘ã§è‚©ãŒã€Œã†ã£ã€ã£ã¦ãªã‚‹æ®µéšã€‚å®Œå…¨ã«æ¡ä»¶åå°„ã€‚ãƒ‘ãƒ–ãƒ­ãƒ•ã®çŠ¬ãŒç¤¾ç•œã«ãªã£ãŸã‚„ã¤ã€‚ã€Œæ°—åˆã§ä¹—ã‚Šåˆ‡ã‚‹ã€ã‚’é¸ã¶ã¨ã€ä½“ãŒã€Œã‚ã€æœ¬æ°—ã§ãƒ¤ãƒã„ä¼šç¤¾ãªã‚“ã ã€ã£ã¦å­¦ç¿’ã—ã¦ã€ã‚‚ã£ã¨å›ºããªã‚‹ç„¡é™ãƒ«ãƒ¼ãƒ—ã€‚æ•´ä½“ã§ã€Œã“ã“ã¾ã§å›ºã„ã®çã—ã„ã€ã£ã¦è¨€ã‚ã‚Œã¦ã€Œå¿™ã—ã„ã‚“ã§ã€ã£ã¦ãƒ‰ãƒ¤é¡”ã—ã¦ã‚‹ãªã‚‰ã€ãã‚Œã‚‚ã†ç—…æ°—ã®ä¸€ç¨®ã€‚æ¹¿å¸ƒãŒå¸¸å‚™è–¬ã«ãªã£ã¦ã‚‹æ™‚ç‚¹ã§ãƒ¬ãƒƒãƒ‰ã‚«ãƒ¼ãƒ‰ã€‚æ ¹æ€§è«–ãŒå”¯ä¸€åŠ¹ã‹ãªã„ãƒ©ã‚¹ãƒœã‚¹æˆ¦ã€‚',
    action:'ã€Œä»Šæ—¥ä¸­ã«å…¨éƒ¨çµ‚ã‚ã‚‰ã›ã‚‹ã€ã‚’ä»Šã™ãã‚´ãƒŸç®±ã¸ã€‚æ¬¡ã®1æ™‚é–“ã ã‘è»½ãã™ã‚‹ã€‚å®Œç’§ä¸»ç¾©ã¨ç¤¾ç•œã¯åŒå­ã€‚'
  },
  {
    min:90, max:100, state:'dead', sig:'ä¿¡å·æ•…éšœï¼ˆé™ç•Œï¼‰', emo:'ğŸ›‘', label:'é™ç•Œ',
    img:'t05.webp', alt:'ä¿¡å·æ•…éšœ',
    headline:'ä¿¡å·æ•…éšœã€‚ã€Œè»¢è·ã‚µã‚¤ãƒˆ è‚©ã“ã‚Š æ”¹å–„ã€ã§æ¤œç´¢ã—ã¦ã‚‹ã€‚',
    story:'ã€Œã‚‚ã†ä½•ã‚„ã£ã¦ã‚‚æ²»ã‚‰ãªã„ã€ã€Œä¼‘æ—¥ã‚‚ç—›ã„ã€ã€Œå¯ã¦ã‚‚ç—›ã„ã€ã®åœ°ç„ãƒˆãƒªã‚ªã€‚ã—ã³ã‚Œå‡ºã¦ã‚‹ã®ã«ã€Œæ¥é€±ã®ç´æœŸçµ‚ã‚ã£ãŸã‚‰ç—…é™¢â€¦ã€ã¨ã‹è¨€ã£ã¦ã‚‹ãªã‚‰ã€ãã‚Œæ¥é€±ã‚‚è¨€ã£ã¦ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚æœèµ·ãã¦ã€Œã‚ã€ä»Šæ—¥ã‚‚ä¼šç¤¾ã‹ã€ã¨ã€Œã‚ã€è‚©ç—›ã„ã€ãŒåŒæ™‚ã«æ¥ã‚‹ãƒ¬ãƒ™ãƒ«ã€‚YouTubeã®è‚©ã“ã‚Šå‹•ç”»å…¨åˆ¶è¦‡ã—ãŸã‘ã©æ²»ã‚‰ãªã„äººã€ãã‚Œã‚‚ã†å‹•ç”»ã®å•é¡Œã˜ã‚ƒãªã„ã€‚ãƒãƒƒãƒˆã§ã€Œè‚©ã“ã‚Š é‡ç—‡ æœ«æœŸã€ã£ã¦æ¤œç´¢ã—ã¦ã‚‹æ™‚é–“ã‚’ã€äºˆç´„ãƒœã‚¿ãƒ³æŠ¼ã™æ™‚é–“ã«å¤‰ãˆã‚ã€‚ã“ã“ã¯æ ¹æ€§ã˜ã‚ƒãªãã¦ã€è¨ºæ–­æ›¸ã‚‚ã‚‰ã£ã¦ä¼‘ã‚€ã‹ã€è»¢è·ã™ã‚‹ã‹ã€ã‚¬ãƒã§ç—…é™¢è¡Œããƒ•ã‚§ãƒ¼ã‚ºã€‚èª²é‡‘ã—ã¦å°‚é–€å®¶å¬å–šã—ã‚ã€‚',
    action:'æ•´å½¢å¤–ç§‘ãƒ»å¿ƒç™‚å†…ç§‘ãƒ»è»¢è·ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€ã©ã‚Œã§ã‚‚ã„ã„ã‹ã‚‰3ã¤å€™è£œå‡ºã—ã¦1å€‹äºˆç´„ã€‚æ˜æ—¥ã€‚ä»Šæ—¥ã¯ç„¡ç†ã§ã‚‚æ˜æ—¥ã¯ã‚„ã‚Œã€‚æœ‰çµ¦ä½¿ãˆã€‚'
  }
];

function gradeFromScore(pct){
  for(const g of GRADE_DEF){
    if(pct >= g.min && pct <= g.max) return g;
  }
  return GRADE_DEF[1];
}

/* é›†è¨ˆï¼š0-4å¹³å‡â†’1-5å¹³å‡â†’% */
function computeScores(answers){
  const sums = {}, counts = {};
  FACTS.forEach(k=>{ sums[k]=0; counts[k]=0; });

  QUESTIONS.forEach((q,i)=>{
    let v = answers[i];
    if(v==null) return;
    if(q.reverse) v = 4 - v;
    sums[q.key] += v;
    counts[q.key] += 1;
  });

  const pct = {};
  FACTS.forEach(k=>{
    const avg04 = counts[k] ? (sums[k]/counts[k]) : 0;
    const a15 = avg04 + 1;
    pct[k] = Math.round((a15-1)/4*100);
  });

  const totalScore = Math.round(FACTS.reduce((a,k)=>a+pct[k],0)/FACTS.length);
  return { pct, totalScore };
}

/* ã‚®ãƒ£ãƒ©ãƒªãƒ¼ï¼ˆæ­£æ–¹å½¢å›ºå®šæƒ³å®šï¼‰ */
function buildGallery(){
  return [
    {img:'t01.webp', cap:'é’ï¼ˆå¿«èª¿ï¼‰', alt:'é’ã®å¿«èª¿'},
    {img:'t02.webp', cap:'é»„ï¼ˆæ³¨æ„ï¼‰', alt:'é»„ã®æ³¨æ„'},
    {img:'t03.webp', cap:'èµ¤ï¼ˆåœæ­¢ï¼‰', alt:'èµ¤ã®åœæ­¢'},
    {img:'t04.webp', cap:'èµ¤ç‚¹æ»…ï¼ˆå±é™ºï¼‰', alt:'èµ¤ç‚¹æ»…ã®å±é™º'},
    {img:'t05.webp', cap:'ä¿¡å·æ•…éšœï¼ˆé™ç•Œï¼‰', alt:'ä¿¡å·æ•…éšœ'}
  ];
}

/* å› å­ãƒãƒ¼è‰²ï¼šä½(é’)â†’é«˜(èµ¤) ã‚’é€£ç¶šçš„ã« */
function barGradientForPct(p){
  var t = Math.max(0, Math.min(1, (p||0)/100));
  var h = Math.round(210 * (1 - t)); // 210(é’)â†’0(èµ¤)
  var c1 = `hsl(${h} 88% 48%)`;
  var c2 = `hsl(${h} 92% 62%)`;
  return `linear-gradient(90deg, ${c1}, ${c2})`;
}

/* ========= EDIT HERE END ========= */

/* çŠ¶æ…‹ */
let idx = 0;
let answers = new Array(QUESTIONS.length).fill(null);

/* è¦ç´  */
const $qnum = document.getElementById('qnum');
const $qtag = document.getElementById('qtag');
const $qtext = document.getElementById('qtext');
const $opts = document.getElementById('opts');
const $prev = document.getElementById('prevBtn');

const $quiz = document.getElementById('quiz');
const $result = document.getElementById('result');
const $prologue = document.getElementById('prologue');
const $startBtn = document.getElementById('startBtn');

const $gradeBadge = document.getElementById('gradeBadge');
const $scoreBadge = document.getElementById('scoreBadge');

const $resultImg = document.getElementById('resultImg');
const $resultTitle = document.getElementById('resultTitle');
const $resultSubtitle = document.getElementById('resultSubtitle');

const $resultComment = document.getElementById('resultComment');
const $todayText = document.getElementById('todayText');

const $bars = document.getElementById('bars');
const $prevList = document.getElementById('prevList');
const $gallery = document.getElementById('gallery');

const $restart = document.getElementById('restartBtn');
const $toast = document.getElementById('toast');

/* ä¿¡å·UI */
const $rankSignal = null;
const $rankText = null;
const $legendGrid = document.getElementById('legendGrid');

/* ãƒˆãƒ¼ã‚¹ãƒˆ */
let toastTimer = null;
function showToast(){
  if(!$toast) return;
  $toast.textContent = 'âœ…';
  $toast.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(()=> $toast.classList.remove('show'), 750);
}

/* è¡¨ç¤ºåˆ‡æ›¿ */
function enterPrologueMode(){
  $prologue.style.display = 'block';
  $quiz.style.display = 'none';
  $result.style.display = 'none';
  setSignalState(null);
  updateProgress(0);
}
function enterQuizMode(){
  $prologue.style.display = 'none';
  $quiz.style.display = 'block';
  $result.style.display = 'none';
}
function enterResultMode(){
  $prologue.style.display = 'none';
  $quiz.style.display = 'none';
  $result.style.display = 'block';
}

/* ä¿å­˜/å¾©å…ƒ */
function persist(){
  try{
    localStorage.setItem(LS_ANS, JSON.stringify(answers));
    localStorage.setItem(LS_IDX, JSON.stringify(idx));
  }catch(_){}
}

/* è³ªå•æç”» */
function renderQuestion(){
  const q = QUESTIONS[idx];
  $qnum.textContent = `Q${idx+1}/${QUESTIONS.length}`;
  $qtext.textContent = q.t;

  if($qtag) $qtag.innerHTML = `<span aria-hidden="true">ğŸ§·</span><span>è‚©ãƒ­ã‚°</span>`;

  $opts.innerHTML = '';
  LABELS.forEach((lab,i)=>{
    const btn = document.createElement('button');
    btn.type = 'button';
    btn.className = 'btn';
    btn.setAttribute('aria-pressed', answers[idx]===i ? 'true':'false');

    // 0-4 ã‚’ä¿¡å·ã£ã½ãå¯è¦–åŒ–ï¼ˆ0=é’ / 2=é»„ / 3=èµ¤ / 4=èµ¤ç‚¹æ»…ï¼‰
    btn.innerHTML = `
      <span class="btn-left">
        <span class="opt-signal" data-level="${i}" aria-hidden="true">
          <span class="dot d1"></span>
          <span class="dot d2"></span>
          <span class="dot d3"></span>
        </span>
        <span class="btn-label">${lab}</span>
      </span>
      <span class="opt-note">${descFor(i)}</span>
    `;

    btn.addEventListener('click', ()=> selectAnswer(i));
    $opts.appendChild(btn);
  });

  $prev.disabled = (idx===0);

  const done = answers.filter(v=>v!==null).length;
  updateProgress(Math.round(done/QUESTIONS.length*100));

  setSignalState(null);
}

function markPressed(v){
  [...$opts.children].forEach((el,i)=> el.setAttribute('aria-pressed', i===v ? 'true' : 'false'));
}

function selectAnswer(v){
  answers[idx] = v;
  persist();
  markPressed(v);
  showToast();

  setTimeout(()=>{
    if(idx < QUESTIONS.length-1){
      idx++;
      renderQuestion();
    }else{
      enterResultMode();
      showResult();
    }
  },140);
}

/* ä¿¡å·çŠ¶æ…‹è¨­å®š */
function setSignalState(state, text){
  if($rankSignal){
    if(!state){
      $rankSignal.setAttribute('data-state','blue');
    }else{
      $rankSignal.setAttribute('data-state', state);
    }
  }
  if($rankText){
    $rankText.textContent = text || 'æœªåˆ¤å®š';
  }
}

/* ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰ */
function renderLegend(activeState){
  if(!$legendGrid) return;

  const items = [
    {state:'blue',  dot:'blue',  cap:'é’',   sub:'å¿«èª¿'},
    {state:'yellow',dot:'yellow',cap:'é»„',   sub:'æ³¨æ„'},
    {state:'red',   dot:'red',   cap:'èµ¤',   sub:'åœæ­¢'},
    {state:'blink', dot:'blink', cap:'èµ¤ç‚¹æ»…',sub:'å±é™º'},
    {state:'dead',  dot:'dead',  cap:'æ•…éšœ', sub:'é™ç•Œ'}
  ];

  $legendGrid.innerHTML = '';
  items.forEach(it=>{
    const d = document.createElement('div');
    d.className = 'legend-item' + (it.state===activeState ? ' active' : '');
    d.innerHTML = `
      <span class="legend-dot ${it.dot}" aria-hidden="true"></span>
      <span class="legend-cap">${it.cap}</span>
      <span class="legend-sub">${it.sub}</span>
    `;
    $legendGrid.appendChild(d);
  });
}

/* çµæœè¡¨ç¤º */
function showResult(){
  const firstNull = answers.findIndex(x=>x==null);
  if(firstNull !== -1){
    idx = firstNull;
    enterQuizMode();
    renderQuestion();
    return;
  }

  const {pct,totalScore} = computeScores(answers);
  const grade = gradeFromScore(totalScore);

  setSignalState(grade.state, grade.sig);
  renderLegend(grade.state);

  $resultImg.src = IMG_BASE + grade.img;
  $resultImg.alt = grade.alt || 'çµæœç”»åƒ';

  $resultTitle.textContent = `ã‚ãªãŸã®ä¿¡å·ï¼š${grade.sig}`;
  $resultSubtitle.textContent = `ç·åˆï¼š${totalScore}ç‚¹`;
  if($scoreBadge) $scoreBadge.textContent = `ã‚¹ã‚³ã‚¢ ${totalScore}ç‚¹`;
  if($gradeBadge) $gradeBadge.innerHTML = `<span aria-hidden="true">${grade.emo}</span><span>${grade.sig}</span>`;

  if($resultComment){
    $resultComment.innerHTML = `
      <p class="rc-ttl">${grade.headline}</p>
      <p>${grade.story}</p>
    `;
  }
  if($todayText) $todayText.textContent = grade.action;

  /* å› å­ãƒãƒ¼ */
  $bars.innerHTML = '';
  FACTS.forEach(k=>{
    const v = Math.max(0, Math.min(100, +pct[k]||0));
    const wrap = document.createElement('div');
    wrap.className = 'bar';
    wrap.innerHTML = `
      <div class="h">
        <span>${FACT_LABEL[k] || k}</span>
        <span class="pct">${v}%</span>
      </div>

      <div class="track" aria-label="${FACT_LABEL[k]||k} ã®ã‚¹ã‚³ã‚¢ ${v}%">
        <div class="fill" style="width:${v}%;background:${barGradientForPct(v)}"></div>
      </div>

      <div class="bar-desc">${FACT_DESC[k] || ''}</div>
    `;
    $bars.appendChild(wrap);
  });

  try{
    localStorage.setItem(LS_LASTANS, JSON.stringify({answers: answers.slice(), ts: Date.now()}));
  }catch(_){}
  buildPrevAnswers();
  buildGalleryUI();

  document.dispatchEvent(new Event('result:ready'));
}

function buildPrevAnswers(){
  let prev = null;
  try{ prev = JSON.parse(localStorage.getItem(LS_LASTANS) || 'null'); }catch(_){}
  if(!prev || !Array.isArray(prev.answers)) return;

  $prevList.innerHTML = '';
  prev.answers.forEach((v,i)=>{
    const li = document.createElement('li');
    li.className = 'prev-item';
    const lab = (typeof v === 'number' && v>=0 && v<LABELS.length) ? LABELS[v] : 'â€”';
    li.innerHTML = `<span class="prev-q">Q${i+1}ï¼š${QUESTIONS[i].t}</span><span class="prev-a">ã€Œ${lab}ã€</span>`;
    $prevList.appendChild(li);
  });
}

function buildGalleryUI(){
  const g = buildGallery();
  $gallery.innerHTML = '';
  g.forEach(x=>{
    const fig = document.createElement('figure');
    fig.innerHTML = `
      <img src="${IMG_BASE + x.img}" alt="${x.alt||''}" loading="lazy">
      <figcaption>${x.cap||x.img}</figcaption>
    `;
    $gallery.appendChild(fig);
  });
}

/* æ“ä½œ */
$prev.addEventListener('click', ()=>{
  if(idx>0){ idx--; persist(); renderQuestion(); }
});

/* è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã¯ã—ãªã„ï¼ˆè¦æœ›å¯¾å¿œï¼‰ */
$startBtn.addEventListener('click', ()=>{
  enterQuizMode();
  renderQuestion();
});

$restart.addEventListener('click', ()=>{
  answers = new Array(QUESTIONS.length).fill(null);
  idx = 0;
  try{ localStorage.removeItem(LS_ANS); localStorage.removeItem(LS_IDX); }catch(_){}
  enterPrologueMode();
  showToast();
});

/* èµ·å‹• */
(function init(){
  const hero = document.getElementById('heroImg');
  if(hero) hero.src = IMG_BASE + 't00.webp';

  updateProgress(0);

  let savedAns=null, savedIdx=0;
  try{
    savedAns = JSON.parse(localStorage.getItem(LS_ANS) || 'null');
    savedIdx = JSON.parse(localStorage.getItem(LS_IDX) || '0');
  }catch(_){}
  let valid = Array.isArray(savedAns) && savedAns.length === QUESTIONS.length;
if(Array.isArray(savedAns) && savedAns.length !== QUESTIONS.length){
  try{ localStorage.removeItem(LS_ANS); localStorage.removeItem(LS_IDX); }catch(_){}
  savedAns = null; savedIdx = 0; valid = false;
}
  const hasAny = valid && savedAns.some(v=>v!==null);
  const allDone = valid && savedAns.every(v=>v!==null);

  if(allDone){
    answers = savedAns;
    idx = QUESTIONS.length - 1;
    renderQuestion();
    enterResultMode();
    showResult();
    return;
  }
  if(hasAny){
    answers = savedAns;
    idx = Math.min(Math.max(0, +savedIdx || 0), QUESTIONS.length-1);
    enterQuizMode();
    renderQuestion();
    return;
  }
  enterPrologueMode();
}());
</script>

<!-- è¨ªå•ã‚«ã‚¦ãƒ³ã‚¿ï¼ˆå…ƒã®ã¾ã¾ï¼‰ -->
<script>(function(){
  var DONE_KEY='specimens:open:byid', TOTAL_KEY='specimens:open:total';
  var MY_ID=document.body.getAttribute('data-id')||SLUG;
  var marked=false;
  function mark(){ if(marked) return; marked=true;
    try{
      var t=(+localStorage.getItem(TOTAL_KEY)||0)+1;
      localStorage.setItem(TOTAL_KEY,String(t));
      var map={}; try{ map=JSON.parse(localStorage.getItem(DONE_KEY)||'{}'); }catch(_){}
      map[MY_ID]=(map[MY_ID]||0)+1;
      localStorage.setItem(DONE_KEY, JSON.stringify(Object.assign({},map,{_ts:Date.now()})));
    }catch(_){}
  }
  document.addEventListener('result:ready', mark);
  setTimeout(mark, 2000);
}());</script>

</body>
</html>