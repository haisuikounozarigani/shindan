<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>å¿ƒã®ä¸­ã®æ€§æ ¼å‹•ç‰©è¨ºæ–­</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    :root{
      --brand:#b86b77; --bg:#fffdf8; --card:#ffffff; --muted:#666; --chip:#fde9ee;
      --bar:#fdf1f3; --barfill:#b86b77;
    }
    body{
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
      background: var(--bg); color:#333; margin:0; padding:22px;
    }
    .wrap{max-width:900px;margin:0 auto}
    h1{color:var(--brand); text-align:center; margin:6px 0 8px; font-size:clamp(20px,3.8vw,28px)}
    .lead{text-align:center; color:var(--muted); margin:0 0 16px; font-size:14px}
    .legend{display:inline-block;background:var(--chip); color:var(--brand); padding:6px 10px; border-radius:999px; font-size:12px; margin:0 auto 12px; text-align:center}
    .card{background:var(--card); border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,.06); padding:18px}
    .question{margin:18px 0 20px}
    .question p{margin:0 0 10px}
    .scale{display:grid; gap:8px}
    .scale label{display:flex; align-items:center; gap:10px; background:#f6f3f1; border-radius:10px; padding:10px; cursor:pointer}
    .scale input{accent-color:var(--brand)}
    .actions{display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:10px}
    .btn{background:var(--brand); color:#fff; border:none; border-radius:10px; padding:12px 18px; font-size:16px; cursor:pointer}
    .btn.secondary{background:#858585}
    .meta{display:flex; justify-content:space-between; align-items:center; margin:6px 2px 0; color:var(--muted); font-size:12px}
    #result{display:none; margin-top:18px}
    .type{background:#fdf1f3; border-left:6px solid var(--brand); border-radius:10px; padding:12px 14px; margin:10px 0}
    .type h3{margin:0 0 6px; color:var(--brand); font-size:18px}
    .type small{color:var(--muted)}
    .bar{background:var(--bar); border-radius:999px; height:10px; overflow:hidden; margin-top:8px}
    .bar > span{display:block; height:100%; width:0%; background:var(--barfill); transition:width .5s ease}
    .note{font-size:14px; color:#444; background:#fff7e6; border-left:6px solid #ffbf66; border-radius:8px; padding:10px 12px; margin:14px 0}
    .backlink{text-align:center; margin-top:14px}
    .alink{display:inline-block; background:var(--brand); color:#fff; text-decoration:none; padding:10px 16px; border-radius:10px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ğŸ§  å¿ƒã®ä¸­ã®æ€§æ ¼å‹•ç‰©è¨ºæ–­</h1>
    <p class="lead">å½“ã¦ã¯ã¾ã‚‹åº¦åˆã„ã‚’5ä»¶æ³•ã§é¸ã‚“ã§ã­ï¼ˆ1=ã¾ã£ãŸãã€œ5=ã¨ã¦ã‚‚ï¼‰</p>
    <div class="legend">å¤–å‘æ€§ / å”èª¿æ€§ / èª å®Ÿæ€§ / ç¥çµŒç—‡å‚¾å‘ / é–‹æ”¾æ€§ ã‚’æ¸¬å®š</div>

    <div class="card" id="formWrap">
      <div class="meta"><span id="progress">æœªå›ç­” 10 / 10</span><span>5ä»¶æ³•ï¼š1ã€œ5</span></div>
      <form id="quizForm"></form>
      <div class="actions">
        <button class="btn" type="button" onclick="calculate()">è¨ºæ–­ã™ã‚‹</button>
        <button class="btn secondary" type="button" onclick="resetForm()">ãƒªã‚»ãƒƒãƒˆ</button>
      </div>
    </div>

    <div id="result" class="card">
      <div id="types"></div>
      <div class="note">
        ğŸ”– <strong>çµæœã¯å› å­ã”ã¨ã«è¡¨ç¤º</strong>ã•ã‚Œã¾ã™ã€‚<br>
        <strong>ã‚¹ã‚¯ã‚·ãƒ§ã‚„ãƒ¡ãƒ¢ã§ä¿å­˜ã—ã¦ã‹ã‚‰</strong>ã€ä¸‹ã®ãƒœã‚¿ãƒ³ã§ã€Œå¿ƒã®æ¨™æœ¬ã€ã«æˆ»ã‚Œã¾ã™ã€‚
      </div>
      <div class="backlink">
        <a class="alink" href="https://seikaku.my.canva.site/shindan" target="_blank">ğŸ”™ å¿ƒã®æ¨™æœ¬ã«æˆ»ã‚‹</a>
      </div>
    </div>
  </div>

  <script>
    // è³ªå•ï¼ˆå„å› å­2å•ã§åˆè¨ˆ10å•ï¼‰
    const questions = [
      { text: "åˆå¯¾é¢ã§ã‚‚ã™ãæ‰“ã¡è§£ã‘ã‚‰ã‚Œã‚‹", trait: "extroversion" },
      { text: "å¤§å‹¢ã§éã”ã™ã“ã¨ãŒå¥½ãã ", trait: "extroversion" },

      { text: "å›°ã£ã¦ã„ã‚‹äººã«è‡ªç„¶ã¨æ‰‹ã‚’å·®ã—ä¼¸ã¹ã‚‹", trait: "agreeableness" },
      { text: "äººã®æ„Ÿæƒ…ã«æ•æ„Ÿãªã»ã†ã ", trait: "agreeableness" },

      { text: "ã‚„ã‚‹ã¨æ±ºã‚ãŸã“ã¨ã¯æœ€å¾Œã¾ã§ã‚„ã‚ŠæŠœã", trait: "conscientiousness" },
      { text: "è¨ˆç”»çš„ã«ç‰©äº‹ã‚’é€²ã‚ã‚‹æ–¹ã ", trait: "conscientiousness" },

      { text: "äº›ç´°ãªã“ã¨ã§æ°—åˆ†ãŒè½ã¡è¾¼ã‚€ã“ã¨ãŒã‚ã‚‹", trait: "neuroticism" },
      { text: "å¿ƒé…ã—ã™ãã¦ã—ã¾ã†ã“ã¨ãŒå¤šã„", trait: "neuroticism" },

      { text: "èŠ¸è¡“ã‚„ã‚¢ã‚¤ãƒ‡ã‚¢ã«æƒ¹ã‹ã‚Œã‚‹", trait: "openness" },
      { text: "æ–°ã—ã„ä½“é¨“ã‚„ä¾¡å€¤è¦³ã«ãƒ¯ã‚¯ãƒ¯ã‚¯ã™ã‚‹", trait: "openness" },
    ];

    const scaleLabels = [
      "1ï¼ˆã¾ã£ãŸãå½“ã¦ã¯ã¾ã‚‰ãªã„ï¼‰",
      "2ï¼ˆã‚ã¾ã‚Šå½“ã¦ã¯ã¾ã‚‰ãªã„ï¼‰",
      "3ï¼ˆã©ã¡ã‚‰ã¨ã‚‚ã„ãˆãªã„ï¼‰",
      "4ï¼ˆã‚„ã‚„å½“ã¦ã¯ã¾ã‚‹ï¼‰",
      "5ï¼ˆã¨ã¦ã‚‚å½“ã¦ã¯ã¾ã‚‹ï¼‰"
    ];

    // å‹•ç‰©ãƒãƒƒãƒ—
    const animalMap = {
      extroversion: {
        low:  { animal: "ğŸ¦¥ ãƒŠãƒã‚±ãƒ¢ãƒ", desc: "é™ã‹ã«éã”ã™ã“ã¨ã‚’å¥½ã‚€ã€ãƒã‚¤ãƒšãƒ¼ã‚¹ãªç©ã‚„ã‹ã‚¿ã‚¤ãƒ—ã€‚" },
        mid:  { animal: "ğŸ¿ï¸ ãƒªã‚¹",       desc: "ç´ æ—©ãå‹•ãã€è¦³å¯ŸåŠ›ã‚‚é«˜ã„ã€‚å¥½å¥‡å¿ƒã¨æ…é‡ã•ã‚’ãƒãƒ©ãƒ³ã‚¹ã‚ˆãæŒã¤ã€‚" },
        high: { animal: "ğŸµ ã‚µãƒ«",       desc: "æ˜ã‚‹ãç¤¾äº¤çš„ã§ã€äººã¨é–¢ã‚ã‚‹ã“ã¨ã«å–œã³ã‚’æ„Ÿã˜ã‚‹ã‚¿ã‚¤ãƒ—ã€‚" }
      },
      agreeableness: {
        low:  { animal: "ğŸˆ ãƒã‚³",       desc: "è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã‚’å¤§äº‹ã«ã™ã‚‹ãƒã‚¤ãƒ¯ãƒ¼ãƒ«ãƒ‰æ´¾ã€‚ã‚ã£ã•ã‚Šã‚¿ã‚¤ãƒ—ã€‚" },
        mid:  { animal: "ğŸ¦Š ã‚­ãƒ„ãƒ",     desc: "åˆç†çš„ã§é©åº¦ãªè·é›¢æ„Ÿã‚’ä¿ã¤ã‚¯ãƒ¼ãƒ«ãªãƒãƒ©ãƒ³ã‚¹å‹ã€‚" },
        high: { animal: "ğŸ¶ çŠ¬",         desc: "èª å®Ÿã§æ€ã„ã‚„ã‚Šæ·±ãã€èª°ã¨ã§ã‚‚ä»²è‰¯ããªã‚Œã‚‹æ¸©åšã‚¿ã‚¤ãƒ—ã€‚" }
      },
      conscientiousness: {
        low:  { animal: "ğŸ ãƒ¤ã‚®",       desc: "æ°—ã¾ã¾ã«è¡Œå‹•ã™ã‚‹æŸ”è»Ÿã‚¿ã‚¤ãƒ—ã€‚ãƒ«ãƒ¼ãƒ«ã‚ˆã‚Šç›´æ„Ÿã‚’å„ªå…ˆã€‚" },
        mid:  { animal: "ğŸ§ ãƒšãƒ³ã‚®ãƒ³",   desc: "å®‰å®šã‚’æ±‚ã‚ã‚‹å …å®Ÿå®¶ã€‚çœŸé¢ç›®ã•ã¨éŠã³å¿ƒã‚’ãƒãƒ©ãƒ³ã‚¹ã‚ˆãæŒã¤ã€‚" },
        high: { animal: "ğŸ¦« ãƒ“ãƒ¼ãƒãƒ¼",   desc: "åŠªåŠ›ã¨è¨ˆç”»ã‚’é‡è¦–ã™ã‚‹å®Œç’§ä¸»ç¾©ã€‚ä¿¡é ¼ã•ã‚Œã‚‹åƒãè€…ã€‚" }
      },
      neuroticism: {
        low:  { animal: "ğŸ» ã‚¯ãƒ",       desc: "å¿ƒãŒå®‰å®šã—ã¦ãŠã‚Šã€å‹•ã˜ã«ãã„å®‰å¿ƒæ„Ÿã®ã‚ã‚‹æ€§æ ¼ã€‚" },
        mid:  { animal: "ğŸ° ã‚¦ã‚µã‚®",     desc: "æ„Ÿå—æ€§ãŒè±Šã‹ã§ã€å…±æ„ŸåŠ›ã¨ç¹Šç´°ã•ã‚’ä½µã›æŒã¤ã€‚" },
        high: { animal: "ğŸ¦” ãƒãƒªãƒã‚ºãƒŸ", desc: "å‚·ã¤ãã‚„ã™ãç¹Šç´°ã€‚æ…é‡ã§è‡ªå·±é˜²è¡›æœ¬èƒ½ãŒå¼·ã„ã‚¿ã‚¤ãƒ—ã€‚" }
      },
      openness: {
        low:  { animal: "ğŸ¦™ ã‚¢ãƒ«ãƒ‘ã‚«",   desc: "ä¼çµ±ã‚„å®‰å®šã‚’å¥½ã¿ã€ã®ã‚“ã³ã‚Šã¨æ—¥ã€…ã‚’æ¥½ã—ã‚€ã€‚" },
        mid:  { animal: "ğŸ¦ ã‚ªã‚¦ãƒ ",     desc: "ç‰©äº‹ã«æŸ”è»Ÿã«é©å¿œã™ã‚‹é †å¿œå‹ã€‚å¥½å¥‡å¿ƒã‚‚å®‰å®šã‚‚ã»ã©ã»ã©ã€‚" },
        high: { animal: "ğŸ¬ ã‚¤ãƒ«ã‚«",     desc: "å‰µé€ çš„ã§ç›´æ„Ÿçš„ã€‚è‡ªç”±ãªç™ºæƒ³ã¨èŠ¸è¡“çš„æ„Ÿæ€§ã‚’æŒã¤ã€‚" }
      }
    };

    // ãƒ•ã‚©ãƒ¼ãƒ æç”»
    const form = document.getElementById("quizForm");
    const progressEl = document.getElementById("progress");
    questions.forEach((q, i) => {
      const div = document.createElement("div");
      div.className = "question";
      div.innerHTML = `<p>Q${i + 1}. ${q.text}</p>` +
        `<div class="scale">` +
        scaleLabels.map((label, n) => {
          const id = `q${i}_${n+1}`;
          return `<label for="${id}">
            <input id="${id}" type="radio" name="q${i}" value="${n + 1}" />
            ${label}
          </label>`;
        }).join("") +
        `</div>`;
      form.appendChild(div);
    });

    // æœªå›ç­”ã‚«ã‚¦ãƒ³ãƒˆè¡¨ç¤º
    function updateProgress(){
      const answered = Array.from({length: questions.length}).filter((_,i)=>document.querySelector(`input[name="q${i}"]:checked`)).length;
      progressEl.textContent = `æœªå›ç­” ${questions.length - answered} / ${questions.length}`;
    }
    form.addEventListener("change", updateProgress);
    updateProgress();

    // ãƒªã‚»ãƒƒãƒˆ
    function resetForm(){
      form.reset();
      updateProgress();
      document.getElementById("result").style.display="none";
      document.getElementById("types").innerHTML="";
      window.scrollTo({top:0,behavior:"smooth"});
    }

    // è¨ºæ–­
    function calculate(){
      // é›†è¨ˆ
      const sums = {extroversion:0, agreeableness:0, conscientiousness:0, neuroticism:0, openness:0};
      const counts = {extroversion:0, agreeableness:0, conscientiousness:0, neuroticism:0, openness:0};

      for(let i=0;i<questions.length;i++){
        const sel = document.querySelector(`input[name="q${i}"]:checked`);
        if(!sel){ alert(`å…¨ã¦ã®è³ªå•ã«ç­”ãˆã¦ãã ã•ã„ï¼ˆQ${i+1}ãŒæœªå›ç­”ï¼‰`); return; }
        const v = parseInt(sel.value);
        const key = questions[i].trait;
        sums[key]+=v; counts[key]+=1;
      }

      // å¹³å‡ãƒ»ãƒ¬ãƒ™ãƒ«åˆ¤å®š
      const labelMap = {
        extroversion: "å¤–å‘æ€§",
        agreeableness: "å”èª¿æ€§",
        conscientiousness: "èª å®Ÿæ€§",
        neuroticism: "ç¥çµŒç—‡å‚¾å‘",
        openness: "é–‹æ”¾æ€§"
      };

      const typesDiv = document.getElementById("types");
      typesDiv.innerHTML = "";

      Object.keys(sums).forEach(key=>{
        const avg = sums[key] / counts[key];            // 1ã€œ5
        const pct = Math.round((avg-1)/4*100);          // 0ã€œ100%
        const level = avg <= 2.4 ? 'low' : (avg <= 3.6 ? 'mid' : 'high');
        const { animal, desc } = animalMap[key][level];

        const box = document.createElement("div");
        box.className = "type";
        box.innerHTML = `
          <h3>${labelMap[key]}ï¼š${animal}ï¼ˆå¹³å‡ ${avg.toFixed(1)} / 5ï¼‰</h3>
          <small>${desc}</small>
          <div class="bar"><span style="width:${pct}%"></span></div>
        `;
        typesDiv.appendChild(box);
      });

      document.getElementById("result").style.display = "block";
      window.scrollTo({top:document.body.scrollHeight, behavior:"smooth"});
    }
  </script>
</body>
</html>
