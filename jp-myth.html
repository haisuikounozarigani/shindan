<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ãƒã‚¸â‡„ãƒã‚¬æ—¥æœ¬ç¥è©±è¨ºæ–­</title>
<meta name="description" content="ãƒã‚¸ãƒ†ã‚£ãƒ–ï¼ˆé™½ï¼‰ï¼ãƒã‚¬ãƒ†ã‚£ãƒ–ï¼ˆé™°ï¼‰ã®â€œã„ã¾ã®å‚¾ãâ€ã‚’ã€ã‚ã‚‹ã‚ã‚‹16å•ï¼ˆ5ä»¶æ³•ï¼‰ã§å¯è¦–åŒ–ã€‚é™½åº¦YOãƒ»é™°åº¦INã®å¹³å‡å·®Dã§ã€å¤©ç…§ã€œæœˆèª­ã®5ã‚¿ã‚¤ãƒ—ã«åˆ†é¡ã—ã¾ã™ï¼ˆã‚¨ãƒ³ã‚¿ãƒ¡ç”¨ï¼‰ã€‚">
<meta name="theme-color" content="#f6fbff">
<!-- OG -->
<meta property="og:type" content="website">
<meta property="og:title" content="ãƒã‚¸â‡„ãƒã‚¬æ—¥æœ¬ç¥è©±è¨ºæ–­">
<meta property="og:description" content="ãƒã‚¸ãƒ†ã‚£ãƒ–ï¼ãƒã‚¬ãƒ†ã‚£ãƒ–ã®å‚¾ãã‚’16å•ã§æ¸¬å®šã€‚YOãƒ»INã®å·®Dã§5ã‚¿ã‚¤ãƒ—ï¼ˆå¤©ç…§ã€œæœˆèª­ï¼‰ã€‚ã‚³ãƒ¡ãƒ³ãƒˆã¨æ•´ãˆæ–¹ã‚’è¡¨ç¤ºã€‚">
<meta property="og:url" content="https://haisuikounozarigani.github.io/shindan/jp-myth.html">
<meta property="og:image" content="/shindan/assets/results/jp-myth/01.png">

<style>
:root{
  --accent:#4aa8ff; --accent2:#a48bff; /* cold palette */
  --ink:#1f2732; --muted:#647085; --paper:#fff;
  --bg1:#f6fbff; --bg2:#f5f3ff; --line:#e7edf7;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--ink);
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  font-family:"Noto Sans JP",system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN",sans-serif;
}
a{color:inherit}

.wrap{max-width:980px;margin:18px auto;padding:0 14px}
header.hd{display:grid;grid-template-columns:56px 1fr;gap:12px;align-items:center;margin:8px 0}
.logo{width:56px;height:56px;border-radius:14px;background:linear-gradient(135deg,#dff2ff,#ece6ff);display:grid;place-items:center;font-size:28px}
h1{margin:0;font-size:clamp(22px,4.6vw,34px);letter-spacing:.02em}
.sub{margin:4px 0 0;color:var(--muted);font-size:.96em}

.card{background:var(--paper);border:1px solid var(--line);border-radius:16px;padding:14px}
.section{margin:14px 0}

.pill{display:inline-block;padding:4px 8px;border:1px solid var(--line);border-radius:999px;background:#fff;color:#6b6a77;font-size:.9em}
.meta{display:flex;gap:8px;flex-wrap:wrap}

.sticky{position:sticky;top:0;z-index:10;margin:-6px -14px 12px;padding:8px 14px;background:rgba(255,255,255,.8);backdrop-filter:blur(6px) saturate(1.05);border-bottom:1px solid #e9edf7;display:flex;align-items:center;gap:10px}
.progress{height:8px;background:#ecf3fb;border-radius:999px;flex:1;overflow:hidden}
.progress>span{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--accent2))}
.btn{padding:10px 14px;border:1px solid var(--line);border-radius:12px;background:#fff;cursor:pointer}
.btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));border-color:transparent;color:#fff;font-weight:700}

fieldset.q{border:1px solid var(--line);border-radius:12px;padding:10px;margin:10px 0;background:#fff}
legend{font-weight:700}
.scale{display:grid;grid-template-columns:repeat(5,minmax(58px,1fr));gap:8px;margin-top:8px}
.scale input{position:absolute;opacity:0;pointer-events:none}
.scale label{display:grid;place-items:center;border:1px solid #e5e9f3;border-radius:10px;padding:8px;cursor:pointer;user-select:none;background:#fff}
.scale input:checked+label{outline:2px solid var(--accent);border-color:transparent}
mark.need{animation:need 1.6s ease}
@keyframes need{0%{box-shadow:0 0 0 0 rgba(74,168,255,.45)}100%{box-shadow:0 0 0 0 rgba(74,168,255,0)}}

.result-head{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;font-weight:700}
.total{font-size:26px;font-weight:800}
.small{color:var(--muted);font-size:.92em}

.hero-vert{
  display:grid;place-items:center;border:1px solid var(--line);border-radius:16px;background:#fff;overflow:hidden
}
.hero-vert figure{margin:0;width:min(580px,100%);max-width:100%;aspect-ratio:3/4;border-bottom:1px solid var(--line);background:#f7f9ff}
.hero-vert img{width:100%;height:100%;object-fit:cover;display:block}
.hero-vert figcaption{padding:10px;width:100%}
.hero-vert .capline{font-weight:800;line-height:1.4;overflow-wrap:anywhere;word-break:normal}
.hero-vert .capmini{font-size:1em;line-height:1.75;color:var(--muted);overflow-wrap:anywhere;word-break:normal}

.grid2{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px}
.stat{border:1px solid var(--line);border-radius:12px;padding:10px;background:#fff}
.stat .big{font-size:22px;font-weight:800}
.bar{height:10px;background:#ecf3fb;border-radius:999px;overflow:hidden;margin-top:6px}
.bar>span{display:block;height:100%;background:linear-gradient(90deg,var(--accent),var(--accent2));width:0}

.footer{color:var(--muted);font-size:.92em}
.warn{background:#f8fbff;border:1px solid #e1ebf7;border-radius:12px;padding:10px;margin:12px 0}

.back-area{display:flex;justify-content:center;margin-top:10px}
a.back{display:inline-flex;align-items:center;gap:6px;padding:10px 14px;border:1px solid var(--line);border-radius:12px;background:#fff;text-decoration:none}
.hr{height:1px;background:var(--line);margin:10px 0}
@media (max-width: 480px){
  .hero-vert figcaption{padding:12px 12px 16px}
  .hero-vert .capline{font-size:clamp(16px,5.2vw,20px)}
  .hero-vert .capmini{font-size:clamp(14px,4.6vw,16px);line-height:1.8}
}
</style>
</head>
<body data-id="jp-myth">
<main class="wrap" id="app">
  <header class="hd">
    <div class="logo">â›©ï¸</div>
    <div>
      <h1>ãƒã‚¸â‡„ãƒã‚¬æ—¥æœ¬ç¥è©±è¨ºæ–­</h1>
      <p class="sub">ãƒã‚¸ãƒ†ã‚£ãƒ–ï¼ˆé™½ï¼‰ï¼ãƒã‚¬ãƒ†ã‚£ãƒ–ï¼ˆé™°ï¼‰ã®<strong>å‚¾ã</strong>ã‚’16å•ã§æ¸¬ã‚‹ãƒ†ã‚¹ãƒˆã§ã™ã€‚é™½åº¦YOãƒ»é™°åº¦INã®å¹³å‡ã‹ã‚‰å·®åˆ†Dã‚’å‡ºã—ã€5ã‚¿ã‚¤ãƒ—ã«åˆ†é¡ã—ã¾ã™ã€‚</p>
    </div>
  </header>

  <div class="sticky" aria-live="polite">
    <span>ğŸ“Š</span>
    <div class="progress" aria-label="å›ç­”é€²æ—"><span id="prog"></span></div>
    <button class="btn primary" id="doScore">è¨ºæ–­ã™ã‚‹</button>
  </div>

  <section class="card section" id="desc">
    <h2 style="margin:4px 0 8px">èª¬æ˜</h2>
    <div class="meta" style="margin-bottom:8px">
      <span class="pill">è³ªå•æ•°ï¼š16</span>
      <span class="pill">å½¢å¼ï¼š5ä»¶æ³•ï¼ˆ1ã€œ5ï¼‰</span>
      <span class="pill">ç›®çš„ï¼šã„ã¾ã®å‚¾ãã‚’çŸ¥ã‚‹</span>
    </div>
    <p class="small">YOï¼Q1â€“8ã®å¹³å‡ï¼ˆ1â€“5ï¼‰ã€INï¼Q9â€“16ã®å¹³å‡ï¼ˆ1â€“5ï¼‰ã€Dï¼YOâˆ’INã€‚Dã®å€¤ã§5ã‚¿ã‚¤ãƒ—ã«åˆ†ã‘ã¾ã™ï¼ˆå°æ•°ã¯å°æ•°ç‚¹ä»¥ä¸‹2æ¡è¡¨ç¤ºï¼‰ã€‚</p>
  </section>

  <!-- è¨­å•ï¼ˆå›ºå®šï¼šå¤‰æ›´ã—ãªã„ï¼‰ -->
  <section class="card section" id="questions">
    <h2 style="margin:4px 0 8px">è¨­å•ï¼ˆâ‘ ã„ã„ãˆï¼â‘¡ã‚ã¾ã‚Šï¼â‘¢åŠã€…ï¼â‘£ãŸã¶ã‚“ï¼â‘¤ã¯ã„ï¼‰</h2>
    <div id="qWrap"></div>
    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px">
      <button class="btn" id="clearAns">å›ç­”ã‚’ã‚¯ãƒªã‚¢</button>
      <button class="btn primary" id="doScore2">è¨ºæ–­ã™ã‚‹</button>
    </div>
  </section>

  <!-- çµæœ -->
  <section class="card section" id="result" aria-live="polite">
    <div id="resEmpty">
      <span class="badge">ã¾ã çµæœã¯ã‚ã‚Šã¾ã›ã‚“</span>
      <p class="small">ä¸Šã®è¨­å•ã«å›ç­”ã—ã¦ã€Œè¨ºæ–­ã™ã‚‹ã€ã‚’æŠ¼ã™ã¨è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
    </div>

    <div id="resArea" style="display:none">
      <div class="result-head">
        <span class="badge">çµæœã‚¿ã‚¤ãƒ—</span>
        <div class="total" id="typeLine">â€”</div>
      </div>

      <!-- ç¸¦é•·ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼ˆ3:4ï¼Œå¤§ããï¼‰ -->
      <div class="hero-vert section" role="region" aria-label="ã‚¿ã‚¤ãƒ—ã®ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ">
        <figure>
          <img id="heroImg" src="/shindan/assets/results/jp-myth/01.png" alt="é›²é–“ã®é™½ãŒé³¥å±…ã‚’ç…§ã‚‰ã™" loading="lazy" width="600" height="800">
        </figure>
        <figcaption>
          <div class="capline" id="heroTitle">â€”</div>
          <div class="capmini" id="heroCopy">â€”</div>
        </figcaption>
      </div>

      <!-- æ•°å€¤è¡¨ç¤ºï¼ˆYO/IN/Dï¼‰ -->
      <div class="grid2">
        <article class="stat" aria-label="é™½åº¦ï¼ˆYOï¼‰">
          <div><strong>é™½åº¦ï¼ˆYOï¼‰</strong></div>
          <div class="big"><span id="yoVal">0.00</span></div>
          <div class="bar" aria-hidden="true"><span id="yoBar"></span></div>
          <div class="small">ä¸Šå‘ããƒ»æ¥½ã—ã¿ãƒ»åˆ‡ã‚Šæ›¿ãˆ</div>
        </article>
        <article class="stat" aria-label="é™°åº¦ï¼ˆINï¼‰">
          <div><strong>é™°åº¦ï¼ˆINï¼‰</strong></div>
          <div class="big"><span id="inVal">0.00</span></div>
          <div class="bar" aria-hidden="true"><span id="inBar"></span></div>
          <div class="small">å¿ƒé…ãƒ»åã™ã†ãƒ»æ‚ªã„äºˆæƒ³</div>
        </article>
      </div>

      <div class="stat section" aria-label="å·®åˆ†D">
        <div style="display:flex;justify-content:space-between;align-items:center;gap:8px">
          <strong>D = YO âˆ’ IN</strong>
          <div class="big"><span id="dVal">+0.00</span></div>
        </div>
        <div class="small">é–¾å€¤ï¼š01 â‰¥ +0.80 ï¼ 02ï¼š+0.30ã€œ+0.79 ï¼ 03ï¼šâˆ’0.29ã€œ+0.29 ï¼ 04ï¼šâˆ’0.30ã€œâˆ’0.79 ï¼ 05 â‰¤ âˆ’0.80</div>
      </div>

 <div class="hr"></div>
<p class="small" id="commonLine">ã„ãã¤ã‹ã®ç ”ç©¶ã§ã¯ã€ãƒã‚¸ãƒ†ã‚£ãƒ–ãªæ°—åˆ†ã¯å‰µé€ æ€§ã‚„å›å¾©åŠ›ã€å”èª¿è¡Œå‹•ã‚’é«˜ã‚ã‚„ã™ã„ä¸€æ–¹ã€ãƒã‚¬ãƒ†ã‚£ãƒ–ãªæ°—åˆ†ã¯å±é™ºã®æ—©æœŸæ¤œçŸ¥ã‚„ãƒªã‚¹ã‚¯å›é¿ã€ç´°éƒ¨ã®è¦‹è½ã¨ã—é˜²æ­¢ã«å½¹ç«‹ã¤ã¨ç¤ºå”†ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€Œã©ã¡ã‚‰ãŒè‰¯ã„/æ‚ªã„ã€ã‚’æ±ºã‚ã‚‹ãŸã‚ã§ã¯ãªãã€ã„ã¾ã®å‚¾ãã‚’æŠŠæ¡ã—ã¦ã€çŠ¶æ³ã«åˆã‚ã›ã¦ã‚¢ã‚¯ã‚»ãƒ«ï¼ˆé™½ï¼‰ã¨ãƒ–ãƒ¬ãƒ¼ã‚­ï¼ˆé™°ï¼‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ç›®å®‰ã¨ã—ã¦ä½¿ã£ã¦ãã ã•ã„ã€‚</p>
      <div class="back-area">
        <a class="back" href="/shindan/" id="backLink" aria-label="è¨ºæ–­ä¸€è¦§ã«æˆ»ã‚‹">è¨ºæ–­ä¸€è¦§ã«æˆ»ã‚‹</a>
      </div>
    </div>
  </section>

  <section class="footer card">
    <h2 style="margin:4px 0 8px">ã”åˆ©ç”¨ã«ã‚ãŸã£ã¦</h2>
    <p class="warn"><strong>æ³¨æ„ï¼š</strong>ã“ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯<b>ã‚¨ãƒ³ã‚¿ãƒ¡ç”¨ã®ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯</b>ã§ã™ã€‚åŒ»ç™‚ãƒ»è¨ºæ–­ãƒ»æ²»ç™‚ãƒ»ã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°ç­‰ã®ç›®çš„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚çµæœã®è§£é‡ˆãƒ»åˆ©ç”¨ã¯ã”è‡ªèº«ã®åˆ¤æ–­ã¨è²¬ä»»ã«ã¦ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚<br>
ãƒ‡ãƒ¼ã‚¿ã¯ç«¯æœ«å†…ã§å‡¦ç†ã•ã‚Œã€å€‹äººã‚’ç‰¹å®šã™ã‚‹æƒ…å ±ã®é€ä¿¡ãƒ»åé›†ã¯è¡Œã„ã¾ã›ã‚“ï¼ˆã”åˆ©ç”¨ç’°å¢ƒã«ã‚ˆã‚Šã‚¢ã‚¯ã‚»ã‚¹è§£æç­‰ãŒå‹•ä½œã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼‰ã€‚<br>
å®—æ•™çš„ãƒ»å€«ç†çš„ä¾¡å€¤åˆ¤æ–­ã‚’æ„å›³ã›ãšã€å› å­åãƒ»æ¯”å–©ã¯<b>æ¼”å‡ºè¡¨ç¾</b>ã§ã™ã€‚</p>
  </section>
</main>

<script>
(() => {
  // ====== å›ºå®šæƒ…å ± ======
  const SLUG = "jp-myth";
const TITLE = "ãƒã‚¸â‡„ãƒã‚¬æ—¥æœ¬ç¥è©±è¨ºæ–­";
const ANS_KEY = "specimens:"+SLUG+":answers"; // â† ã‚¯ã‚»ãƒ¢ãƒ³å¼ã«çµ±ä¸€
  const IMG_BASE = "/shindan/assets/results/jp-myth/"; // æœ«å°¾/ç¶­æŒ

  // ã‚¿ã‚¤ãƒ—å®šç¾©ï¼ˆç”»åƒ=3:4ç¸¦ï¼æ–‡å­—ãªã—ã€altã¯ä»•æ§˜ã©ãŠã‚Šï¼‰
  // â˜… ã‚³ãƒ¡ãƒ³ãƒˆã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼æŒ‡å®šã®æ–‡ç« ã‚’ãã®ã¾ã¾æ¡ç”¨
  const TYPE_DEF = {
    "01": {
      name:"å¤©ç…§ï¼ˆã‚ã¾ã¦ã‚‰ã™ï¼‰ â€” é™½MAX",
      img:"01.png",
      alt:"é›²é–“ã®é™½ãŒé³¥å±…ã‚’ç…§ã‚‰ã™",
      copy:`é›²é–“ã‹ã‚‰å·®ã™å…‰ã¿ãŸã„ã«ã€åˆ‡ã‚Šæ›¿ãˆã¨æ¥½ã—ã¿æ¢ã—ãŒæ—©ã„äººã€‚äºˆå®šãŒå´©ã‚Œã¦ã‚‚ã€Œã˜ã‚ƒã‚ã“ã†ã—ã‚ˆã†ã€ã¨æ–¹å‘ã‚’ç…§ã‚‰ã›ã¾ã™ã€‚å‘¨ã‚Šã‚‚æ˜ã‚‹ããªã‚‹åé¢ã€è½ã¡è¾¼ã‚€äººã‚’æ€¥ã‹ã—ã™ããªã„é…æ…®ãŒã‚«ã‚®ã€‚â€œæ˜ã‚‹ã•ã‚’ç„¡ç†ã—ãªã„æ—¥â€ã‚’ç”¨æ„ã™ã‚‹ã¨ã€é•·ãå¼·ãå…‰ã‚Œã¾ã™ã€‚`
    },
    "02": {
      name:"æµæ¯”å¯¿ï¼ˆãˆã³ã™ï¼‰ â€” ã‚„ã‚„é™½",
      img:"02.png",
      alt:"å¤•æš®ã‚Œã®æ¸¯ã§é¯›ã‚’æ²ã’ã‚‹æµæ¯”å¯¿",
      copy:`å°ã•ãªè‰¯ã„ã“ã¨ã‚’ã™ãæ‹¾ãˆã‚‹åäººã€‚å ´ã‚’ã»ãã—ã€è»¢ã‚“ã§ã‚‚ã€Œã¾ã‚ã„ã£ã‹ã€ã§æ¬¡ã¸é€²ã‚ã¾ã™ã€‚äººã‚’åŠ±ã¾ã™åŠ›ãŒã‚ã‚‹ä¸€æ–¹ã€ç›¸æ‰‹ã®ãƒšãƒ¼ã‚¹ã‚’ç½®ãå»ã‚Šã«ã—ãªã„ã‚ˆã†å…±æ„Ÿâ†’å‰å‘ãã®é †ç•ªã‚’å®ˆã‚‹ã¨ä¿¡é ¼ãŒå¢—ãˆã¾ã™ã€‚å°ã•ãªç¥ã„ã‚’å¢—ã‚„ã™ã»ã©ã€é™½ã®ç‡ƒæ–™ãŒè²¯ã¾ã‚Šã¾ã™ã€‚`
    },
    "03": {
      name:"å¤§å›½ä¸»ï¼ˆãŠãŠãã«ã¬ã—ï¼‰ â€” ä¸­é–“",
      img:"03.png",
      alt:"å¤§ã—ã‚ç¸„ã®ä¸‹ã§æ‰‹ã‚’å·®ã—ä¼¸ã¹ã‚‹äººã¨ç™½å…",
      copy:`æ…é‡ã•ã¨å‰å‘ãã®ã‚ã„ã ã§èˆµã‚’åˆ‡ã‚‹èª¿åœå½¹ã€‚å›°ã£ã¦ã„ã‚‹äººã«æ‰‹ã‚’å·®ã—å‡ºã—ã€åˆæ„ç‚¹ã‚’è¦‹ã¤ã‘ã‚‹ã®ãŒå¾—æ„ã§ã™ã€‚æ‚©ã¿ãŒå›ã‚Šå§‹ã‚ãŸã‚‰äºŒåˆ—ãƒ¡ãƒ¢ï¼ˆå·¦ï¼šå¿ƒé…ï¼å³ï¼šä»Šã§ãã‚‹ä¸€æ‰‹ï¼‰ã§åœæ»ã‚’æ–­ã¡ã€ã¾ãšä¸€æ­©ã€‚ãƒãƒ©ãƒ³ã‚¹æ„Ÿè¦šãŒå ´ã‚’æ•´ãˆã¾ã™ã€‚`
    },
    "04": {
      name:"é ˆä½ä¹‹ç”·ï¼ˆã™ã•ã®ãŠï¼‰ â€” ã‚„ã‚„é™°",
      img:"04.png",
      alt:"è’æ³¢ã®å…ˆã«è–„ã„æ™´ã‚Œé–“",
      copy:`æ°—åœ§ã‚„ç©ºæ°—ã®å¤‰åŒ–ã«æ•æ„Ÿã§ã€åµã®æ°—é…ã‚’æ—©ã‚ã«å—…ãå–ã‚Œã‚‹äººã€‚çŸ­è·é›¢ã®çªç ´ã«å¼·ã„ä¸€æ–¹ã€é¢¨ãŒå¼·ã™ãã‚‹ã¨æ¶ˆè€—ã‚‚ã—ã‚„ã™ã„ã€‚å¿ƒé…ã¯è¡Œå‹•ã«å¤‰ãˆã¦å°ã•ãå‡¦ç†ã™ã‚‹ã¨åŠ›ã«å¤‰ã‚ã‚Šã¾ã™ã€‚ãƒ‰ãƒ©ãƒ•ãƒˆã‚„ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã‚’ä½¿ã„ã€ã€Œã¾ãšè©¦ã™â†’æœ¬ç•ªã€ã®é †ã§èˆµã‚’åˆ‡ã‚ã†ã€‚`
    },
    "05": {
      name:"æœˆèª­ï¼ˆã¤ãã‚ˆã¿ï¼‰ â€” é™°MAX",
      img:"05.png",
      alt:"é™ã‹ãªæ°´é¢ã«ä¸‰æ—¥æœˆ",
      copy:`å¤œã®é™ã‘ã•ã§æ·±ãè¦³å¯Ÿã—ã€è€ƒãˆæŠœã‘ã‚‹äººã€‚æ…é‡ã•ã¯å¤§ããªå¼·ã¿ã§ã™ãŒã€åã™ã†ã§è¶³ãŒæ­¢ã¾ã‚Šã‚„ã™ã„ã“ã¨ã‚‚ã€‚æ¸¦ã‚’åˆ‡ã‚‹ã«ã¯3åˆ†ã ã‘å‹•ããŒåŠ¹ãã¾ã™ã€‚æœ€æ‚ªãƒ‘ã‚¿ãƒ¼ãƒ³ã®å¯¾ç­–ã‚’ä¸€è¡Œæ›¸ã„ãŸã‚‰é–‰ã˜ã€æœã¯å°ç”¨äº‹ã§èµ·å‹•ã€å¤œã¯â€œè‰¯ã‹ã£ãŸã“ã¨â€ã§ç· ã‚ã‚‹ã¨ã€é™ã‹ãªå¼·ã•ãŒå®¿ã‚Šã¾ã™ã€‚`
    }
  };

  // è¨­å•ï¼ˆå›ºå®šï¼šæ­£æ¡ç‚¹ãƒ»é€†è»¢ãªã—ï¼‰
  const ITEMS = [
    // YO 1â€“8
    {id:1 , dim:"YO", text:"ä¸­æ­¢ã«ãªã£ã¦ã‚‚åˆ¥ã®æ¥½ã—ã¿ã‚’ã™ãæ¢ã™ã€‚"},
    {id:2 , dim:"YO", text:"æ–°ã—ã„èª²é¡Œã«ã¡ã‚‡ã£ã¨ãƒ¯ã‚¯ãƒ¯ã‚¯ã™ã‚‹ã€‚"},
    {id:3 , dim:"YO", text:"è¤’ã‚ã‚‰ã‚ŒãŸã‚‰ç´ ç›´ã«ã€Œã‚ã‚ŠãŒã¨ã†ã€ã¨è¨€ãˆã‚‹ã€‚"},
    {id:4 , dim:"YO", text:"ä¹—ã‚Šæ›ãˆå¤±æ•—ã§ã‚‚æ¬¡ã®æ‰‹ã‚’ã•ã£ã¨é¸ã¹ã‚‹ã€‚"},
    {id:5 , dim:"YO", text:"è‰¯ã„å¤©æ°—ã®æœã¯æ–°ã—ã„ã“ã¨ã‚’è©¦ã—ãŸããªã‚‹ã€‚"},
    {id:6 , dim:"YO", text:"ãŠã„ã—ã„ã‚‚ã®ã¯èª°ã‹ã«ãŠã™ã™ã‚ã—ãŸããªã‚‹ã€‚"},
    {id:7 , dim:"YO", text:"è‰¯ã„ã“ã¨ã‚’ã²ã¨ã¤è¦‹ã¤ã‘ã‚‹ã®ãŒå¾—æ„ã€‚"},
    {id:8 , dim:"YO", text:"æ–°ã—ã„è¶£å‘³ã¯ã¾ãšä½“é¨“ã—ã¦ã‹ã‚‰è€ƒãˆã‚‹ã€‚"},
    // IN 9â€“16
    {id:9 , dim:"IN", text:"è¿”ä¿¡ãŒé…ã„ã¨å«Œã‚ã‚ŒãŸï¼Ÿã¨ä¸å®‰ã«ãªã‚‹ã€‚"},
    {id:10, dim:"IN", text:"å°ã•ãªãƒŸã‚¹ã‚’ä¸€æ—¥ã˜ã‚…ã†å¼•ããšã‚ŠãŒã¡ã€‚"},
    {id:11, dim:"IN", text:"åˆå¯¾é¢ã§ã¯ã—ã°ã‚‰ãæ§˜å­è¦‹ã€‚"},
    {id:12, dim:"IN", text:"SNSã®ã€Œã„ã„ã­ã€ãŒå°‘ãªã„ã¨æ°—ã«ãªã‚‹ã€‚"},
    {id:13, dim:"IN", text:"äºˆå®šå¤‰æ›´ãŒã‚ã‚‹ã¨ã‚¤ãƒ©ã‚¤ãƒ©ãŒæ®‹ã‚‹ã€‚"},
    {id:14, dim:"IN", text:"çœ ã‚Œãªã„å¤œã€å¤±æ•—ã‚’ä½•åº¦ã‚‚å†ç”Ÿã—ã¦ã—ã¾ã†ã€‚"},
    {id:15, dim:"IN", text:"æ–­ã‚‰ã‚Œã‚‹ã¨è‡ªåˆ†ã®ä¾¡å€¤ãŒä¸‹ãŒã£ãŸæ°—ãŒã™ã‚‹ã€‚"},
    {id:16, dim:"IN", text:"å°†æ¥ã‚’è€ƒãˆã‚‹ã¨ã¾ãšæ‚ªã„ã»ã†ã‚’æƒ³åƒã—ã¦ã—ã¾ã†ã€‚"},
  ];

  // 5ä»¶æ³•ãƒ©ãƒ™ãƒ«
  const LABELS = ["â‘ ã„ã„ãˆ","â‘¡ã‚ã¾ã‚Š","â‘¢åŠã€…","â‘£ãŸã¶ã‚“","â‘¤ã¯ã„"];

  // è¦ç´ å‚ç…§
  const qWrap = document.getElementById("qWrap");
  const prog = document.getElementById("prog");
  const resEmpty = document.getElementById("resEmpty");
  const resArea = document.getElementById("resArea");
  const typeLine = document.getElementById("typeLine");
  const heroImg = document.getElementById("heroImg");
  const heroTitle = document.getElementById("heroTitle");
  const heroCopy = document.getElementById("heroCopy");
  const yoVal = document.getElementById("yoVal");
  const inVal = document.getElementById("inVal");
  const dVal = document.getElementById("dVal");
  const yoBar = document.getElementById("yoBar");
  const inBar = document.getElementById("inBar");
  const backLink = document.getElementById("backLink");

  // ã‚·ãƒ£ãƒƒãƒ•ãƒ«
  function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }

  // è¨­å•ç”Ÿæˆï¼ˆæ–‡è¨€ã¯å¤‰æ›´ã—ãªã„ï¼‰
  function buildQuestions(){
    const pool = shuffle([...ITEMS]); // å…¨ä½“ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã®ã¿
    qWrap.innerHTML = pool.map(q => `
      <fieldset class="q" data-dim="${q.dim}" id="fs-${q.id}">
        <legend>${q.id}. ${q.text}</legend>
        <div class="scale" role="radiogroup" aria-label="${q.text}">
          ${[1,2,3,4,5].map(v=>`
            <div style="position:relative">
              <input id="q${q.id}-${v}" type="radio" name="q${q.id}" value="${v}">
              <label for="q${q.id}-${v}" title="${LABELS[v-1]}">${LABELS[v-1]}</label>
            </div>
          `).join("")}
        </div>
      </fieldset>
    `).join("");

    // é€²æ—
    qWrap.querySelectorAll('input[type="radio"]').forEach(el=>{
  el.addEventListener('change', function(){
    saveAnswers();       // â† è¿½åŠ ï¼šé¸ã¶ãŸã³ä¿å­˜
    updateProgress();
  }, false);
});
  }

  function updateProgress(){
    const total = 16;
    const answered = qWrap.querySelectorAll('input[type="radio"]:checked').length;
    prog.style.width = Math.round(100*answered/total) + "%";
  }
// ã‚¯ã‚»ãƒ¢ãƒ³å¼ ä¿å­˜/å¾©å…ƒï¼ˆQ01..Q16ï¼‰
function saveAnswers(){
  try{
    const out = {};
    // ITEMS ã¯ id=1..16 ãªã®ã§ Q01..Q16 ã«å¤‰æ›
    ITEMS.forEach(q=>{
      const chk = document.querySelector(`#fs-${q.id} input[type="radio"]:checked`);
      if(chk) out["Q"+String(q.id).padStart(2,"0")] = parseInt(chk.value,10);
    });
    localStorage.setItem(ANS_KEY, JSON.stringify({ts: Date.now(), ans: out}));
  }catch(e){}
}
function restoreAnswers(){
  try{
    const raw = localStorage.getItem(ANS_KEY);
    if(!raw) return;
    const data = JSON.parse(raw);
    const ans = (data && data.ans) || {};
    Object.keys(ans).forEach(key=>{
      const id = parseInt(key.replace(/^Q/,""),10);
      const v  = ans[key];
      const input = document.querySelector(`#q${id}-${v}`);
      if(input){ input.checked = true; }
    });
  }catch(e){}
}
function wipeAnswers(){
  try{
    // æ–°æ–¹å¼ï¼ˆã‚¯ã‚»ãƒ¢ãƒ³å¼ï¼‰
    localStorage.removeItem(ANS_KEY);
    // æ—§æ–¹å¼ï¼ˆæ®‹éª¸ãŒã‚ã‚Œã°ä¸€ç·’ã«æƒé™¤ï¼‰
    localStorage.removeItem("specimens:answers:"+SLUG);
  }catch(e){}
}
  // æ¡ç‚¹
  function score(){
  saveAnswers();  // â† å…ˆé ­ã§ä¿å­˜ï¼ˆä¿é™ºï¼‰
    const answers = {};
    const missing = [];
    const dims = {YO:[], IN:[]};

    ITEMS.forEach(q=>{ dims[q.dim].push(q.id); });

    ITEMS.forEach(q=>{
      const chk = qWrap.querySelector(`#fs-${q.id} input[type="radio"]:checked`);
      const v = chk ? parseInt(chk.value,10) : null;
      answers[q.id] = v;
      if(v===null) missing.push(q.id);
    });

    if (missing.length){
      alert("æœªå›ç­”ãŒã‚ã‚Šã¾ã™ã€‚å…¨16å•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚");
      const first = missing[0];
      const fs = document.getElementById(`fs-${first}`);
      fs.scrollIntoView({behavior:"smooth", block:"center"});
      fs.classList.add("need");
      setTimeout(()=>fs.classList.remove("need"),1600);
      return;
    }

    const mean = ids => ids.reduce((s,id)=>s+answers[id],0)/ids.length;
    const YO = mean(dims.YO);
    const IN = mean(dims.IN);
    const D  = YO - IN;

    render(YO, IN, D);
  }

  // åˆ†å²
  function classify(D){
    if (D >= +0.80) return "01";                  // é™½MAX
    if (D >= +0.30 && D < +0.80) return "02";     // ã‚„ã‚„é™½
    if (D >= -0.29 && D <= +0.29) return "03";    // ä¸­é–“
    if (D >  -0.79 && D <= -0.30) return "04";    // ã‚„ã‚„é™°
    if (D <= -0.80) return "05";                  // é™°MAX
    return "03";
  }

  function render(YO, IN, D){
    // æ•°å€¤ï¼ˆå°æ•°2æ¡ï¼‰
    const f2 = x => (Math.round(x*100)/100).toFixed(2);
    yoVal.textContent = f2(YO);
    inVal.textContent = f2(IN);
    const sign = D>=0?"+":"";
    dVal.textContent = sign + f2(D);

    // ãƒãƒ¼ï¼ˆ1â€“5â†’0â€“100ï¼‰
    const toPct = v => Math.max(0, Math.min(100, Math.round((v-1)/4*100)));
    yoBar.style.width = toPct(YO) + "%";
    inBar.style.width = toPct(IN) + "%";

    // ã‚¿ã‚¤ãƒ—
    const code = classify(D);
    const def = TYPE_DEF[code];
    typeLine.textContent = def.name;
    heroImg.src = IMG_BASE + def.img;
    heroImg.alt = def.alt;
    heroTitle.textContent = def.name;
    heroCopy.textContent = def.copy;

    // è¡¨ç¤ºåˆ‡æ›¿
    resEmpty.style.display = "none";
    resArea.style.display = "";
    document.getElementById("result").scrollIntoView({behavior:"smooth", block:"start"});
    document.dispatchEvent(new Event('result:ready'));
    try{
      localStorage.setItem("specimens:last", JSON.stringify({ id: SLUG, title: TITLE, href: location.pathname }));
    }catch(e){}
  }

  // ã‚¯ãƒªã‚¢
function clearAnswers(){
  qWrap.querySelectorAll('input[type="radio"]').forEach(el=>el.checked=false);
  wipeAnswers();
  prog.style.width = "0%";
  resEmpty.style.display = "";
  resArea.style.display = "none";
  document.getElementById("app").scrollIntoView({behavior:"smooth", block:"start"});
}

  // åˆæœŸåŒ–
  buildQuestions();
  restoreAnswers();   // â† ã¾ãšå¾©å…ƒ
  updateProgress();   // â† é€²æ—ãƒãƒ¼ã‚‚åæ˜ 
  document.getElementById("doScore").addEventListener("click", score);
  document.getElementById("doScore2").addEventListener("click", score);
  document.getElementById("clearAns").addEventListener("click", clearAnswers);
  document.getElementById("backLink")?.addEventListener("click", ()=>{
    try{
      localStorage.setItem("specimens:last", JSON.stringify({ id: SLUG, title: TITLE, href: location.pathname }));
    }catch(e){}
  });
})();
</script>
<script>
/* ã“ã“ã‚Lv/æ¸ˆã‚«ã‚¦ãƒ³ãƒˆï¼ˆçµæœæç”»ã®åˆå›³ã§ä¸€åº¦ã ã‘ï¼‰ */
(function(){
  'use strict';
  var DONE_KEY    = 'specimens:open:byid';
  var TOTAL_KEY   = 'specimens:open:total';
  var GLOBAL_LAST = 'specimens:open:global:last';
  var MY_ID = (document.body && document.body.getAttribute('data-id')) || 'unknown';
  var COUNTAPI_NS  = 'haisuikounozarigani_shindan';
  var COUNTAPI_KEY = 'specimens_open_total';
  function hitEveryone(){
    var url = 'https://api.countapi.xyz/hit/'+COUNTAPI_NS+'/'+COUNTAPI_KEY;
    if(navigator.sendBeacon){ try{ navigator.sendBeacon(url); }catch(_){ }
    }else{ fetch(url, {mode:'cors', cache:'no-store', keepalive:true}).catch(function(){}); }
  }
  var marked=false;
  function markOnce(){
    if(marked) return; marked=true;
    try{
      localStorage.setItem(TOTAL_KEY, String((+localStorage.getItem(TOTAL_KEY)||0)+1));
      var map={}; try{ map=JSON.parse(localStorage.getItem(DONE_KEY)||'{}'); }catch(_){}
      map[MY_ID]=(map[MY_ID]||0)+1;
      localStorage.setItem(DONE_KEY, JSON.stringify(Object.assign({},map,{_ts:Date.now()})));
      hitEveryone();
      try{ localStorage.setItem(GLOBAL_LAST, String((+localStorage.getItem(GLOBAL_LAST)||0)+1)); }catch(_){}
    }catch(_){}
  }
  document.addEventListener('result:ready', markOnce);
  setTimeout(markOnce, 2000);
})();
</script>
</body>
</html>