<!-- /shindan/valentine-sweetness.html -->
<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³è¨ºæ–­ï½œäººã¸ã®ç”˜ã•ï¼ˆãƒ“ã‚¿ãƒ¼ã€œãƒ•ã‚©ãƒ³ãƒ‡ãƒ¥ï¼‰</title>
<meta name="description" content="å„ªã—ã•ã ã‘ã˜ã‚ƒãªã„ã€‚å¯›å®¹ã•ãƒ»å¢ƒç•Œã®ã‚†ã‚‹ã•ãƒ»ã²ã„ãç™–ã¾ã§ã¾ã¨ã‚ã¦æ¸¬ã‚‹ã€äººã¸ã®ç”˜ã•ã€ãƒ†ã‚¹ãƒˆã€‚çµæœã¯ãƒãƒ§ã‚³ã®è‹¦ç”˜ã§æ“¬äººåŒ–ï¼ˆ5æ®µéšï¼‰ã€‚">
<meta name="theme-color" content="#fff7fd">

<!-- OG -->
<meta property="og:type" content="website">
<meta property="og:title" content="ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³è¨ºæ–­ï½œäººã¸ã®ç”˜ã•">
<meta property="og:description" content="å„ªã—ã•ï¼‹å¯›å®¹ï¼‹å¢ƒç•Œï¼‹ã²ã„ãã€‚ã‚ãªãŸã®ã€ç”˜ã•ã®å‡ºæ–¹ã€ã‚’ãƒãƒ§ã‚³ã®è‹¦ç”˜ã§5æ®µéšã«ã€‚">
<meta property="og:url" content="https://haisuikounozarigani.github.io/shindan/valentine-sweetness.html">
<meta property="og:image" content="https://haisuikounozarigani.github.io/shindan/assets/results/valentine-sweetness/t00.webp">

<style>
:root{
  --bg:#fdf7ff;
  --paper:#fff;
  --ink:#201322;
  --muted:#6a5b70;
  --line:#ece3f5;
  --accent:#8c6bff;
  --accent2:#ff8fc7;
  --good:#1d8f6e;
  --warn:#b04a2f;
}
html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);
  font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans JP","Hiragino Sans","Yu Gothic",Meiryo,sans-serif;
  -webkit-text-size-adjust:100%;
  text-size-adjust:100%;
}
a{color:#5b2ea8;text-decoration:none}
.wrap{max-width:980px;margin:0 auto;padding:16px}
header.hd{
  background:linear-gradient(160deg,#fff7fd,#f3ecff);
  border-bottom:1px solid var(--line);
}
header.hd .wrap{padding:20px 16px 10px}
.ttl{
  font-weight:900;font-size:1.35rem;letter-spacing:.02em;
  display:flex;gap:10px;align-items:center;flex-wrap:wrap;
}
.sub{color:var(--muted);font-size:.95rem}

/* ãƒ©ãƒ³ã‚¯ãƒãƒƒã‚¸ï¼ˆãƒ˜ãƒƒãƒ€ï¼‰ */
.rank{
  display:inline-flex;align-items:center;gap:6px;
  padding:.2em .75em;border-radius:999px;
  background:#f3e9ff;color:#4b266e;font-weight:850;font-size:.85rem;
}

/* å›ºå®šé€²æ—ãƒãƒ¼ */
.progress-fixed{
  position:sticky;top:0;z-index:20;
  height:8px;background:var(--line)
}
.progress-bar{
  height:100%;border-radius:6px;
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  transition:width .2s ease
}
[role="progressbar"]{width:100%}

/* ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼ˆæ­£æ–¹å½¢å›ºå®šï¼‰ */
figure.hero{
  margin:12px 0;border:1px solid var(--line);
  border-radius:16px;overflow:hidden;background:#fff;
}
figure.hero img{
  display:block;width:100%;
  aspect-ratio:1/1;object-fit:cover;
}

/* å…±é€šã‚«ãƒ¼ãƒ‰ */
.paper{
  background:var(--paper);
  border:1px solid var(--line);
  border-radius:16px;
  padding:16px;
  margin:14px 0;
}

/* ãƒ—ãƒ­ãƒ­ãƒ¼ã‚° */
#prologue h2{margin-top:0;font-size:1.1rem}
#prologue p{margin:.45rem 0;color:var(--muted)}
#prologue .note{color:var(--muted);font-size:.9rem}
.start-btn{
  margin-top:12px;width:100%;
  padding:12px 16px;border-radius:999px;border:0;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#1b0f1c;font-weight:900;letter-spacing:.03em;
  cursor:pointer;box-shadow:0 10px 20px rgba(140,107,255,.18);
  display:inline-flex;align-items:center;justify-content:center;gap:8px;
}
.start-btn span.emo{font-size:1.2rem}

/* è³ªå• */
.qhead{display:flex;justify-content:space-between;align-items:center;gap:8px}
.qnum{font-weight:900;color:#4c2b5f}
.qtag{
  font-size:.8rem;color:#7a6c86;
  padding:2px 8px;border-radius:999px;
  border:1px solid var(--line);
  background:#f9f3ff;
  display:inline-flex;align-items:center;gap:4px;
}
.qtext{margin:.65rem 0 1rem;font-weight:850}
.opts{display:grid;grid-template-columns:1fr;gap:8px}
.btn{
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  padding:12px 14px;border:1px solid var(--line);
  border-radius:12px;background:#fff;cursor:pointer;transition:.12s;
}
.btn[aria-pressed="true"]{outline:2px solid var(--accent2);background:#fff4fa}
.btn:hover{transform:translateY(-1px)}
.btn-label{font-weight:850}
.opt-note{color:#8b7b93;font-size:.9rem;white-space:nowrap}
.ctrls{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
.ctrls button{
  padding:10px 14px;border-radius:10px;border:1px solid var(--line);
  background:#faf5ff;cursor:pointer;font-weight:800;
}
.ctrls button:disabled{opacity:.55;cursor:not-allowed}

/* çµæœ */
.result{display:none}
.flex{display:flex;gap:16px;flex-wrap:wrap}
.result .imgbox{flex:1 1 280px;min-width:260px}
.result .imgbox img{
  width:100%;aspect-ratio:1/1;object-fit:cover;
  border-radius:14px;border:1px solid var(--line);display:block;
}
.result .text{flex:2 1 360px;min-width:300px}
.badge-line{display:flex;flex-wrap:wrap;gap:6px;align-items:center;margin:.2rem 0 .55rem}
.badge-pill{
  display:inline-flex;align-items:center;gap:6px;
  padding:3px 10px;border-radius:999px;background:#fff1fb;font-size:.85rem;
  border:1px solid rgba(236,227,245,.9);
}
.badge-pill.red{background:#fff2f2;border-color:#ffd2d2}
.badge-pill.blue{background:#f2f7ff;border-color:#d6e6ff}
.badge-pill.gold{background:#fff8e8;border-color:#ffe2a9}
.result-title-main{margin:.1rem 0 0}
.result-title-sub{margin:.15rem 0 .8rem;font-size:.9rem;color:var(--muted)}
.result-comment{
  margin:.35rem 0 .9rem;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid var(--line);
  background:linear-gradient(180deg,#fff,#fff6fb);
}
.result-comment p{margin:.25rem 0;color:#5a3a4f}
.result-comment .rc-ttl{font-weight:950;color:#3a2433}
.result-small{margin:.35rem 0 0;color:var(--muted);font-size:.88rem}

/* âœ… ä»Šæ—¥ã®ä¸€æ‰‹ï¼šå›²ã„ */
.today-box{
  margin:.9rem 0 .2rem;
  padding:12px 12px 10px;
  border-radius:16px;
  border:1px solid rgba(140,107,255,.35);
  background:linear-gradient(135deg, rgba(140,107,255,.14), rgba(255,143,199,.12));
  box-shadow:0 10px 22px rgba(140,107,255,.12);
}
.today-head{
  display:inline-flex;align-items:center;gap:8px;
  font-weight:950;color:#2b1830;
  padding:2px 10px;border-radius:999px;
  background:rgba(255,255,255,.75);
  border:1px solid rgba(236,227,245,.9);
}
.today-text{margin:.55rem 0 0;font-weight:850;color:#2b1830}

/* å› å­ãƒãƒ¼ */
.bars{display:grid;grid-template-columns:1fr;gap:10px;margin-top:10px}
.bar{background:transparent;border-radius:10px;padding:4px 0 6px}
.bar .h{
  display:flex;justify-content:space-between;align-items:center;
  padding:2px 10px 4px;font-size:.9rem
}
.bar .h span:first-child{font-weight:850}
.bar .track{
  margin:0 10px 4px;height:10px;border-radius:999px;background:#f3e9ff;overflow:hidden;
  border:1px solid var(--line);
}
.bar .fill{
  height:100%;width:0%;
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  border-radius:inherit;transition:width .25s ease-out;
}
.bar-desc{padding:0 10px 2px;font-size:.8rem;color:var(--muted)}

/* å‰å›å›ç­” */
.prev-list{list-style:none;padding-left:0;margin:.4rem 0 .2rem .9rem}
.prev-item{
  display:flex;gap:8px;align-items:flex-start;
  padding:6px 0;border-bottom:1px solid var(--line);
}
.prev-q{
  flex:1;min-width:0;
  display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;
  overflow:hidden;overflow-wrap:anywhere;
}
.prev-a{
  flex:0 0 auto;white-space:nowrap;
  border:1px solid var(--line);border-radius:999px;padding:2px 8px;
  font-size:.9rem;background:#faf5ff;
}

/* ã‚®ãƒ£ãƒ©ãƒªãƒ¼ */
.gallery{margin-top:2px;display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;}
.gallery figure{
  margin:0;border:1px solid var(--line);border-radius:12px;background:#fff;
  padding:6px;text-align:center;font-size:.85rem;color:var(--muted);
  display:flex;flex-direction:column;gap:4px;
}
.gallery img{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:8px;display:block}

/* æŠ˜ã‚ŠãŸãŸã¿ */
.fold-card{
  margin:10px 0 8px;padding:8px 10px;border-radius:12px;
  border:1px solid var(--line);background:#fff;color:var(--muted);font-size:.9rem;
}
.fold-card summary{
  cursor:pointer;list-style:none;font-weight:850;
  display:flex;align-items:center;justify-content:space-between;
}
.fold-card[open]{background:#fdf7ff;box-shadow:0 3px 8px rgba(0,0,0,.03)}
.fold-card[open] summary{margin-bottom:6px}

/* ç ”ç©¶ãƒ¡ãƒ¢ */
/* =====================================================
   Research Notes (valentine) â€” readability-first
   summary ã¯è§¦ã‚‰ãªã„ / rm-headæœ€å°è£…é£¾ / rm-tagéãƒãƒƒãƒ— / rm-numå¼·èª¿
   ===================================================== */

#researchNotes{
  --ink:#1f1724;
  --sub:rgba(31,23,36,.84);
  --mute:rgba(31,23,36,.62);
  --line:rgba(31,23,36,.12);
  --soft:rgba(140,107,255,.08);
  --soft2:rgba(255,143,199,.08);
}

/* list layout */
#researchNotes .rm-list{
  margin:0;
  padding:14px;
  list-style:none;
  display:grid;
  grid-template-columns:1fr;
  gap:12px;
}

/* item card: quiet base */
#researchNotes .rm-item{
  background:#fff;
  border:1px solid var(--line);
  border-radius:14px;
  padding:14px 14px 12px;
  box-shadow:0 10px 22px rgba(0,0,0,.05);
}

/* head: minimal but clear (accent bar + subtle underline) */
#researchNotes .rm-head{
  position:relative;
  margin:0 0 8px;
  padding:0 0 8px 12px; /* left for bar + bottom for underline */
  color:var(--ink);
  font-weight:950;
  font-size:1.06rem;
  line-height:1.35;
  letter-spacing:.01em;
}
#researchNotes .rm-head::before{
  content:"";
  position:absolute;
  left:0;
  top:.20em;
  width:4px;
  height:1.05em;
  border-radius:999px;
  background:linear-gradient(180deg,var(--accent,#8c6bff),var(--accent2,#ff8fc7));
  opacity:.95;
}
#researchNotes .rm-head::after{
  content:"";
  position:absolute;
  left:12px;
  right:0;
  bottom:0;
  height:1px;
  background:linear-gradient(90deg, rgba(31,23,36,.14), rgba(31,23,36,0));
}

/* tag: not a chip (avoid â€œbumpyâ€ look) */
#researchNotes .rm-tag{
  display:block;
  margin:0 0 10px;
  padding:0 0 0 12px; /* align with head text */
  border:none;
  background:transparent;
  color:var(--mute);
  font-weight:800;
  font-size:.86rem;
  line-height:1.45;
}
#researchNotes .rm-tag::before{
  content:"";
}

/* body: stable reading rhythm */
#researchNotes .rm-body{
  margin:0 0 12px;
  padding-left:12px;
  color:var(--sub);
  font-size:.98rem;
  line-height:1.70;
}

/* num: the only highlighted block (effect sizes etc.) */
#researchNotes .rm-num{
  margin:0;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid rgba(140,107,255,.20);
  background:linear-gradient(180deg, var(--soft), var(--soft2));
  color:var(--ink);
  font-weight:950;
  line-height:1.50;
  box-shadow:0 8px 16px rgba(140,107,255,.08);
}
#researchNotes .rm-num::before{
  content:"ğŸ“Œ ";
}

/* remove any legacy li separators */
#researchNotes ul li + li{
  border-top:none !important;
  padding-top:0 !important;
  margin-top:0 !important;
}

/* two columns only on wide screens */
@media (min-width:900px){
  #researchNotes .rm-list{ grid-template-columns:1fr 1fr; }
}
/* rm-item ã®ä½™ç™½ã‚’ç¢ºå®Ÿã«çµ±ä¸€ï¼ˆä¸Šæ›¸ãè² ã‘å¯¾ç­–ï¼‰ */
#researchNotes #researchList > .rm-item{
  padding:16px 14px 12px !important; /* ä¸Š å³å·¦ ä¸‹ */
}

/* é¡ŒåãŒè©°ã¾ã‚‹ãªã‚‰ã€è¦‹å‡ºã—å´ã«ã‚‚å°‘ã—ã ã‘ä¸Šä½™ç™½ */
#researchNotes #researchList > .rm-item .rm-head{
  margin-top:2px !important;
}
.meta-note{
  margin-top:8px;padding:8px 10px;border-radius:12px;
  border:1px solid var(--line);background:#fdf7ff;color:var(--muted);font-size:.9rem;
}
.meta-note summary{
  cursor:pointer;list-style:none;font-weight:850;
  display:flex;align-items:center;justify-content:space-between;
}
.meta-note[open]{background:#fff}
.meta-note ul{margin:.5rem 0 0 1.1rem;padding-left:0}
.meta-note ul li + li{margin-top:10px;padding-top:6px;border-top:1px dashed var(--line)}

/* ãƒ•ãƒƒã‚¿ */
.meta{color:#7a6c86;font-size:.92rem;clear:both;margin-top:.6rem}
.back-row{display:flex;gap:10px;flex-wrap:wrap;margin:12px 0 6px;}
.back{
  flex:1 1 220px;
  display:inline-flex;align-items:center;justify-content:center;gap:8px;
  padding:12px 16px;border-radius:999px;
  border:1px solid var(--line);background:#fff;color:var(--ink);
  font-weight:900;letter-spacing:.02em;cursor:pointer;
  font-size:1rem;
  box-shadow:0 12px 24px rgba(140,107,255,.14);
  transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;
}
.back:hover{transform:translateY(-1px);box-shadow:0 16px 30px rgba(140,107,255,.18);border-color:#ead9f2}
.back:active{transform:translateY(0);box-shadow:0 10px 20px rgba(140,107,255,.14)}
.back:focus-visible{outline:3px solid rgba(182,156,255,.35);outline-offset:3px}
.back-primary{
  border:0;background:linear-gradient(135deg,var(--accent),var(--accent2));
  color:#1b0f1c;box-shadow:0 14px 28px rgba(140,107,255,.22);
}
.back-ghost{background:linear-gradient(180deg,#fff,#fff6fb)}
.back .chev{
  display:inline-grid;place-items:center;width:22px;height:22px;border-radius:999px;
  background:rgba(182,156,255,.18);color:rgba(32,19,34,.75);
  font-size:1.15rem;line-height:1;
}

/* âœ…ã ã‘ã®ãƒˆãƒ¼ã‚¹ãƒˆ */
.mini-toast{
  position:fixed;left:50%;bottom:24px;
  transform:translateX(-50%) translateY(20px);
  opacity:0;background:#4c2b5f;color:#fff;
  padding:8px 12px;border-radius:999px;
  font-size:1.1rem;transition:.25s;z-index:40;
}
.mini-toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

/* å°ç”»é¢ */
@media (max-width:600px){
  header.hd .wrap{padding:16px 12px 8px}
  .paper{padding:14px 12px}
}
</style>
</head>

<body data-id="valentine-sweetness">
<header class="hd" role="banner">
  <div class="wrap">
    <div class="ttl">
      <span aria-hidden="true">ğŸ«</span>
      <span id="pageTitle">ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³è¨ºæ–­ï½œäººã¸ã®ç”˜ã•</span>
      <span class="rank" aria-label="ç¾åœ¨ã®ãƒ©ãƒ³ã‚¯">
        <span aria-hidden="true">ğŸ§©</span><span>æœªåˆ¤å®š</span>
      </span>
    </div>
    <div class="sub" id="pageSub">
      å„ªã—ã•ã ã‘ã˜ã‚ƒãªã„ã€‚ã€Œå¯›å®¹ã€ã€Œæ–­ã‚Œãªã•ã€ã€Œèº«å†…ã³ã„ãã€ã€Œæ¨ã—å„ªé‡ã€ã¾ã§ã€ç”˜ã•ã®ã‚¯ã‚»ã‚’ã®ããã€‚
    </div>
  </div>
</header>

<!-- å›ºå®šé€²æ—ãƒãƒ¼ -->
<div class="progress-fixed" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
  <div class="progress-bar" style="width:0%"></div>
</div>

<main class="wrap" id="app" role="main" aria-live="polite">

  <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼ˆt00.webpï¼‰ -->
  <figure class="hero">
    <img id="heroImg" src="/shindan/assets/results/valentine-sweetness/t00.webp" alt="ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³è¨ºæ–­ã®ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ" loading="lazy">
  </figure>

  <!-- ãƒ—ãƒ­ãƒ­ãƒ¼ã‚° -->
  <section id="prologue" class="paper" aria-label="ãƒ—ãƒ­ãƒ­ãƒ¼ã‚°">
    <h2 id="proTitle">ãƒ—ãƒ­ãƒ­ãƒ¼ã‚°ï¼šãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³å‰ã€æƒ…ç·’ãŒã¡ã‚‡ã£ã¨èª²é‡‘ã•ã‚Œã‚‹</h2>
<p id="proLine1">ãƒãƒ¬ãƒ³ã‚¿ã‚¤ãƒ³ãŒè¿‘ã¥ãã¨ã€ãªãœã‹èƒ¸ãŒè½ã¡ç€ã‹ãªã„ã€‚äºˆå®šãŒãªãã¦ã‚‚â€¦</p>
<p id="proLine2">è´ˆã‚‹å´ã¯ã€Œä½•ãŒæ­£è§£ï¼Ÿã€ã§è¿·ã„ã€å—ã‘ã‚‹å´ã¯ã€Œæ¥ã‚‹ï¼Ÿæ¥ãªã„ï¼Ÿã€ã§è½ã¡ç€ã‹ãªã„ã€‚ã©ã£ã¡ã§ã‚‚ãªã„äººã¾ã§ã€ãªãœã‹ã‚½ãƒ¯ã‚½ãƒ¯ã™ã‚‹ã€‚å­£ç¯€ã‚¤ãƒ™ãƒ³ãƒˆã€æƒ…ç·’ã«èª²é‡‘ã—ã¦ãã‚‹ã€‚</p>
<p id="proLine3">ã“ã®è¨ºæ–­ã¯ã€äººé–“ã®ç”˜ã•ã‚’æ¸¬ã‚‹ãƒ†ã‚¹ãƒˆã§ã™ã€‚</p>
    <p class="note">â€»æ·±åˆ»ãªè¨ºæ–­ã§ã¯ãªãã€å¯¾äººã®ã‚¯ã‚»ã‚’ã‚†ã‚‹ãè¦‹ã¤ã‘ã‚‹ãŸã‚ã®ãƒ†ã‚¹ãƒˆã§ã™ã€‚</p>
    <button type="button" id="startBtn" class="start-btn" aria-label="è¨ºæ–­ã‚’å§‹ã‚ã‚‹">
      <span class="emo">ğŸ«</span><span id="startLabel">ãƒãƒ§ã‚³ã«æººã‚Œã‚‹</span>
    </button>
  </section>

  <!-- è³ªå•ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆåˆæœŸã¯éè¡¨ç¤ºï¼‰ -->
  <section id="quiz" class="paper" aria-label="è³ªå•ã‚»ã‚¯ã‚·ãƒ§ãƒ³" style="display:none">
    <div class="qhead">
      <div class="qnum" id="qnum">Q1/24</div>
      <div class="qtag" id="qtag"><span aria-hidden="true">ğŸ”–</span><span>ãƒã‚§ãƒƒã‚¯</span></div>
    </div>
    <div class="qtext" id="qtext">â€¦</div>
    <div class="opts" id="opts" role="group" aria-label="å›ç­”ã‚’é¸æŠ"></div>

    <div class="ctrls">
      <button type="button" id="prevBtn" aria-label="å‰ã®è¨­å•ã¸æˆ»ã‚‹">ã‚‚ã©ã‚‹</button>
    </div>
  </section>

  <!-- çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <section id="result" class="paper result" aria-label="çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³">
    <h2 style="margin-top:0">çµæœ</h2>

    <div class="flex">
      <div class="imgbox">
        <img id="resultImg" src="" alt="" loading="lazy">
      </div>
      <div class="text">
        <div class="badge-line" id="badgeLine">
          <span class="badge-pill" id="gradeBadge"><span aria-hidden="true">ğŸ§©</span><span>æœªåˆ¤å®š</span></span>
          <span class="badge-pill" id="scoreBadge">ã‚¹ã‚³ã‚¢ â€”ç‚¹</span>
          <!-- ã“ã“ã«ã‚¿ã‚°ï¼ˆèµ¤/é’/é‡‘ï¼‰ã‚’è¿½åŠ  -->
        </div>

        <h3 class="result-title-main" id="resultTitle">â€”</h3>
        <p class="result-title-sub" id="resultSubtitle">â€”</p>

        <div class="result-comment" id="resultComment" aria-label="çµæœã‚³ãƒ¡ãƒ³ãƒˆ">
          <p class="rc-ttl">â€”</p>
          <p>â€”</p>
        </div>

        <div class="today-box" aria-label="ä»Šæ—¥ã®ä¸€æ‰‹">
          <div class="today-head"><span aria-hidden="true">ğŸ“</span><span>ä»Šæ—¥ã®ä¸€æ‰‹</span></div>
          <div class="today-text" id="todayText">â€”</div>
        </div>

        <p class="result-small" id="resultSmall"></p>

        <!-- å› å­ãƒãƒ¼ -->
        <div class="bars" id="bars" aria-label="å› å­ãƒãƒ¼"></div>
      </div>
    </div>

    <!-- å‰å›ã®å›ç­”ï¼ˆä¸€è¦§ï¼‰ -->
    <details id="prevBlock" class="fold-card">
      <summary>ğŸ“ å‰å›ã®å›ç­”ï¼ˆä¸€è¦§ï¼‰<span aria-hidden="true">â–¾</span></summary>
      <ul id="prevList" class="prev-list"></ul>
    </details>

    <!-- ã‚®ãƒ£ãƒ©ãƒªãƒ¼ï¼ˆt01ã€œt05ï¼‰ -->
    <details id="galleryBlock" class="fold-card">
      <summary>ğŸ–¼ ãƒ©ãƒ³ã‚¯ã®ã‚®ãƒ£ãƒ©ãƒªãƒ¼<span aria-hidden="true">â–¾</span></summary>
      <div class="gallery" id="gallery"></div>
    </details>

    <!-- ç ”ç©¶ãƒ¡ãƒ¢ -->
    <details class="meta-note" id="researchNotes">
  <summary>ğŸ“š ç ”ç©¶ãƒ¡ãƒ¢<span aria-hidden="true">â–¾</span></summary>

  <ul id="researchList" class="rm-list">
    <li class="rm-item">
      <div class="rm-head">ä¸€èˆ¬çš„ä¿¡é ¼ãŒé«˜ã„ã¨é¨™ã•ã‚Œã«ãã„</div>
      <span class="rm-tag">å®Ÿé¨“ç ”ç©¶ / æˆäºº ç´„30äººï¼ˆåˆ¥å ±å‘Šã§ç´„40ã€œ50äººè¦æ¨¡ã‚‚ï¼‰</span>
      <div class="rm-body">
        ä¸€èˆ¬çš„ä¿¡é ¼ï¼ˆã€Œäººã¯åŸºæœ¬å–„ã ã¨æ€ãˆã‚‹ã€ï¼‰ãŒé«˜ã„äººã»ã©ã€ç›¸æ‰‹ã®ã‚¦ã‚½ã‚„ã”ã¾ã‹ã—ã‚’è¦‹æŠœãèª²é¡Œã§æˆç¸¾ãŒè‰¯ã‹ã£ãŸã€ã¨ã„ã†å ±å‘Šã€‚
      </div>
      <div class="rm-num">åŠ¹æœï¼šã‚¦ã‚½æ¤œå‡ºæˆç¸¾â†‘</div>
    </li>

    <li class="rm-item">
      <div class="rm-head">è¦ªåˆ‡ãƒ»ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢ã¯ã‚¹ãƒˆãƒ¬ã‚¹ãƒ›ãƒ«ãƒ¢ãƒ³åå¿œã‚’å¼±ã‚ã‚‹</div>
      <span class="rm-tag">ç¸¦æ–­ï¼ˆæ—¥èªŒï¼‹ç”Ÿç†ï¼‰/ æˆäºº 340äºº</span>
      <div class="rm-body">
        ãã®æ—¥ã®ã‚¹ãƒˆãƒ¬ã‚¹ãŒé«˜ã„æ—¥ã§ã‚‚ã€ä»–äººã‚’åŠ©ã‘ã‚‹è¡Œå‹•ï¼ˆãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢ç­‰ï¼‰ãŒã‚ã‚‹ã¨ã€å”¾æ¶²ã‚³ãƒ«ãƒã‚¾ãƒ¼ãƒ«ã®ä¸ŠãŒã‚Šæ–¹ãŒç©ã‚„ã‹ã«ãªã£ãŸï¼ˆã‚¹ãƒˆãƒ¬ã‚¹â†’ãƒ›ãƒ«ãƒ¢ãƒ³ä¸Šæ˜‡ã®â€œå‚¾ãâ€ãŒå¼±ã¾ã‚‹ï¼‰ã€‚
      </div>
      <div class="rm-num">å¤‰åŒ–ï¼šä¿‚æ•° bâ‰ˆâˆ’0.08ï¼ˆä¸Šæ˜‡ã®å‚¾ããŒå¼±ã¾ã‚‹æ–¹å‘ï¼‰</div>
    </li>

    <li class="rm-item">
      <div class="rm-head">è¦ªåˆ‡ï¼ˆä¸ãˆã‚‹è¡Œç‚ºï¼‰ä»‹å…¥ã§å¹¸ç¦æ„ŸãŒä¸ŠãŒã‚‹</div>
      <span class="rm-tag">ãƒ¡ã‚¿åˆ†æ / ç·è¨ˆ ç´„4,045äºº</span>
      <div class="rm-body">
        è¦ªåˆ‡è¡Œå‹•ï¼ˆkindnessï¼‰ã‚’æ„å›³çš„ã«å¢—ã‚„ã™ä»‹å…¥ã¯ã€å¹³å‡ã™ã‚‹ã¨å¹¸ç¦æ„Ÿã‚’æŠ¼ã—ä¸Šã’ã‚‹ã€‚æ´¾æ‰‹ãªä¸€ç™ºé€†è»¢ã¨ã„ã†ã‚ˆã‚Šâ€œå°ã•ã‚ã®ä¸Šã’å¹…ãŒç©ã¿ä¸ŠãŒã‚‹â€ã‚¿ã‚¤ãƒ—ã€‚
      </div>
      <div class="rm-num">åŠ¹æœé‡ï¼šÎ´â‰ˆ0.28ï¼ˆå°ã€œä¸­ç¨‹åº¦ï¼‰</div>
    </li>

    <li class="rm-item">
      <div class="rm-head">ç”˜ã„ã‚‚ã®å¥½ãã»ã©å”èª¿æ€§ãŒé«˜ã„</div>
      <span class="rm-tag">æ¨ªæ–­ç ”ç©¶ / ç´„55äºº</span>
      <div class="rm-body">
        ã€Œç”˜ã„å‘³ãŒå¥½ãã€ã¨ç­”ãˆã‚‹ã»ã©ã€å”èª¿æ€§ï¼ˆAgreeablenessï¼‰ãŒé«˜ã„å‚¾å‘ãŒç¤ºã•ã‚ŒãŸå ±å‘Šã€‚
      </div>
      <div class="rm-num">é–¢é€£ï¼šç›¸é–¢ râ‰ˆ0.36</div>
    </li>

    <li class="rm-item">
      <div class="rm-head">ç”˜ã„ãŠè“å­ã‚’é£Ÿã¹ã‚‹ã¨è¦ªåˆ‡è¡Œå‹•ãŒå¢—ãˆã‚‹</div>
      <span class="rm-tag">å®Ÿé¨“ç ”ç©¶ / æˆäººï¼ˆè¤‡æ•°å®Ÿé¨“ï¼‰</span>
      <div class="rm-body">
        ç”˜ã„å‘³ã‚’ä½“é¨“ã—ãŸæ¡ä»¶ã®æ–¹ãŒã€æ´åŠ©ãƒ»è¦ªåˆ‡è¡Œå‹•ï¼ˆæ‰‹ä¼ã†ã€ä¸ãˆã‚‹ãªã©ï¼‰ã®æŒ‡æ¨™ãŒä¸ŠãŒã£ãŸã€ã¨ã„ã†å ±å‘ŠãŒã‚ã‚‹ã€‚
      </div>
      <div class="rm-num">åŠ¹æœï¼šæ´åŠ©è¡Œå‹•â†‘ï¼ˆæ¡ä»¶å·®ã¨ã—ã¦å ±å‘Šã•ã‚Œã‚‹ã‚¿ã‚¤ãƒ—ï¼‰</div>
    </li>

    <li class="rm-item">
      <div class="rm-head">ä¸€ç·’ã«ã‚¹ã‚¤ãƒ¼ãƒ„ï¼ˆé£Ÿäº‹å…±æœ‰ï¼‰ã§çµ†ãŒæ·±ã¾ã‚‹</div>
      <span class="rm-tag">å›½éš›å¤§è¦æ¨¡èª¿æŸ» / 142ã‹å›½ãƒ»åœ°åŸŸï¼ˆ2022â€“2023ï¼‰</span>
      <div class="rm-body">
        é£Ÿäº‹ã‚’èª°ã‹ã¨å…±æœ‰ã™ã‚‹é »åº¦ãŒé«˜ã„ã»ã©ã€ç”Ÿæ´»æº€è¶³åº¦ãŒé«˜ãã€ãƒã‚¸æ„Ÿæƒ…ãŒå¤šãã€ãƒã‚¬æ„Ÿæƒ…ãŒå°‘ãªã„ã€‚å›½ã‚„æ–‡åŒ–ãŒé•ã£ã¦ã‚‚é–¢é€£ã¯ã‹ãªã‚Šä¸€è²«ã€‚
      </div>
      <div class="rm-num">å¢—åˆ†ï¼šå…±æœ‰é£ŸãŒé€±1å›å¢—ãˆã‚‹â‰ˆç”Ÿæ´»è©•ä¾¡ +0.2ç‚¹ï¼ˆ0â€“10å°ºåº¦ã®ç›®å®‰ï¼‰</div>
    </li>

    <li class="rm-item">
      <div class="rm-head">ã‚³ã‚³ã‚¢ãƒ•ãƒ©ãƒãƒãƒ¼ãƒ«ã§è¨˜æ†¶èª²é¡ŒãŒã€Œ30ä»£ç›¸å½“ã€ã¸</div>
      <span class="rm-tag">äºŒé‡ç›²æ¤œRCT / 50â€“69æ­³ ç´„37äººï¼ˆä»‹å…¥ ç´„3ã‹æœˆï¼‰</span>
      <div class="rm-body">
        é«˜ãƒ•ãƒ©ãƒãƒãƒ¼ãƒ«ï¼ˆç´„900mg/æ—¥ç›¸å½“ï¼‰ã‚’ç¶šã‘ã‚‹ã¨ã€æ­¯çŠ¶å›ã«é–¢é€£ã™ã‚‹è¨˜æ†¶èª²é¡Œã®æˆç¸¾ãŒæ”¹å–„ã—ã€ã€ŒåŠ é½¢ã¶ã‚“ã‚’å·»ãæˆ»ã™ã€ã‚ˆã†ãªè¡¨ç¾ã§ç´¹ä»‹ã•ã‚ŒãŸã€‚
      </div>
      <div class="rm-num">å¤‰åŒ–ï¼šè¨˜æ†¶èª²é¡ŒãŒâ€œç´„30ä»£ç›¸å½“â€ã®æ°´æº–ã¸è¿‘ã¥ã„ãŸã¨ç´¹ä»‹ã•ã‚Œã‚‹</div>
    </li>

    <li class="rm-item">
      <div class="rm-head">85%ã‚«ã‚«ã‚ªã§ãƒã‚¬æ„Ÿæƒ…â†“ï¼‹è…¸å†…ç´°èŒãŒå¤‰åŒ–</div>
      <span class="rm-tag">RCT / 20â€“30ä»£ 48äººï¼ˆ85%:18 / 70%:16 / å¯¾ç…§:14ï¼‰ãƒ»3é€±é–“</span>
      <div class="rm-body">
        85%ã‚«ã‚«ã‚ªã‚’æ¯æ—¥é£Ÿã¹ãŸç¾¤ã§ã€ãƒã‚¬ãƒ†ã‚£ãƒ–æ„Ÿæƒ…ï¼ˆPANASç­‰ï¼‰ãŒä¸‹ãŒã£ãŸã€‚è…¸å†…ç´°èŒå¢ã®æŒ‡æ¨™å¤‰åŒ–ã‚‚è¦³å¯Ÿã•ã‚Œã€æ°—åˆ†ã®å¤‰åŒ–ã¨ä¸€ç·’ã«èªã‚‰ã‚Œã¦ã„ã‚‹ã€‚
      </div>
      <div class="rm-num">å¤‰åŒ–ï¼šãƒã‚¬æ„Ÿæƒ…â†“ï¼ˆp&lt;.05ï¼‰ï¼‹è…¸å†…æŒ‡æ¨™ã®å¤‰åŒ–ï¼ˆå·®ã®æ–¹å‘ï¼‰</div>
    </li>

    <li class="rm-item">
      <div class="rm-head">ãƒãƒ§ã‚³æ¶ˆè²»é‡ã¨ãƒãƒ¼ãƒ™ãƒ«è³ã«å¼·ã„ç›¸é–¢</div>
      <span class="rm-tag">ç›¸é–¢ç ”ç©¶ï¼ˆå›½åˆ¥ï¼‰/ 23ã‹å›½</span>
      <div class="rm-body">
        å›½ã”ã¨ã®ã€Œ1äººã‚ãŸã‚Šãƒãƒ§ã‚³æ¶ˆè²»é‡ã€ã¨ã€Œäººå£ã‚ãŸã‚Šãƒãƒ¼ãƒ™ãƒ«è³å—è³è€…æ•°ã€ãŒã€ã³ã£ãã‚Šã™ã‚‹ãã‚‰ã„ä¸€ç›´ç·šã«ä¸¦ã‚“ã ã€ã¨ã„ã†æœ‰åãƒã‚¿ç ”ç©¶ã€‚
      </div>
      <div class="rm-num">ç›¸é–¢ï¼šrâ‰ˆ0.79</div>
    </li>
  </ul>
</details>

    <p class="meta">â€»æœ¬ãƒšãƒ¼ã‚¸ã¯å¨¯æ¥½ï¼‹è‡ªå·±ç†è§£ã®è£œåŠ©ã‚’ç›®çš„ã¨ã—ãŸç°¡æ˜“ãƒ†ã‚¹ãƒˆã§ã™ã€‚ä½“èª¿ã‚„ä¸èª¿ãŒç¶šãå ´åˆã¯å°‚é–€æ©Ÿé–¢ã¸ã”ç›¸è«‡ãã ã•ã„ã€‚</p>

    <div class="back-row" aria-label="æ“ä½œãƒ¡ãƒ‹ãƒ¥ãƒ¼">
      <button type="button" class="back back-primary" id="restartBtn" aria-label="æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™">
        <span aria-hidden="true">ğŸ”</span><span>æœ€åˆã‹ã‚‰</span>
      </button>

      <a class="back back-ghost" href="/shindan/" aria-label="è¨ºæ–­ä¸€è¦§ã«æˆ»ã‚‹">
        <span aria-hidden="true">ğŸ§ª</span><span>è¨ºæ–­ä¸€è¦§ã¸</span><span class="chev" aria-hidden="true">â€º</span>
      </a>
    </div>
  </section>
</main>

<!-- âœ…ã ã‘ã®ãƒˆãƒ¼ã‚¹ãƒˆ -->
<div class="mini-toast" id="toast" role="status" aria-live="polite">âœ…</div>

<script>
/* ===== å›ºå®šé€²æ—ãƒãƒ¼ ===== */
function updateProgress(p){
  var bar = document.querySelector('.progress-bar');
  var wrap = document.querySelector('.progress-fixed');
  var val = Math.max(0,Math.min(100,p));
  if(bar) bar.style.width = val + '%';
  if(wrap) wrap.setAttribute('aria-valuenow', String(val));
}

/* ===== åŸºæœ¬è¨­å®š ===== */
const SLUG = 'valentine-sweetness';
const IMG_BASE = `/shindan/assets/results/${SLUG}/`;

/* ä¿å­˜ã‚­ãƒ¼ï¼ˆè¡çªå›é¿ï¼šSLUGã‚’å«ã‚ã‚‹ï¼‰ */
const LS_ANS     = `shindan:${SLUG}:answers`;
const LS_IDX     = `shindan:${SLUG}:index`;
const LS_LASTANS = `shindan:${SLUG}:lastAnswers`;

/* ===== å›ç­”ãƒ©ãƒ™ãƒ«ï¼ˆæ•°å­—ç¦æ­¢ï¼‰ ===== */
const LABELS = ['ãœã‚“ãœã‚“','ã‚ã¾ã‚Š','ã©ã¡ã‚‰ã¨ã‚‚','ã‚ã‚Šã¨','ã¨ã¦ã‚‚'];
function descFor(i){
  return ['ã»ã¼ãªã„','ã™ã“ã—','åŠã€…','ã‚ˆãã‚ã‚‹','ã¨ã¦ã‚‚ã‚ã‚‹'][i] || '';
}

/* =========================================================
  å› å­ï¼ˆ6ï¼‰ï¼† è¨­å•ï¼ˆ24ï¼‰ï¼† æ¡ç‚¹ï¼† çµæœæ–‡
========================================================= */
const FACTS = ['TRUST','BOUNDARY','REWARD','LOYALTY','FORGIVE','FAVOR'];
const FACT_LABEL = {
  TRUST:'åˆå‹•ã®ç”˜ã•',
  BOUNDARY:'å¢ƒç•Œã®ç”˜ã•',
  REWARD:'ã”è¤’ç¾ã®ç”˜ã•',
  LOYALTY:'å®ˆã‚Šã®ç”˜ã•',
  FORGIVE:'è¨±ã—ã®ç”˜ã•',
  FAVOR:'ç‰¹åˆ¥æ ã®ç”˜ã•'
};
const FACT_DESC = {
  TRUST:'åˆå¯¾é¢ã®è­¦æˆ’ã®ä½ã•ãƒ»æ¸©ã‹ã„å…¥ã‚Šæ–¹',
  BOUNDARY:'æ–­ã‚Œãªã•ãƒ»æŠ±ãˆè¾¼ã¿ã‚„ã™ã•ï¼ˆç·šå¼•ãï¼‰',
  REWARD:'è¤’ã‚ã‚‹/å·®ã—å…¥ã‚Œ/è´ˆã‚‹ã§ç©ºæ°—ã‚’ç”˜ãã™ã‚‹',
  LOYALTY:'èº«å†…ã‚„ä»²é–“ã‚’ã‹ã°ã†ãƒ»æƒ…ã§å®ˆã‚‹',
  FORGIVE:'ãƒŸã‚¹ã‚„é…ã‚Œã‚’æµã›ã‚‹ãƒ»å†ãƒãƒ£ãƒ³ã‚¹ã‚’å‡ºã™',
  FAVOR:'ã€Œã“ã®äººã ã‘ä¾‹å¤–ã€ã«ãªã‚Šã‚„ã™ã•ï¼ˆæ¨ã—å„ªé‡ï¼‰'
};

/* è¨­å•ï¼š6å› å­Ã—4ï¼ˆå„å› å­ã«é€†è»¢1å•ï¼‰ */
const QUESTIONS = [
  // TRUST
  {t:'åˆå¯¾é¢ã§ã‚‚ã€ç›¸æ‰‹ã®å–„æ„ã‚’å…ˆã«æƒ³å®šã—ã¦è©±ã›ã‚‹ã€‚', key:'TRUST'},
  {t:'åˆå¯¾é¢ã®äººã«ã‚‚ã€ã¤ã„ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã«è¿”ã—ã¦ã—ã¾ã†ã€‚', key:'TRUST'},
  {t:'ã€Œã¾ãšç–‘ã£ã¦ã‹ã‹ã‚‹ã€ã»ã†ãŒã€å®‰å¿ƒã ã¨æ€ã†ã€‚', key:'TRUST', reverse:true},
  {t:'ç›¸æ‰‹ãŒç·Šå¼µã—ã¦ã„ã‚‹ã¨ã€å…ˆã«å ´ã‚’æŸ”ã‚‰ã‹ãã—ãŸããªã‚‹ã€‚', key:'TRUST'},

  // BOUNDARY
  {t:'é ¼ã¾ã‚Œã‚‹ã¨ã€æ–­ã‚‹ã‚ˆã‚Šå¼•ãå—ã‘ã‚‹ã»ã†ãŒå…ˆã«å‡ºã‚‹ã€‚', key:'BOUNDARY'},
  {t:'å¼•ãå—ã‘ãŸå¾Œã«ã€Œã‚„ã£ã±ç„¡ç†ã‹ã‚‚ã€ã¨å¾Œæ‚”ã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚', key:'BOUNDARY'},
  {t:'ã€Œãã‚Œã¯ç„¡ç†ã€ã¨è¨€ã†ã®ã¯ã€ã‚ã‚Šã¨å¾—æ„ãªã»ã†ã ã€‚', key:'BOUNDARY', reverse:true},
  {t:'è‡ªåˆ†ã®äºˆå®šã‚ˆã‚Šã€ç›¸æ‰‹ã®éƒ½åˆã‚’å„ªå…ˆã—ã¦ã—ã¾ã„ãŒã¡ã€‚', key:'BOUNDARY'},

  // REWARD
  {t:'ã„ã„ã¨ã“ã‚ã‚’è¦‹ã¤ã‘ãŸã‚‰ã€è¨€è‘‰ã«ã—ã¦ä¼ãˆã‚‹ã“ã¨ãŒå¤šã„ã€‚', key:'REWARD'},
  {t:'å·®ã—å…¥ã‚Œã‚„ã¡ã‚‡ã£ã¨ã—ãŸè´ˆã‚Šç‰©ã§ã€ç©ºæ°—ã‚’è‰¯ãã—ãŸããªã‚‹ã€‚', key:'REWARD'},
  {t:'è¤’ã‚ã‚‹ã®ã¯å†…å¿ƒã ã‘ã§ã€å£ã«ã¯å‡ºã—ã«ãã„ã€‚', key:'REWARD', reverse:true},
  {t:'ç›¸æ‰‹ãŒè½ã¡è¾¼ã‚“ã§ã„ã‚‹ã¨ã€ä½•ã‹â€œã”è¤’ç¾â€ã‚’æ¸¡ã—ãŸããªã‚‹ã€‚', key:'REWARD'},

  // LOYALTY
  {t:'ä»²é–“ãŒè²¬ã‚ã‚‰ã‚Œã¦ã„ã‚‹ã¨ã€ã¾ãšå®ˆã‚‹å´ã«å›ã‚Šã‚„ã™ã„ã€‚', key:'LOYALTY'},
  {t:'èº«å†…ã®ãƒŸã‚¹ã¯ã€ä»–äººã®ãƒŸã‚¹ã‚ˆã‚Šè»½ãè¦‹ã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚‹ã€‚', key:'LOYALTY'},
  {t:'èº«å†…ã§ã‚‚ã€ç­‹ãŒé€šã‚‰ãªã„ãªã‚‰ãƒãƒƒã‚µãƒªåˆ‡ã‚‹ã€‚', key:'LOYALTY', reverse:true},
  {t:'ã€Œè‡ªåˆ†ã®é™£å–¶ã€ã‚’å®ˆã‚‹ã¨ãã€æƒ…ãŒåˆ¤æ–­ã«æ··ã–ã‚‹ã€‚', key:'LOYALTY'},

  // FORGIVE
  {t:'ãƒŸã‚¹ã‚„é…ã‚ŒãŒã‚ã£ã¦ã‚‚ã€æ¬¡ã«æ´»ã‹ã›ã°OKã¨æ€ã„ã‚„ã™ã„ã€‚', key:'FORGIVE'},
  {t:'ç›¸æ‰‹ãŒåçœã—ã¦ã„ã‚‹ãªã‚‰ã€ã‚‚ã†ä¸€å›ãƒãƒ£ãƒ³ã‚¹ã‚’å‡ºã›ã‚‹ã€‚', key:'FORGIVE'},
  {t:'ä¸€åº¦ã‚„ã‚‰ã‹ã—ãŸäººã¯ã€ã—ã°ã‚‰ãä¿¡ç”¨ã—ãªã„ã»ã†ã ã€‚', key:'FORGIVE', reverse:true},
  {t:'æ€’ã‚Šã‚’é•·ãæŒã¡ç¶šã‘ã‚‹ã‚ˆã‚Šã€åˆ‡ã‚Šæ›¿ãˆã‚‹ã»ã†ãŒå¤šã„ã€‚', key:'FORGIVE'},

  // FAVOR
  {t:'ã€Œã“ã®äººã ã‘ã¯ç‰¹åˆ¥ã€ãŒã€ã‚ã‚Šã¨ç™ºç”Ÿã™ã‚‹ã€‚', key:'FAVOR'},
  {t:'æ¨ã—/ãŠæ°—ã«å…¥ã‚Šç›¸æ‰‹ã«ã¯ã€åˆ¤æ–­ãŒç”˜ããªã‚Šã‚„ã™ã„ã€‚', key:'FAVOR'},
  {t:'èª°ã«å¯¾ã—ã¦ã‚‚åŒã˜åŸºæº–ã§æ¥ã™ã‚‹ã»ã†ã ã€‚', key:'FAVOR', reverse:true},
  {t:'ç›¸æ‰‹ã«ã‚ˆã£ã¦â€œè¨±å®¹ãƒ©ã‚¤ãƒ³â€ãŒå¤‰ã‚ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚', key:'FAVOR'}
];

/* 5æ®µéšãƒ©ãƒ³ã‚¯ï¼ˆã‚¹ã‚³ã‚¢å¸¯â†’t01ã€œt05ï¼‰ */
const GRADE_DEF = [
  {
    min:0, max:39, emo:'ğŸ–¤', label:'æ¥µãƒ“ã‚¿ãƒ¼', img:'t01.webp', alt:'æ¥µãƒ“ã‚¿ãƒ¼ï¼ˆã‚¯ãƒ¼ãƒ«ï¼‰',
    headline:'å•†å“åï¼šæ¥µãƒ“ã‚¿ãƒ¼ã€Œç„¡éŸ³ã®ã‚„ã•ã—ã•ã€',
    blurbStrong:'å£ã«å…¥ã‚ŒãŸç¬é–“ã€ç”˜ã•ã¯æ¥ãªã„ã€‚ä»£ã‚ã‚Šã«â€œç­‹ã®é€šã£ãŸå®‰å¿ƒâ€ãŒã˜ã‚ã£ã¨æ®‹ã‚‹ã€‚äººã‚’ãˆã“ã²ã„ãã—ãªã„ã‹ã‚‰ã€æ‰ã‚äº‹ã«å¼·ã„ã€‚',
    blurbPit:'ãŸã ã—ã€ã‚„ã•ã—ã•ãŒç„¡éŸ³ãªã®ã§ã€Œå«Œã‚ã‚ŒãŸï¼Ÿã€ã¨å‹˜é•ã„ã•ã‚Œã‚‹å‰¯ä½œç”¨ã‚ã‚Šã€‚',
    action:'ã²ã¨ç²’ã ã‘ç ‚ç³–ã‚’è¶³ã—ã¦ã€‚ã€ŒåŠ©ã‹ã£ãŸã€ã‚’å£°ã«å‡ºã™ã€‚'
  },
  {
    min:40, max:59, emo:'ğŸ«', label:'ãƒ“ã‚¿ãƒ¼å¯„ã‚Š', img:'t02.webp', alt:'ãƒ“ã‚¿ãƒ¼å¯„ã‚Šï¼ˆã‚¯ãƒ¼ãƒ«å¼·ã‚ï¼‰',
    headline:'å•†å“åï¼šãƒ“ã‚¿ãƒ¼å¯„ã‚Šã€Œæ¸©åº¦èª¿æ•´ã¤ãã€',
    blurbStrong:'æœ€åˆã¯ã‚«ã‚«ã‚ªãŒå‹ã¤ã€‚ã§ã‚‚ã€æ…£ã‚Œã¦ãã‚‹ã¨ç”˜ã•ãŒâ€œå¿…è¦ãªã¨ãã ã‘â€ã¡ã‚ƒã‚“ã¨å‡ºã‚‹ã€‚è·é›¢æ„ŸãŒä¸Šæ‰‹ã„ã‹ã‚‰ã€ç©ºæ°—ã‚‚è’ã‚Œã«ãã„ã€‚',
    blurbPit:'ãŸã ã€æ§˜å­è¦‹ãŒé•·ã„ã¨ã€ç›¸æ‰‹ãŒâ€œä»²è‰¯ããªã‚‹å‰ã«â€æ’¤é€€ã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚',
    action:'æ„Ÿè¬ã®å…ˆæ‰•ã„ã€‚ã€Œã‚ã‚ŠãŒã¨ã†ï¼‹å…·ä½“ã€ã‚’1å›ã€‚'
  },
  {
    min:60, max:74, emo:'ğŸ¥›', label:'ãƒŸãƒ«ã‚¯æ¨™æº–', img:'t03.webp', alt:'ãƒŸãƒ«ã‚¯æ¨™æº–ï¼ˆä¸­åº¸ï¼‰',
    headline:'å•†å“åï¼šãƒŸãƒ«ã‚¯æ¨™æº–ã€Œä¸‡èƒ½ãƒ¬ã‚®ãƒ¥ãƒ©ãƒ¼ã€',
    blurbStrong:'ç”˜ã•ã¨è‹¦ã•ã®ãƒãƒ©ãƒ³ã‚¹ãŒè‰¯ã„ã€‚ã©ã‚“ãªå ´é¢ã§ã‚‚å¤§äº‹æ•…ã«ãªã‚Šã«ãã„å„ªç­‰ç”Ÿã€‚ç›¸æ‰‹ã«åˆã‚ã›ã¦æº¶ã‘æ–¹ã‚’å¤‰ãˆã‚‰ã‚Œã‚‹ã€‚',
    blurbPit:'ãŸã ã—ã€èª¿æ•´ã—ã™ãã‚‹ã¨â€œã‚ãªãŸã®åˆ†â€ã ã‘è–„ã¾ã£ã¦ã€å¾Œã§ç–²ã‚ŒãŒæ¥ã‚‹ã€‚',
    action:'æ–­ã‚‹æ–‡ã‚’1ã¤å®šç•ªåŒ–ã€‚ã€Œä»Šã¯é›£ã—ã„ã€ã€‚'
  },
  {
    min:75, max:89, emo:'ğŸ¤', label:'ãƒ›ãƒ¯ã‚¤ãƒˆç”˜ã‚', img:'t04.webp', alt:'ãƒ›ãƒ¯ã‚¤ãƒˆç”˜ã‚ï¼ˆå¯æ„›ã„å„ªã—ãã†ï¼‰',
    headline:'å•†å“åï¼šãƒ›ãƒ¯ã‚¤ãƒˆç”˜ã‚ã€Œå®‰å¿ƒæ„Ÿã®é…å¸ƒç”¨ã€',
    blurbStrong:'é–‹å°ã—ãŸç¬é–“ã‹ã‚‰ç”˜ã„ã€‚å ´ãŒæŸ”ã‚‰ã‹ããªã‚‹ã€‚å›°ã£ã¦ã‚‹äººã‚’è¦‹ã‚‹ã¨ã€æ‰‹ãŒå…ˆã«å‹•ãã‚¿ã‚¤ãƒ—ã®ãƒãƒ§ã‚³ã€‚',
    blurbPit:'ã§ã‚‚ã€æ–­ã‚Œãªã„ã¾ã¾æº¶ã‘ç¶šã‘ã‚‹ã¨ã€ã‚ãªãŸã®äºˆå®šãŒæ¶ˆãˆã¦ã„ãæ³¨æ„æ›¸ãä»˜ãã€‚',
    action:'è¿”äº‹ã®å‰ã«3ç§’ã€‚ã€Œä»Šã¯é›£ã—ã„ã€ã‚’å…ˆã«ç½®ãã€‚'
  },
  {
    min:90, max:100, emo:'ğŸ“', label:'ãƒ•ã‚©ãƒ³ãƒ‡ãƒ¥æœ€ç”˜', img:'t05.webp', alt:'ãƒ•ã‚©ãƒ³ãƒ‡ãƒ¥æœ€ç”˜ï¼ˆæœ€ç”˜ï¼‰',
    headline:'å•†å“åï¼šãƒ•ã‚©ãƒ³ãƒ‡ãƒ¥æœ€ç”˜ã€ŒäººãŒé›†ã¾ã‚‹ã€ã‚ãªãŸãŒæº¶ã‘ã‚‹ã€',
    blurbStrong:'ç”˜ã•ãŒæ´ªæ°´ã€‚åŠ±ã¾ã—ã€è¨±ã—ã€ç‰¹åˆ¥æ‰±ã„ãŒç„¡é™ã«å‡ºã‚‹ã€‚ç›¸æ‰‹ã¯æ•‘ã‚ã‚Œã‚‹ã€‚å‘¨ã‚Šã¯æ¸©ã‹ã„ã€‚',
    blurbPit:'â€¦ãŸã ã—ã€ã‚ãªãŸã®HPã ã‘æ¸›ã‚‹ã€‚ä¾‹å¤–ï¼ˆæ¨ã—ãƒ»èº«å†…ï¼‰ãŒå¢—ãˆã™ãã‚‹ã¨ã€ç”˜ã•ãŒè² å‚µã«å¤‰ã‚ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚',
    action:'å¼•ãå—ã‘ã‚‹å‰ã«ã€Œä¸€æ—¦ç¢ºèªã™ã‚‹ã€ã‚’æŒŸã‚€ã€‚'
  }
];

function gradeFromScore(pct){
  for(const g of GRADE_DEF){
    if(pct >= g.min && pct <= g.max) return g;
  }
  return GRADE_DEF[2];
}

/* æ¡ç‚¹
   - answers ã¯ 0..4
   - reverse:true ã¯ v=4-v
   - å› å­ã”ã¨å¹³å‡(1..5)â†’0-100
   - ç·åˆ = 6å› å­pctã®å¹³å‡
*/
function computeScores(answers){
  const sums={}, counts={};
  FACTS.forEach(k=>{sums[k]=0;counts[k]=0;});

  QUESTIONS.forEach((q,i)=>{
    let v = answers[i];
    if(v==null) return;
    if(q.reverse) v = 4 - v;
    sums[q.key] += v;
    counts[q.key] += 1;
  });

  const pct = {};
  FACTS.forEach(k=>{
    const avg04 = counts[k] ? (sums[k]/counts[k]) : 0; // 0..4
    const a15 = avg04 + 1;                             // 1..5
    pct[k] = Math.round((a15-1)/4*100);                // 0..100
  });

  const totalScore = Math.round(FACTS.reduce((a,k)=>a+(pct[k]||0),0)/FACTS.length);
  return { pct, totalScore };
}

/* ã‚®ãƒ£ãƒ©ãƒªãƒ¼ */
function buildGallery(){
  return [
    {img:'t01.webp', cap:'æ¥µãƒ“ã‚¿ãƒ¼', alt:'æ¥µãƒ“ã‚¿ãƒ¼'},
    {img:'t02.webp', cap:'ãƒ“ã‚¿ãƒ¼å¯„ã‚Š', alt:'ãƒ“ã‚¿ãƒ¼å¯„ã‚Š'},
    {img:'t03.webp', cap:'ãƒŸãƒ«ã‚¯æ¨™æº–', alt:'ãƒŸãƒ«ã‚¯æ¨™æº–'},
    {img:'t04.webp', cap:'ãƒ›ãƒ¯ã‚¤ãƒˆç”˜ã‚', alt:'ãƒ›ãƒ¯ã‚¤ãƒˆç”˜ã‚'},
    {img:'t05.webp', cap:'ãƒ•ã‚©ãƒ³ãƒ‡ãƒ¥æœ€ç”˜', alt:'ãƒ•ã‚©ãƒ³ãƒ‡ãƒ¥æœ€ç”˜'}
  ];
}

/* ===== çŠ¶æ…‹ ===== */
let idx = 0;
let answers = new Array(QUESTIONS.length).fill(null);

/* ===== è¦ç´  ===== */
const $qnum = document.getElementById('qnum');
const $qtag = document.getElementById('qtag');
const $qtext = document.getElementById('qtext');
const $opts = document.getElementById('opts');
const $prev = document.getElementById('prevBtn');

const $quiz = document.getElementById('quiz');
const $result = document.getElementById('result');
const $prologue = document.getElementById('prologue');
const $startBtn = document.getElementById('startBtn');

const $rankBadge = document.querySelector('.rank');
const $gradeBadge = document.getElementById('gradeBadge');
const $scoreBadge = document.getElementById('scoreBadge');

const $resultImg = document.getElementById('resultImg');
const $resultTitle = document.getElementById('resultTitle');
const $resultSubtitle = document.getElementById('resultSubtitle');

const $resultComment = document.getElementById('resultComment');
const $todayText = document.getElementById('todayText');
const $resultSmall = document.getElementById('resultSmall');

const $bars = document.getElementById('bars');
const $prevList = document.getElementById('prevList');
const $gallery = document.getElementById('gallery');

const $restart = document.getElementById('restartBtn');
const $toast = document.getElementById('toast');
const $badgeLine = document.getElementById('badgeLine');

/* ===== ãƒˆãƒ¼ã‚¹ãƒˆ ===== */
let toastTimer = null;
function showToast(){
  if(!$toast) return;
  $toast.textContent = 'âœ…';
  $toast.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(()=> $toast.classList.remove('show'), 750);
}

/* ===== è¡¨ç¤ºåˆ‡æ›¿ ===== */
function enterPrologueMode(){
  $prologue.style.display = 'block';
  $quiz.style.display = 'none';
  $result.style.display = 'none';
  if($rankBadge) $rankBadge.innerHTML = '<span aria-hidden="true">ğŸ§©</span><span>æœªåˆ¤å®š</span>';
  updateProgress(0);
}
function enterQuizMode(){
  $prologue.style.display = 'none';
  $quiz.style.display = 'block';
  $result.style.display = 'none';
}
function enterResultMode(){
  $prologue.style.display = 'none';
  $quiz.style.display = 'none';
  $result.style.display = 'block';
}

/* ===== ä¿å­˜/å¾©å…ƒ ===== */
function persist(){
  try{
    localStorage.setItem(LS_ANS, JSON.stringify(answers));
    localStorage.setItem(LS_IDX, JSON.stringify(idx));
  }catch(_){}
}

/* ===== è³ªå•æç”» ===== */
function renderQuestion(){
  const q = QUESTIONS[idx];
  $qnum.textContent = `Q${idx+1}/${QUESTIONS.length}`;
  $qtext.textContent = q.t;

  if($qtag) $qtag.innerHTML = `<span aria-hidden="true">ğŸ”–</span><span>ãƒã‚§ãƒƒã‚¯</span>`;

  $opts.innerHTML = '';
  LABELS.forEach((lab,i)=>{
    const btn = document.createElement('button');
    btn.type = 'button';
    btn.className = 'btn';
    btn.setAttribute('aria-pressed', answers[idx]===i ? 'true':'false');
    btn.innerHTML = `<span class="btn-label">${lab}</span><span class="opt-note">${descFor(i)}</span>`;
    btn.addEventListener('click', ()=> selectAnswer(i));
    $opts.appendChild(btn);
  });

  $prev.disabled = (idx===0);

  const done = answers.filter(v=>v!==null).length;
  updateProgress(Math.round(done/QUESTIONS.length*100));

  if($rankBadge) $rankBadge.innerHTML = '<span aria-hidden="true">ğŸ§©</span><span>æœªåˆ¤å®š</span>';
}

function markPressed(v){
  [...$opts.children].forEach((el,i)=> el.setAttribute('aria-pressed', i===v ? 'true' : 'false'));
}

function selectAnswer(v){
  answers[idx] = v;
  persist();
  markPressed(v);
  showToast();

  setTimeout(()=>{
    if(idx < QUESTIONS.length-1){
      idx++;
      renderQuestion();
    }else{
      enterResultMode();
      showResult();
    }
  },140);
}

/* ===== çµæœã®ã‚¿ã‚°ç”Ÿæˆ ===== */
function addTag(text, cls){
  const sp = document.createElement('span');
  sp.className = `badge-pill ${cls||''}`.trim();
  sp.innerHTML = `<span aria-hidden="true">ğŸ·ï¸</span><span>${text}</span>`;
  $badgeLine && $badgeLine.appendChild(sp);
}
function clearExtraTags(){
  if(!$badgeLine) return;
  // gradeBadge ã¨ scoreBadge ä»¥å¤–ã® badge-pill ã‚’æ¶ˆã™
  const pills = [...$badgeLine.querySelectorAll('.badge-pill')];
  pills.forEach((p,i)=>{
    if(p.id==='gradeBadge' || p.id==='scoreBadge') return;
    p.remove();
  });
}

/* ===== çµæœè¡¨ç¤º ===== */
function showResult(){
  const firstNull = answers.findIndex(x=>x==null);
  if(firstNull !== -1){
    idx = firstNull;
    enterQuizMode();
    renderQuestion();
    return;
  }

  const {pct,totalScore} = computeScores(answers);
  const grade = gradeFromScore(totalScore);

  clearExtraTags();

  // ãƒ˜ãƒƒãƒ€ãƒãƒƒã‚¸
  if($rankBadge) $rankBadge.innerHTML = `<span aria-hidden="true">${grade.emo}</span><span>${grade.label}</span>`;

  // ç”»åƒ
  $resultImg.src = IMG_BASE + grade.img;
  $resultImg.alt = grade.alt || 'çµæœç”»åƒ';

  // è¦‹å‡ºã—ãƒ»ã‚¹ã‚³ã‚¢
  $resultTitle.textContent = `ã‚ãªãŸã®ç”˜ã•ï¼š${grade.label}`;
  $resultSubtitle.textContent = `ç·åˆï¼š${totalScore}ç‚¹ï¼ˆ0ã€œ100ï¼‰`;
  if($scoreBadge) $scoreBadge.textContent = `ã‚¹ã‚³ã‚¢ ${totalScore}ç‚¹`;
  if($gradeBadge) $gradeBadge.innerHTML = `<span aria-hidden="true">${grade.emo}</span><span>${grade.label}</span>`;

  // è¿½åŠ ã‚¿ã‚°ï¼ˆè‰²åˆ†ã‘ï¼šèµ¤=ç‡ƒãˆå°½ã/å±é™ºã€é’=å†·ãˆã™ãã€é‡‘=ã²ã„ãï¼‰
  // ãƒ«ãƒ¼ãƒ«ï¼šå¢ƒç•ŒãŒé«˜ã„(>=70)â†’èµ¤ã€ç‰¹åˆ¥æ ãŒé«˜ã„(>=70)â†’é‡‘ã€ç·åˆãŒä½ã„(<=39)â†’é’
  if((pct.BOUNDARY||0) >= 70) addTag('æŠ±ãˆè¾¼ã¿æ³¨æ„', 'red');
  if((pct.FAVOR||0) >= 70) addTag('ç‰¹åˆ¥æ ã¤ã‚ˆã‚', 'gold');
  if(totalScore <= 39) addTag('å†·ãˆã™ãèª¤è§£', 'blue');

  // ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆå¼·ã¿â†’è½ã¨ã—ç©´â†’ä»Šæ—¥ã®ä¸€æ‰‹ï¼‰
  if($resultComment){
    $resultComment.innerHTML = `
      <p class="rc-ttl">${grade.headline}</p>
      <p>${grade.blurbStrong}</p>
      <p>${grade.blurbPit}</p>
    `;
  }

  // ä»Šæ—¥ã®ä¸€æ‰‹
  if($todayText) $todayText.textContent = grade.action;

  // è£œè¶³ï¼ˆçŸ­ãæ¿ƒãï¼‰
  const hi = [];
  const lo = [];
  for(const k of FACTS){
    const v = +pct[k]||0;
    if(v>=70) hi.push(FACT_LABEL[k]);
    if(v<=39) lo.push(FACT_LABEL[k]);
  }
  const hiTxt = hi.length ? `é«˜ã‚ï¼š${hi.slice(0,3).join('ãƒ»')}` : 'é«˜ã‚ï¼šâ€”';
  const loTxt = lo.length ? `ä½ã‚ï¼š${lo.slice(0,3).join('ãƒ»')}` : 'ä½ã‚ï¼šâ€”';
  $resultSmall.textContent = `${hiTxt} ï¼ ${loTxt}`;

  // å› å­ãƒãƒ¼
  $bars.innerHTML = '';
  FACTS.forEach(k=>{
    const v = Math.max(0, Math.min(100, +pct[k]||0));
    const wrap = document.createElement('div');
    wrap.className = 'bar';
    const band = (v<=39) ? 'ä½' : (v<=69 ? 'ä¸­' : 'é«˜');
    wrap.innerHTML = `
      <div class="h"><span>${FACT_LABEL[k] || k}ï¼ˆ${band}ï¼‰</span><span>${v}%</span></div>
      <div class="track"><div class="fill" style="width:${v}%"></div></div>
      <div class="bar-desc">${FACT_DESC[k] || ''}</div>
    `;
    $bars.appendChild(wrap);
  });

  // å‰å›å›ç­”ï¼ˆä¸€è¦§ï¼‰
  try{
    localStorage.setItem(LS_LASTANS, JSON.stringify({answers: answers.slice(), ts: Date.now()}));
  }catch(_){}
  buildPrevAnswers();

  // ã‚®ãƒ£ãƒ©ãƒªãƒ¼
  buildGalleryUI();

  // å®Œäº†ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆå¿…é ˆï¼‰
  document.dispatchEvent(new Event('result:ready'));
}

function buildPrevAnswers(){
  let prev = null;
  try{ prev = JSON.parse(localStorage.getItem(LS_LASTANS) || 'null'); }catch(_){}
  if(!prev || !Array.isArray(prev.answers)) return;

  $prevList.innerHTML = '';
  prev.answers.forEach((v,i)=>{
    const li = document.createElement('li');
    li.className = 'prev-item';
    const lab = (typeof v === 'number' && v>=0 && v<LABELS.length) ? LABELS[v] : 'â€”';
    li.innerHTML = `<span class="prev-q">Q${i+1}ï¼š${QUESTIONS[i].t}</span><span class="prev-a">ã€Œ${lab}ã€</span>`;
    $prevList.appendChild(li);
  });
}

function buildGalleryUI(){
  const g = buildGallery();
  $gallery.innerHTML = '';
  g.forEach(x=>{
    const fig = document.createElement('figure');
    fig.innerHTML = `
      <img src="${IMG_BASE + x.img}" alt="${x.alt||''}" loading="lazy">
      <figcaption>${x.cap||x.img}</figcaption>
    `;
    $gallery.appendChild(fig);
  });
}

/* ===== æ“ä½œ ===== */
$prev.addEventListener('click', ()=>{
  if(idx>0){ idx--; persist(); renderQuestion(); }
});
$startBtn.addEventListener('click', ()=>{
  enterQuizMode();
  renderQuestion();
  window.scrollTo({top:0,behavior:'smooth'});
});
$restart.addEventListener('click', ()=>{
  answers = new Array(QUESTIONS.length).fill(null);
  idx = 0;
  try{ localStorage.removeItem(LS_ANS); localStorage.removeItem(LS_IDX); }catch(_){}
  enterPrologueMode();
  window.scrollTo({top:0,behavior:'smooth'});
  showToast();
});

/* ===== èµ·å‹•ï¼šå¾©å…ƒ or ãƒ—ãƒ­ãƒ­ãƒ¼ã‚° ===== */
(function init(){
  const hero = document.getElementById('heroImg');
  if(hero) hero.src = IMG_BASE + 't00.webp';

  updateProgress(0);

  let savedAns=null, savedIdx=0;
  try{
    savedAns = JSON.parse(localStorage.getItem(LS_ANS) || 'null');
    savedIdx = JSON.parse(localStorage.getItem(LS_IDX) || '0');
  }catch(_){}
  const valid = Array.isArray(savedAns) && savedAns.length === QUESTIONS.length;
  const hasAny = valid && savedAns.some(v=>v!==null);
  const allDone = valid && savedAns.every(v=>v!==null);

  if(allDone){
    answers = savedAns;
    idx = QUESTIONS.length - 1;
    renderQuestion(); // çŠ¶æ…‹ã ã‘æ•´ãˆã‚‹
    enterResultMode();
    showResult();
    return;
  }
  if(hasAny){
    answers = savedAns;
    idx = Math.min(Math.max(0, +savedIdx || 0), QUESTIONS.length-1);
    enterQuizMode();
    renderQuestion();
    return;
  }
  enterPrologueMode();
}());
</script>

<!-- ã‚ãªãŸã®ã“ã“ã‚Lvï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿ï¼‰ -->
<script>(function(){
  var DONE_KEY='specimens:open:byid', TOTAL_KEY='specimens:open:total';
  var MY_ID=document.body.getAttribute('data-id')||SLUG;
  var marked=false;
  function mark(){ if(marked) return; marked=true;
    try{
      var t=(+localStorage.getItem(TOTAL_KEY)||0)+1;
      localStorage.setItem(TOTAL_KEY,String(t));
      var map={}; try{ map=JSON.parse(localStorage.getItem(DONE_KEY)||'{}'); }catch(_){}
      map[MY_ID]=(map[MY_ID]||0)+1;
      localStorage.setItem(DONE_KEY, JSON.stringify(Object.assign({},map,{_ts:Date.now()})));
    }catch(_){}
  }
  document.addEventListener('result:ready', mark);
  setTimeout(mark, 2000);
}());</script>

</body>
</html>