<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<!-- =========================
  æ¤œç´¢ç½®æ›ãƒã‚¤ãƒ³ãƒˆï¼ˆæœ€ä½é™ã“ã“ã ã‘ï¼‰
  1) TITLE / description
  2) og:title / og:description
  3) og:url
  4) og:image ã® slug
  5) body data-id / SLUG
========================= -->
<title>ãƒ•ãƒ¬ãƒãƒŸãƒ¼è¦‹æŠœãè¨ºæ–­ï½œå‹ã ã¡é¡”ã®æ•µã‚’ã‚ã¶ã‚Šå‡ºã™</title>
<meta name="description" content="å‹å¥½çš„ã«è¦‹ãˆã‚‹ã®ã«ã€ãªãœã‹æ¶ˆè€—ã™ã‚‹ã€‚ç«¶äº‰ãƒ»äºŒé¢æ€§ãƒ»çš®è‚‰ãƒ»ä¿¡é ¼ãƒ»ä¸å…¬å¹³ã®5è»¸ã§ãƒ•ãƒ¬ãƒãƒŸãƒ¼æ¿ƒåº¦ã‚’ãƒã‚§ãƒƒã‚¯ã€‚">
<meta name="theme-color" content="#fff7fd">

<!-- OG -->
<meta property="og:type" content="website">
<meta property="og:title" content="ãƒ•ãƒ¬ãƒãƒŸãƒ¼è¦‹æŠœãè¨ºæ–­">
<meta property="og:description" content="å‹ã ã¡é¡”ã®æ•µã‚’ã€5è»¸ã§ã‚ã¶ã‚Šå‡ºã™ã€‚">
<meta property="og:url" content="https://haisuikounozarigani.github.io/shindan/frenemy-scan.html">
<meta property="og:image" content="https://haisuikounozarigani.github.io/shindan/assets/results/frenemy-scan/t00.webp">
<style>
:root{
  /* Light only */
  color-scheme: light;

  /* Base */
  --bg:#fbf7ff;
  --paper:#ffffff;
  --ink:#1b1020;
  --muted:#6b5a73;
  --line:rgba(32,19,34,.12);

  /* Frenemy palette: vine + thorn + suspicion */
  --poison:#21b487;     /* vine */
  --poison2:#157a61;    /* deep vine */
  --thorn:#ff2f86;      /* thorn */
  --violet:#7b55ff;     /* suspicion */
  --gold:#f6c84c;       /* tiny highlight */

  /* Effects */
  --shadow: 0 18px 44px rgba(18, 8, 22, .14);
  --shadow2: 0 10px 26px rgba(18, 8, 22, .10);
  --glow: 0 0 0 2px rgba(33,180,135,.18), 0 14px 30px rgba(33,180,135,.12);

  --r16:16px;
  --r14:14px;
  --r12:12px;
}

/* ===== Reset-ish ===== */
*{box-sizing:border-box}
html,body{height:100%}
html,body{margin:0;padding:0}
body{
  font:16px/1.65 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans JP","Hiragino Sans","Yu Gothic",Meiryo,sans-serif;
  color:var(--ink);
  -webkit-text-size-adjust:100%;
  text-size-adjust:100%;
  background: var(--bg);
  overflow-x:clip; /* clipâ‰ hiddenï¼šclipã¯sticky/fixedã‚’å£Šã•ãªã„ */
}
a{color:#5b2ea8;text-decoration:none}
a:hover{text-decoration:underline}
img{max-width:100%;height:auto}

/* ===== Background: â€œfriendlyâ€ paper + â€œinvasiveâ€ vines ===== */
body{
  background:
    radial-gradient(900px 620px at 10% 8%, rgba(33,180,135,.30), transparent 60%),
    radial-gradient(760px 520px at 92% 20%, rgba(255,47,134,.20), transparent 55%),
    radial-gradient(980px 680px at 45% 110%, rgba(123,85,255,.18), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.78), rgba(255,255,255,0) 32%),
    var(--bg);
}

/* subtle paper grain */
body::after{
  content:"";
  position:fixed; inset:0;
  pointer-events:none;
  opacity:.10;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
  mix-blend-mode:multiply;
  z-index:0;
}

/* corner â€œvinesâ€ (shadow only) */
body::before{
  content:"";
  position:fixed; inset:-40px;
  pointer-events:none;
  z-index:0;
  background:
    radial-gradient(520px 340px at -6% 24%, rgba(33,180,135,.36), transparent 62%),
    radial-gradient(520px 340px at 106% 70%, rgba(33,180,135,.28), transparent 62%),
    radial-gradient(720px 420px at 18% 110%, rgba(32,19,34,.10), transparent 62%);
  mix-blend-mode:multiply;
}

/* ===== Layout ===== */
.wrap{max-width:980px;margin:0 auto;padding:16px; position:relative; z-index:1}
header.hd, main#app{position:relative; z-index:1}

/* ===== Header ===== */
header.hd{
  margin-top:6px;
  background:
    linear-gradient(160deg, #fff, #fff3fb 42%, #f2fff8);
  border-bottom:1px solid var(--line);
  box-shadow: var(--shadow2);
  position:relative;
}
header.hd .wrap{padding:20px 16px 12px}
header.hd::after{
  content:"";
  position:absolute; left:0; right:0; bottom:-1px;
  height:3px;
  background: linear-gradient(90deg, var(--poison), var(--violet), var(--thorn));
  opacity:.95;
}

/* Title row */
.ttl{
  font-weight:950;
  font-size:1.35rem;
  letter-spacing:.02em;
  display:flex;
  gap:10px;
  align-items:center;
  flex-wrap:wrap;
}
.sub{color:var(--muted); font-size:.95rem}

/* Rank badge = â€œseal tagâ€ */
.rank{
  display:inline-flex; align-items:center; gap:6px;
  padding:.22em .78em;
  border-radius:999px;
  background:
    linear-gradient(135deg, rgba(33,180,135,.18), rgba(123,85,255,.16), rgba(255,47,134,.14));
  border:1px solid rgba(32,19,34,.10);
  color:var(--ink);
  font-weight:900;
  font-size:.86rem;
  box-shadow: 0 10px 24px rgba(18, 8, 22, .10);
}

/* ===== Progress ===== */
.progress-fixed{
  position:fixed; top:0; left:0; right:0; z-index:100;
  height:6px;
  background: rgba(32,19,34,.10);
}
@keyframes progress-pulse{
  0%  { box-shadow: 0 0 0 0 rgba(255,47,134,.7), 0 0 14px rgba(33,180,135,.55); }
  60% { box-shadow: 0 0 0 8px rgba(255,47,134,.0), 0 0 22px rgba(33,180,135,.80); }
  100%{ box-shadow: 0 0 0 0 rgba(255,47,134,.0), 0 0 14px rgba(33,180,135,.55); }
}
.progress-bar.pulse{
  animation: progress-pulse .4s ease-out;
}
.progress-bar{
  height:100%;
  border-radius:0 6px 6px 0;
  width:0%;
  background: linear-gradient(90deg, var(--poison), var(--violet), var(--thorn));
  box-shadow: 0 0 14px rgba(33,180,135,.55), 0 0 4px rgba(255,47,134,.4);
  transition: width .22s ease;
  position:relative;
}
/* é€²è¡Œç«¯ã®å…‰ç‚¹ */
.progress-bar::after{
  content:"";
  position:absolute; right:-3px; top:-3px;
  width:12px; height:12px;
  border-radius:50%;
  background: var(--thorn);
  box-shadow: 0 0 10px var(--thorn), 0 0 4px #fff;
  opacity:.9;
}

/* ===== Cards ===== */
.paper{
  background:var(--paper);
  border:1px solid rgba(32,19,34,.10);
  border-radius:var(--r16);
  padding:16px;
  margin:14px 0;
  box-shadow: var(--shadow);
  position:relative;
  overflow:hidden;
}

/* vine stitch border (subtle, does not break layout) */
.paper::before{
  content:"";
  position:absolute; inset:-2px;
  border-radius:calc(var(--r16) + 2px);
  padding:3px;
  background:
    conic-gradient(from 180deg,
      rgba(33,180,135,.80),
      rgba(123,85,255,.55),
      rgba(255,47,134,.65),
      rgba(33,180,135,.80)
    );
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;
  mask-composite:exclude;
  pointer-events:none;
  opacity:.60;
}
.paper::after{
  content:"";
  position:absolute; left:12px; right:12px; bottom:10px;
  height:10px;
  border-radius:999px;
  background: linear-gradient(90deg, rgba(33,180,135,0), rgba(33,180,135,.32), rgba(33,180,135,0));
  opacity:.95;
  pointer-events:none;
}

/* ===== Hero ===== */
figure.hero{
  margin:12px 0;
  border:1px solid var(--line);
  border-radius:var(--r16);
  overflow:hidden;
  background:#fff;
}
figure.hero img{
  display:block;
  width:100%;
  aspect-ratio:1/1;
  object-fit:cover;
}

/* ===== Prologue ===== */
#prologue h2{margin-top:0; font-size:1.1rem}
#prologue p{margin:.45rem 0; color:var(--muted)}
#prologue .note{color:var(--muted); font-size:.9rem}

/* Start button = â€œrip the maskâ€ */
.start-btn{
  margin-top:12px;
  width:100%;
  padding:12px 16px;
  border-radius:999px;
  border:0;
  cursor:pointer;
  font-weight:950;
  letter-spacing:.03em;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  color:#120817;
  background:
    linear-gradient(135deg, rgba(33,180,135,.85), rgba(123,85,255,.65), rgba(255,47,134,.55));
  box-shadow: 0 14px 28px rgba(18, 8, 22, .16);
}
.start-btn:hover{filter:saturate(1.05); transform:translateY(-1px)}
.start-btn:active{transform:translateY(0)}
.start-btn:focus-visible{outline:3px solid rgba(123,85,255,.25); outline-offset:4px}

/* ===== Quiz ===== */
.qhead{display:flex; justify-content:space-between; align-items:center; gap:8px}
.qnum{font-weight:950; color:#3b2146}
.qtag{
  font-size:.8rem;
  color:#6f6178;
  padding:2px 10px;
  border-radius:999px;
  border:1px solid rgba(32,19,34,.10);
  background:linear-gradient(180deg,#fff,#fff6fb);
  display:inline-flex;
  align-items:center;
  gap:6px;
}
.qtext{margin:.65rem 0 1rem; font-weight:900}

/* Options */
.opts{display:grid; grid-template-columns:1fr; gap:8px}

@keyframes btn-bounce{
  0%  { transform:scale(1); }
  30% { transform:scale(.93) translateY(2px); }
  60% { transform:scale(1.04) translateY(-3px); }
  80% { transform:scale(.98) translateY(1px); }
  100%{ transform:scale(1)   translateY(0); }
}
@keyframes btn-ripple{
  from{ transform:scale(0); opacity:.55; }
  to  { transform:scale(2.8); opacity:0; }
}
@keyframes particle-fly{
  0%  { transform:translate(0,0) scale(1); opacity:.9; }
  100%{ transform:translate(var(--px),var(--py)) scale(0); opacity:0; }
}

.btn{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:12px 14px;
  border-radius:var(--r12);
  border:1px solid rgba(32,19,34,.12);
  background: linear-gradient(180deg,#fff,#fff9fd);
  cursor:pointer;
  transition: transform .14s cubic-bezier(.34,1.56,.64,1), box-shadow .14s ease, border-color .14s ease, background .14s ease;
  position:relative;
  overflow:hidden;
  will-change:transform;
}

/* hover sheen */
.btn::after{
  content:"";
  position:absolute; inset:-2px;
  background: linear-gradient(120deg, rgba(33,180,135,0), rgba(33,180,135,.22), rgba(255,47,134,.12), rgba(33,180,135,0));
  transform: translateX(-55%);
  opacity:0;
  transition: .22s ease;
}
.btn:hover{
  transform: translateY(-3px) scale(1.012);
  box-shadow: 0 16px 32px rgba(18, 8, 22, .13), 0 0 0 1px rgba(33,180,135,.20);
  border-color: rgba(33,180,135,.40);
}
.btn:active{ transform: scale(.96) translateY(1px) !important; transition-duration:.06s; }
.btn:hover::after{opacity:1; transform: translateX(-20%)}

.btn.bouncing{ animation: btn-bounce .36s cubic-bezier(.34,1.56,.64,1) both; }

/* ãƒªãƒƒãƒ—ãƒ« */
.btn-ripple{
  position:absolute;
  border-radius:50%;
  width:60px; height:60px;
  margin:-30px;
  background: radial-gradient(circle, rgba(33,180,135,.55) 0%, rgba(123,85,255,.30) 50%, transparent 100%);
  pointer-events:none;
  animation: btn-ripple .5s ease-out forwards;
  z-index:5;
}

/* ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ« */
.particle{
  position:fixed;
  width:7px; height:7px;
  border-radius:50%;
  pointer-events:none;
  z-index:200;
  animation: particle-fly .55s ease-out forwards;
}

.btn-label{font-weight:950}
.opt-note{color:#8b7b93; font-size:.9rem; white-space:nowrap}

/* pressed = â€œvine lockâ€ */
.btn[aria-pressed="true"]{
  outline:2px solid rgba(33,180,135,.55);
  box-shadow: 0 0 0 4px rgba(33,180,135,.12), 0 14px 28px rgba(18, 8, 22, .12);
  background: linear-gradient(180deg,#fff,#f2fff8);
}
.btn[aria-pressed="true"] .opt-note{color:rgba(21,122,97,.95)}

/* Controls */
.ctrls{display:flex; gap:8px; margin-top:12px; flex-wrap:wrap}
.ctrls button{
  padding:10px 14px;
  border-radius:12px;
  border:1px solid rgba(32,19,34,.12);
  background: linear-gradient(180deg,#fff,#f7f2ff);
  cursor:pointer;
  font-weight:900;
}
.ctrls button:hover{transform:translateY(-1px)}
.ctrls button:disabled{opacity:.55; cursor:not-allowed; transform:none}

/* ===== Result ===== */
.result{display:none}
.flex{display:flex; gap:16px; flex-wrap:wrap}

.result .imgbox{flex:1 1 280px; min-width:260px}
.result .imgbox img{
  width:100%;
  aspect-ratio:1/1;
  object-fit:cover;
  border-radius:var(--r14);
  border:1px solid rgba(32,19,34,.10);
  display:block;
  box-shadow: 0 12px 26px rgba(18, 8, 22, .10);
}

.result .text{flex:2 1 360px; min-width:300px}
.badge-line{display:flex; flex-wrap:wrap; gap:6px; align-items:center; margin:.2rem 0 .55rem}

.badge-pill{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:3px 10px;
  border-radius:999px;
  background: linear-gradient(135deg, rgba(255,47,134,.10), rgba(123,85,255,.10), rgba(33,180,135,.10));
  border:1px solid rgba(32,19,34,.10);
  font-size:.86rem;
}

.result-title-main{margin:.1rem 0 0}
.result-title-sub{margin:.15rem 0 .8rem; font-size:.92rem; color:var(--muted)}

/* Result comment = â€œpoison memoâ€ (no â€œé‘‘è­˜â€ label) */
.result-comment{
  margin:.35rem 0 .9rem;
  padding:12px 12px;
  border-radius:var(--r14);
  border:1px solid rgba(33,180,135,.22);
  background:
    radial-gradient(640px 220px at 10% 0%, rgba(33,180,135,.10), transparent 62%),
    radial-gradient(640px 220px at 92% 30%, rgba(255,47,134,.08), transparent 60%),
    linear-gradient(180deg,#fff,#fbfffd);
}
.result-comment p{margin:.25rem 0; color:#3a2433}
.result-comment .rc-ttl{font-weight:950}

/* Today box */
.today-box{
  margin:.9rem 0 .2rem;
  padding:12px 12px 10px;
  border-radius:var(--r16);
  border:1px solid rgba(123,85,255,.28);
  background: linear-gradient(135deg, rgba(33,180,135,.12), rgba(123,85,255,.12), rgba(255,47,134,.10));
  box-shadow: 0 10px 22px rgba(123,85,255,.10);
}
.today-head{
  display:inline-flex;
  align-items:center;
  gap:8px;
  font-weight:950;
  padding:2px 10px;
  border-radius:999px;
  background: rgba(255,255,255,.78);
  border:1px solid rgba(32,19,34,.08);
}
.today-text{margin:.55rem 0 0; font-weight:900}

/* Factor bars */
.bars{display:grid; grid-template-columns:1fr; gap:10px; margin-top:10px}
.bar{background:transparent; border-radius:10px; padding:4px 0 6px}
.bar .h{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:2px 10px 4px;
  font-size:.92rem;
}
.bar .h span:first-child{font-weight:900}
.bar .track{
  margin:0 10px 4px;
  height:10px;
  border-radius:999px;
  background:#f4fff9;
  overflow:hidden;
  border:1px solid rgba(32,19,34,.10);
}
.bar .fill{
  height:100%;
  width:0%;
  background: linear-gradient(90deg, var(--poison), var(--violet), var(--thorn));
  border-radius:inherit;
  transition:width .25s ease-out;
}
.bar-desc{padding:0 10px 2px; font-size:.82rem; color:var(--muted)}

/* Prev answers list */
.prev-list{list-style:none; padding-left:0; margin:.4rem 0 .2rem .9rem}
.prev-item{
  display:flex; gap:8px; align-items:flex-start;
  padding:6px 0;
  border-bottom:1px solid rgba(32,19,34,.08);
}
.prev-q{
  flex:1; min-width:0;
  display:-webkit-box;
  -webkit-box-orient:vertical;
  -webkit-line-clamp:2;
  overflow:hidden;
  overflow-wrap:anywhere;
}
.prev-a{
  flex:0 0 auto;
  white-space:nowrap;
  border:1px solid rgba(32,19,34,.10);
  border-radius:999px;
  padding:2px 8px;
  font-size:.9rem;
  background:#faf5ff;
}

/* Fold cards */
.fold-card, .meta-note{
  margin:10px 0 8px;
  padding:10px 10px;
  border-radius:var(--r14);
  border:1px solid rgba(32,19,34,.10);
  background: linear-gradient(180deg,#fff,#fff6fb);
  color:var(--muted);
  font-size:.92rem;
  box-shadow: 0 8px 18px rgba(18, 8, 22, .06);
}
.fold-card summary, .meta-note summary{
  cursor:pointer;
  list-style:none;
  font-weight:950;
  display:flex;
  align-items:center;
  justify-content:space-between;
}
.fold-card[open], .meta-note[open]{background:#fff}
.meta-note ul{margin:.5rem 0 0 1.1rem; padding-left:0}
.meta-note ul li + li{margin-top:10px; padding-top:6px; border-top:1px dashed rgba(32,19,34,.12)}

/* Gallery */
.gallery{
  margin-top:2px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
  gap:10px;
}
.gallery figure{
  margin:0;
  border:1px solid rgba(32,19,34,.10);
  border-radius:var(--r14);
  background:#fff;
  padding:6px;
  text-align:center;
  font-size:.86rem;
  color:var(--muted);
  display:flex;
  flex-direction:column;
  gap:4px;
  box-shadow: 0 10px 20px rgba(18, 8, 22, .06);
}
.gallery img{
  width:100%;
  aspect-ratio:1/1;
  object-fit:cover;
  border-radius:10px;
  display:block;
}

/* Footer */
.meta{color:#7a6c86; font-size:.92rem; clear:both; margin-top:.6rem}

.back-row{display:flex; gap:10px; flex-wrap:wrap; margin:12px 0 6px}
.back{
  flex:1 1 220px;
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:12px 16px;
  border-radius:999px;
  border:1px solid rgba(32,19,34,.10);
  background:#fff;
  color:var(--ink);
  font-weight:950;
  letter-spacing:.02em;
  cursor:pointer;
  font-size:1rem;
  box-shadow: 0 14px 28px rgba(18, 8, 22, .10);
  transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease;
}
.back:hover{transform:translateY(-1px); box-shadow: 0 18px 34px rgba(18, 8, 22, .12); border-color: rgba(33,180,135,.30)}
.back:active{transform:translateY(0)}
.back:focus-visible{outline:3px solid rgba(123,85,255,.25); outline-offset:4px}

.back-primary{
  border:0;
  background: linear-gradient(135deg, rgba(33,180,135,.85), rgba(123,85,255,.65), rgba(255,47,134,.55));
  color:#120817;
}
.back-ghost{
  background: linear-gradient(180deg,#fff,#fff6fb);
}
.back .chev{
  display:inline-grid; place-items:center;
  width:22px;height:22px;border-radius:999px;
  background: rgba(123,85,255,.14);
  color: rgba(32,19,34,.75);
  font-size:1.15rem;
  line-height:1;
}

@keyframes toast-pop{
  0%  { transform:translateX(-50%) scale(.4) translateY(10px); opacity:0; }
  55% { transform:translateX(-50%) scale(1.15) translateY(-4px); opacity:1; }
  75% { transform:translateX(-50%) scale(.95) translateY(1px); }
  100%{ transform:translateX(-50%) scale(1) translateY(0); opacity:1; }
}
/* Toast */
.mini-toast{
  position:fixed;
  left:50%;
  bottom:24px;
  transform:translateX(-50%) translateY(20px);
  opacity:0;
  background: linear-gradient(135deg, rgba(33,180,135,.92), rgba(123,85,255,.78), rgba(255,47,134,.68));
  color:#120817;
  padding:10px 20px;
  border-radius:999px;
  font-size:1.4rem;
  font-weight:900;
  letter-spacing:.04em;
  transition: opacity .18s, transform .18s;
  z-index:200;
  box-shadow: 0 14px 32px rgba(18,8,22,.22), 0 0 0 2px rgba(255,255,255,.25);
  white-space:nowrap;
}
.mini-toast.show{
  opacity:1;
  animation: toast-pop .38s cubic-bezier(.34,1.56,.64,1) both;
}

/* Small screens */
@media (max-width:600px){
  header.hd .wrap{padding:16px 12px 10px}
  .wrap{padding:12px}
  .paper{padding:14px 12px}
}

/* =====================================================
   â˜… FRENEMY EXTRA EFFECTS
   ===================================================== */

/* --- ã‚¹ã‚­ãƒ£ãƒ³ãƒ©ã‚¤ãƒ³ --- */
@keyframes scanline{
  0%  { top:-4px; opacity:.7; }
  80% { opacity:.7; }
  100%{ top:110%; opacity:0; }
}
.scan-line{
  position:absolute;
  left:0; right:0; top:0;
  height:3px;
  pointer-events:none;
  z-index:9;
  background: linear-gradient(90deg,
    transparent 0%,
    rgba(33,180,135,.0) 5%,
    var(--poison) 30%,
    rgba(255,255,255,.9) 50%,
    var(--thorn) 70%,
    rgba(33,180,135,.0) 95%,
    transparent 100%
  );
  box-shadow: 0 0 16px rgba(33,180,135,.7), 0 0 6px rgba(255,47,134,.5);
  animation: scanline 2.8s linear infinite;
  border-radius:2px;
}


/* --- qtag éŒ²ç”»ãƒ‰ãƒƒãƒˆ --- */
@keyframes recdot{ 0%,100%{opacity:1;} 50%{opacity:.1;} }
.qtag-dot{
  display:inline-block;
  width:7px; height:7px;
  border-radius:50%;
  background:var(--thorn);
  flex-shrink:0;
  animation:recdot 1.1s ease-in-out infinite;
  box-shadow:0 0 6px var(--thorn);
}

/* --- é¸æŠæ¸ˆã¿ãƒœã‚¿ãƒ³ï¼šãƒ„ã‚¿ãƒ­ãƒƒã‚¯è¡¨ç¾ --- */
.btn[aria-pressed="true"]{
  outline:2px solid rgba(33,180,135,.65);
  box-shadow: 0 0 0 5px rgba(33,180,135,.10), 0 14px 28px rgba(18,8,22,.12);
  background: linear-gradient(160deg,#f6fff9,#edfff5);
}
.btn[aria-pressed="true"] .opt-note{color:rgba(21,122,97,.95)}
/* é¸æŠãƒœã‚¿ãƒ³å·¦ç«¯ã®ãƒ„ã‚¿ãƒ©ã‚¤ãƒ³ */
.btn[aria-pressed="true"]::before{
  content:"";
  position:absolute; left:0; top:0; bottom:0;
  width:4px;
  border-radius:999px 0 0 999px;
  background: linear-gradient(180deg, var(--poison), var(--violet), var(--thorn));
  box-shadow: 0 0 8px rgba(33,180,135,.5);
}

/* --- ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãƒãƒ¼ï¼šã‚·ãƒãƒ¼ --- */
@keyframes barshimmer{
  0%  {background-position:200% 0}
  100%{background-position:-200% 0}
}
.bar .fill{
  background: linear-gradient(90deg,
    var(--poison) 0%,
    var(--violet) 40%,
    rgba(255,255,255,.45) 50%,
    var(--thorn)  60%,
    var(--poison) 100%
  );
  background-size:300% 100%;
  animation: barshimmer 2.6s linear infinite;
}

/* --- çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ç™»å ´ --- */
@keyframes resultreveal{
  from{ opacity:0; transform:translateY(24px) scale(.98); }
  to  { opacity:1; transform:translateY(0)    scale(1);   }
}
.result-reveal{
  animation: resultreveal .45s cubic-bezier(.22,1,.36,1) both;
}

/* --- ãƒ„ã‚¿SVGã‚³ãƒ¼ãƒŠãƒ¼ï¼ˆJSæ³¨å…¥ç”¨ï¼‰ --- */
.vine-svg{
  position:fixed;
  pointer-events:none;
  z-index:0;
  opacity:.48;
}

/* --- è„…å¨ãƒ¬ãƒ™ãƒ«ãƒ¡ãƒ¼ã‚¿ãƒ¼ï¼ˆçµæœä¸Šéƒ¨ï¼‰ --- */
.threat-meter{
  width:100%;
  height:18px;
  border-radius:999px;
  background:rgba(32,19,34,.07);
  border:1px solid rgba(32,19,34,.10);
  overflow:hidden;
  margin:.5rem 0 .25rem;
  position:relative;
}
.threat-fill{
  height:100%;
  border-radius:inherit;
  background: linear-gradient(90deg,
    #21b487 0%,
    #7b55ff 50%,
    #ff2f86 100%
  );
  transition: width .8s cubic-bezier(.22,1,.36,1);
  box-shadow: 0 0 14px rgba(255,47,134,.4);
  position:relative;
}
.threat-fill::after{
  content:"";
  position:absolute; inset:0;
  background: linear-gradient(90deg, transparent 70%, rgba(255,255,255,.35));
  border-radius:inherit;
}
.threat-label{
  font-size:.78rem;
  letter-spacing:.06em;
  color:var(--muted);
  font-weight:900;
  margin-bottom:2px;
  font-family:monospace,monospace;
}

/* --- ãƒ’ãƒ¼ãƒ­ãƒ¼è¨ºæ–­ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ --- */
figure.hero{ position:relative; }
figure.hero::after{
  content:"THREAT SCANNINGâ€¦";
  position:absolute;
  bottom:0; left:0; right:0;
  padding:20px 14px 12px;
  font-size:.72rem;
  font-weight:900;
  letter-spacing:.22em;
  color:rgba(33,180,135,.90);
  background:linear-gradient(0deg,rgba(18,8,22,.65) 0%,transparent 100%);
  font-family:monospace,monospace;
  text-shadow:0 0 12px rgba(33,180,135,.8);
}

/* --- paperã‚«ãƒ¼ãƒ‰ï¼šãƒ„ã‚¿è§’ä¸¸ã«è„ˆå‹• --- */
@keyframes vinebreath{
  0%,100%{ opacity:.60; }
  50%    { opacity:.90; }
}
.paper::before{
  animation: vinebreath 3.5s ease-in-out infinite;
}

/* --- è¨­å•ç•ªå·ï¼šã‚¹ã‚­ãƒ£ãƒ³é¢¨ --- */
.qnum{
  font-family: monospace, monospace;
  font-size:.88rem;
  letter-spacing:.08em;
  color: var(--poison2);
  background: rgba(33,180,135,.08);
  padding:3px 10px;
  border-radius:999px;
  border:1px solid rgba(33,180,135,.22);
}

/* --- è¨­å•ã‚«ãƒ¼ãƒ‰å†…ãƒ„ã‚¿è£…é£¾ --- */
#quiz{
  --quiz-vine-color: rgba(33,180,135,.22);
  --quiz-thorn-color: rgba(255,47,134,.35);
}
/* å³ç«¯ã®SVGãƒ„ã‚¿ï¼ˆbackground-imageã§æç”»ï¼‰ */
#quiz .quiz-vine-right{
  position:absolute;
  top:0; right:0; bottom:0;
  width:56px;
  pointer-events:none;
  z-index:0;
  background:
    /* ç¸¦èŒ */
    linear-gradient(180deg,
      transparent 0%,
      rgba(33,180,135,.18) 12%,
      rgba(33,180,135,.22) 18%,
      rgba(33,180,135,.18) 30%,
      rgba(123,85,255,.14) 50%,
      rgba(33,180,135,.18) 70%,
      rgba(33,180,135,.10) 88%,
      transparent 100%
    ) 44px 0 / 2px 100% no-repeat,
    /* è‘‰1 */
    radial-gradient(ellipse 18px 10px at 44px 18%, rgba(33,180,135,.30), transparent 80%) no-repeat,
    /* è‘‰2 */
    radial-gradient(ellipse 14px 8px at 44px 42%, rgba(33,180,135,.22), transparent 80%) no-repeat,
    /* è‘‰3 */
    radial-gradient(ellipse 20px 11px at 44px 65%, rgba(33,180,135,.28), transparent 80%) no-repeat,
    /* è‘‰4 */
    radial-gradient(ellipse 12px 7px at 44px 86%, rgba(123,85,255,.20), transparent 80%) no-repeat,
    /* ãƒˆã‚²1 */
    linear-gradient(135deg, rgba(255,47,134,.38) 0%, transparent 55%) 22px 14% / 18px 8px no-repeat,
    /* ãƒˆã‚²2 */
    linear-gradient(135deg, rgba(255,47,134,.28) 0%, transparent 55%) 20px 58% / 16px 7px no-repeat;
}
/* å·¦ä¸‹ã®SVGãƒ„ã‚¿ */
#quiz .quiz-vine-left{
  position:absolute;
  bottom:0; left:0;
  width:50px;
  height:60%;
  pointer-events:none;
  z-index:0;
  background:
    /* ç¸¦èŒ */
    linear-gradient(0deg,
      rgba(33,180,135,.22) 0%,
      rgba(33,180,135,.16) 45%,
      rgba(123,85,255,.10) 70%,
      transparent 100%
    ) 10px 0 / 2px 100% no-repeat,
    /* è‘‰1 */
    radial-gradient(ellipse 16px 9px at 10px 88%, rgba(33,180,135,.28), transparent 80%) no-repeat,
    /* è‘‰2 */
    radial-gradient(ellipse 14px 8px at 10px 62%, rgba(33,180,135,.20), transparent 80%) no-repeat,
    /* è‘‰3 */
    radial-gradient(ellipse 10px 6px at 10px 36%, rgba(123,85,255,.16), transparent 80%) no-repeat,
    /* ãƒˆã‚² */
    linear-gradient(45deg, rgba(255,47,134,.32) 0%, transparent 55%) 14px 75% / 14px 6px no-repeat;
}
</style>
</head>

<!-- â˜… data-id ã¯ SLUG ã¨ä¸€è‡´ã•ã›ã‚‹ -->
<body data-id="frenemy-scan">
<header class="hd" role="banner">
  <div class="wrap">
    <div class="ttl">
      <span aria-hidden="true">ğŸ•µï¸</span>
      <span id="pageTitle">ãƒ•ãƒ¬ãƒãƒŸãƒ¼è¦‹æŠœãè¨ºæ–­</span>
      <span class="rank" aria-label="ç¾åœ¨ã®ãƒ©ãƒ³ã‚¯">
        <span aria-hidden="true">ğŸ§©</span><span>æœªåˆ¤å®š</span>
      </span>
    </div>
    <div class="sub" id="pageSub">
      å‹ã ã¡é¡”ã®æ•µã‚’ã€5ã¤ã®èµ¤ä¿¡å·ã§é™ã‹ã«ã‚ã¶ã‚Šå‡ºã™ã€‚è§£æä¸­â€¦
    </div>
  </div>
</header>

<!-- å›ºå®šé€²æ—ãƒãƒ¼ -->
<div class="progress-fixed" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
  <div class="progress-bar" style="width:0%"></div>
</div>

<main class="wrap" id="app" role="main" aria-live="polite">

  <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼ˆt00.webpï¼‰ -->
  <figure class="hero">
    <img id="heroImg" src="/shindan/assets/results/frenemy-scan/t00.webp" alt="ãƒ•ãƒ¬ãƒãƒŸãƒ¼è¦‹æŠœãè¨ºæ–­ã®ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ" loading="lazy">
  </figure>

  <!-- ãƒ—ãƒ­ãƒ­ãƒ¼ã‚° -->
  <section id="prologue" class="paper" aria-label="ãƒ—ãƒ­ãƒ­ãƒ¼ã‚°">
    <h2 id="proTitle">ã€Œã‚ãªãŸã®ã“ã¨ã€ãšã£ã¨å¿œæ´ã—ã¦ã‚‹ã‚ˆã€</h2>
<p id="proLine1">ã“ã®ä¸€è¨€ã‚’è¨€ã„ãªãŒã‚‰ã€ã‚ãªãŸã®å¤±æ•—ã‚’ä¸€ç•ªæ¥½ã—ã‚“ã§ã„ã‚‹äººé–“ãŒã€ä¸–ã®ä¸­ã«ã¯ã„ã¾ã™ã€‚</p>
<p id="proLine2">å«Œãªã‚„ã¤ã˜ã‚ƒãªã„ã§ã™ã€‚ã‚€ã—ã‚ã„ã„ã‚„ã¤ã§ã™ã€‚ç¬‘é¡”ã‚‚æœ¬ç‰©ã§ã™ã€‚<b>ãŸã ã€ã‚ãªãŸãŒè½ã¡ã‚‹ã¨ãã€å°‘ã—ã ã‘å…ƒæ°—ã«ãªã‚‹ã€‚</b>ã‚ãªãŸãŒä¸ŠãŒã‚‹ã¨ãã€å°‘ã—ã ã‘é™ã‹ã«ãªã‚‹ã€‚</p>
<p id="proLine3">å¿ƒå½“ãŸã‚Šã€ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</p>
<p class="note">â€»ã‚ã‚‹ãªã‚‰ã€ãã®äººã‚’æ€ã„æµ®ã‹ã¹ãªãŒã‚‰ã©ã†ãã€‚å½“ãŸã£ã¦ã‚‚æ€’ã‚‰ãªã„ã§ãã ã•ã„ã€‚</p>
<button type="button" id="startBtn" class="start-btn" aria-label="è¨ºæ–­ã‚’å§‹ã‚ã‚‹">
  <span class="emo">ğŸ­</span><span id="startLabel">ä»®é¢ã‚’å‰¥ã</span>
</button>
  </section>

  <!-- è³ªå•ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆåˆæœŸã¯éè¡¨ç¤ºï¼‰ -->
  <section id="quiz" class="paper" aria-label="è³ªå•ã‚»ã‚¯ã‚·ãƒ§ãƒ³" style="display:none">
    <div class="quiz-vine-right" aria-hidden="true"></div>
    <div class="quiz-vine-left"  aria-hidden="true"></div>
    <div class="scan-line" id="scanLine" aria-hidden="true"></div>
    <div class="qhead">
      <div class="qnum" id="qnum">Q1/??</div>
      <div class="qtag" id="qtag"><span class="qtag-dot" aria-hidden="true"></span><span>ã‚¹ã‚­ãƒ£ãƒ³ä¸­</span></div>
    </div>
    <div class="qtext" id="qtext">â€¦</div>
    <div class="opts" id="opts" role="group" aria-label="å›ç­”ã‚’é¸æŠ"></div>

    <div class="ctrls">
      <button type="button" id="prevBtn" aria-label="å‰ã®è¨­å•ã¸æˆ»ã‚‹">ã‚‚ã©ã‚‹</button>
    </div>
  </section>

  <!-- çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <section id="result" class="paper result" aria-label="çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³">
    <h2 style="margin-top:0">ğŸ•µï¸ è§£æãƒ¬ãƒãƒ¼ãƒˆ</h2>

    <div class="flex">
      <div class="imgbox">
        <img id="resultImg" src="" alt="" loading="lazy">
      </div>
      <div class="text">
        <div class="badge-line">
          <span class="badge-pill" id="gradeBadge"><span aria-hidden="true">ğŸ§©</span><span>æœªåˆ¤å®š</span></span>
          <span class="badge-pill" id="scoreBadge">ã‚¹ã‚³ã‚¢ â€”ç‚¹</span>
        </div>

        <h3 class="result-title-main" id="resultTitle">â€”</h3>
        <div class="threat-label" id="threatLabel">THREAT LEVEL â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%</div>
        <div class="threat-meter" aria-label="è„…å¨ãƒ¬ãƒ™ãƒ«">
          <div class="threat-fill" id="threatFill" style="width:0%"></div>
        </div>
        <p class="result-title-sub" id="resultSubtitle">â€”</p>

        <div class="result-comment" id="resultComment" aria-label="çµæœã‚³ãƒ¡ãƒ³ãƒˆ">
          <p class="rc-ttl">â€”</p>
          <p>â€”</p>
        </div>

        <div class="today-box" aria-label="ä»Šæ—¥ã®ä¸€æ‰‹">
          <div class="today-head"><span aria-hidden="true">ğŸ›¡ï¸</span><span>ä»Šæ—¥ã®ä¸€æ‰‹</span></div>
          <div class="today-text" id="todayText">â€”</div>
        </div>

        <p class="result-small" id="resultSmall" style="display:none"></p>

        <!-- å› å­ãƒãƒ¼ -->
        <div class="bars" id="bars" aria-label="å› å­ãƒãƒ¼"></div>
      </div>
    </div>

    <!-- å‰å›ã®å›ç­”ï¼ˆä¸€è¦§ï¼‰ -->
    <details id="prevBlock" class="fold-card">
      <summary>ğŸ“ å‰å›ã®å›ç­”ï¼ˆä¸€è¦§ï¼‰<span aria-hidden="true">â–¾</span></summary>
      <ul id="prevList" class="prev-list"></ul>
    </details>

    <!-- ã‚®ãƒ£ãƒ©ãƒªãƒ¼ï¼ˆt01ã€œt05ï¼‰ -->
    <details id="galleryBlock" class="fold-card">
      <summary>ğŸ–¼ ãƒ©ãƒ³ã‚¯ã®ã‚®ãƒ£ãƒ©ãƒªãƒ¼<span aria-hidden="true">â–¾</span></summary>
      <div class="gallery" id="gallery"></div>
    </details>

    <!-- ç ”ç©¶ãƒ¡ãƒ¢ -->
    <details class="meta-note" id="researchNotes">
      <summary>ğŸ“š ç ”ç©¶ãƒ¡ãƒ¢<span aria-hidden="true">â–¾</span></summary>
      <ul id="researchList">
  <li>
  <strong>å®Ÿé¨“ï¼ˆå‹äºº ï¼‰</strong>ï¼š<strong>ã€Œå¥½ãï¼‹ã—ã‚“ã©ã„ï¼ˆä¸¡ä¾¡ï¼‰ã€ãªå‹äºº</strong>ãŒã„ã‚‹ã¨ã€<strong>å¿ƒè‡“ãƒ»è¡€åœ§ã®è² è·ï¼ˆåå¿œæ€§ï¼‰</strong>ãŒä¸ŠãŒã‚Šã‚„ã™ã„å¯èƒ½æ€§ã€‚
  <br>ä¸»è¦çµæœï¼šå‹äººé–¢ä¿‚ã®ã€Œå¥½æ„ã¨ã‚¤ãƒ©ã¤ããŒæ··åœ¨ã€ã—ã¦ã„ã‚‹ã»ã©ã€ã‚¹ãƒˆãƒ¬ã‚¹å ´é¢ã®<strong>å¿ƒè¡€ç®¡åå¿œ</strong>ãŒæ‚ªåŒ–ã—ã‚„ã™ã„ï¼ˆæ–¹å‘æ€§ï¼‰ã€‚
  <br><small>é™ç•Œï¼šè©³ç´°ãªNãƒ»åŠ¹æœé‡ã¯è«–æ–‡ã§è¦ç¢ºèªï¼å®Ÿé¨“orè¦³å¯Ÿã§è§£é‡ˆãŒå¤‰ã‚ã‚‹ã€‚</small>
</li>

<li>
  <strong>æ¨ªæ–­ï¼ˆæˆäººï¼‰</strong>ï¼š<strong>ä¸¡ä¾¡çš„ãªå¯¾äººé–¢ä¿‚ãŒå¤šã„äººã»ã©</strong>ã€<strong>ç´°èƒè€åŒ–ã®æŒ‡æ¨™ï¼ˆãƒ†ãƒ­ãƒ¡ã‚¢ï¼‰</strong>ãŒçŸ­ã„å¯èƒ½æ€§ã€‚
  <br>ä¸»è¦çµæœï¼šãƒã‚¸ãƒ†ã‚£ãƒ–ã ã‘/ãƒã‚¬ãƒ†ã‚£ãƒ–ã ã‘ã‚ˆã‚Šã‚‚ã€ã€Œä¸¡æ–¹æ··ã–ã‚‹é–¢ä¿‚ã€ãŒå¥åº·æŒ‡æ¨™ã«ä¸åˆ©ã«ãªã‚Šã‚„ã™ã„ã¨ã„ã†ç¤ºå”†ï¼ˆæ–¹å‘æ€§ï¼‰ã€‚
  <br><small>é™ç•Œï¼šæ¨ªæ–­ãªã®ã§å› æœã¯ä¸æ˜ï¼ˆå¥åº·ãŒæ‚ªã„â†’é–¢ä¿‚ãŒã“ã˜ã‚Œã‚‹ã€ã‚‚ã‚ã‚Šå¾—ã‚‹ï¼‰ã€‚</small>
</li>

<li>
  <strong>è¦³å¯Ÿï¼ˆå¤«å©¦ãƒ»ãƒšã‚¢ ï¼‰</strong>ï¼šé–¢ä¿‚ãŒ<strong>ã€Œè‰¯ã„éƒ¨åˆ†ã‚‚ã‚ã‚‹ãŒã€ã—ã‚“ã©ã„éƒ¨åˆ†ã‚‚ã‚ã‚‹ã€</strong>ã¨ã€<strong>å‹•è„ˆã®ãƒªã‚¹ã‚¯æŒ‡æ¨™ï¼ˆä¾‹ï¼šå† å‹•è„ˆçŸ³ç°åŒ–ãªã©ï¼‰</strong>ã¨é–¢é€£ã™ã‚‹å¯èƒ½æ€§ã€‚
  <br>ä¸»è¦çµæœï¼šé–¢ä¿‚ã®è³ªãŒâ€œå˜ç´”ã«æ‚ªã„â€ã‚ˆã‚Šã€<strong>è‰¯ã„ï¼‹æ‚ªã„ãŒæ··ã–ã‚‹</strong>æ–¹ãŒãƒªã‚¹ã‚¯ã¨çµã³ã¤ãã“ã¨ãŒã‚ã‚‹ï¼ˆæ–¹å‘æ€§ï¼‰ã€‚
  <br><small>é™ç•Œï¼šäº¤çµ¡ï¼ˆç”Ÿæ´»ç¿’æ…£ãƒ»æ€§æ ¼ãƒ»ã‚¹ãƒˆãƒ¬ã‚¹ç’°å¢ƒï¼‰ã‚’ã©ã“ã¾ã§çµ±åˆ¶ã—ãŸã‹ã§å¼·ã•ãŒå¤‰ã‚ã‚‹ã€‚</small>
</li>

<li>
  <strong>ãƒ¬ãƒ“ãƒ¥ãƒ¼/ç†è«–ï¼ˆè·å ´é–¢ä¿‚ï¼‰</strong>ï¼šè·å ´ã®<strong>ã€Œè¿‘ã„ã®ã«ä¿¡ç”¨ã§ããªã„ã€</strong>ç›¸æ‰‹ã¯ã€<strong>è­¦æˆ’ãƒ»æ„Ÿæƒ…åŠ´åƒãƒ»åã™ã†</strong>ã‚’å¢—ã‚„ã—ã‚„ã™ã„ã€‚
  <br>ä¸»è¦çµæœï¼šé–¢ä¿‚ã‚’ç¶­æŒã™ã‚‹â€œã‚³ã‚¹ãƒˆâ€ãŒä¸ŠãŒã‚Šã€<strong>é›†ä¸­åŠ›ãƒ»æ°—åˆ†ãƒ»å¯¾äººåˆ¤æ–­</strong>ãŒå‰Šã‚‰ã‚Œã‚„ã™ã„ï¼ˆæ–¹å‘æ€§ï¼‰ã€‚
  <br><small>é™ç•Œï¼šãƒ¢ãƒ‡ãƒ«ä¸­å¿ƒã®ã“ã¨ãŒå¤šãã€è·ç¨®ãƒ»æ¨©åŠ›å·®ãƒ»æ–‡åŒ–ã§å‡ºæ–¹ãŒå¤‰ã‚ã‚‹ã€‚</small>
</li>

<li>
  <strong>è·å ´ãƒ‡ãƒ¼ã‚¿</strong>ï¼šã„ã‚ã‚†ã‚‹<strong>ãƒ•ãƒ¬ãƒãƒŸãƒ¼ï¼ˆå‹å¥½çš„ã ãŒç«¶äº‰ãƒ»ç‰½åˆ¶ãŒæ··ã–ã‚‹ï¼‰</strong>ã¯ã€çŠ¶æ³ã«ã‚ˆã£ã¦<strong>å”åŠ›è¡Œå‹•ãŒå¢—ãˆã‚‹</strong>ã“ã¨ã‚‚ã‚ã‚‹ãŒã€åŸºæœ¬ã¯<strong>æ¶ˆè€—ã¨ã‚»ãƒƒãƒˆ</strong>ã€‚
  <br>ä¸»è¦çµæœï¼šã€ŒåŠ©ã‘ã‚‹/åŠ©ã‘ãªã„ã€ãŒã€<strong>è©•ä¾¡ãƒ»ç«‹å ´ãƒ»ç›£è¦–ã®æœ‰ç„¡</strong>ãªã©ã§ãƒ–ãƒ¬ã‚„ã™ã„ï¼ˆæ–¹å‘æ€§ï¼‰ã€‚
  <br><small>é™ç•Œï¼šåŠ¹æœã¯æ¡ä»¶ä¾å­˜ï¼ˆâ€œå¾—ã«ãªã‚‹æ™‚ã ã‘å–„äººâ€ã‚’æ‹¾ã£ã¦ã—ã¾ã†å¯èƒ½æ€§ï¼‰ã€‚</small>
</li>
</ul>
    </details>

    <p class="meta">â€»æœ¬ãƒšãƒ¼ã‚¸ã¯å¨¯æ¥½ï¼‹è‡ªå·±ç†è§£ã®è£œåŠ©ã‚’ç›®çš„ã¨ã—ãŸç°¡æ˜“ãƒ†ã‚¹ãƒˆã§ã™ã€‚ä½“èª¿ã‚„ä¸èª¿ãŒç¶šãå ´åˆã¯å°‚é–€æ©Ÿé–¢ã¸ã”ç›¸è«‡ãã ã•ã„ã€‚</p>

    <div class="back-row" aria-label="æ“ä½œãƒ¡ãƒ‹ãƒ¥ãƒ¼">
      <button type="button" class="back back-primary" id="restartBtn" aria-label="æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™">
        <span aria-hidden="true">ğŸ”</span><span>æœ€åˆã‹ã‚‰</span>
      </button>

      <a class="back back-ghost" href="/shindan/" aria-label="è¨ºæ–­ä¸€è¦§ã«æˆ»ã‚‹">
        <span aria-hidden="true">ğŸ§ª</span><span>è¨ºæ–­ä¸€è¦§ã¸</span><span class="chev" aria-hidden="true">â€º</span>
      </a>
    </div>
  </section>
</main>

<!-- âœ…ã ã‘ã®ãƒˆãƒ¼ã‚¹ãƒˆ -->
<div class="mini-toast" id="toast" role="status" aria-live="polite">âœ…</div>

<script>
/* ===== å›ºå®šé€²æ—ãƒãƒ¼ ===== */
function updateProgress(p){
  var bar = document.querySelector('.progress-bar');
  var wrap = document.querySelector('.progress-fixed');
  var val = Math.max(0,Math.min(100,p));
  if(bar){
    bar.style.width = val + '%';
    if(val > 0){
      bar.classList.remove('pulse');
      void bar.offsetWidth;
      bar.classList.add('pulse');
    }
  }
  if(wrap) wrap.setAttribute('aria-valuenow', String(val));
}

/* ===== åŸºæœ¬è¨­å®š ===== */
const SLUG = 'frenemy-scan';
const IMG_BASE = `/shindan/assets/results/${SLUG}/`;

/* ä¿å­˜ã‚­ãƒ¼ï¼ˆè¡çªå›é¿ï¼šSLUGã‚’å«ã‚ã‚‹ï¼‰ */
const LS_ANS     = `shindan:${SLUG}:answers`;
const LS_IDX     = `shindan:${SLUG}:index`;
const LS_LASTANS = `shindan:${SLUG}:lastAnswers`;

/* ===== å›ç­”ãƒ©ãƒ™ãƒ«ï¼ˆæ•°å­—ç¦æ­¢ï¼‰ ===== */
const LABELS = ['ãœã‚“ãœã‚“','ã‚ã¾ã‚Š','ã©ã¡ã‚‰ã¨ã‚‚','ã‚ã‚Šã¨','ã¨ã¦ã‚‚'];
function descFor(i){
  return ['ã»ã¼ãªã„','ã™ã“ã—','åŠã€…','ã‚ˆãã‚ã‚‹','ã‚ã£ã¡ã‚ƒã‚ã‚‹'][i] || '';
}

/* =========================================================
  EDIT HEREï¼šå› å­ãƒ»è¨­å•ãƒ»æ¡ç‚¹ãƒ»çµæœæ–‡
========================================================= */

/* å› å­ï¼ˆ5æœ¬ï¼‰ */
const FACTS = ['JEAL','TWO','PASS','TRUST','FAIR'];
const FACT_LABEL = {
  JEAL:'ç«¶äº‰ãƒ»å«‰å¦¬',
  TWO:'äºŒé¢æ€§',
  PASS:'éš ã‚Œæ”»æ’ƒ',
  TRUST:'ä¿¡é ¼ã®è–„ã•',
  FAIR:'ä¸å…¬å¹³æ„Ÿ'
};
const FACT_DESC  = {
  JEAL:'æˆåŠŸã®ã¨ãã«ç¥ç¦ãŒè–„ã„ï¼æ¯”è¼ƒãŒå¤šã„ã€‚',
  TWO:'äººå‰ã¨äºŒäººãã‚Šã§æ…‹åº¦ãŒå¤‰ã‚ã‚‹ï¼é™°ã§å›ã‚‹ã€‚',
  PASS:'çš®è‚‰ãƒ»æ£˜ä»˜ãç§°è³›ãƒ»â€œå†—è«‡â€ã§åˆºã™ã€‚',
  TRUST:'ç§˜å¯†ã‚’é ã‘ã«ãã„ï¼æƒ…å ±ãŒæ­¦å™¨åŒ–ã•ã‚Œãã†ã€‚',
  FAIR:'é ¼ã‚‰ã‚Œã‚‹ã®ã«è¿”ã£ã¦ã“ãªã„ï¼åˆ©ç”¨æ„Ÿã€‚'
};

/* è¨­å•ï¼ˆ20å•ï¼šå„å› å­4å•ï¼‰
  å¯¾è±¡ã¯ã€Œãã®äººï¼ˆæ°—ã«ãªã‚‹ç›¸æ‰‹ï¼‰ã€ã‚’æ€ã„æµ®ã‹ã¹ã¦å›ç­”ã€‚
*/
const QUESTIONS = [
  // JEALï¼ˆç«¶äº‰ãƒ»å«‰å¦¬ï¼‰
  {t:'ç›¸æ‰‹ã¯ã€ã“ã¡ã‚‰ã®è‰¯ã„å ±å‘Šã‚’ç´ ç›´ã«ç¥ã‚ãšã€ã‘ãªã™ï¼ä¸Šã‹ã‚‰è©•ä¾¡ã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚', key:'JEAL'},
  {t:'ç›¸æ‰‹ã¯ã€ã“ã¡ã‚‰ãŒå¤±æ•—ã™ã‚‹ã¨ã€Œã‚„ã£ã±ã‚Šã­ã€ã¿ãŸã„ãªç©ºæ°—ã‚’å‡ºã™ã“ã¨ãŒã‚ã‚‹ã€‚', key:'JEAL'},
  {t:'ç›¸æ‰‹ã¯ã€ã“ã¡ã‚‰ã®è©±ã‚’ã•ãˆãã£ã¦è‡ªåˆ†ã®è‡ªæ…¢ã‚„è‹¦åŠ´è©±ã«ä¹—ã£å–ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚', key:'JEAL'},
  {t:'ç›¸æ‰‹ã¯ã€è¤’ã‚ãµã‚Šã—ã¦ä¸‹ã’ã¦ãã‚‹ï¼ˆä¾‹ï¼šã€Œã§ãã¦ã‚‹ã‘ã©ã€èª°ã§ã‚‚ã§ãã‚‹ã‚„ã¤ã ã‚ˆã€ï¼‰ã€‚', key:'JEAL'},

  // TWOï¼ˆäºŒé¢æ€§ï¼‰
  {t:'ç›¸æ‰‹ã¯ã€äºŒäººãã‚Šã ã¨å„ªã—ã„ã®ã«ã€äººå‰ã ã¨æ€¥ã«å†·ãŸããªã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚', key:'TWO'},
  {t:'è¤‡æ•°äººã®å ´ã§ã€ç›¸æ‰‹ãŒã“ã¡ã‚‰ã®è¨€ã„æ–¹ã‚’æ‚ªãè¦‹ã›ãŸã‚Šã€è²¬ä»»ã‚’ã“ã¡ã‚‰ã«å¯„ã›ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚', key:'TWO'},
  {t:'ç›¸æ‰‹ã¯ã€ã€Œèª°ã‹ãŒè¨€ã£ã¦ãŸã€ã§ã“ã¡ã‚‰ã®ä¸å®‰ã‚’ã‚ãŠã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚', key:'TWO'},
  {t:'ç›¸æ‰‹ã«è©±ã—ãŸã“ã¨ãŒã€ä»–äººã®å£ã‹ã‚‰æˆ»ã£ã¦ããŸã“ã¨ãŒã‚ã‚‹ã€‚', key:'TWO'},

  // PASSï¼ˆéš ã‚Œæ”»æ’ƒï¼‰
  {t:'ç›¸æ‰‹ã¯ã€å†—è«‡ã®å½¢ã§ã“ã¡ã‚‰ã‚’è¦‹ä¸‹ã™ã“ã¨ãŒã‚ã‚‹ã€‚', key:'PASS'},
  {t:'ç›¸æ‰‹ã¯ã€ã‹ã‚‰ã‹ã„ãƒ»çš®è‚‰ã§ã“ã¡ã‚‰ã®å¼±ç‚¹ã‚’çªã„ã¦ãã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚', key:'PASS'},
  {t:'ç›¸æ‰‹ã¯ã€ä¸æ©Ÿå«Œã‚„ç„¡è¦–ã§ã“ã¡ã‚‰ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã‚ˆã†ã¨ã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚', key:'PASS'},
  {t:'ç›¸æ‰‹ã¯ã€ã€Œå‘ã„ã¦ãªã„ã€ã€Œç„¡ç†ã€ãªã©è‡ªä¿¡ã‚’æŠ˜ã‚‹è¨€ã„æ–¹ã‚’ã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚', key:'PASS'},

  // TRUSTï¼ˆä¿¡é ¼ï¼‰
  {t:'ç›¸æ‰‹ã«ã¯ã€å¼±ã¿ã‚„æ‚©ã¿ã‚’è©±ã™ã¨å¾Œã§ä½¿ã‚ã‚Œãã†ã§æ€–ã„ã€‚', key:'TRUST'},
  {t:'ç›¸æ‰‹ã¯ã€ç§˜å¯†ã‚’å®ˆã‚‹ã‚ˆã‚Šãƒã‚¿ã«ã™ã‚‹å´ã ã¨æ„Ÿã˜ã‚‹ã€‚', key:'TRUST'},
  {t:'ç›¸æ‰‹ã«ç›¸è«‡ã™ã‚‹ã¨ã€åŠ©ã‘ã‚‹ã‚ˆã‚Šæƒ…å ±ã‚’é›†ã‚ã¦ã‚‹æ„Ÿã˜ãŒã™ã‚‹ã€‚', key:'TRUST'},
  {t:'ç›¸æ‰‹ã¯ã€å–„æ„ã‚ˆã‚Šå¾—ã‚„ç«‹å ´ã‚’å„ªå…ˆã—ã¦å‹•ãã“ã¨ãŒå¤šã„ã€‚', key:'TRUST'},

  // FAIRï¼ˆå…¬å¹³ï¼‰
  {t:'ç›¸æ‰‹ã¨ã®é–¢ä¿‚ã¯ã€ã“ã¡ã‚‰ãŒæ°—ã‚’é£ã†é‡ã®æ–¹ãŒå¤šã„ã€‚', key:'FAIR'},
  {t:'ç›¸æ‰‹ã¯ã€è‡ªåˆ†ãŒå›°ã‚‹æ™‚ã ã‘è¿‘ã¥ã„ã¦ãã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚', key:'FAIR'},
  {t:'ç›¸æ‰‹ã¨é–¢ã‚ã£ãŸå¾Œã€ç–²ã‚Œã‚‹ï¼è½ã¡è¾¼ã‚€ã“ã¨ãŒå¤šã„ã€‚', key:'FAIR'},
  {t:'ç›¸æ‰‹ã¯ã€å”åŠ›ã‚ˆã‚Šåˆ©ç”¨ï¼ˆéƒ½åˆã®è‰¯ã•ï¼‰ã‚’å„ªå…ˆã—ã¦ã‚‹æ°—ãŒã™ã‚‹ã€‚', key:'FAIR'}
];

/* 5æ®µéšãƒ©ãƒ³ã‚¯ï¼ˆç”»åƒã¯ã‚¹ã‚³ã‚¢å¸¯â†’t01ã€œt05ï¼‰ */
const GRADE_DEF = [
  {
  min:0, max:39, emo:'ğŸ•¯ï¸', label:'ãŸã ã®ã„ã„äººã§ã—ãŸ', img:'t01.webp', alt:'ãƒ•ãƒ¬ãƒãƒŸãƒ¼åº¦ ä½',
  headline:'ãã®äººã€ã‚·ãƒ­ã§ã™ã€‚ç–‘ã£ã¦ã”ã‚ã‚“ãªã•ã„ã—ã¦ãã ã•ã„ã€‚',
  blurb:'ãƒ•ãƒ¬ãƒãƒŸãƒ¼ã®ç‰¹å¾´ã§ã‚ã‚‹ã€Œã‘ãªã—ãƒ»äºŒé¢æ€§ãƒ»éš ã‚ŒãŸæ”»æ’ƒãƒ»æƒ…å ±æ¼ã‚Œãƒ»åˆ©ç”¨ã€â€”â€”ä»Šå›ã®å›ç­”ã‚’è¦‹ã‚‹é™ã‚Šã€ã»ã¼å½“ã¦ã¯ã¾ã£ã¦ã„ã¾ã›ã‚“ã€‚ãã®é•å’Œæ„Ÿã®æ­£ä½“ã€ãŸã¶ã‚“ç›¸æ‰‹ã˜ã‚ƒãªãã¦ã€ŒãŠäº’ã„ç–²ã‚Œã¦ãŸæ—¥ã€ã¨ã‹ã€Œã¡ã‚‡ã£ã¨ç›¸æ€§ãŒåˆã‚ãªã„éƒ¨åˆ†ãŒã‚ã‚‹ã€ã¨ã‹ãã†ã„ã†ã‚„ã¤ã§ã™ã€‚æ™®é€šã«ã‚ã‚Šã¾ã™ã‚ˆãã‚Œã€äººé–“é–¢ä¿‚ã«ã€‚ç„¡å®Ÿã®äººã‚’ã“ã“ã¾ã§é€£ã‚Œã¦ãã¦ã—ã¾ã„ã¾ã—ãŸãŒã€æ‚ªæ„ã‚ã‚‹äººç‰©ã§ã¯ãªã•ãã†ãªã®ã§ã€ã„ã£ãŸã‚“å®¹ç–‘è€…ãƒªã‚¹ãƒˆã‹ã‚‰å¤–ã—ã¦ã‚ã’ã¦ãã ã•ã„ã€‚',
  action:'ä»Šæ—¥ã®ä¸€æ‰‹ï¼šãã‚Œã§ã‚‚ãƒ¢ãƒ¤ãŒæ®‹ã‚‹ãªã‚‰ã€Œåˆºã•ã£ãŸå‡ºæ¥äº‹ã€ã‚’1è¡Œãƒ¡ãƒ¢ã€‚ä½•ã‚‚ç©ã¿ä¸ŠãŒã‚‰ãªã„ãªã‚‰ã€ãã‚ŒãŒç­”ãˆã§ã™ã€‚'
},
  {
    min:40, max:59, emo:'ğŸª', label:'åœ°å‘³ã«å‰Šã£ã¦ãã‚‹äºº', img:'t02.webp', alt:'ãƒ•ãƒ¬ãƒãƒŸãƒ¼åº¦ ã‚„ã‚„ä½',
    headline:'åˆƒç‰©ã˜ã‚ƒãªãã¦ãƒ¤ã‚¹ãƒªã€‚æ°—ã¥ã„ãŸã‚‰å‰Šã‚‰ã‚Œã¦ã‚‹ã‚„ã¤ã€‚',
    blurb:'å¤§å£°ã§å‚·ã¤ã‘ãªã„ã‹ã‚‰å„ä»‹ãªã‚“ã§ã™ã‚ˆã­ã€ã“ã®ã‚¿ã‚¤ãƒ—ã€‚è¤’ã‚ãŸã‚ã¨ã«ã€Œã§ã‚‚ã•ã€ãŒå¿…ãšã‚»ãƒƒãƒˆã§ã¤ã„ã¦ãã‚‹ã€ã‚ãªãŸãŒæˆåŠŸã—ãŸæ—¥ã ã‘åå¿œãŒè–„ã„ã€ãƒŸã‚¹ã£ãŸæ—¥ã¯å¦™ã«å…ƒæ°—ã«ãªã‚‹ã€‚è¨¼æ‹ ã‚’çªãã¤ã‘ã‚ˆã†ã¨ã—ã¦ã‚‚ã€Œãã‚“ãªã¤ã‚‚ã‚Šã˜ã‚ƒãªã‹ã£ãŸã€ã§ä¸€ç™ºçµ‚äº†ã™ã‚‹ã‚„ã¤ã€‚ã•ã‚‰ã«æ©Ÿå«Œã®ã„ã„æ—¥ã«å…¨éƒ¨ä¸Šæ›¸ãã—ã¦ã€Œã‚„ã£ã±ã„ã„äººã‹ã‚‚ã€ã£ã¦ãªã‚‹ãƒ«ãƒ¼ãƒ—ã«ã¯ã¾ã£ã¦ã‚‹ãªã‚‰ã€ãã‚Œã‚‚ã†ãƒ‘ã‚¿ãƒ¼ãƒ³ç¢ºå®šã§ã™ã€‚',
    action:'ä»Šæ—¥ã®ä¸€æ‰‹ï¼šãã®äººã«æ¸¡ã•ãªã„ã‚‚ã®ã‚’1ã¤æ±ºã‚ã‚‹ã€‚ç§˜å¯†ãƒ»å¼±éŸ³ãƒ»äºˆå®šãƒ»åŠ´åŠ›ã€ã©ã‚Œã§ã‚‚ã€‚æ¸¡ã™é‡ã‚’æ¸›ã‚‰ã™ã ã‘ã§æ¶ˆè€—ãŒãƒã‚·ã«ãªã‚Šã¾ã™ã€‚'
  },
  {
    min:60, max:74, emo:'ğŸ­', label:'ç¬‘é¡”ã®ä½¿ã„æ‰‹', img:'t03.webp', alt:'ãƒ•ãƒ¬ãƒãƒŸãƒ¼åº¦ ä¸­',
    headline:'åˆºã—ã¦ãã‚‹ã‚“ã ã‘ã©è¨¼æ‹ ãŒæ®‹ã‚‰ãªã„ã‚“ã§ã™ã‚ˆã­ã€ã“ã®ã‚¿ã‚¤ãƒ—ã€‚',
    blurb:'ã€Œå†—è«‡ã‚„ã‚“ã€ã€Œã„ã˜ã£ã¦ã‚‹ã ã‘ã‚„ã‚“ã€ã€Œãã‚“ãªæ€’ã‚‹ï¼Ÿã€â€”â€”ã¯ã„ã€å…¨éƒ¨è¨€ã„è¨³ã®ä¸‰ç¨®ã®ç¥å™¨ã§ã™ã­ã€‚äºŒäººã®ã¨ãã¯ç¥å¯¾å¿œã§ã€äººå‰ã ã¨æ€¥ã«ã‚ãªãŸã‚’ç¬‘ã„ã®ãƒã‚¿ã«ã™ã‚‹ã€‚ã—ã‹ã‚‚æ·±ã„è©±ã‚’ã™ã‚Œã°ã™ã‚‹ã»ã©ã€æ„Ÿæƒ…ã¨æƒ…å ±ã‚’å›åã•ã‚Œã¦å¾Œã§ææ–™ã«ã•ã‚Œã‚‹ã€‚æ­£é¢ã‹ã‚‰ã€Œãã‚Œã©ã†ã„ã†æ„å‘³ï¼Ÿã€ã¨è©°ã‚ã‚‹ã¨ã€Œè¢«å®³å¦„æƒ³ã™ãã€ã«å¤‰æ›ã•ã‚Œã‚‹ã®ãŒã‚ªãƒã€‚æ­£ã—ã„ã®ã¯ã‚ãªãŸã§ã‚‚ã€æ­£é¢è¡çªã¯ç¢ºå®Ÿã«è² ã‘ã‚‹æˆ¦å ´ãªã®ã§ã€ã•ã£ã•ã¨å ´ã¨è·é›¢ã‚’å¤‰ãˆã¾ã—ã‚‡ã†ã€‚',
    action:'ä»Šæ—¥ã®ä¸€æ‰‹ï¼šä¸€å¯¾ä¸€ã‚’æ¸›ã‚‰ã™ã€‚ä¼šã†ãªã‚‰è¤‡æ•°äººã€è©±ã™ãªã‚‰ç”¨ä»¶ã ã‘ã€‚æ£˜ã®åˆºã•ã‚‹é¢ç©ã‚’ç‰©ç†çš„ã«å‰Šã£ã¦ãã ã•ã„ã€‚'
  },
  {
    min:75, max:89, emo:'ğŸ¦‚', label:'ä¼šã†ã¨è¬ã«ç–²ã‚Œã‚‹äºº', img:'t04.webp', alt:'ãƒ•ãƒ¬ãƒãƒŸãƒ¼åº¦ é«˜',
    headline:'ãã®äººã€ã‚ãªãŸã‚’å……é›»ã—ã¦ã‚‹ã‚“ã˜ã‚ƒãªãã¦æ”¾é›»ã—ã¦ã¾ã™ã‚ˆã­ï¼Ÿ',
    blurb:'ä¼šã†ãŸã³ã«å¸°ã‚Šé“ãŒãªãœã‹ãã£ãŸã‚Šã€‚é ¼ã¿ã”ã¨ã ã‘ä¸€äººå‰ã«æ¥ã¦ã€ã‚ãªãŸã®ãŠé¡˜ã„ã¯ãƒ•ãƒ¯ãƒƒã¨ã‚¹ãƒ«ãƒ¼ã€‚ç›¸æ‰‹ã®æ„šç—´ã¯ãƒ•ãƒ«ã‚³ãƒ¼ã‚¹ãªã®ã«ã‚ãªãŸã®è©±ã¯é®ã‚‰ã‚Œã‚‹ã€‚ãã“ã«ã€Œèª°ã€…ãŒã“ã†è¨€ã£ã¦ãŸã‚ˆã€ç³»ã®æƒ…å ±ãŒæ··ã˜ã£ã¦ããŸã‚‰ã€ã‚‚ã†ã»ã¼ç¢ºå®šã§ã™ã€‚æ­£é¢è¡çªã¯çµ¶å¯¾ãƒ€ãƒ¡ã€‚ãªãœã‹ã£ã¦ã€å‘ã“ã†ã¯å•é¡Œè§£æ±ºã˜ã‚ƒãªãã¦å°è±¡ã‚²ãƒ¼ãƒ ã‚’ã‚„ã£ã¦ã‚‹ã‹ã‚‰ã€åœŸä¿µã«ä¹—ã£ãŸæ™‚ç‚¹ã§ã‚ãªãŸã®è² ã‘ã§ã™ã€‚ä»Šå¿…è¦ãªã®ã¯ç›¸æ‰‹ã®åçœã˜ã‚ƒãªãã¦ã€ã‚ãªãŸã®æ¶ˆè€—ã‚’æ­¢ã‚ã‚‹ã“ã¨ã€‚',
    action:'ä»Šæ—¥ã®ä¸€æ‰‹ï¼šãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆã‚’é™ã‹ã«è¨­è¨ˆã™ã‚‹ã€‚è¿”ä¿¡ã‚’é…ãã€äºˆå®šã‚’è–„ãã€æ¥ç‚¹ã‚’å°‘ãªãã€‚æ€¥ã«å†·ãŸãã—ãªãã¦ã„ã„ã€ã˜ã‚ã˜ã‚ã§ååˆ†ã§ã™ã€‚'
  },
  {
    min:90, max:100, emo:'ğŸš¨', label:'ã»ã¼æ•µ', img:'t05.webp', alt:'ãƒ•ãƒ¬ãƒãƒŸãƒ¼åº¦ æ¥µé«˜',
    headline:'å„ªã—ã„é¡”ã—ã¦æƒ…å ±ã ã‘æŒã£ã¦å¸°ã‚‹ãƒ—ãƒ­ã§ã™ã€ã“ã®äººã€‚',
    blurb:'ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ã€ã»ã¼ç¢ºå®šã§ã™ã€‚ã“ã®ã‚¿ã‚¤ãƒ—ã®æ€–ã„ã¨ã“ã‚ã¯æ€’é³´ã‚‰ãªã„ã—å«ŒãŒã‚‰ã›ã‚‚ã—ãªã„ã“ã¨ã€‚ç¬‘é¡”ã®ã¾ã¾ã€ã‚ãªãŸã®ç§˜å¯†ãƒ»å¼±ç‚¹ãƒ»äººé–“é–¢ä¿‚ã‚’ã‚³ãƒ„ã‚³ãƒ„åé›†ã—ã¦ã„ãã€‚ç›¸è«‡ã«ä¹—ã‚‹ãµã‚Šã§æ¢ã‚Šã‚’å…¥ã‚Œã¦ã€æ°—ã¥ã„ãŸã‚‰å…¨ç„¶é–¢ä¿‚ãªã„ãƒ«ãƒ¼ãƒˆã‹ã‚‰è©±ãŒå›ã£ã¦ãã¦ã€Œè¨€ã£ã¦ãªã„ã®ã«ãªã‚“ã§çŸ¥ã£ã¦ã‚‹ï¼Ÿã€ã£ã¦ãªã‚‹ã€‚ã“ã‚Œã¯ã‚ãªãŸãŒç–‘ã„æ·±ã„ã‚“ã˜ã‚ƒãªãã¦ã€ã‚»ãƒ³ã‚µãƒ¼ãŒæ­£å¸¸ã«ä»•äº‹ã‚’ã—ã¦ã‚‹ã ã‘ã§ã™ã€‚å¯¾æ±ºã¯ç›¸æ‰‹ã®å¾—æ„ç§‘ç›®ãªã®ã§å—ã‘ãªã„ã€‚æ­£è§£ã¯æƒ…å ±é®æ–­ã¨é™ã‹ãªæ’¤é€€ã€‚',
    action:'ä»Šæ—¥ã®ä¸€æ‰‹ï¼šå¼¾è–¬å°å°ã€‚æ–°ã—ã„æƒ…å ±ã‚’æ¸¡ã•ãªã„ã€å‡ºæ¥äº‹ã‚’è¨˜éŒ²ã™ã‚‹ã€ä¿¡é ¼ã§ãã‚‹äººã ã‘ã«å…±æœ‰ã™ã‚‹ã€‚é™ã‹ã«ã€ã§ã‚‚ç¢ºå®Ÿã«è·é›¢ã‚’å–ã‚‹ã“ã¨ã€‚'
  }
];

function gradeFromScore(pct){
  for(const g of GRADE_DEF){
    if(pct >= g.min && pct <= g.max) return g;
  }
  return GRADE_DEF[2];
}

/* æ¡ç‚¹
   - answers ã¯ 0..4ï¼ˆLABELSã®indexï¼‰
   - å› å­ã”ã¨å¹³å‡â†’0-100ã«å¤‰æ›
   - ç·åˆï¼šé‡ã¿ä»˜ãï¼ˆä¿¡é ¼ãƒ»äºŒé¢æ€§ã‚’é‡ã‚ï¼‰
*/
function computeScores(answers){
  const sums = {}, counts = {};
  FACTS.forEach(k=>{ sums[k]=0; counts[k]=0; });

  QUESTIONS.forEach((q,i)=>{
    let v = answers[i];
    if(v==null) return;
    sums[q.key] += v;     // 0..4
    counts[q.key] += 1;
  });

  const pct = {};
  FACTS.forEach(k=>{
    const avg04 = counts[k] ? (sums[k]/counts[k]) : 0; // 0..4
    const a15 = avg04 + 1;                             // 1..5
    pct[k] = Math.round((a15-1)/4*100);                // 0..100
  });

  const W = { JEAL:0.20, TWO:0.25, PASS:0.15, TRUST:0.25, FAIR:0.15 };
  let total = 0;
  FACTS.forEach(k=> total += (pct[k]||0) * (W[k]||0));
  const totalScore = Math.round(total);

  return { pct, totalScore };
}

/* ã‚®ãƒ£ãƒ©ãƒªãƒ¼ï¼ˆt01ã€œt05ï¼‰ */
function buildGallery(){
  return [
    {img:'t01.webp', cap:'è–„ã„éœ§', alt:'ãƒ•ãƒ¬ãƒãƒŸãƒ¼åº¦ ä½'},
    {img:'t02.webp', cap:'å°ã•ãªãƒ’ãƒ“', alt:'ãƒ•ãƒ¬ãƒãƒŸãƒ¼åº¦ ã‚„ã‚„ä½'},
    {img:'t03.webp', cap:'ä»®é¢ãŒæ¿ƒã„', alt:'ãƒ•ãƒ¬ãƒãƒŸãƒ¼åº¦ ä¸­'},
    {img:'t04.webp', cap:'æ¯’ã®äºˆæ„Ÿ', alt:'ãƒ•ãƒ¬ãƒãƒŸãƒ¼åº¦ é«˜'},
    {img:'t05.webp', cap:'ä¸€ç´šè­¦æˆ’', alt:'ãƒ•ãƒ¬ãƒãƒŸãƒ¼åº¦ æ¥µé«˜'}
  ];
}
/* ===== EDIT HERE END ===== */

/* ===== çŠ¶æ…‹ ===== */
let idx = 0;
let answers = new Array(QUESTIONS.length).fill(null);

/* ===== è¦ç´  ===== */
const $qnum = document.getElementById('qnum');
const $qtag = document.getElementById('qtag');
const $qtext = document.getElementById('qtext');
const $opts = document.getElementById('opts');
const $prev = document.getElementById('prevBtn');

const $quiz = document.getElementById('quiz');
const $result = document.getElementById('result');
const $prologue = document.getElementById('prologue');
const $startBtn = document.getElementById('startBtn');

const $rankBadge = document.querySelector('.rank');
const $gradeBadge = document.getElementById('gradeBadge');
const $scoreBadge = document.getElementById('scoreBadge');

const $resultImg = document.getElementById('resultImg');
const $resultTitle = document.getElementById('resultTitle');
const $resultSubtitle = document.getElementById('resultSubtitle');

const $resultComment = document.getElementById('resultComment');
const $todayText = document.getElementById('todayText');
const $resultSmall = document.getElementById('resultSmall');

const $bars = document.getElementById('bars');
const $prevList = document.getElementById('prevList');
const $gallery = document.getElementById('gallery');

const $restart = document.getElementById('restartBtn');
const $toast = document.getElementById('toast');

/* ===== ãƒˆãƒ¼ã‚¹ãƒˆ ===== */
const TOAST_LABELS = ['ğŸ˜','ğŸ‘€','ğŸ¤”','âš ï¸','ğŸ’€'];
let toastTimer = null;
function showToast(v){
  if(!$toast) return;
  const emo = (typeof v === 'number') ? (TOAST_LABELS[v] || 'âœ…') : 'âœ…';
  $toast.textContent = emo;
  $toast.classList.remove('show');
  void $toast.offsetWidth;
  $toast.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(()=> $toast.classList.remove('show'), 700);
}

/* ===== è¡¨ç¤ºåˆ‡æ›¿ ===== */
function enterPrologueMode(){
  $prologue.style.display = 'block';
  $quiz.style.display = 'none';
  $result.style.display = 'none';
  if($rankBadge) $rankBadge.innerHTML = '<span aria-hidden="true">ğŸ§©</span><span>æœªåˆ¤å®š</span>';
  updateProgress(0);
}
function enterQuizMode(){
  $prologue.style.display = 'none';
  $quiz.style.display = 'block';
  $result.style.display = 'none';
}
function enterResultMode(){
  $prologue.style.display = 'none';
  $quiz.style.display = 'none';
  $result.style.display = 'block';
}

/* ===== ä¿å­˜/å¾©å…ƒ ===== */
function persist(){
  try{
    localStorage.setItem(LS_ANS, JSON.stringify(answers));
    localStorage.setItem(LS_IDX, JSON.stringify(idx));
  }catch(_){}
}

/* ===== è³ªå•æç”» ===== */
function renderQuestion(){
  const q = QUESTIONS[idx];
  $qnum.textContent = `Q${idx+1}/${QUESTIONS.length}`;
  $qtext.textContent = q.t;

  if($qtag) $qtag.innerHTML = `<span aria-hidden="true">ğŸ”</span><span>ã‚¹ã‚­ãƒ£ãƒ³ä¸­</span>`;

  $opts.innerHTML = '';
  LABELS.forEach((lab,i)=>{
    const btn = document.createElement('button');
    btn.type = 'button';
    btn.className = 'btn';
    btn.setAttribute('aria-pressed', answers[idx]===i ? 'true':'false');
    btn.innerHTML = `<span class="btn-label">${lab}</span><span class="opt-note">${descFor(i)}</span>`;
    btn.addEventListener('click', ()=> selectAnswer(i));
    $opts.appendChild(btn);
  });

  $prev.disabled = (idx===0);

  const done = answers.filter(v=>v!==null).length;
  updateProgress(Math.round(done/QUESTIONS.length*100));

  if($rankBadge) $rankBadge.innerHTML = '<span aria-hidden="true">ğŸ§©</span><span>æœªåˆ¤å®š</span>';
}

function markPressed(v){
  [...$opts.children].forEach((el,i)=> el.setAttribute('aria-pressed', i===v ? 'true' : 'false'));
}

function spawnParticles(btn, v){
  const rect = btn.getBoundingClientRect();
  const cx = rect.left + rect.width/2;
  const cy = rect.top  + rect.height/2;
  const colors = ['#21b487','#7b55ff','#ff2f86','#f6c84c','#21b487'];
  const count = 7 + v; // ã¨ã¦ã‚‚â†’å¤šã‚
  for(let i=0;i<count;i++){
    const el = document.createElement('div');
    el.className = 'particle';
    const angle = (Math.PI*2/count)*i + Math.random()*.5;
    const dist  = 38 + Math.random()*40;
    el.style.cssText = `
      left:${cx}px; top:${cy}px;
      background:${colors[i%colors.length]};
      --px:${Math.cos(angle)*dist}px;
      --py:${Math.sin(angle)*dist}px;
      animation-delay:${Math.random()*.06}s;
      width:${5+Math.random()*5}px;
      height:${5+Math.random()*5}px;
    `;
    document.body.appendChild(el);
    setTimeout(()=>el.remove(), 700);
  }
}

function selectAnswer(v){
  answers[idx] = v;
  persist();
  markPressed(v);
  showToast(v);

  // ãƒªãƒƒãƒ—ãƒ«ï¼‹ãƒã‚¦ãƒ³ã‚¹ï¼‹ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«
  const pressedBtn = [...$opts.children][v];
  if(pressedBtn){
    // ãƒã‚¦ãƒ³ã‚¹
    pressedBtn.classList.remove('bouncing');
    void pressedBtn.offsetWidth;
    pressedBtn.classList.add('bouncing');
    setTimeout(()=>pressedBtn.classList.remove('bouncing'), 400);

    // ãƒªãƒƒãƒ—ãƒ«
    const ripple = document.createElement('span');
    ripple.className = 'btn-ripple';
    const r = pressedBtn.getBoundingClientRect();
    ripple.style.left = (r.width/2)+'px';
    ripple.style.top  = (r.height/2)+'px';
    pressedBtn.appendChild(ripple);
    setTimeout(()=>ripple.remove(), 550);

    // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«
    spawnParticles(pressedBtn, v);
  }

  setTimeout(()=>{
    if(idx < QUESTIONS.length-1){
      idx++;
      renderQuestion();
    }else{
      enterResultMode();
      showResult();
    }
  },140);
}

/* ===== çµæœè¡¨ç¤º ===== */
function showResult(){
  const firstNull = answers.findIndex(x=>x==null);
  if(firstNull !== -1){
    idx = firstNull;
    enterQuizMode();
    renderQuestion();
    return;
  }

  const {pct,totalScore} = computeScores(answers);
  const grade = gradeFromScore(totalScore);

  if($rankBadge) $rankBadge.innerHTML = `<span aria-hidden="true">${grade.emo}</span><span>${grade.label}</span>`;

  $resultImg.src = IMG_BASE + grade.img;
  $resultImg.alt = grade.alt || 'çµæœç”»åƒ';

  $resultTitle.textContent = `ğŸ§¬ ãƒ•ãƒ¬ãƒãƒŸãƒ¼æ¿ƒåº¦ï¼š${grade.label}`;
  $resultSubtitle.textContent = `ç·åˆï¼š${totalScore}ç‚¹ï¼ˆ0ã€œ100ï¼‰`;
  if($scoreBadge) $scoreBadge.textContent = `ã‚¹ã‚³ã‚¢ ${totalScore}ç‚¹`;
  if($gradeBadge) $gradeBadge.innerHTML = `<span aria-hidden="true">${grade.emo}</span><span>${grade.label}</span>`;

  if($resultComment){
    $resultComment.innerHTML = `
      <p class="rc-ttl">${grade.headline}</p>
      <p>${grade.blurb}</p>
    `;
  }

  if($todayText) $todayText.textContent = grade.action;

  $resultSmall.textContent = '';

  $bars.innerHTML = '';
  FACTS.forEach(k=>{
    const v = Math.max(0, Math.min(100, +pct[k]||0));
    const wrap = document.createElement('div');
    wrap.className = 'bar';
    wrap.innerHTML = `
      <div class="h"><span>${FACT_LABEL[k] || k}</span><span>${v}%</span></div>
      <div class="track"><div class="fill" style="width:${v}%"></div></div>
      <div class="bar-desc">${FACT_DESC[k] || ''}</div>
    `;
    $bars.appendChild(wrap);
  });

  try{
    localStorage.setItem(LS_LASTANS, JSON.stringify({answers: answers.slice(), ts: Date.now()}));
  }catch(_){}
  buildPrevAnswers();
  buildGalleryUI();

  document.dispatchEvent(new Event('result:ready'));
}

function buildPrevAnswers(){
  let prev = null;
  try{ prev = JSON.parse(localStorage.getItem(LS_LASTANS) || 'null'); }catch(_){}
  if(!prev || !Array.isArray(prev.answers)) return;

  $prevList.innerHTML = '';
  prev.answers.forEach((v,i)=>{
    const li = document.createElement('li');
    li.className = 'prev-item';
    const lab = (typeof v === 'number' && v>=0 && v<LABELS.length) ? LABELS[v] : 'â€”';
    li.innerHTML = `<span class="prev-q">Q${i+1}ï¼š${QUESTIONS[i].t}</span><span class="prev-a">ã€Œ${lab}ã€</span>`;
    $prevList.appendChild(li);
  });
}

function buildGalleryUI(){
  const g = buildGallery();
  $gallery.innerHTML = '';
  g.forEach(x=>{
    const fig = document.createElement('figure');
    fig.innerHTML = `
      <img src="${IMG_BASE + x.img}" alt="${x.alt||''}" loading="lazy">
      <figcaption>${x.cap||x.img}</figcaption>
    `;
    $gallery.appendChild(fig);
  });
}

/* ===== æ“ä½œ ===== */
$prev.addEventListener('click', ()=>{
  if(idx>0){ idx--; persist(); renderQuestion(); }
});
$startBtn.addEventListener('click', ()=>{
  enterQuizMode();
  renderQuestion();
  window.scrollTo({top:0,behavior:'smooth'});
});
$restart.addEventListener('click', ()=>{
  answers = new Array(QUESTIONS.length).fill(null);
  idx = 0;
  try{ localStorage.removeItem(LS_ANS); localStorage.removeItem(LS_IDX); }catch(_){}
  enterPrologueMode();
  window.scrollTo({top:0,behavior:'smooth'});
  showToast();
});

/* ===== èµ·å‹•ï¼šå¾©å…ƒ or ãƒ—ãƒ­ãƒ­ãƒ¼ã‚° ===== */
(function init(){
  const hero = document.getElementById('heroImg');
  if(hero) hero.src = IMG_BASE + 't00.webp';

  updateProgress(0);

  let savedAns=null, savedIdx=0;
  try{
    savedAns = JSON.parse(localStorage.getItem(LS_ANS) || 'null');
    savedIdx = JSON.parse(localStorage.getItem(LS_IDX) || '0');
  }catch(_){}
  const valid = Array.isArray(savedAns) && savedAns.length === QUESTIONS.length;
  const hasAny = valid && savedAns.some(v=>v!==null);
  const allDone = valid && savedAns.every(v=>v!==null);

  if(allDone){
    answers = savedAns;
    idx = QUESTIONS.length - 1;
    renderQuestion();
    enterResultMode();
    showResult();
    return;
  }
  if(hasAny){
    answers = savedAns;
    idx = Math.min(Math.max(0, +savedIdx || 0), QUESTIONS.length-1);
    enterQuizMode();
    renderQuestion();
    return;
  }
  enterPrologueMode();
}());

/* ===== â˜… FRENEMY EXTRA EFFECTS ===== */

/* --- ãƒ„ã‚¿SVGã‚³ãƒ¼ãƒŠãƒ¼ã‚’æ³¨å…¥ --- */
(function injectVines(){
  function makeSVG(flip){
    const ns='http://www.w3.org/2000/svg';
    const s=document.createElementNS(ns,'svg');
    s.setAttribute('viewBox','0 0 160 300');
    s.setAttribute('width','160'); s.setAttribute('height','300');
    s.setAttribute('fill','none'); s.setAttribute('xmlns',ns);

    const paths=[
      {d:'M18,0 C44,55 -8,110 22,168 C52,228 4,262 26,300', sw:'2.2', c:'#21b487', o:'.55'},
      {d:'M50,0 C72,48 28,98 52,148 C76,198 42,242 60,290',  sw:'1.4', c:'#21b487', o:'.28'},
      {d:'M6,40 C30,80 10,130 32,175',                        sw:'1.2', c:'#7b55ff', o:'.22'},
    ];
    paths.forEach(p=>{
      const el=document.createElementNS(ns,'path');
      el.setAttribute('d',p.d);
      el.setAttribute('stroke',p.c);
      el.setAttribute('stroke-width',p.sw);
      el.setAttribute('stroke-linecap','round');
      el.setAttribute('opacity',p.o);
      s.appendChild(el);
    });

    // è‘‰ã£ã±ã®ä¸¸
    [[22,70,'#21b487',7,.38],[14,120,'#21b487',5,.25],[26,168,'#21b487',8,.32],[16,218,'#21b487',5,.22],[30,262,'#7b55ff',6,.28]].forEach(([cx,cy,c,r,o])=>{
      const c2=document.createElementNS(ns,'circle');
      c2.setAttribute('cx',cx); c2.setAttribute('cy',cy);
      c2.setAttribute('r',r); c2.setAttribute('fill',c); c2.setAttribute('opacity',o);
      s.appendChild(c2);
    });

    // ãƒˆã‚²
    [[22,70,42,55],[26,168,50,152]].forEach(([x1,y1,x2,y2])=>{
      const ln=document.createElementNS(ns,'line');
      ln.setAttribute('x1',x1); ln.setAttribute('y1',y1);
      ln.setAttribute('x2',x2); ln.setAttribute('y2',y2);
      ln.setAttribute('stroke','#ff2f86'); ln.setAttribute('stroke-width','1.5'); ln.setAttribute('opacity','.42');
      s.appendChild(ln);
    });

    const wrap=document.createElement('div');
    wrap.className='vine-svg';
    if(flip&1) s.style.transform='scaleX(-1)';
    if(flip&2) s.style.transform=(s.style.transform||'')+'scaleY(-1)';
    wrap.appendChild(s);
    return wrap;
  }

  // å·¦ä¸Š
  const tl=makeSVG(0); tl.style.top='-10px'; tl.style.left='-10px'; document.body.appendChild(tl);
  // å³ä¸Š
  const tr=makeSVG(1); tr.style.top='-10px'; tr.style.right='-10px'; document.body.appendChild(tr);
  // å·¦ä¸‹
  const bl=makeSVG(2); bl.style.bottom='-10px'; bl.style.left='-10px'; document.body.appendChild(bl);
  // å³ä¸‹
  const br=makeSVG(3); br.style.bottom='-10px'; br.style.right='-10px'; document.body.appendChild(br);
}());


/* --- çµæœrevealï¼‹è„…å¨ãƒ¬ãƒ™ãƒ«ãƒ¡ãƒ¼ã‚¿ãƒ¼æ›´æ–° --- */
document.addEventListener('result:ready',function(){
  const res=document.getElementById('result');
  if(res){ res.classList.remove('result-reveal'); void res.offsetWidth; res.classList.add('result-reveal'); }

  // ã‚¹ã‚³ã‚¢ã‹ã‚‰è„…å¨ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’é…å»¶ã‚¢ãƒ‹ãƒ¡
  const subtitle=document.getElementById('resultSubtitle');
  const fill=document.getElementById('threatFill');
  const label=document.getElementById('threatLabel');
  if(!fill||!subtitle) return;
  const m=subtitle.textContent.match(/(\d+)/);
  if(!m) return;
  const score=Math.min(100,Math.max(0,+m[1]));
  setTimeout(()=>{
    fill.style.width=score+'%';
    if(label){
      const bar='â–ˆ'.repeat(Math.round(score/10))+'â–‘'.repeat(10-Math.round(score/10));
      label.textContent=`THREAT LEVEL ${bar} ${score}%`;
    }
  },200);
});
</script>

<!-- ã‚ãªãŸã®ã“ã“ã‚Lvï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã®ã¿ï¼‰ -->
<script>(function(){
  var DONE_KEY='specimens:open:byid', TOTAL_KEY='specimens:open:total';
  var MY_ID=document.body.getAttribute('data-id')||SLUG;
  var marked=false;
  function mark(){ if(marked) return; marked=true;
    try{
      var t=(+localStorage.getItem(TOTAL_KEY)||0)+1;
      localStorage.setItem(TOTAL_KEY,String(t));
      var map={}; try{ map=JSON.parse(localStorage.getItem(DONE_KEY)||'{}'); }catch(_){}
      map[MY_ID]=(map[MY_ID]||0)+1;
      localStorage.setItem(DONE_KEY, JSON.stringify(Object.assign({},map,{_ts:Date.now()})));
    }catch(_){}
  }
  document.addEventListener('result:ready', mark);
  setTimeout(mark, 2000);
}());</script>

</body>
</html>