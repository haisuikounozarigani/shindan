<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>æ™‚ã®å¤©ç§¤è¨ºæ–­ â€“ ã‚ãªãŸã¯æ™‚é–“æ´¾ï¼ŸãŠé‡‘æ´¾ï¼Ÿ</title>
<meta name="description" content="æ™‚é–“ã¨ãŠé‡‘ã€ã‚ãªãŸã®å¤©ç§¤ã¯ã©ã¡ã‚‰ã«å‚¾ãã‚„ã™ã„ï¼Ÿ5è»¸Ã—15å•ã§â€œæ™‚é–“ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æŒ‡æ•°â€ã‚’å¯è¦–åŒ–ã€‚">
<meta name="theme-color" content="#f0f6ff">
<meta property="og:type" content="website">
<meta property="og:title" content="æ™‚ã®å¤©ç§¤è¨ºæ–­ â€“ ã‚ãªãŸã¯æ™‚é–“æ´¾ï¼ŸãŠé‡‘æ´¾ï¼Ÿ">
<meta property="og:description" content="5è»¸Ã—15å•ã§â€œæ™‚é–“ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æŒ‡æ•°â€ã‚’å¯è¦–åŒ–ã€‚å„è»¸ã®å‚¾å‘ãƒãƒ¼ã‚‚è¡¨ç¤ºã€‚">
<meta property="og:url" content="https://haisuikounozarigani.github.io/shindan/time-money.html">



<style>
.small ul{ margin:8px 0 0 18px; padding:0; }
.small li{ margin:4px 0; }
:root{
  --bg1:#f6fbff; --bg2:#eef4ff; --card:#fff; --line:#dbe8ff; --fg:#1f2a3a; --muted:#5b6a75;
  --accent:#4aa8ff; --accent2:#a48bff;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;color:var(--fg);font-family:"Noto Sans JP",system-ui,sans-serif;background:linear-gradient(160deg,var(--bg1),var(--bg2))}
a{color:inherit}
.wrap{max-width:1040px;margin:18px auto 24px;padding:0 14px}
.header{display:grid;grid-template-columns:64px 1fr;gap:12px;align-items:center;margin:14px 0 6px}
.logo{width:64px;height:64px;border-radius:16px;background:linear-gradient(135deg,#d9efff,#e7dbff);display:grid;place-items:center;font-size:34px}
h1{margin:0;font-size:clamp(22px,4.5vw,34px)}
.sub{margin:2px 0 0;color:var(--muted);font-size:.95em}
.card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:14px;box-shadow:0 6px 18px rgba(74,168,255,.10)}
.section{margin:16px 0}
.qrow{padding:12px;border:1px solid var(--line);border-radius:12px;margin:12px 0;background:#fff}
.qrow .ttl{font-weight:700}
.scale{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-top:8px}
.scale label{display:block;border:1px solid #e6ebff;border-radius:10px;background:#fff;cursor:pointer;padding:10px;text-align:center}
.scale input{position:absolute;opacity:0;pointer-events:none}
.scale input:checked+label{outline:2px solid var(--accent);border-color:transparent;outline-offset:2px}
.scale .hint{grid-column:1/-1;display:flex;justify-content:space-between;color:#7a8694;font-size:.88em;margin-top:6px}
.badge{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;font-weight:700}
/* ğŸ“Š sticky progressï¼ˆrail/NOHæº–æ‹ ï¼‰ */
.sticky{position:sticky;top:0;z-index:30;margin:-6px -14px 10px;padding:8px 14px;
  background:rgba(255,255,255,.86);backdrop-filter:blur(6px) saturate(1.05);
  border-bottom:1px solid #e8eefc;display:flex;align-items:center;gap:10px}
.progress{height:8px;background:#e8eefc;border-radius:999px;flex:1;overflow:hidden}
.progress>span{display:block;height:100%;width:0;background:linear-gradient(90deg,#bfe3ff,#a48bff);transition:width .25s ease}
.btn{padding:10px 14px;border:1px solid var(--line);border-radius:12px;background:#fff;cursor:pointer}
.btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));border-color:transparent;color:#fff;font-weight:700}
.small{color:var(--muted);font-size:.92em}
.hidden{display:none!important}

/* çµæœ */
.res-head{display:grid;grid-template-columns:1fr;gap:10px;align-items:center}

/* â”€â”€ NOHé¢¨ï¼šæ­£æ–¹å½¢ãƒ’ãƒ¼ãƒ­ãƒ¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hero-square{display:grid;place-items:center;border:1px solid #dfe7ff;border-radius:16px;background:#fff;overflow:hidden}
.hero-square figure{margin:0;width:min(560px,100%);max-width:100%;aspect-ratio:1/1;border-bottom:1px solid #eef2ff;background:#f7f9ff}
.hero-square img{width:100%;height:100%;object-fit:cover;display:block}
.hero-square figcaption{padding:14px 12px;width:100%;line-height:1.7}
.title-row{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
.badge-size{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;background:#fff;border:1px solid #e6ebff;font-size:.85em;margin-left:6px}

/* â”€â”€ NOHé¢¨ï¼šå› å­ãƒãƒ¼ï¼ˆï¼…ï¼‰ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.factors{display:grid;gap:12px}
.meter{display:grid;gap:8px}
.meter .row{display:flex;align-items:center;justify-content:space-between;gap:8px}
.meter .row .name{font-weight:700}
.mbar{height:10px;border:1px solid #e5e9f3;border-radius:999px;overflow:hidden;background:#f7f8fc}
.mbar>span{display:block;height:100%;width:0;background:linear-gradient(90deg,#bfe3ff,#a48bff)}
.pct{font-variant-numeric:tabular-nums;color:#4e4e6a}
#factorBox{max-width:720px;margin-inline:auto}
.ttl-big{font-weight:800;font-size:clamp(20px,3.4vw,28px)}
.pills{display:flex;gap:8px;flex-wrap:wrap;color:#54607a}
.pill{padding:6px 10px;border:1px solid #e6ebff;border-radius:999px;background:#fff}
.grid2{display:grid;grid-template-columns:1fr;gap:12px}
.chartbox{padding:10px;border:1px dashed #dfe7ff;border-radius:12px}
.chartbox canvas{max-width:100%;height:140px!important}

/* Footer note */
.footer{color:var(--muted);font-size:.92em;margin-top:14px}
.backline{display:flex;justify-content:center;margin-top:12px}
.warn{background:#fff;border:1px dashed #d7d7e6;border-radius:12px;padding:12px;color:#503a46;font-size:13px}
.hl{box-shadow:0 0 0 3px rgba(127,164,255,.25)}

@media (max-width:720px){
  .scale{grid-template-columns:1fr 1fr;grid-auto-rows:auto}
}
</style>
</head>
<body data-id="time-money">
<main class="wrap" id="app">
  <header class="header">
    <div class="logo">â³</div>
    <div>
      <h1>æ™‚ã®å¤©ç§¤è¨ºæ–­ â€“ ã‚ãªãŸã¯æ™‚é–“æ´¾ï¼ŸãŠé‡‘æ´¾ï¼Ÿ</h1>
      <p class="sub">5è»¸Ã—15å•ãƒ»5ä»¶æ³•ã€‚ç·åˆTFIï¼ˆæ™‚é–“ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æŒ‡æ•°ï¼‰ã¨å„è»¸ã®ãƒãƒ¼ã§è¡¨ç¤ºã€‚</p>
    </div>
  </header>

  <div class="sticky card" aria-live="polite">
    <span>ğŸ§­</span>
    <div class="progress" aria-label="å›ç­”é€²æ—"><span id="prog"></span></div>
    <span class="small" id="progText">0/15</span>
    <button class="btn primary" id="btn-score">çµæœã‚’è¦‹ã‚‹</button>
  </div>

  <section class="card section">
    <h2>èª¬æ˜</h2>
    <p>ç›´æ„Ÿã§é¸ã‚“ã§ãã ã•ã„ï¼ˆå…¨å•å¿…é ˆãƒ»0ã€œ4ï¼‰ã€‚</p>
    
  </section>

  <section id="formArea" class="card section" aria-label="è¨­å•ã‚¨ãƒªã‚¢">
    <h2>è¨­å•ï¼ˆå…¨15å•ï¼å„5æŠï¼‰</h2>
    <div id="qContainer"></div>
    <div class="section" style="display:flex;gap:8px;flex-wrap:wrap">
      <button class="btn" id="btn-clear">å›ç­”ã‚’ã‚¯ãƒªã‚¢</button>
      <button class="btn primary" id="btn-score2">çµæœã‚’è¦‹ã‚‹</button>
      <a class="btn" href="/shindan/" id="btnBack" role="button">è¨ºæ–­ä¸€è¦§ã«æˆ»ã‚‹</a>
    </div>
    <div class="warn">
      <strong>ã”åˆ©ç”¨ã«ã‚ãŸã£ã¦</strong><br>
      ã“ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯<strong>ã‚¨ãƒ³ã‚¿ãƒ¡ç›®çš„</strong>ã®è‡ªå·±ç†è§£ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚åŒ»ç™‚ãƒ»è¨ºæ–­ãƒ»æ²»ç™‚ãƒ»åŠ©è¨€ã«ã¯ä½¿ãˆã¾ã›ã‚“ã€‚<br>
      <strong>æœ€çµ‚åˆ¤æ–­ã¯ã”è‡ªèº«ã§</strong>ãŠé¡˜ã„ã—ã¾ã™ã€‚é‡è¦ãªæ„æ€æ±ºå®šã®å”¯ä¸€ã®æ ¹æ‹ ã«ã¯ã—ãªã„ã§ãã ã•ã„ã€‚<br>
      <strong>ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼</strong>ï¼šå›ç­”ã¯ç«¯æœ«å†…ã§å‡¦ç†ãƒ»ä¿å­˜ã•ã‚Œã€å›ç­”å†…å®¹ã‚„å€‹äººã‚’ç‰¹å®šã§ãã‚‹æƒ…å ±ã¯ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã•ã‚Œã¾ã›ã‚“ã€‚çµæœè¡¨ç¤ºæ™‚ã«åŒ¿åã®ä»¶æ•°ã‚«ã‚¦ãƒ³ãƒˆã®ã¿é€ä¿¡ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
      
    </div>
  </section>

  <section id="result" class="card section" aria-live="polite">
    <div id="resEmpty">
      <div class="badge">ã¾ã çµæœã¯ã‚ã‚Šã¾ã›ã‚“</div>
      <p class="small">ä¸Šã®è¨­å•ã«ã™ã¹ã¦å›ç­”ã™ã‚‹ã¨ã€ã“ã¡ã‚‰ã«çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
    </div>

    <div id="resArea" class="hidden">
      <div class="res-head">
        <div class="ttl-big" id="titleText">â€”</div>
        <div class="pills">
          <span class="pill" id="pillTFI">TFI: â€”</span>
          <span class="pill" id="pillType">ã‚¿ã‚¤ãƒ—: â€”</span>
        </div>
      </div>

      

      <!-- æ­£æ–¹å½¢ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼ˆtNN.webpï¼‰ -->
<div class="section">
  <div class="hero-square" role="region" aria-label="çµæœã‚¤ãƒ¡ãƒ¼ã‚¸">
    <figure>
      <img id="heroImg" src="" alt="çµæœã‚¤ãƒ¡ãƒ¼ã‚¸" loading="lazy" width="600" height="600">
    </figure>
    <figcaption>
      <div class="title-row">
        <div id="heroTitle" style="font-weight:800">â€”</div>
        <span class="badge-size" id="rangeBadge">â€”</span>
      </div>
      <div class="small" id="heroTag" style="margin-top:4px">â€”</div>
    </figcaption>
  </div>
  <!-- çµæœã‚³ãƒ¡ãƒ³ãƒˆï¼ˆç”»åƒã®ä¸‹ã«è¡¨ç¤ºï¼‰ -->
<div class="section" id="oneLine"></div>
</div>

<!-- å› å­ãƒãƒ¼ï¼ˆNOHé¢¨ï¼‰ -->
<div class="section">
  <div class="small">å„è»¸ï¼ˆ0â€“100ï¼‰</div>
  <div class="factors" id="factorBox" aria-label="å„è»¸ã‚¹ã‚³ã‚¢ï¼ˆï¼…ï¼‰"></div>
</div>

      <div class="footer">
        <p class="small">â€»TFIã¯5è»¸ï¼ˆTA/DG/EX/MV/FTï¼‰ã®å¹³å‡ã§ã™ã€‚é€†è»¢é …ç›®ã¯è‡ªå‹•ã§åè»¢æ¡ç‚¹ã—ã¦ã„ã¾ã™ã€‚</p>
      </div>

      <div class="backline">
        <a class="btn" id="back2" href="/shindan/" aria-label="è¨ºæ–­ä¸€è¦§ã«æˆ»ã‚‹">è¨ºæ–­ä¸€è¦§ã«æˆ»ã‚‹</a>
      </div>
    </div>
  </section>
</main>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const STORAGE_KEY = "specimens:answers:time-money";

  // è»¸ãƒ©ãƒ™ãƒ«
  const IMG_BASE = "/shindan/assets/results/time-money/"; // t01.webp..t05.webp
  const AXIS = {
    TA:{name:"ä½™ç™½æ„Ÿ"},
    DG:{name:"æ‰‹æ”¾ã—åŠ›"},
    EX:{name:"ä½“é¨“å¿—å‘"},
    MV:{name:"ç§»å‹•åŠ¹ç‡"},
    FT:{name:"æœªæ¥æ™‚é–“æŠ•è³‡"}
  };

  // è³ªå•å®šç¾©ï¼ˆå„3å•ãƒ»r:é€†è»¢ï¼‰
  const Q = [
    // TA
    {axis:"TA", t:"ã‚„ã‚‹ã“ã¨ãŒå¤šã„æ—¥ã§ã‚‚ã€å¿ƒã«å°‘ã—ã¯ä½™è£•ãŒã‚ã‚‹ã€‚", r:false},
    {axis:"TA", t:"é€±ã«ä¸€åº¦ã¯ã€äºˆå®šã‚’å…¥ã‚Œãªã„æ™‚é–“ã€ã‚’æ„è­˜çš„ã«ã¤ãã£ã¦ã„ã‚‹ã€‚", r:false},
    {axis:"TA", t:"è‡ªç”±ã«ä½¿ãˆã‚‹æ™‚é–“ãŒå°‘ãªã„ã¨æ„Ÿã˜ã‚‹æ—¥ãŒå¤šã„ã€‚", r:true},

    // DG
    {axis:"DG", t:"é¢å€’ãªå®¶äº‹ã‚„äº‹å‹™ã¯ã€å¿…è¦ãªã‚‰ãŠé‡‘ã‚’æ‰•ã£ã¦å¤–æ³¨ã—ã¦ã‚‚ã‚ˆã„ã€‚", r:false},
    {axis:"DG", t:"é…é€æ–™ã‚„æ‰‹æ•°æ–™ã§ã€æ™‚é–“ã‚’è²·ãˆã‚‹ãªã‚‰æ‰•ã†é¸æŠã‚’ã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚", r:false},
    {axis:"DG", t:"è‡ªåˆ†ã§ã§ãã‚‹ã“ã¨ã¯ã€ãŠé‡‘ã‚’æ‰•ã£ã¦ã¾ã§ä»–äººã«é ¼ã¾ãªã„ã€‚", r:true},

    // EX
    {axis:"EX", t:"ãƒ¢ãƒã‚ˆã‚Šã‚‚ã€ä½“é¨“ã‚„å­¦ã³ã«ãŠé‡‘ã‚’ä½¿ã†ã“ã¨ãŒå¤šã„ã€‚", r:false},
    {axis:"EX", t:"æ€ã„å‡ºã«ãªã‚‹ã“ã¨ã‚’å„ªå…ˆã—ã¦äºˆå®šã‚’çµ„ã‚€ã“ã¨ãŒã‚ã‚‹ã€‚", r:false},
    {axis:"EX", t:"ã‚»ãƒ¼ãƒ«ã§å®‰ãè²·ãˆã‚‹ãªã‚‰ã€æ™‚é–“ãŒã‹ã‹ã£ã¦ã‚‚æ§‹ã‚ãªã„ã€‚", r:true},

    // MV
    {axis:"MV", t:"æ—©ãã¦å¿«é©ãªç§»å‹•æ‰‹æ®µã«ã€è¿½åŠ æ–™é‡‘ã‚’æ‰•ã†ã“ã¨ãŒã‚ã‚‹ã€‚", r:false},
    {axis:"MV", t:"å¾…ã¡æ™‚é–“ãŒé•·ã„åº—ã¯é¿ã‘ã‚‹ã‹ã€äº‹å‰ã«äºˆç´„ã—ã¦ãŠãã€‚", r:false},
    {axis:"MV", t:"æ¸‹æ»ã—ã¦ã„ã¦ã‚‚ã€ç„¡æ–™ã®é“ã‚’é¸ã³ãŒã¡ã ã€‚", r:true},

    // FTï¼ˆâ€»3ã¤ç›®ãŒé€†è»¢ï¼‰
    {axis:"FT", t:"ä»Šã¯æ‰‹é–“ã§ã‚‚ã€ä»Šå¾Œã®æ™‚çŸ­ã«ãªã‚‹ãªã‚‰å–ã‚Šçµ„ã‚€ã€‚", r:false},
    {axis:"FT", t:"æ™‚çŸ­å®¶é›»ã‚„è‡ªå‹•åŒ–ãƒ„ãƒ¼ãƒ«ã«ãŠé‡‘ã‚’ã‹ã‘ã‚‹ä¾¡å€¤ãŒã‚ã‚‹ã¨æ€ã†ã€‚", r:false},
    {axis:"FT", t:"å°†æ¥ã®æ™‚çŸ­ã®ãŸã‚ã«ä»Šã®æ™‚é–“ã‚’å‰²ãã®ã¯å¾Œå›ã—ã«ã—ãŒã¡ã ã€‚", r:true}
  ];
const LABELS = ["0 ã¾ã£ãŸããªã„","1 ã‚ã¾ã‚Šãªã„","2 ã©ã¡ã‚‰ã¨ã‚‚","3 ã ã„ãŸã„","4 ã¨ã¦ã‚‚ã‚ã‚‹"];

const TYPES = [
  {name:"æ™‚é–“æœ€å„ªå…ˆ", range:[80,100], file:"t05.webp", alt:"æ™‚é–“æœ€å„ªå…ˆ", tag:"è‡ªç”±æ™‚é–“ã¨å¿ƒã®ä½™è£•ã‚’ç¬¬ä¸€ã«ç½®ãã‚¿ã‚¤ãƒ—ã€‚",
   one:`<div class="small">è‡ªç”±æ™‚é–“ã¨å¿ƒã®ä½™è£•ã‚’ç¬¬ä¸€ã«ç½®ãå‚¾å‘ã€‚å¤–æ³¨ã‚„äºˆç´„ã§ã€Œå¾…ã¤ã€ã‚’æ¸›ã‚‰ã—ã€ä½“é¨“ã«æŠ•è³‡ã—ã‚„ã™ã„ã€‚</div>
   <ul class="small"><li>æœˆ1ã§ã€Œãƒ•ãƒ«ã‚ªãƒ•æ—¥ã€ã‚’ç¢ºä¿</li><li>ç§»å‹•ã¯æœ€çŸ­ï¼‹äº‹å‰äºˆç´„</li><li>ã‚µãƒ–ã‚¹ã‚¯ã®æ£šå¸ã—ã‚’å››åŠæœŸã«1å›</li></ul>`},
  {name:"ã‚„ã‚„æ™‚é–“", range:[65,79], file:"t04.webp", alt:"ã‚„ã‚„æ™‚é–“", tag:"åŸºæœ¬ã¯æ™‚é–“é‡è¦–ã€ç¯€ç´„ã‚‚ç¹”ã‚Šäº¤ãœã‚‹ã€‚",
   one:`<div class="small">åŸºæœ¬ã¯æ™‚é–“é‡è¦–ã€‚å¿…è¦ãªå ´é¢ã§ã¯ç¯€ç´„ã‚‚ç¹”ã‚Šäº¤ãœã€å¤–æ³¨ãƒ»è‡ªå‹•åŒ–ã‚’ãƒãƒ©ãƒ³ã‚¹è‰¯ãä½¿ã†ã€‚</div>
   <ul class="small"><li>å¾…ã¡30åˆ†è¶…ã¯ä»£æ›¿æ¡ˆã‚’ç”¨æ„</li><li>é…é€æ–™ã®ä¸Šé™ã‚’è‡ªåˆ†ãƒ«ãƒ¼ãƒ«åŒ–</li><li>å®¶äº‹ã¯é¢å€’ãƒˆãƒƒãƒ—3ã ã‘å¤–æ³¨å€™è£œ</li></ul>`},
  {name:"ãƒãƒ©ãƒ³ã‚¹", range:[45,64], file:"t03.webp", alt:"ãƒãƒ©ãƒ³ã‚¹", tag:"çŠ¶æ³ã§åˆ‡ã‚Šæ›¿ãˆã‚‹ç¾å®Ÿæ´¾ã€‚",
   one:`<div class="small">å¿™ã—ã„æ™‚æœŸã¯æ™‚é–“ã‚’è²·ã„ã€ä½™è£•ãŒã‚ã‚‹æ™‚æœŸã¯è‡ªåˆ†ã§æ‰‹ã‚’å‹•ã‹ã™ã€‚</div>
   <ul class="small"><li>ç¹å¿™/é–‘æ•£ã®åˆ‡æ›¿åŸºæº–ã‚’äº‹å‰å®šç¾©</li><li>ä¸¦ã¶åº—ã¯ãƒ¢ãƒã‚¤ãƒ«ã‚ªãƒ¼ãƒ€ãƒ¼æœ‰ç„¡ã§é¸ã¶</li><li>ãƒ¢ãƒã¯ã€Œä½¿ç”¨æ™‚é–“ã€ã§åˆ¤æ–­</li></ul>`},
  {name:"ã‚„ã‚„é‡‘éŠ­", range:[30,44], file:"t02.webp", alt:"ã‚„ã‚„é‡‘éŠ­", tag:"è²»ç”¨å¯¾åŠ¹æœã«æ•æ„Ÿã€‚",
   one:`<div class="small">é…é€æ–™ã‚„æ‰‹æ•°æ–™ã¯æ§ãˆã‚ã§ã€ãƒ¢ãƒè³¼è²·ã®å„ªå…ˆãŒã‚„ã‚„å¼·ã„ã€‚</div>
   <ul class="small"><li>æ™‚çµ¦æ›ç®—ã§ä¸Šé™é¡ã‚’ä¸€åº¦è¨­å®š</li><li>ç„¡æ–™ãƒ«ãƒ¼ãƒˆã§ã‚‚æ¸‹æ»30åˆ†è¶…ã¯å†æ¤œè¨</li><li>ã‚¯ãƒ¼ãƒãƒ³å¾…ã¡ã¯ç· åˆ‡ã‚’æ±ºã‚ã‚‹</li></ul>`},
  {name:"é‡‘éŠ­æœ€å„ªå…ˆ", range:[0,29], file:"t01.webp", alt:"é‡‘éŠ­æœ€å„ªå…ˆ", tag:"è²¯è“„ãƒ»åå…¥ã‚’æœ€é‡è¦–ã€‚",
   one:`<div class="small">é•·æ™‚é–“ã®è‡ªå·±å¯¾å¿œã‚„ä¸¦ã³ã‚‚è¨±å®¹ã—ã‚„ã™ã„ä¸€æ–¹ã€ã‚†ã¨ã‚Šã¯å¾Œå›ã—ã«ãªã‚ŠãŒã¡ã€‚</div>
   <ul class="small"><li>é€±1ã®ã€Œä½™ç™½30åˆ†ã€ã‚’å…ˆã«ç¢ºä¿</li><li>æ™‚çŸ­å®¶é›»ã¯ä¸­å¤/ãƒ¬ãƒ³ã‚¿ãƒ«ã§è©¦ã™</li><li>å¾…ã¡æ™‚é–“ã¯å­¦ã³/é‹å‹•ã«ç½®æ›</li></ul>`}
];

  // DOM
  const qContainer = document.getElementById("qContainer");
  const prog = document.getElementById("prog");
  const progText = document.getElementById("progText");
  const resEmpty = document.getElementById("resEmpty");
  const resArea = document.getElementById("resArea");
  const titleText = document.getElementById("titleText");
  const pillTFI = document.getElementById("pillTFI");
  const pillType = document.getElementById("pillType");
  const oneLine = document.getElementById("oneLine");

  // è³ªå•UIç”Ÿæˆï¼ˆ5ä»¶æ³•ï¼‰
  function buildQuestions(){
    let html = "";
    Q.forEach((q,i)=>{
      const n = i+1;
      html += `
        <div class="qrow">
          <div class="ttl">Q${n}. ${q.t}${q.r?' <span class="small" title="é€†è»¢é …ç›®ï¼ˆè‡ªå‹•ã§æ¡ç‚¹åè»¢ï¼‰">ï¼ˆRï¼‰</span>':''}</div>
       <div class="scale" role="radiogroup" aria-label="${q.t}">
  ${[0,1,2,3,4].map(v=>`
    <div style="position:relative">
      <input id="q${n}-${v}" type="radio" name="Q${n}" value="${v}">
      <label for="q${n}-${v}">${LABELS[v]}</label>
    </div>`).join("")}
</div>
          </div>
        </div>`;
    });
    qContainer.innerHTML = html;
    document.querySelectorAll('#qContainer input[type="radio"]').forEach(el=>{
      el.addEventListener('change', updateProgress, {passive:true});
    });
    updateProgress();
  }

  function updateProgress(){
  const total = Q.length;
  let answered = 0;
  for(let i=1;i<=total;i++){
    if(document.querySelector(`input[name="Q${i}"]:checked`)) answered++;
  }
  const pct = Math.round(100*answered/total);
  const bar = document.getElementById('prog');
  const txt = document.getElementById('progText');
  if(bar) bar.style.width = pct + "%";
  if(txt) txt.textContent = `${answered}/${total}`;

  // ARIAï¼ˆã“ã“ã§ã ã‘è¨­å®šã™ã‚‹ï¼‰
  const shell = document.querySelector('.progress');
  if(shell){
    shell.setAttribute('role','progressbar');
    shell.setAttribute('aria-valuemin','0');
    shell.setAttribute('aria-valuemax', String(total));
    shell.setAttribute('aria-valuenow', String(answered));
    shell.setAttribute('aria-label', `å›ç­”é€²æ—ï¼š${answered} / ${total}`);
  }
}


  function readAnswers(){
    const missing = [];
    const values = [];
    for(let i=1;i<=Q.length;i++){
      const el = document.querySelector(`input[name="Q${i}"]:checked`);
      if(!el) missing.push(i);
      else values.push(parseInt(el.value,10));
    }
    return {missing, values};
  }

  function toPct(arr){
    const m = arr.reduce((a,b)=>a+b,0)/arr.length; // 0..4
    return Math.round((m / 4) * 100); // 0..100
}

  function score(values){
    const byAxis = {TA:[],DG:[],EX:[],MV:[],FT:[]};
    values.forEach((v,i)=>{
      const def = Q[i];
      const vv = def.r ? (4 - v) : v;
      byAxis[def.axis].push(vv);
    });
    const axisPct = Object.fromEntries(Object.keys(byAxis).map(k=>[k, toPct(byAxis[k])]));
    const TFI = Math.round((axisPct.TA + axisPct.DG + axisPct.EX + axisPct.MV + axisPct.FT)/5);
    return {axisPct, TFI};
  }

  function pickType(tfi){
    return TYPES.find(t=> tfi>=t.range[0] && tfi<=t.range[1]) || TYPES[2];
  }

 
  // NOHé¢¨ï¼šå› å­ãƒãƒ¼ã‚’æç”»
function renderFactors(axisPct){
  const rows = [
    ["ä½™ç™½æ„Ÿ (TA)","TA"],
    ["æ‰‹æ”¾ã—åŠ› (DG)","DG"],
    ["ä½“é¨“å¿—å‘ (EX)","EX"],
    ["ç§»å‹•åŠ¹ç‡ (MV)","MV"],
    ["æœªæ¥æ™‚é–“æŠ•è³‡ (FT)","FT"],
  ];
  const html = rows.map(([label,key])=>{
    const v = Math.max(0, Math.min(100, axisPct[key]||0));
    return `
      <div class="meter">
        <div class="row"><div class="name">${label}</div><div class="pct">${v}%</div></div>
        <div class="mbar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="${v}">
          <span style="width:${v}%"></span>
        </div>
      </div>`;
  }).join("");
  const box = document.getElementById("factorBox");
  if(box) box.innerHTML = html;
}

  function compute(){
    const {missing, values} = readAnswers();
    if(missing.length){
      alert(`æœªå›ç­”ãŒã‚ã‚Šã¾ã™ï¼ˆ${missing.slice(0,6).map(n=>"Q"+n).join(", ")}${missing.length>6?" ã»ã‹":""}ï¼‰ã€‚ã™ã¹ã¦ã®15å•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚`);
      const first = missing[0];
      const node = document.querySelector(`[name="Q${first}"]`)?.closest(".qrow");
      if(node){ node.scrollIntoView({behavior:"smooth", block:"center"}); node.classList.add("hl"); setTimeout(()=>node.classList.remove("hl"),1600); }
      return;
    }
    try{
      localStorage.setItem(STORAGE_KEY, JSON.stringify(values));
      localStorage.setItem('specimens:last', JSON.stringify({ id: 'time-money', title: 'æ™‚ã®å¤©ç§¤è¨ºæ–­', href: location.pathname }));
    }catch{}

   const r = score(values);
const typ = pickType(r.TFI);

// è¡¨ç¤º
resEmpty.classList.add("hidden");
resArea.classList.remove("hidden");
titleText.textContent = `ã‚ãªãŸã®å¤©ç§¤ã¯ã€Œ${typ.name}ã€å¯„ã‚Š`;
pillTFI.textContent = `TFI: ${r.TFI}`;
pillType.textContent = `ã‚¿ã‚¤ãƒ—: ${typ.name}`;
oneLine.innerHTML = typ.one;

// ç”»åƒã¨ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³
const hero = document.getElementById('heroImg');
if(hero){
  hero.src = IMG_BASE + typ.file;
  hero.alt = typ.alt || 'çµæœã‚¤ãƒ¡ãƒ¼ã‚¸';
}
const ht = document.getElementById('heroTitle'); if(ht) ht.textContent = typ.name;
const rb = document.getElementById('rangeBadge'); if(rb) rb.textContent = `TFI ${r.TFI}`;
const tag= document.getElementById('heroTag'); if(tag) tag.textContent = typ.tag;

// å› å­ãƒãƒ¼ï¼ˆNOHé¢¨ï¼‰
renderFactors(r.axisPct);

try{
  document.dispatchEvent(new Event('result:ready'));
  localStorage.setItem('specimens:last', JSON.stringify({ id: 'time-money', title: 'æ™‚ã®å¤©ç§¤è¨ºæ–­', href: location.pathname }));
}catch(_){}
document.getElementById("result").scrollIntoView({behavior:"smooth", block:"start"});
}

  function restore(){
    try{
      const raw = localStorage.getItem(STORAGE_KEY);
      if(!raw) return;
      const saved = JSON.parse(raw);
    (saved||[]).forEach((v,i)=>{
  const vv = (v>4) ? (v-1) : v; // æ—§1..5 â†’ æ–°0..4ã¸ç§»è¡Œ
  const el = document.querySelector(`input[name="Q${i+1}"][value="${vv}"]`);
  if(el){ el.checked = true; }
});
      updateProgress();
    }catch{}
  }

  // åˆæœŸåŒ–
  buildQuestions();
  restore();
  document.getElementById("btn-score").addEventListener("click", compute);
  document.getElementById("btn-score2").addEventListener("click", compute);
  document.getElementById("btn-clear").addEventListener("click", ()=>{
    if(!confirm("ã™ã¹ã¦ã®å›ç­”ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã‹ï¼Ÿ")) return;
    document.querySelectorAll('#qContainer input[type="radio"]').forEach(el=>el.checked=false);
    try{ localStorage.removeItem(STORAGE_KEY); }catch{}
    updateProgress();
    resEmpty.classList.remove("hidden");
    resArea.classList.add("hidden");
    document.getElementById("app").scrollIntoView({behavior:"smooth", block:"start"});
  });
  document.getElementById('btnBack').addEventListener('click', saveLast);
  document.getElementById('back2').addEventListener('click', saveLast);
  function saveLast(){
    try{
      const payload = { id: 'time-money', title: 'æ™‚ã®å¤©ç§¤è¨ºæ–­', href: location.pathname };
      localStorage.setItem('specimens:last', JSON.stringify(payload));
    }catch(_e){}
  }
});
</script>
<script>
/* ============================================================
   è¨ºæ–­ãƒšãƒ¼ã‚¸å…±é€šã‚¹ãƒ‹ãƒšãƒƒãƒˆï¼ˆã‚³ãƒ”ãƒšç”¨ï¼‰
   1) å›ç­”ã®è‡ªå‹•ä¿å­˜ãƒ»è‡ªå‹•å¾©å…ƒï¼ˆå…¥åŠ›ä¸­ã‚‚é€æ¬¡ä¿å­˜ï¼‰
   2) çµæœè¡¨ç¤ºã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã€Œæ¸ˆã€ï¼‹ ã‚ãªãŸã®Lv +1
   3) ã¿ã‚“ãªã®ã“ã“ã‚Lvï¼ˆCountAPIï¼‰ã« +1ï¼ˆå¤±æ•—ã¯ç„¡è¦–ï¼‰
   ------------------------------------------------------------
   â˜…ç½®ãå ´æ‰€ï¼šå„è¨ºæ–­HTMLã® </body> ã®ç›´å‰
   â˜…ãƒšãƒ¼ã‚¸IDï¼š<body data-id="xxxxx"> ã‚’æ¨å¥¨ï¼ˆæœªè¨­å®šã§ã‚‚å‹•ä½œï¼‰
============================================================ */
(function(){
  'use strict';

  // ===== å›ºå®šã‚­ãƒ¼ï¼šindex.html ã¨åˆã‚ã›ã¦ã‚ã‚Šã¾ã™ =====
  var DONE_KEY   = 'specimens:open:byid';   // è¨ºæ–­ã”ã¨ã®ã€Œæ¸ˆã€ãƒãƒƒãƒ—
  var TOTAL_KEY  = 'specimens:open:total';  // ã‚ãªãŸã®ã“ã“ã‚Lvï¼ˆåˆè¨ˆï¼‰
  var GLOBAL_LAST= 'specimens:open:global:last'; // ã¿ã‚“ãªã®Lvã®å‰å›è¡¨ç¤ºã‚­ãƒ£ãƒƒã‚·ãƒ¥

  // ===== ã“ã®ãƒšãƒ¼ã‚¸ã®ID =====
  var MY_ID = (document.body && document.body.getAttribute('data-id')) || 'unknown';

  // ===== å›ç­”ä¿å­˜ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆã“ã®è¨ºæ–­ã ã‘ã®ç®±ï¼‰ =====
  var ANSWER_KEY = 'specimens:answers:' + MY_ID;

  // ===== ã¿ã‚“ãªã®Lvï¼ˆCountAPIè¨­å®šï¼‰ =====
  var COUNTAPI_NS  = 'haisuikounozarigani_shindan';
  var COUNTAPI_KEY = 'specimens_open_total';
  function countapiHit(){
    var url = 'https://api.countapi.xyz/hit/'+COUNTAPI_NS+'/'+COUNTAPI_KEY;
    if(navigator.sendBeacon){
      try{ navigator.sendBeacon(url); }catch(_){}
    }else{
      fetch(url, {mode:'cors', cache:'no-store', keepalive:true}).catch(function(){});
    }
  }

  // ---------- å›ç­”ã®ä¿å­˜/å¾©å…ƒ ----------
  function loadState(){
    try{ return JSON.parse(localStorage.getItem(ANSWER_KEY) || '{}'); }catch(_){ return {}; }
  }
  function saveState(obj){
    try{ localStorage.setItem(ANSWER_KEY, JSON.stringify(obj)); }catch(_){}
  }
  function saveField(el){
    if(!el || !el.name) return;
    var st = loadState();
    var nm = el.name;

    if(el.type === 'radio'){
      // ãƒ©ã‚¸ã‚ªã¯é¸ã°ã‚ŒãŸ value ã‚’ä¿å­˜
      var chosen = (el.form || document).querySelector('input[type="radio"][name="'+nm+'"]:checked');
      st[nm] = chosen ? {t:'r', v: chosen.value} : {t:'r', v:null};
    }else if(el.type === 'checkbox'){
      // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã¯åŒåã‚°ãƒ«ãƒ¼ãƒ—ã®ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ value é…åˆ—
      var all = (el.form || document).querySelectorAll('input[type="checkbox"][name="'+nm+'"]');
      var vals = [];
      all.forEach(function(c){ if(c.checked) vals.push(c.value || 'on'); });
      st[nm] = {t:'c', v: vals};
    }else if(el.tagName==='SELECT'){
      if(el.multiple){
        var arr=[]; [].slice.call(el.options).forEach(function(o){ if(o.selected) arr.push(o.value); });
        st[nm] = {t:'m', v: arr};
      }else{
        st[nm] = {t:'s', v: el.value};
      }
    }else{
      // text / number / textarea ãªã©
      st[nm] = {t:'t', v: el.value};
    }
    saveState(st);
  }
  function restoreOnce(){
    var st = loadState();
    var names = Object.keys(st);
    if(!names.length) return false;

    names.forEach(function(nm){
      var info = st[nm]; if(!info) return;

      if(info.t==='r'){
        var r = document.querySelector('input[type="radio"][name="'+nm+'"][value="'+CSS.escape(String(info.v))+'"]');
        if(r){ r.checked = true; r.dispatchEvent(new Event('change',{bubbles:true})); }
      }else if(info.t==='c'){
        var all = document.querySelectorAll('input[type="checkbox"][name="'+nm+'"]');
        var set = new Set(info.v||[]);
        all.forEach(function(c){ c.checked = set.has(c.value || 'on'); });
      }else if(info.t==='m'){
        var sel = document.querySelector('select[name="'+nm+'"]');
        if(sel){
          var setm = new Set(info.v||[]);
          [].slice.call(sel.options).forEach(function(o){ o.selected = setm.has(o.value); });
        }
      }else if(info.t==='s'){
        var s = document.querySelector('select[name="'+nm+'"]');
        if(s){ s.value = info.v; }
      }else{
        var t = document.querySelector('[name="'+nm+'"]');
        if(t){ t.value = info.v==null? '' : String(info.v); }
      }
    });
    // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ç­‰ã‚’æ›´æ–°ã—ãŸã„UIã®ãŸã‚ã€è»½ã change ã‚’æŠ•ã’ã‚‹
    try{
      document.dispatchEvent(new Event('change', {bubbles:true}));
    }catch(_){}
    return true;
  }
  // å…¥åŠ›ç›£è¦–ï¼ˆä¿å­˜ï¼‰
  document.addEventListener('change', function(e){
    var el = e.target;
    if(!(el instanceof HTMLElement)) return;
    if(el.matches('input[name], select[name], textarea[name]')) saveField(el);
  }, true);
  document.addEventListener('input', function(e){
    var el = e.target;
    if(!(el instanceof HTMLElement)) return;
    if(el.matches('input[type="text"][name], input:not([type])[name], textarea[name]')) saveField(el);
  }, true);

  // å¾©å…ƒã¯ã€Œå…¥åŠ›ãŒæç”»ã•ã‚Œã¦ã‹ã‚‰ã€ä¸€åº¦ã ã‘è©¦ã¿ã‚‹ï¼ˆå‹•çš„ç”Ÿæˆã«ã‚‚å¯¾å¿œï¼‰
  (function restoreWhenReady(){
    var TRY_MAX=12, tries=0;
    function tick(){
      tries++;
      // å…¥åŠ›ãŒä¸€ã¤ã§ã‚‚è¦‹ã¤ã‹ã£ã¦ã‹ã‚‰å¾©å…ƒ
      var hasAny = document.querySelector('input[name], select[name], textarea[name]');
      if(hasAny){
        restoreOnce(); return;
      }
      if(tries<TRY_MAX){ setTimeout(tick, 300); }
    }
    if(document.readyState==='complete' || document.readyState==='interactive'){ tick(); }
    else document.addEventListener('DOMContentLoaded', tick);
  })();

  // ãƒªã‚»ãƒƒãƒˆç³»ãƒœã‚¿ãƒ³ãŒã‚ã‚Œã°ä¿å­˜ã‚‚å‰Šé™¤ï¼ˆ#btnReset / data-role="reset" ã‚’æƒ³å®šï¼‰
  function clearAnswers(){
    try{ localStorage.removeItem(ANSWER_KEY); }catch(_){}
  }
  document.addEventListener('click', function(e){
    var t = e.target;
    if(!(t instanceof HTMLElement)) return;
    if(t.id==='btnReset' || t.matches('[data-role="reset"]')) clearAnswers();
  }, true);

  // ---------- çµæœç¢ºå®šã§ã€Œæ¸ˆã€ï¼‹LvåŠ ç®— ----------
  var marked = false;
  function markOnce(){
    if(marked) return; marked = true;
    try{
      // 1) ã‚ãªãŸã®ã“ã“ã‚Lv åˆè¨ˆ +1
      var total = (+localStorage.getItem(TOTAL_KEY) || 0) + 1;
      localStorage.setItem(TOTAL_KEY, String(total));

      // 2) ã“ã®è¨ºæ–­ã®ã€Œæ¸ˆã€ã‚’ +1ï¼ˆä»–ã‚¿ãƒ–å³æ™‚åæ˜ ç”¨ã«ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—æ··ãœã‚‹ï¼‰
      var map={}; try{ map = JSON.parse(localStorage.getItem(DONE_KEY) || '{}'); }catch(_){}
      map[MY_ID] = (map[MY_ID] || 0) + 1;
      localStorage.setItem(DONE_KEY, JSON.stringify(Object.assign({}, map, {_ts: Date.now()})));

      // 3) ã¿ã‚“ãªã®ã“ã“ã‚Lv +1ï¼ˆè¡¨ç¤ºã¯ index å´ã§å–å¾—ï¼ã“ã“ã§ã¯é€ã‚‹ã ã‘ï¼‰
      countapiHit();
      // ã¤ã„ã§ã«å‰å›ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚‚+1ï¼ˆindexåˆæœŸè¡¨ç¤ºã®è¦‹æ „ãˆæ”¹å–„ï¼‰
      try{
        var last = (+localStorage.getItem(GLOBAL_LAST) || 0) + 1;
        localStorage.setItem(GLOBAL_LAST, String(last));
      }catch(_){}
    }catch(_){}
  }

  // A) çµæœãŒæç”»ã•ã‚ŒãŸåˆå›³ï¼ˆæ¨å¥¨ï¼šå„ãƒšãƒ¼ã‚¸ã®é›†è¨ˆå®Œäº†æ™‚ã« dispatch ã—ã¦ãã ã•ã„ï¼‰
  //   ä¾‹ï¼‰document.dispatchEvent(new Event('result:ready'));
  document.addEventListener('result:ready', markOnce);

  // B) ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼šçµæœUIãŒè¦‹ãˆã¦ã‹ã‚‰2ç§’å¾Œã«ä¸€åº¦ã ã‘å®Ÿè¡Œï¼ˆæˆ»ã‚‹ç„¡ã—ã§ã‚‚ç¢ºå®Ÿã«ã€Œæ¸ˆã€ï¼‰
  setTimeout(markOnce, 2000);
})();
</script>
</body>
</html>