<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ç¥çµŒç—‡çš„å‚¾å‘ãƒ»ã‚¯ãƒˆã‚¥ãƒ«ãƒ•ç¥è©±è¨ºæ–­</title>
<meta name="description" content="6ä¸‹ä½å› å­Ã—å„3å•=18å•ã‚’0ã€œ4ã®5ä»¶æ³•ã§å›ç­”ã€‚ç·åˆãƒ©ãƒ³ã‚¯ï¼ˆãƒãƒ¼ãƒ‡ãƒ³ã‚¹ã€œã‚¢ã‚¶ãƒˆãƒ¼ã‚¹ï¼‰ã¨å› å­åˆ¥ãƒãƒ¼ã€å®ˆè­·ãƒãƒƒã‚¸ã€ç ”ç©¶ãƒ¡ãƒ¢ã‚’è¡¨ç¤ºã—ã¾ã™ï¼ˆã‚¨ãƒ³ã‚¿ãƒ¡ç”¨ï¼ç‹¬è‡ªé …ç›®ï¼‰ã€‚">
<meta name="theme-color" content="#f7f9ff">
<!-- OG -->
<meta property="og:type" content="website">
<meta property="og:title" content="ç¥çµŒç—‡çš„å‚¾å‘ãƒ»ã‚¯ãƒˆã‚¥ãƒ«ãƒ•ç¥è©±è¨ºæ–­">
<meta property="og:description" content="18å•ã§ç¥çµŒç—‡çš„å‚¾å‘ã‚’ãƒã‚§ãƒƒã‚¯ã€‚ç·åˆãƒ©ãƒ³ã‚¯ï¼ˆç¥ï¼‰ã¨å› å­ãƒãƒ¼ã€å®ˆè­·ãƒãƒƒã‚¸ã€ç ”ç©¶ãƒ¡ãƒ¢ã‚’è¡¨ç¤ºã€‚">
<meta property="og:url" content="https://haisuikounozarigani.github.io/shindan/neurotic.html">
<meta property="og:image" content="/shindan/assets/results/neurotic/03.png">
<style>
:root{
  --accent:#4aa8ff; --accent2:#a48bff;
  --ink:#1f2732; --muted:#667087; --paper:#fff;
  --bg1:#f7f9ff; --bg2:#f6f3ff; --line:#e6ecf7;
  --good:#40c057; --mid:#fab005; --low:#ff6b6b;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--ink);
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  font-family:"Noto Sans JP",system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN",sans-serif;
}
a{color:inherit}
.wrap{max-width:980px;margin:18px auto;padding:0 14px}
header.hd{display:grid;grid-template-columns:56px 1fr;gap:12px;align-items:center;margin:8px 0}
.logo{width:56px;height:56px;border-radius:14px;background:linear-gradient(135deg,#e1f2ff,#ece6ff);display:grid;place-items:center;font-size:28px}
h1{margin:0;font-size:clamp(22px,4.6vw,34px);letter-spacing:.02em}
.sub{margin:4px 0 0;color:var(--muted);font-size:.96em}
.card{background:var(--paper);border:1px solid var(--line);border-radius:16px;padding:14px}
.section{margin:14px 0}
.pill{display:inline-block;padding:4px 8px;border:1px solid var(--line);border-radius:999px;background:#fff;color:#6b6a77;font-size:.88em}
.meta{display:flex;gap:8px;flex-wrap:wrap}
.sticky{position:sticky;top:0;z-index:10;margin:-6px -14px 12px;padding:8px 14px;background:rgba(255,255,255,.8);backdrop-filter:blur(6px) saturate(1.05);border-bottom:1px solid #e9edf7;display:flex;align-items:center;gap:10px}
.progress{height:8px;background:#edf2fb;border-radius:999px;flex:1;overflow:hidden}
.progress>span{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--accent2))}
.btn{padding:10px 14px;border:1px solid var(--line);border-radius:12px;background:#fff;cursor:pointer}
.btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));border-color:transparent;color:#fff;font-weight:700}
fieldset.q{border:1px solid var(--line);border-radius:12px;padding:10px;margin:10px 0;background:#fff}
legend{font-weight:700}
.scale{display:grid;grid-template-columns:repeat(5,minmax(66px,1fr));gap:8px;margin-top:8px}
.scale input{position:absolute;opacity:0;pointer-events:none}
.scale label{display:grid;place-items:center;border:1px solid #e5e9f3;border-radius:10px;padding:8px;cursor:pointer;user-select:none;background:#fff}
.scale input:checked+label{outline:2px solid var(--accent);border-color:transparent}
mark.need{animation:need 1.6s ease}
@keyframes need{0%{box-shadow:0 0 0 0 rgba(74,168,255,.45)}100%{box-shadow:0 0 0 0 rgba(74,168,255,0)}}
.result-head{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;font-weight:700}
.total{font-size:26px;font-weight:800}
.small{color:var(--muted);font-size:.92em}
.hero-vert{display:grid;place-items:center;border:1px solid var(--line);border-radius:16px;background:#fff;overflow:hidden}
.hero-vert figure{margin:0;width:min(600px,100%);max-width:100%;aspect-ratio:3/4;border-bottom:1px solid var(--line);background:#f7f9ff}
.hero-vert img{width:100%;height:100%;object-fit:cover;display:block}
.hero-vert figcaption{padding:10px;width:100%}
.hero-vert .capline{font-weight:800;line-height:1.55;overflow-wrap:anywhere;word-break:break-word;white-space:normal}
.hero-vert .poem{font-style:italic;letter-spacing:.02em;margin-top:4px;color:#445;opacity:.9}
.hero-vert .capmini{font-size:1em;line-height:1.85;color:var(--muted);overflow-wrap:anywhere;word-break:break-word;white-space:normal}
.grid2{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px}
.stat{border:1px solid var(--line);border-radius:12px;padding:10px;background:#fff}
.stat .big{font-size:22px;font-weight:800}
.hr{height:1px;background:var(--line);margin:10px 0}
.klist{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px}
.kpill{border:1px solid var(--line);border-radius:999px;padding:6px 10px;background:#fff;font-size:.9em}
.bar{border:1px solid var(--line);border-radius:12px;padding:10px;background:#fff}
.bar .row{height:10px;background:#edf2fb;border-radius:999px;overflow:hidden;margin-top:6px}
.bar .row>span{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--accent2))}
.footer{color:var(--muted);font-size:.92em}
.warn{background:#f8fbff;border:1px solid #e1ebf7;border-radius:12px;padding:10px;margin:12px 0}
.back-area{display:flex;justify-content:center;margin-top:10px}
a.back{display:inline-flex;align-items:center;gap:6px;padding:10px 14px;border:1px solid var(--line);border-radius:12px;background:#fff;text-decoration:none}
.badge-size{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;background:#fff;border:1px solid var(--line);font-size:.85em;margin-left:6px}
.title-row{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
.tags{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px}
.tag{padding:3px 8px;border:1px solid var(--line);border-radius:999px;background:#fff;font-size:.84em}
.title-emoji{font-size:22px}
.factor-mini{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px}
.guard{display:flex;align-items:center;gap:8px;border:1px solid var(--line);border-radius:12px;background:#fff;padding:8px 10px}
.guard .g-emo{font-size:18px}
@media (max-width: 560px){
  .wrap{padding:0 10px}
  .sticky{top:calc(env(safe-area-inset-top) + 0px); padding:8px 10px}
  .scale{grid-template-columns:repeat(2,1fr)}
  .scale label{padding:12px 8px;font-size:14px}
  .hero-vert figure{width:100%}
  .grid2{grid-template-columns:1fr}
  .badge-size{font-size:.8em}
  .card{padding:12px}
  .hero-vert .capline{font-size:clamp(16px,5.2vw,20px);line-height:1.65}
  .hero-vert .capmini{font-size:clamp(14px,4.6vw,16px);line-height:1.95}
}
.note{border:1px solid var(--line);border-radius:12px;background:#fff;padding:10px}
.note h4{margin:0 0 6px;font-size:16px}
.note .mini{display:inline-block;margin-left:6px;font-size:.82em;color:#6b6a77}
.note p{margin:6px 0;line-height:1.75}
@media (max-width:560px){
  .note h4{font-size:15px}
}
</style>
</head>
<body data-id="neurotic">
<main class="wrap" id="app">
  <header class="hd">
    <div class="logo">ğŸŒŠ</div>
    <div>
      <h1>ç¥çµŒç—‡çš„å‚¾å‘ãƒ»ã‚¯ãƒˆã‚¥ãƒ«ãƒ•ç¥è©±è¨ºæ–­</h1>
      <p class="sub">6ä¸‹ä½å› å­Ã—å„3å•ï¼18å•ï¼ˆ0ã€œ4ã®5ä»¶æ³•ï¼‰ã€‚ç·åˆãƒ©ãƒ³ã‚¯ï¼ˆç¥ï¼‰ã¨å› å­åˆ¥ãƒãƒ¼ã€å®ˆè­·ãƒãƒƒã‚¸ã€ç ”ç©¶ãƒ¡ãƒ¢ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚â€»ç‹¬è‡ªé …ç›®ã®ã‚¨ãƒ³ã‚¿ãƒ¡è‡ªå·±ç†è§£ç”¨ã€‚</p>
    </div>
  </header>

  <div class="sticky" aria-live="polite">
    <span>ğŸ“Š</span>
    <div class="progress" aria-label="å›ç­”é€²æ—"><span id="prog"></span></div>
    <button class="btn primary" id="doScore">è¨ºæ–­ã™ã‚‹</button>
  </div>

  <section class="card section" id="desc">
    <h2 style="margin:4px 0 8px">èª¬æ˜</h2>
    <div class="meta" style="margin-bottom:8px">
      <span class="pill">è³ªå•æ•°ï¼š18</span>
      <span class="pill">å½¢å¼ï¼š0â€“4ï¼ˆ0=ã¾ã£ãŸããªã„ / 4=ã¨ã¦ã‚‚ï¼‰</span>
      <span class="pill">ç·åˆï¼š0â€“4ï¼ˆ6å› å­å¹³å‡ï¼‰</span>
    </div>
    <p class="small">ã“ã“ã§ã®ã€Œç¥çµŒç—‡çš„å‚¾å‘ã€ã¯ã€<strong>æ—¥å¸¸ã®æºã‚Œã‚„ã™ã•</strong>ã®å¹³å‡çš„ãªå‚¾å‘ã‚’ãã£ã¨å¯è¦–åŒ–ã™ã‚‹ã‚‚ã®ã§ã™ã€‚åŒ»ç™‚ç›®çš„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
  </section>

  <!-- è¨­å• -->
  <section class="card section" id="questions">
    <h2 style="margin:4px 0 8px">è¨­å•ï¼ˆ0=ã¾ã£ãŸããªã„ï¼1=ã‚ã¾ã‚Šãªã„ï¼2=åŠã€…ï¼3=ã ã„ãŸã„ï¼4=ã¨ã¦ã‚‚ï¼‰</h2>
    <div id="qWrap"></div>
    <div class="tags">
      <span class="tag">ä¸‹ä½å› å­ï¼šä¸å®‰ï¼æ˜“æ€’ï¼ãµã•ãè¾¼ã¿ï¼è‡ªæ„è­˜ï¼è¡å‹•ï¼è„†ã•</span>
    </div>
    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-top:10px">
      <button class="btn" id="clearAns">å›ç­”ã‚’ã‚¯ãƒªã‚¢</button>
      <button class="btn primary" id="doScore2">è¨ºæ–­ã™ã‚‹</button>
    </div>
  </section>

  <!-- çµæœ -->
  <section class="card section" id="result" aria-live="polite">
    <div id="resEmpty">
      <span class="badge">ã¾ã çµæœã¯ã‚ã‚Šã¾ã›ã‚“</span>
      <p class="small">å…¨18å•ã«å›ç­”ã—ã¦ã€Œè¨ºæ–­ã™ã‚‹ã€ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚</p>
    </div>

    <div id="resArea" style="display:none">
      <div class="result-head">
        <span class="badge">çµæœ</span>
        <div class="total" id="typeLine">â€”</div>
      </div>

      <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ï¼ˆ3:4å¤§ããï¼‰ -->
      <div class="hero-vert section" role="region" aria-label="ãƒ©ãƒ³ã‚¯ã®ã‚¤ãƒ¡ãƒ¼ã‚¸">
        <figure>
          <img id="heroImg" src="/shindan/assets/results/neurotic/01.png" alt="æœˆå…‰ã®å…¥ã‚Šæ±Ÿã«æµ®ã‹ã¶å°èˆŸ" loading="lazy" width="600" height="800">
        </figure>
        <figcaption>
          <div class="title-row">
            <div class="capline" id="heroTitle">â€”</div>
            <span class="badge-size" id="sizeBadge" aria-label="ç·åˆå¹³å‡">â€”</span>
          </div>
          <div class="poem" id="heroPoem">â€”</div>
          <div class="capmini" id="heroCopy">â€”</div>
        </figcaption>
      </div>

      <!-- æ•°å€¤ -->
      <div class="grid2">
        <article class="stat" aria-label="ç·åˆã‚¹ã‚³ã‚¢">
          <div><strong>ç·åˆNï¼ˆ0â€“4ï¼‰</strong></div>
          <div class="big"><span id="sumAvg">0.00</span> / 4.00</div>
          <div class="small" id="sumNote">â€”</div>
        </article>
        <article class="stat" aria-label="å®ˆè­·ãƒãƒƒã‚¸">
          <div><strong>å®ˆè­·ï¼ˆä¸‹ä½å› å­ã®ç›¸æ£’ï¼‰</strong></div>
          <div class="factor-mini" id="guardArea"><!-- JS --></div>
        </article>
      </div>

      <div class="hr"></div>
      <!-- å› å­ãƒãƒ¼ -->
      <div class="section">
        <h3 style="margin:8px 0">å› å­åˆ¥ã‚¹ã‚³ã‚¢</h3>
        <div id="bars" class="factor-mini"><!-- JS --></div>
      </div>

      <div class="hr"></div>
      <section class="section" id="factorNotesSec">
        <h3 style="margin:8px 0">å› å­ã”ã¨ã®èª¬æ˜</h3>
        <div id="factorNotes" class="factor-mini"><!-- JS --></div>
      </section>

      <div class="hr"></div>
      <div id="longCopy" class="small"><!-- JS é•·æ–‡ã‚³ãƒ¡ãƒ³ãƒˆ --></div>

      <div class="hr"></div>
      <!-- ç ”ç©¶ãƒ¡ãƒ¢ï¼ˆå¤–å‘æ€§ã¨åŒã˜ã‚¹ã‚¿ã‚¤ãƒ«ï¼šå¸¸ã«é–‹ã„ãŸdetailsï¼‰ -->
      <details class="section" open>
        <summary><strong>ç ”ç©¶ãƒ¡ãƒ¢</strong></summary>
        <ul class="small" id="resMemo" style="margin:6px 0 0 18px;line-height:1.8"><!-- JS --></ul>
        <p class="small" style="margin-top:6px">â€»ã“ã“ã§ã®æ•°å€¤ã¯<strong>å¹³å‡çš„ãªå‚¾å‘</strong>ã®ç›®å®‰ã§ã™ã€‚ç›¸é–¢ãŒä¸­å¿ƒã§ã€å› æœã¯æ–­å®šã§ãã¾ã›ã‚“ã€‚å€‹äººå·®ãŒå¤§ãã„ç‚¹ã‚’ã”ç†è§£ãã ã•ã„ã€‚</p>
      </details>

      <div class="hr"></div>
      <!-- ç‹¬è‡ªè¨­å•ã®æ˜è¨˜ -->
      <p class="small"><strong>ç‹¬è‡ªè¨­å•ã«ã¤ã„ã¦ï¼š</strong>æœ¬è¨ºæ–­ã¯<strong>ãƒ“ãƒƒã‚°ãƒ•ã‚¡ã‚¤ãƒ–ç†è«–ã‚’å‚è€ƒã«ã—ãŸç‹¬è‡ªã®è¨­å•</strong>ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ã€‚<strong>NEO-PI(-R)ã€BFI/BFI-2ã€TIPI</strong>ç­‰ã®æ¨™æº–åŒ–æ¤œæŸ»ã¨ã¯åŒä¸€ã§ã‚‚äº’æ›ã§ã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚ç ”ç©¶ãƒ»è‡¨åºŠè©•ä¾¡ã‚’ç›®çš„ã¨ã›ãšã€<strong>ã‚¨ãƒ³ã‚¿ãƒ¡ï¼è‡ªå·±ç†è§£</strong>ã®è£œåŠ©ã‚’æ„å›³ã—ã¦ã„ã¾ã™ã€‚</p>

      <div class="back-area" style="margin-top:12px">
        <a class="back" href="/shindan/" id="backLink" aria-label="è¨ºæ–­ä¸€è¦§ã«æˆ»ã‚‹">è¨ºæ–­ä¸€è¦§ã«æˆ»ã‚‹</a>
      </div>
    </div>
  </section>

  <section class="footer card">
    <h2 style="margin:4px 0 8px">ã”åˆ©ç”¨ã«ã‚ãŸã£ã¦</h2>
    <p class="warn"><strong>æ³¨æ„ï¼š</strong>ã“ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯<b>ã‚¨ãƒ³ã‚¿ãƒ¡ç”¨ã®ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯</b>ã§ã™ã€‚åŒ»ç™‚ãƒ»è¨ºæ–­ãƒ»æ²»ç™‚ãƒ»ã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°ç­‰ã®ç›®çš„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚çµæœã®è§£é‡ˆãƒ»åˆ©ç”¨ã¯ã”è‡ªèº«ã®åˆ¤æ–­ã¨è²¬ä»»ã«ã¦ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚<br>
å›ç­”ã¯ç«¯æœ«å†…ã§å‡¦ç†ãƒ»ä¿å­˜ã•ã‚Œã€å›ç­”å†…å®¹ã‚„å€‹äººã‚’ç‰¹å®šã§ãã‚‹æƒ…å ±ã¯ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã•ã‚Œã¾ã›ã‚“ã€‚çµæœè¡¨ç¤ºæ™‚ã«åŒ¿åã®ä»¶æ•°ã‚«ã‚¦ãƒ³ãƒˆã®ã¿é€ä¿¡ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚<br>
ç¥åãƒ»æ¯”å–©ã¯<b>æ–‡å­¦çš„ãƒ¢ãƒãƒ¼ãƒ•</b>ã§ã™ï¼ˆå®—æ•™çš„æ„å›³ã¯ã‚ã‚Šã¾ã›ã‚“ï¼‰ã€‚</p>
  </section>
</main>

<script>
(function(){
  // ====== ãƒšãƒ¼ã‚¸æƒ…å ± ======
  var SLUG = "neurotic";
  var TITLE = "ç¥çµŒç—‡çš„å‚¾å‘ãƒ»ã‚¯ãƒˆã‚¥ãƒ«ãƒ•ç¥è©±è¨ºæ–­";
  var IMG_BASE = "/shindan/assets/results/neurotic/"; // æœ«å°¾/
  var ANS_KEY = "specimens:"+SLUG+":answers"; // å›ç­”ä¿å­˜ã‚­ãƒ¼

  // ====== ãƒ©ãƒ³ã‚¯å®šç¾©ï¼ˆç·åˆå¹³å‡0â€“4ï¼‰ ======
  var LV = [
    {id:1, name:"ãƒãƒ¼ãƒ‡ãƒ³ã‚¹",       label:"Lv1", min:0.00, max:0.79, img:"01.png", alt:"æœˆå…‰ã®å…¥ã‚Šæ±Ÿã«æµ®ã‹ã¶å°èˆŸ",
     poem:"æ½®ã¯é™ã¾ã‚Šã€æ˜Ÿã¯æºã‚Œã‚’æ˜ ã•ãªã„ã€‚", 
     copy:"è½ã¡ç€ããŒå¼·ã„å¸¯ã€‚æºã‚Œã¦ã‚‚æ•´ãˆã‚‹æ‰‹é †ã§æˆ»ã›ã¾ã™ã€‚æœã«ã€Œä»Šæ—¥ã®3æ‰‹ã€ã€å¤œã¯è‰¯ã‹ã£ãŸã“ã¨ã‚’1è¡Œæ›¸ãã¨é“ç­‹ãŒã¯ã£ãã‚Šã—ã¾ã™ã€‚"},
    {id:2, name:"ãƒ¨ã‚°ï¼ã‚½ãƒˆãƒ¼ã‚¹",   label:"Lv2", min:0.80, max:1.59, img:"02.png", alt:"æ˜Ÿã€…ãŒè¼ªã«ãªã£ãŸé–€",
     poem:"é–€ã¯é–‹ãã¤ã¤ã‚ã‚Šã€å¢ƒç•Œã¯ã¾ã å®ˆã‚‰ã‚Œã¦ã„ã‚‹ã€‚", 
     copy:"å¢ƒç•Œã®ç®¡ç†ãŒä¸Šæ‰‹ã€‚è² è·ãŒä¸ŠãŒã‚‹ã¨å´©ã‚Œã‚„ã™ã„ã®ã§ã€é€šçŸ¥ãƒ»éŸ³ãƒ»äººæ··ã¿ãªã©åˆºæ¿€ã‚’æ™‚é–“ã§ON/OFFã™ã‚‹ã¨å®‰å®šã—ã‚„ã™ããªã‚Šã¾ã™ã€‚"},
    {id:3, name:"ãƒ‹ãƒ£ãƒ«ãƒ©ãƒˆãƒ†ãƒƒãƒ—", label:"Lv3", min:1.60, max:2.39, img:"03.png", alt:"ä»®é¢ã¨é ã„è¡—ç¯ã‚Š",
     poem:"ä»®é¢ã®å†…å´ã«æ³¢ãŒç«‹ã¡ã€é‹è»¢æ¬¡ç¬¬ã§è¡Œãå…ˆãŒå¤‰ã‚ã‚‹ã€‚", 
     copy:"æ³¢ã¯ã‚ã‚‹ãŒå›ã›ã‚‹å¸¯ã€‚ã€Œä¸å®‰â†’å¯¾å‡¦ã‚’1è¡Œã€ã§åŒºåˆ‡ã‚Šã‚’ã¤ã‘ã‚‹ã‚¯ã‚»ãŒåŠ¹ãã¾ã™ã€‚ã¾ãš1ã¤å°ã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã•ã›ã¦æµã‚Œã‚’ä½œã‚Šã¾ã—ã‚‡ã†ã€‚"},
    {id:4, name:"ã‚¯ãƒˆã‚¥ãƒ«ãƒ•",       label:"Lv4", min:2.40, max:3.19, img:"04.png", alt:"æ³¢é–“ã«æ²ˆã‚€å¤ã„éƒ½å¸‚ã®å½±",
     poem:"æµ·ã¯ã–ã‚ã‚ãã€å¤¢ã¯äºˆå®šã‚’ä¾µé£Ÿã™ã‚‹ã€‚", 
     copy:"æºã‚ŒãŒå¼·ãã€äºˆå®šã«é£Ÿã„è¾¼ã¿ã‚„ã™ã„å¸¯ã€‚3åˆ†ã ã‘å‹•ãâ†’çµ‚ã‚ã‚Šã‚’åŒºåˆ‡ã‚‹å°ã‚¿ã‚¹ã‚¯ãŒåŠ©èµ°ã«ãªã‚Šã¾ã™ã€‚äººã«é ¼ã‚‹ä¸€è¨€ã‚’ç”¨æ„ã—ã¦ãŠãã®ã‚‚éµã€‚"},
    {id:5, name:"ã‚¢ã‚¶ãƒˆãƒ¼ã‚¹",       label:"Lv5", min:3.20, max:4.00, img:"05.png", alt:"æ¸¦å·»ãæ˜Ÿé›²ã¨æ•£ã‚‹è­œé¢",
     poem:"æ¸¦ã®ä¸­å¿ƒã§ã¯ã€ã¾ãšè¶³å ´ã‚’å›ºã‚ã‚ˆã€‚", 
     copy:"ã¾ãšè¶³å ´ï¼ˆç¡çœ ãƒ»é£Ÿäº‹ãƒ»æ­©ãï¼‰ã‚’å›ºå®šã€‚å¯ã‚‹90åˆ†å‰ã®å…‰ãƒ»ã‚«ãƒ•ã‚§ã‚¤ãƒ³OFFã€10åˆ†ã ã‘æ­©ãã€ç„¡ç†ãªæ‰€ã¯æ—©ã‚ã«é ¼ã‚‹â€”â€”å°ã•ãªå®‰å®šã‚’ç©ã¿ä¸Šã’ã¾ã—ã‚‡ã†ã€‚"}
  ];

  // ====== ä¸‹ä½å› å­ã¨å®ˆè­· ======
  // key: {name, guard, catch, icon, items:[q indices 1..18]}
  var FACTORS = {
    ANX: {name:"ä¸å®‰",       guard:"ãƒŠã‚¤ãƒˆã‚´ãƒ¼ãƒ³ãƒˆ",  catch:"å…†ã—ã‹ã‚‰æœ€æ‚ªã‚’æƒ³åƒ",        icon:"ğŸŒ«ï¸", items:[1,2,3]},
    ANG: {name:"æ˜“æ€’",       guard:"ç‹‚ä¿¡è€…",          catch:"æ€’ã‚ŠãŒè¨€è‘‰ã«å‡ºã‚„ã™ã„",      icon:"ğŸ”¥", items:[4,5,6]},
    DEP: {name:"ãµã•ãè¾¼ã¿", guard:"å»ƒéƒ½ã®æ¢ç´¢è€…",    catch:"å¤±æ•—ã‚’é•·ãèƒŒè² ã„ãŒã¡",      icon:"ğŸšï¸", items:[7,8,9]},
    SCS: {name:"è‡ªæ„è­˜",     guard:"ä»®é¢ã®æ¼”è€…",      catch:"è¦–ç·šãŒæ°—ã«ãªã‚Šã‚„ã™ã„",      icon:"ğŸ­", items:[10,11,12]},
    IMP: {name:"è¡å‹•",       guard:"ç¦æ›¸è’é›†å®¶",      catch:"å‹¢ã„ã§å‹•ãã‚„ã™ã„",          icon:"ğŸ“š", items:[13,14,15]},
    VUL: {name:"è„†ã•",       guard:"æ¥µåœ°æ¢æ¤œéšŠ",      catch:"äºˆæƒ³å¤–ã«å¼±ããªã‚‹",          icon:"ğŸ§­", items:[16,17,18]}
  };

  // ====== å› å­èª¬æ˜ãƒ†ã‚­ã‚¹ãƒˆï¼ˆã‚„ã•ã—ã„èªå½™ï¼‰ ======
  var FACTOR_DESC = {
    ANX: {
      title:"ä¸å®‰ï¼ˆå®ˆè­·ï¼šãƒŠã‚¤ãƒˆã‚´ãƒ¼ãƒ³ãƒˆï¼‰",
      body:"å°ã•ãªå…†ã—ã‹ã‚‰â€œæœ€æ‚ªãƒ‘ã‚¿ãƒ¼ãƒ³â€ã‚’æ—©ã‚ã«æƒ³åƒã™ã‚‹åŠ›ã€‚å±é™ºæ¤œçŸ¥ã®é‹­ã•ã¯å®‰å…¨é‹è»¢ã«å½¹ç«‹ã¡ã¾ã™ã€‚",
      use :"ä¸å®‰â†’å¯¾å‡¦ã‚’åè©ã§1è¡Œï¼ˆä¾‹ï¼šã€é¨’éŸ³â†’è€³æ “ã€ï¼‰ã€‚ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆåŒ–ã™ã‚‹ã¨å®‰å¿ƒã€‚",
      care:"æƒ³åƒã¨ç¾å®Ÿã‚’åˆ†ã‘ã‚‹ãŸã‚ã«ã€æ·±å‘¼å¸3å›ï¼‹ç¾çŠ¶ç¢ºèªã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚’ã€‚"
    },
    ANG: {
      title:"æ˜“æ€’ï¼ˆå®ˆè­·ï¼šç‹‚ä¿¡è€…ï¼‰",
      body:"æ­£ã—ã•ã¸ã®æ„Ÿåº¦ãŒé«˜ãã€ã‚ºãƒ¬ã«åå¿œã—ã‚„ã™ã„é¢ã€‚ç†±é‡ã¯æ¨é€²åŠ›ã«ã‚‚ãªã‚Šã¾ã™ã€‚",
      use :"ä¸€è¨€ã‚¯ãƒƒã‚·ãƒ§ãƒ³ï¼ˆã€ã¾ãšå—ã‘å–ã£ãŸã‚ˆã€ï¼‰â†’è¦ç‚¹2ã¤ã ã‘ä¼ãˆã‚‹ã€‚",
      care:"çœ æ°—ãƒ»ç©ºè…¹ãƒ»é¨’éŸ³ã®ä¸‰ç‚¹ã‚’å…ˆã«æ•´ãˆã‚‹ã¨æ£˜ãŒæ¸›ã‚Šã‚„ã™ã„ã€‚"
    },
    DEP: {
      title:"ãµã•ãè¾¼ã¿ï¼ˆå®ˆè­·ï¼šå»ƒéƒ½ã®æ¢ç´¢è€…ï¼‰",
      body:"ã†ã¾ãã„ã‹ãªã‹ã£ãŸç‚¹ã«é•·ãç›®ãŒå‘ãå‚¾å‘ã€‚ã ã‹ã‚‰ã“ãæ”¹å–„ã®èŠ½ã‚‚æ‹¾ãˆã¾ã™ã€‚",
      use :"ã‚ˆã‹ã£ãŸç‚¹â†’æ”¹å–„ç‚¹ã®é †ã§2è¡Œã ã‘è¨˜éŒ²ã€‚ç¿Œæ—¥ã«å›ã™ã€‚",
      care:"æœã®å…‰ãƒ»æ•£æ­©5åˆ†ãƒ»äººã«ä¸€è¨€é ¼ã‚‹ã€ã®ã©ã‚Œã‹ä¸€ã¤ã‹ã‚‰ã€‚"
    },
    SCS: {
      title:"è‡ªæ„è­˜ï¼ˆå®ˆè­·ï¼šä»®é¢ã®æ¼”è€…ï¼‰",
      body:"ä»–è€…ã®è¦–ç·šã‚’ç´°ã‹ãå¯ŸçŸ¥ã™ã‚‹åŠ›ã€‚ç©ºæ°—èª­ã¿ã‚„ãƒªã‚¹ã‚¯å›é¿ã«åŠ¹ãã¾ã™ã€‚",
      use :"â€œå¤±æ•—ã—ã¦ã‚‚OKâ€ã®åˆå›³ã‚’å…ˆã«ç½®ãï¼ˆä¾‹ï¼šã€é€”ä¸­ã§æ­¢ã‚ã¦ã€ï¼‰ã€‚",
      care:"æ‰‹ã®éœ‡ãˆãªã©ä½“æ„ŸãŒå¼·ã„æ—¥ã¯ã€è©±ã™å‰ã«æ·±ã„å‘¼å¸ã§ãƒšãƒ¼ã‚¹ã¥ãã‚Šã€‚"
    },
    IMP: {
      title:"è¡å‹•ï¼ˆå®ˆè­·ï¼šç¦æ›¸è’é›†å®¶ï¼‰",
      body:"å‹¢ã„ã§å‹•ã‘ã‚‹ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã€‚å‰µé€ ã‚„çªç ´ã«å½¹ç«‹ã¡ã¾ã™ã€‚",
      use :"è²·ã„ç‰©ãƒ»è¿”ä¿¡ãƒ»ç™ºè¨€ã¯ã€ä¸€æ™©å¯ã‹ã™ã€ãƒœã‚¿ãƒ³ã‚’ä½œã‚‹ã€‚",
      care:"é€šçŸ¥ã‚ªãƒ•ãƒ»é–“é£Ÿã®ç½®ãæ›ãˆãªã©ã€å…ˆå›ã‚Šã®ä»•çµ„ã¿ã§å®ˆã‚‹ã€‚"
    },
    VUL: {
      title:"è„†ã•ï¼ˆå®ˆè­·ï¼šæ¥µåœ°æ¢æ¤œéšŠï¼‰",
      body:"è¤‡æ•°ã‚¹ãƒˆãƒ¬ã‚¹ã§ä¸€æ°—ã«ç–²ã‚Œã‚„ã™ã„é¢ã€‚åŠ©ã‘ã‚’å‘¼ã¶ã‚»ãƒ³ã‚µãƒ¼ã‚’å…ˆã«ç”¨æ„ã™ã‚‹ã¨å¼·ããªã‚Œã¾ã™ã€‚",
      use :"ã€å›°ã£ãŸã‚‰åˆå›³ã€ã‚’ãƒãƒ¼ãƒ ã§æ±ºã‚ã‚‹ï¼å„ªå…ˆåº¦3ã¤ã«ä¸¦ã¹æ›¿ãˆã€‚",
      care:"ç¡çœ ãƒ»æ°´åˆ†ãƒ»ä¼‘æ†©ã‚’â€œå›ºå®šã‚¿ã‚¹ã‚¯â€ã«ã€‚åŠ©ã‘ã‚’æ±‚ã‚ã‚‹ã®ã¯OKã€‚"
    }
  };

  // ====== è¨­å•ï¼ˆ18å•ãƒ»æ­£æ¡ç‚¹ï¼‰ ======
  var ITEMS = [
    // ä¸å®‰
    {id:1,  text:"å°ã•ãªå…†ã—ã‹ã‚‰æœ€æ‚ªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æƒ³åƒã—ã¦ã—ã¾ã†ã€‚"},
    {id:2,  text:"äºˆå®šã®å¤‰æ›´ã§å‹•æºãŒé•·ãæ®‹ã‚‹ã€‚"},
    {id:3,  text:"ä½“ã®é•å’Œæ„ŸãŒã‚ã‚‹ã¨ç—…æ°—ã‚’å¼·ãå¿ƒé…ã™ã‚‹ã€‚"},
    // æ˜“æ€’
    {id:4,  text:"å¾…ãŸã•ã‚Œã‚‹ã¨ã‚¤ãƒ©ãƒƒã¨ã—ã¦æ…‹åº¦ã«å‡ºã‚‹ã€‚"},
    {id:5,  text:"åè«–ã•ã‚Œã‚‹ã¨ãƒˆã‚²ã®ã‚ã‚‹è¨€ã„æ–¹ã«ãªã‚Šã‚„ã™ã„ã€‚"},
    {id:6,  text:"æ€’ã‚ŠãŒåã¾ã‚‹ã¾ã§ãŒé•·ã„ã€‚"},
    // ãµã•ãè¾¼ã¿
    {id:7,  text:"è¤’ã‚ã‚‰ã‚Œã¦ã‚‚å¿ƒã‹ã‚‰å—ã‘å–ã‚Šã¥ã‚‰ã„ã€‚"},
    {id:8,  text:"å¤±æ•—ã‚’é•·ãå¼•ããšã‚‹ã€‚"},
    {id:9,  text:"æœã€èµ·ãã‚‹å‰ã‹ã‚‰æ°—ãŒé‡ã„æ—¥ãŒå¤šã„ã€‚"},
    // è‡ªæ„è­˜
    {id:10, text:"äººå‰ã§è©±ã™ã¨ãã€é¡”ã‚„æ‰‹ã®éœ‡ãˆãŒæ°—ã«ãªã‚‹ã€‚"},
    {id:11, text:"ãã®å ´ã®ç©ºæ°—ã«â€œæµ®ã„ã¦ãªã„ã‹â€ã‚’éå‰°ã«æ°—ã«ã™ã‚‹ã€‚"},
    {id:12, text:"å¤±è¨€ãŒãªã„ã‹ä½•åº¦ã‚‚æ€ã„è¿”ã™ã€‚"},
    // è¡å‹•
    {id:13, text:"æ„Ÿæƒ…ã®å‹¢ã„ã§è²·ã„ç‰©ï¼è¿”ä¿¡ï¼ç™ºè¨€ã‚’ã—ã¦å¾Œæ‚”ã™ã‚‹ã€‚"},
    {id:14, text:"ã‚¹ãƒˆãƒ¬ã‚¹æ™‚ã«é£Ÿã¹éããƒ»å¤œæ›´ã‹ã—ãŒå¢—ãˆã‚‹ã€‚"},
    {id:15, text:"ä¸€æ—¦ãƒ ãƒƒã¨ã™ã‚‹ã¨æ­¢ã‚ã«ãã„ã€‚"},
    // è„†ã•
    {id:16, text:"äºˆæƒ³å¤–ãŒç¶šãã¨é ­ãŒçœŸã£ç™½ã«ãªã‚Šã‚„ã™ã„ã€‚"},
    {id:17, text:"ç· åˆ‡ã‚„é¨’éŸ³ãªã©è¤‡æ•°ã‚¹ãƒˆãƒ¬ã‚¹ã§ãƒ‘ãƒ³ã‚¯ã—ã‚„ã™ã„ã€‚"},
    {id:18, text:"å›°ã£ãŸã‚‰åŠ©ã‘ã‚’æ±‚ã‚ã‚‹ã®ãŒé…ã‚ŒãŒã¡ã€‚"}
  ];

  var LABELS = ["ã¾ã£ãŸããªã„","ã‚ã¾ã‚Šãªã„","åŠã€…","ã ã„ãŸã„","ã¨ã¦ã‚‚"];

  // ====== è¦ç´ å‚ç…§ ======
  var qWrap   = document.getElementById("qWrap");
  var prog    = document.getElementById("prog");
  var resEmpty= document.getElementById("resEmpty");
  var resArea = document.getElementById("resArea");
  var typeLine= document.getElementById("typeLine");
  var heroImg = document.getElementById("heroImg");
  var heroTitle= document.getElementById("heroTitle");
  var heroPoem = document.getElementById("heroPoem");
  var heroCopy = document.getElementById("heroCopy");
  var sizeBadgeEl= document.getElementById("sizeBadge");
  var sumAvg  = document.getElementById("sumAvg");
  var sumNote = document.getElementById("sumNote");
  var guardArea = document.getElementById("guardArea");
  var bars    = document.getElementById("bars");
  var longCopy= document.getElementById("longCopy");
  var resMemo = document.getElementById("resMemo");

  // ====== ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼‹ä¿å­˜ ======
  function band(pct){ return pct>=70?"good":(pct>=40?"mid":"low"); }
  function bandLabel(pct){ return pct>=70?"é«˜":(pct>=40?"ä¸­":"ä½"); }

  function saveAnswers(){
    try{
      var out = {};
      for(var i=0;i<ITEMS.length;i++){
        var id = ITEMS[i].id;
        var chk = qWrap.querySelector('#fs-'+id+' input[type="radio"]:checked');
        if(chk){ out[id] = parseInt(chk.value,10); }
      }
      localStorage.setItem(ANS_KEY, JSON.stringify({ts:Date.now(), ans:out}));
    }catch(e){}
  }
  function restoreAnswers(){
    try{
      var raw = localStorage.getItem(ANS_KEY);
      if(!raw) return;
      var data = JSON.parse(raw);
      var ans = (data && data.ans) || {};
      Object.keys(ans).forEach(function(id){
        var v = ans[id];
        var input = qWrap.querySelector('#q'+id+'-'+v);
        if(input){ input.checked = true; }
      });
      if (typeof updateProgress === "function") updateProgress();
    }catch(e){}
  }
  function wipeAnswers(){
    try{ localStorage.removeItem(ANS_KEY); }catch(e){}
  }

  // ====== è¨­å•ç”Ÿæˆï¼ˆç•ªå·ã¯UIã«å‡ºã•ãªã„ï¼‰ ======
  function buildQuestions(){
    var html = "";
    for(var i=0;i<ITEMS.length;i++){
      var q = ITEMS[i];
      html += '<fieldset class="q" id="fs-'+q.id+'">'+
        '<legend>'+q.text+'</legend>'+
        '<div class="scale" role="radiogroup" aria-label="'+q.text+'">';
      for(var v=0;v<=4;v++){
        html += '<div style="position:relative">'+
          '<input id="q'+q.id+'-'+v+'" type="radio" name="q'+q.id+'" value="'+v+'">'+
          '<label for="q'+q.id+'-'+v+'" title="'+LABELS[v]+'">'+LABELS[v]+'</label>'+
        '</div>';
      }
      html += '</div></fieldset>';
    }
    qWrap.innerHTML = html;

    var radios = qWrap.querySelectorAll('input[type="radio"]');
    for(var r=0;r<radios.length;r++){
      radios[r].addEventListener('change', function(){
        saveAnswers();
        updateProgress();
      }, false);
    }
    restoreAnswers();
  }

  function updateProgress(){
    var total = ITEMS.length;
    var answered = qWrap.querySelectorAll('input[type="radio"]:checked').length;
    prog.style.width = Math.round(100*answered/total) + "%";
  }

  // ====== ã‚¹ã‚³ã‚¢è¨ˆç®— ======
  function score(){
    var missing = [];
    var ans = {};
    for(var i=0;i<ITEMS.length;i++){
      var id = ITEMS[i].id;
      var chk = qWrap.querySelector('#fs-'+id+' input[type="radio"]:checked');
      if(!chk){ missing.push(id); continue; }
      ans[id] = parseInt(chk.value,10);
    }
    if(missing.length){
      alert("æœªå›ç­”ãŒã‚ã‚Šã¾ã™ã€‚å…¨18å•ã«ãŠç­”ãˆãã ã•ã„ã€‚");
      var fs = document.getElementById('fs-'+missing[0]);
      if(fs){ fs.scrollIntoView({behavior:"smooth", block:"center"}); fs.classList.add("need"); setTimeout(function(){ fs.classList.remove("need"); },1600); }
      return;
    }

    // å› å­ã”ã¨ã®å¹³å‡(0-4)ã¨%ã«æ›ç®—
    var fScore = {};
    Object.keys(FACTORS).forEach(function(key){
      var ids = FACTORS[key].items;
      var sum = ids.reduce(function(s,id){ return s + (ans[id]||0); },0);
      var avg = sum / ids.length; // 0-4
      var pct = Math.round((avg/4)*100);
      fScore[key] = {sum:sum, avg:avg, pct:pct};
    });
    // ç·åˆå¹³å‡ï¼ˆ6å› å­å¹³å‡ï¼‰
    var avgTotal = Object.values(fScore).reduce(function(s,o){ return s+o.avg; },0) / 6;
    avgTotal = Math.round(avgTotal*100)/100; // å°æ•°2æ¡

    render({avg:avgTotal, fScore:fScore, ans:ans});
  }

  function rankOf(avg){
    for(var i=0;i<LV.length;i++){
      var d = LV[i];
      if(avg>=d.min && avg<=d.max) return d;
    }
    return LV[2];
  }

  function render(o){
    var rank = rankOf(o.avg);

    // ãƒ’ãƒ¼ãƒ­ãƒ¼
    heroImg.src = IMG_BASE + rank.img;
    heroImg.alt = rank.alt;
    heroTitle.textContent = "ã‚ãªãŸã®ãƒ©ãƒ³ã‚¯ï¼š"+rank.name+"ï¼ˆ"+rank.label+"ï¼‰";
    heroPoem.textContent  = rank.poem;
    heroCopy.textContent  = rank.copy;
    sizeBadgeEl.textContent = "ç·åˆå¹³å‡ " + o.avg.toFixed(2) + " / 4.00";

    // åˆè¨ˆ
    sumAvg.textContent = o.avg.toFixed(2);
    var note = "";
    if(o.avg<0.8) note="å®‰å®šãŒå¼·ã„ãƒ¬ãƒ³ã‚¸ã€‚ä»Šã®æ‰‹é †ã‚’ç¶šã‘ã‚Œã°OKã€‚";
    else if(o.avg<1.6) note="å°ã•ãªæºã‚Œã¯ç®¡ç†å¯ã€‚åˆºæ¿€ã®ON/OFFã‚’æ™‚é–“ã§åˆ‡æ›¿ã€‚";
    else if(o.avg<2.4) note="æ³¢ã¯ã‚ã‚‹å¸¯ã€‚åŒºåˆ‡ã‚Šã®è¨€è‘‰ã¨å°ã‚¿ã‚¹ã‚¯ã§å›ã›ã¾ã™ã€‚";
    else if(o.avg<3.2) note="æºã‚ŒãŒå¼·ã‚ã€‚3åˆ†ã ã‘å‹•ãâ†’ä¿å­˜ã€ã®æ‰‹é †ãŒåŠ¹ãã¾ã™ã€‚";
    else note="ã¾ãšè¶³å ´ï¼ˆç¡çœ ãƒ»é£Ÿäº‹ãƒ»æ­©ãï¼‰ã‚’å›ºå®šã€‚ç„¡ç†ãªæ‰€ã¯é ¼ã£ã¦OKã€‚";
    sumNote.textContent = note;

    // å®ˆè­·ãƒãƒƒã‚¸
    var gHtml = "";
    Object.keys(FACTORS).forEach(function(key){
      var def = FACTORS[key];
      gHtml += '<div class="guard">'+
        '<div class="g-emo" aria-hidden="true">'+def.icon+'</div>'+
        '<div><div><strong>'+def.name+'</strong> <span class="small">ï¼ˆ'+def.guard+'ï¼‰</span></div>'+
        '<div class="small" style="opacity:.9">'+def.catch+'</div></div>'+
      '</div>';
    });
    guardArea.innerHTML = gHtml;

    // å› å­ãƒãƒ¼
    var bHtml = "";
    Object.keys(FACTORS).forEach(function(key){
      var def = FACTORS[key], sc = o.fScore[key];
      bHtml += '<article class="bar" aria-label="'+def.name+'">'+
        '<div><strong>'+def.name+'</strong><span class="pill" style="margin-left:6px">'+sc.avg.toFixed(2)+' / 4</span>'+
        '<span class="band '+band(sc.pct)+'" style="margin-left:6px">'+bandLabel(sc.pct)+'</span></div>'+
        '<div class="row" aria-hidden="true"><span style="width:'+sc.pct+'%"></span></div>'+
        '<div class="small" style="margin-top:4px">'+sc.pct+' / 100</div>'+
        '</article>';
    });
    bars.innerHTML = bHtml;

    // å› å­ã”ã¨ã®èª¬æ˜
    var notes = "";
    Object.keys(FACTORS).forEach(function(key){
      var def = FACTORS[key], sc = o.fScore[key], d = FACTOR_DESC[key];
      if(!d){ return; }
      notes += '<article class="note" aria-label="'+def.name+'ã®èª¬æ˜">'+
        '<h4>'+d.title+'<span class="mini">å¹³å‡ '+sc.avg.toFixed(2)+' / 4ï½œ'+sc.pct+'%</span></h4>'+
        '<p>'+d.body+'</p>'+
        '<p><strong>æ´»ã‹ã—æ–¹ï¼š</strong>'+d.use+'</p>'+
        '<p><strong>ã‚±ã‚¢ï¼š</strong>'+d.care+'</p>'+
      '</article>';
    });
    var fn = document.getElementById("factorNotes");
    if(fn){ fn.innerHTML = notes; }

    // é•·æ–‡ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆãƒ©ãƒ³ã‚¯æœ¬æ–‡ãã®ã¾ã¾ï¼‰
    longCopy.textContent = rank.copy;

// ç ”ç©¶ãƒ¡ãƒ¢ï¼ˆæ‹¡å¼µãƒ»â€œã¼ã‹ã—â€ã§èª å®Ÿã«ï¼‰
var memo = [
  "â–¼é«˜ã‚ã§å ±å‘Šã•ã‚Œã‚„ã™ã„é–¢é€£ï¼ˆç›¸é–¢ä¸­å¿ƒï¼å¹³å‡å·®ã¯å°ã•ã‚ï¼‰",
  "ãƒ»ãƒã‚¬ãƒ†ã‚£ãƒ–æ„Ÿæƒ…ï¼ˆä¸å®‰ãƒ»æ€’ã‚Šãƒ»è½ã¡è¾¼ã¿ï¼‰ãŒèµ·ã“ã‚Šã‚„ã™ã„é–¢é€£ãŒã„ãã¤ã‹ã€‚",
  "ãƒ»ã‚¹ãƒˆãƒ¬ã‚¹åå¿œã‚„åã™ã†ï¼ˆè€ƒãˆç¶šã‘ã‚‹ï¼‰ãŒå¢—ãˆã‚„ã™ã„ã¨ã„ã†è¦³å¯ŸãŒã‚ã‚‹ã€‚",
  "ãƒ»ç¡çœ ã®è³ªã®ã‚†ã‚‰ãã‚„ä½“èª¿ä¸è‰¯ã®è‡ªè¦šãŒã‚„ã‚„å¢—ãˆã‚‹é–¢é€£ãŒè¦‹ã‚‰ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚",
  "ãƒ»å¯¾äººå ´é¢ã§ã®è©•ä¾¡æ‡¸å¿µï¼ˆè‡ªæ„è­˜ã®é«˜ã¾ã‚Šï¼‰ã¨çµã³ã¤ãå ±å‘ŠãŒã‚ã‚‹ï¼ˆçŠ¶æ³ä¾å­˜ï¼‰ã€‚",
  "ãƒ»å±é™ºæ¤œçŸ¥ï¼ãƒªã‚¹ã‚¯å›é¿ã®æ„Ÿåº¦ãŒé«˜ã„ã¨ã„ã†æŒ‡æ‘˜ã‚‚ã‚ã‚‹ï¼ˆæ‰±ã„æ–¹æ¬¡ç¬¬ï¼‰ã€‚",

  "â–¼ä½ã‚ã®å¼·ã¿ã¨ã—ã¦èªã‚‰ã‚Œã‚‹ã“ã¨",
  "ãƒ»æƒ…ç·’ã®å®‰å®šãƒ»å›å¾©ã®æ—©ã•ã¨é–¢é€£ã™ã‚‹å ±å‘ŠãŒã„ãã¤ã‹ã€‚",
  "ãƒ»ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼ä¸‹ã§ã‚‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æ³¢ãŒå°ã•ã‚ã«ä¿ã¡ã‚„ã™ã„ã€ã¨ã„ã†ç¤ºå”†ã€‚",
  "ãƒ»å›°é›£ã‚„è¨ˆç”»å¤‰æ›´ã®éš›ã«æŸ”è»Ÿã«æˆ»ã‚Œã‚‹â€œãƒªã‚»ãƒƒãƒˆåŠ›â€ãŒèªã‚‰ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚",

  "â–¼ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ï¼ˆèµ·ã“ã‚Šã†ã‚‹å‚¾å‘ï¼‰",
  "ãƒ»é«˜ã‚ï¼šæœ€æ‚ªã‚±ãƒ¼ã‚¹ã®æƒ³åƒã§è¡Œå‹•ãŒé…ã‚Œã‚„ã™ã„ï¼è‡ªå·±æ‰¹åˆ¤ãŒå¼·ãç–²ã‚Œã‚„ã™ã„ã€‚",
  "ãƒ»é«˜ã‚ï¼šæ€’ã‚Šã‚„ç„¦ã‚ŠãŒè¨€è‘‰ã«ä¹—ã‚Šã‚„ã™ã„ï¼ˆç¡çœ ãƒ»ç©ºè…¹ãƒ»é›‘éŸ³ã®å½±éŸ¿å¤§ï¼‰ã€‚",
  "ãƒ»ä½ã‚ï¼šå±é™ºã‚µã‚¤ãƒ³ã®è¦‹è½ã¨ã—ã‚„æ¥½è¦³ãƒã‚¤ã‚¢ã‚¹ã«æ³¨æ„ï¼ˆç¢ºèªã®ä»•çµ„ã¿ã§è£œã†ï¼‰ã€‚",

  "â–¼é‹ç”¨ãƒ’ãƒ³ãƒˆï¼ˆå®Ÿè£…ã‚¢ã‚¤ãƒ‡ã‚¢ï¼‰",
  "ãƒ»åˆºæ¿€ã®ON/OFFï¼šé€šçŸ¥ãƒ»éŸ³ãƒ»äººæ··ã¿ã‚’æ™‚é–“ã§åˆ‡æ›¿ï¼ˆæ·±ã„ä½œæ¥­ã¯ã‚µã‚¤ãƒ¬ãƒ³ãƒˆæ ï¼‰ã€‚",
  "ãƒ»åŒºåˆ‡ã‚Šèªï¼šã€ä¸å®‰â†’å¯¾å‡¦ã‚’ä¸€è¡Œã€ã€ä»Šæ—¥ã¯ã“ã“ã¾ã§ã€ã§åˆ‡ã‚Šæ›¿ãˆã‚’å¯è¦–åŒ–ã€‚",
  "ãƒ»å°ã•ãªåŠ©èµ°ï¼š3åˆ†ã ã‘å‹•ãâ†’å°ã‚¿ã‚¹ã‚¯å®Œäº†â†’å‹¢ã„ã§æ¬¡ã¸ã€ã®æ‰‹é †ã‚’å›ºå®šã€‚",
  "ãƒ»ä½“èª¿ã®åœŸå°ï¼šç¡çœ ãƒ»é£Ÿäº‹ãƒ»æ­©ã10åˆ†ã‚’â€œå›ºå®šã‚¿ã‚¹ã‚¯â€åŒ–ï¼ˆé€±2ã§ç‚¹æ¤œï¼‰ã€‚",
  "ãƒ»é ¼ã‚‹ä¸€è¨€ï¼šã€ã“ã“ã¯åŠ©ã‘ã¦ã€ã®å®šå‹æ–‡ã‚’æº–å‚™ï¼åˆå›³ã‚’ãƒãƒ¼ãƒ ã§æ±ºã‚ã‚‹ã€‚",

  "â–¼æ¸¬å®šãƒ»è§£é‡ˆã®æ³¨æ„",
  "ãƒ»è‡ªå·±ç”³å‘Šã‚†ãˆã«ãƒ ãƒ¼ãƒ‰ã‚„è‡ªå·±å‘ˆç¤ºã®å½±éŸ¿ã‚’å—ã‘ã¾ã™ã€‚ä½“èª¿ã®è‰¯ã„æ™‚ã«å—æ¤œã‚’ã€‚",
  "ãƒ»æ–‡åŒ–ãƒ»è¨€èªå·®ã§é …ç›®ã®è§£é‡ˆãŒæºã‚Œã¾ã™ã€‚å›½éš›æ¯”è¼ƒã¯å³å¯†ã«ã¯ã§ãã¾ã›ã‚“ã€‚",
  "ãƒ»ã“ã“ã§ã®è¨˜è¿°ã¯ä¸€èˆ¬è«–ã€‚ç›¸é–¢ä¸­å¿ƒã§å› æœã¯æ–­å®šã§ããšã€å€‹äººå·®ã¯å¤§ãã„ã§ã™ã€‚",
  "ãƒ»æ°—åˆ†ã®ä¸èª¿ãŒé•·å¼•ãï¼æ—¥å¸¸ã«æ”¯éšœãŒã‚ã‚‹å ´åˆã¯ã€å°‚é–€å®¶ã¸ã®ç›¸è«‡ã‚’æ¤œè¨ã€‚"
];
    resMemo.innerHTML = memo.map(function(s){ return "<li>"+s+"</li>"; }).join("");

    // è¡¨ç¤ºåˆ‡æ›¿
    resEmpty.style.display = "none";
    resArea.style.display = "block";
    document.getElementById("result").scrollIntoView({behavior:"smooth", block:"start"});

    // ä¿å­˜ï¼ˆä¸€è¦§ã®ã€Œã¤ã¥ãã‹ã‚‰å†é–‹ã€ï¼‰
    try{
      document.dispatchEvent(new Event('result:ready'));
      localStorage.setItem("specimens:last", JSON.stringify({ id: SLUG, title: TITLE, href: location.pathname }));
    }catch(e){}
  }

  function clearAnswers(){
    var radios = qWrap.querySelectorAll('input[type="radio"]');
    for(var i=0;i<radios.length;i++){ radios[i].checked=false; }
    wipeAnswers();
    prog.style.width = "0%";
    resEmpty.style.display = "";
    resArea.style.display = "none";
    var app = document.getElementById("app");
    if(app){ app.scrollIntoView({behavior:"smooth", block:"start"}); }
  }

  // ====== åˆæœŸåŒ– ======
  if(document.readyState === "loading"){
    document.addEventListener("DOMContentLoaded", function(){ buildQuestions(); });
  }else{
    buildQuestions();
  }
  document.getElementById("doScore").addEventListener("click", score, false);
  document.getElementById("doScore2").addEventListener("click", score, false);
  document.getElementById("clearAns").addEventListener("click", clearAnswers, false);
  var back = document.getElementById("backLink");
  if(back){
    back.addEventListener("click", function(){
      try{
        document.dispatchEvent(new Event('result:ready'));
      localStorage.setItem("specimens:last", JSON.stringify({ id: SLUG, title: TITLE, href: location.pathname }));
      }catch(e){}
    }, false);
  }
})();
</script>
<script>
/* ã“ã“ã‚Lv/æ¸ˆã‚«ã‚¦ãƒ³ãƒˆï¼ˆçµæœæç”»ã®åˆå›³ã§ä¸€åº¦ã ã‘ï¼‰ */
(function(){
  'use strict';
  var DONE_KEY    = 'specimens:open:byid';         // æ¸ˆãƒãƒƒãƒ—
  var TOTAL_KEY   = 'specimens:open:total';        // ã‚ãªãŸã®ã“ã“ã‚Lvï¼ˆåˆè¨ˆï¼‰
  var GLOBAL_LAST = 'specimens:open:global:last';  // ä¸€è¦§ã®åˆæœŸè¡¨ç¤ºã‚­ãƒ£ãƒƒã‚·ãƒ¥
  var MY_ID = (document.body && document.body.getAttribute('data-id')) || 'unknown';

  // ã¿ã‚“ãªã®Lvï¼ˆCountAPIï¼‰
  var COUNTAPI_NS  = 'haisuikounozarigani_shindan';
  var COUNTAPI_KEY = 'specimens_open_total';
  function hitEveryone(){
    var url = 'https://api.countapi.xyz/hit/'+COUNTAPI_NS+'/'+COUNTAPI_KEY;
    if(navigator.sendBeacon){ try{ navigator.sendBeacon(url); }catch(_){ } }
    else{ fetch(url, {mode:'cors', cache:'no-store', keepalive:true}).catch(function(){}); }
  }

  var marked = false;
  function markOnce(){
    if(marked) return; marked = true;
    try{
      // ã‚ãªãŸã®ã“ã“ã‚Lv +1
      localStorage.setItem(TOTAL_KEY, String((+localStorage.getItem(TOTAL_KEY) || 0) + 1));
      // æ¸ˆ +1ï¼ˆä»–ã‚¿ãƒ–å³æ™‚åæ˜ ç”¨_tsï¼‰
      var map={}; try{ map = JSON.parse(localStorage.getItem(DONE_KEY) || '{}'); }catch(_){}
      map[MY_ID] = (map[MY_ID] || 0) + 1;
      localStorage.setItem(DONE_KEY, JSON.stringify(Object.assign({}, map, {_ts: Date.now()})));
      // ã¿ã‚“ãªã®Lv +1 ã¨è¦‹æ „ãˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ +1
      hitEveryone();
      try{ localStorage.setItem(GLOBAL_LAST, String((+localStorage.getItem(GLOBAL_LAST) || 0) + 1)); }catch(_){}
    }catch(_){}
  }

  document.addEventListener('result:ready', markOnce);
  setTimeout(markOnce, 2000); // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
})();
</script>
</body>
</html>